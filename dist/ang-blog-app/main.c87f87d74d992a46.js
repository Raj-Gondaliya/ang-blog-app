"use strict";(self.webpackChunkang_blog_app=self.webpackChunkang_blog_app||[]).push([[179],{2011:(Et,Te,L)=>{L.d(Te,{Dh:()=>Ee,GT:()=>ae,cc:()=>De,hO:()=>He,on:()=>G,pX:()=>se,xv:()=>fe});var d=L(4650),J=L(9260),F=L(4976);Et=L.hmd(Et);const ue=["ngOnDestroy"],se=(Me,Ne,Ue,Pe={})=>new Proxy(Me,{get:(Ie,Ce)=>Ue.runOutsideAngular(()=>{var Ge;if(Me[Ce])return!(null===(Ge=Pe?.spy)||void 0===Ge)&&Ge.get&&Pe.spy.get(Ce,Me[Ce]),Me[Ce];if(ue.indexOf(Ce)>-1)return()=>{};const ke=Ne.toPromise().then(st=>{const ie=st&&st[Ce];return"function"==typeof ie?ie.bind(st):ie&&ie.then?ie.then(xt=>Ue.run(()=>xt)):Ue.run(()=>ie)});return new Proxy(()=>{},{get:(st,ie)=>ke[ie],apply:(st,ie,xt)=>ke.then(nt=>{var Zt;const ft=nt&&nt(...xt);return!(null===(Zt=Pe?.spy)||void 0===Zt)&&Zt.apply&&Pe.spy.apply(Ce,xt,ft),ft})})})}),ae=(Me,Ne)=>{Ne.forEach(Ue=>{Object.getOwnPropertyNames(Ue.prototype||Ue).forEach(Pe=>{Object.defineProperty(Me.prototype,Pe,Object.getOwnPropertyDescriptor(Ue.prototype||Ue,Pe))})})};class ye{constructor(Ne){return Ne}}const Ee=new d.OlP("angularfire2.app.options"),fe=new d.OlP("angularfire2.app.name");function G(Me,Ne,Ue){const Ie="object"==typeof Ue&&Ue||{};Ie.name=Ie.name||"string"==typeof Ue&&Ue||"[DEFAULT]";const Ge=J.Z.apps.filter(ke=>ke&&ke.name===Ie.name)[0]||Ne.runOutsideAngular(()=>J.Z.initializeApp(Me,Ie));try{JSON.stringify(Me)!==JSON.stringify(Ge.options)&&H("error",`${Ge.name} Firebase App already initialized with different options${Et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ye(Ge)}const H=(Me,...Ne)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Me](...Ne)},K={provide:ye,useFactory:G,deps:[Ee,d.R0b,[new d.FiY,fe]]};let He=(()=>{class Me{constructor(Ue){J.Z.registerVersion("angularfire",F.q4.full,"core"),J.Z.registerVersion("angularfire",F.q4.full,"app-compat"),J.Z.registerVersion("angular",d.q4F.full,Ue.toString())}static initializeApp(Ue,Pe){return{ngModule:Me,providers:[{provide:Ee,useValue:Ue},{provide:fe,useValue:Pe}]}}}return Me.\u0275fac=function(Ue){return new(Ue||Me)(d.LFG(d.Lbi))},Me.\u0275mod=d.oAB({type:Me}),Me.\u0275inj=d.cJS({providers:[K]}),Me})();function De(Me,Ne,Ue,Pe,Ie){const[,Ce,Ge]=globalThis.\u0275AngularfireInstanceCache.find(ke=>ke[0]===Me)||[];if(Ce)return function Ze(Me,Ne){try{return Me.toString()===Ne.toString()}catch{return Me===Ne}}(Ie,Ge)||(ge("error",`${Ne} was already initialized on the ${Ue} Firebase App with different settings.${gt?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Ie,was:Ge})),Ce;{const ke=Pe();return globalThis.\u0275AngularfireInstanceCache.push([Me,ke,Ie]),ke}}const gt=!!Et.hot,ge=(Me,...Ne)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Me](...Ne)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(Et,Te,L)=>{L.d(Te,{q4:()=>Ii,iC:()=>ts,fc:()=>Bh,HU:()=>bt,vb:()=>Xl,JM:()=>Ql});var d=L(4650),J=L(259),F=L(5861),ue=L(6881),se=L(2090),ae=L(4859),ye=L(1877);const Ee=(I,D)=>D.some(x=>I instanceof x);let fe,G;const He=new WeakMap,De=new WeakMap,Ze=new WeakMap,gt=new WeakMap,ge=new WeakMap;let Ue={get(I,D,x){if(I instanceof IDBTransaction){if("done"===D)return De.get(I);if("objectStoreNames"===D)return I.objectStoreNames||Ze.get(I);if("store"===D)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return Ge(I[D])},set:(I,D,x)=>(I[D]=x,!0),has:(I,D)=>I instanceof IDBTransaction&&("done"===D||"store"===D)||D in I};function Ce(I){return"function"==typeof I?function Ie(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function K(){return G||(G=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...D){return I.apply(ke(this),D),Ge(He.get(this))}:function(...D){return Ge(I.apply(ke(this),D))}:function(D,...x){const k=I.call(ke(this),D,...x);return Ze.set(k,D.sort?D.sort():[D]),Ge(k)}}(I):(I instanceof IDBTransaction&&function Ne(I){if(De.has(I))return;const D=new Promise((x,k)=>{const z=()=>{I.removeEventListener("complete",Y),I.removeEventListener("error",re),I.removeEventListener("abort",re)},Y=()=>{x(),z()},re=()=>{k(I.error||new DOMException("AbortError","AbortError")),z()};I.addEventListener("complete",Y),I.addEventListener("error",re),I.addEventListener("abort",re)});De.set(I,D)}(I),Ee(I,function H(){return fe||(fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,Ue):I)}function Ge(I){if(I instanceof IDBRequest)return function Me(I){const D=new Promise((x,k)=>{const z=()=>{I.removeEventListener("success",Y),I.removeEventListener("error",re)},Y=()=>{x(Ge(I.result)),z()},re=()=>{k(I.error),z()};I.addEventListener("success",Y),I.addEventListener("error",re)});return D.then(x=>{x instanceof IDBCursor&&He.set(x,I)}).catch(()=>{}),ge.set(D,I),D}(I);if(gt.has(I))return gt.get(I);const D=Ce(I);return D!==I&&(gt.set(I,D),ge.set(D,I)),D}const ke=I=>ge.get(I),xt=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],Zt=new Map;function ft(I,D){if(!(I instanceof IDBDatabase)||D in I||"string"!=typeof D)return;if(Zt.get(D))return Zt.get(D);const x=D.replace(/FromIndex$/,""),k=D!==x,z=nt.includes(x);if(!(x in(k?IDBIndex:IDBObjectStore).prototype)||!z&&!xt.includes(x))return;const Y=function(){var re=(0,F.Z)(function*(qe,...je){const dt=this.transaction(qe,z?"readwrite":"readonly");let Nt=dt.store;return k&&(Nt=Nt.index(je.shift())),(yield Promise.all([Nt[x](...je),z&&dt.done]))[0]});return function(je){return re.apply(this,arguments)}}();return Zt.set(D,Y),Y}!function Pe(I){Ue=I(Ue)}(I=>({...I,get:(D,x,k)=>ft(D,x)||I.get(D,x,k),has:(D,x)=>!!ft(D,x)||I.has(D,x)}));const pe="@firebase/installations",_e="0.6.4",be=1e4,Se=`w:${_e}`,ze="FIS_v2",Be="https://firebaseinstallations.googleapis.com/v1",mt=36e5,qt=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function At(I){return I instanceof se.ZR&&I.code.includes("request-failed")}function an({projectId:I}){return`${Be}/projects/${I}/installations`}function En(I){return{token:I.token,requestStatus:2,expiresIn:To(I.expiresIn),creationTime:Date.now()}}function Nn(I,D){return jr.apply(this,arguments)}function jr(){return(jr=(0,F.Z)(function*(I,D){const k=(yield D.json()).error;return qt.create("request-failed",{requestName:I,serverCode:k.code,serverMessage:k.message,serverStatus:k.status})})).apply(this,arguments)}function Jr({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Ds(I){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,F.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function To(I){return Number(I.replace("s","000"))}function yt(){return(yt=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:x}){const k=an(I),z=Jr(I),Y=D.getImmediate({optional:!0});if(Y){const dt=yield Y.getHeartbeatsHeader();dt&&z.append("x-firebase-client",dt)}const qe={method:"POST",headers:z,body:JSON.stringify({fid:x,authVersion:ze,appId:I.appId,sdkVersion:Se})},je=yield Ds(()=>fetch(k,qe));if(je.ok){const dt=yield je.json();return{fid:dt.fid||x,registrationStatus:2,refreshToken:dt.refreshToken,authToken:En(dt.authToken)}}throw yield Nn("Create Installation",je)})).apply(this,arguments)}function _i(I){return new Promise(D=>{setTimeout(D,I)})}const Fr=/^[cdef][\w-]{21}$/,ei="";function ls(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const x=function nn(I){return function Pc(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Fr.test(x)?x:ei}catch{return ei}}function dn(I){return`${I.appName}!${I.appId}`}const ot=new Map;function Ot(I,D){const x=dn(I);pr(x,D),function $r(I,D){const x=function ti(){return!Ln&&"BroadcastChannel"in self&&(Ln=new BroadcastChannel("[Firebase] FID Change"),Ln.onmessage=I=>{pr(I.data.key,I.data.fid)}),Ln}();x&&x.postMessage({key:I,fid:D}),function yn(){0===ot.size&&Ln&&(Ln.close(),Ln=null)}()}(x,D)}function pr(I,D){const x=ot.get(I);if(x)for(const k of x)k(D)}let Ln=null;const Ts="firebase-installations-database",Qt=1,cs="firebase-installations-store";let hn=null;function Ai(){return hn||(hn=function st(I,D,{blocked:x,upgrade:k,blocking:z,terminated:Y}={}){const re=indexedDB.open(I,D),qe=Ge(re);return k&&re.addEventListener("upgradeneeded",je=>{k(Ge(re.result),je.oldVersion,je.newVersion,Ge(re.transaction))}),x&&re.addEventListener("blocked",()=>x()),qe.then(je=>{Y&&je.addEventListener("close",()=>Y()),z&&je.addEventListener("versionchange",()=>z())}).catch(()=>{}),qe}(Ts,Qt,{upgrade:(I,D)=>{0===D&&I.createObjectStore(cs)}})),hn}function $n(I,D){return sr.apply(this,arguments)}function sr(){return(sr=(0,F.Z)(function*(I,D){const x=dn(I),z=(yield Ai()).transaction(cs,"readwrite"),Y=z.objectStore(cs),re=yield Y.get(x);return yield Y.put(D,x),yield z.done,(!re||re.fid!==D.fid)&&Ot(I,D.fid),D})).apply(this,arguments)}function qi(I){return xn.apply(this,arguments)}function xn(){return(xn=(0,F.Z)(function*(I){const D=dn(I),k=(yield Ai()).transaction(cs,"readwrite");yield k.objectStore(cs).delete(D),yield k.done})).apply(this,arguments)}function Wi(I,D){return ni.apply(this,arguments)}function ni(){return(ni=(0,F.Z)(function*(I,D){const x=dn(I),z=(yield Ai()).transaction(cs,"readwrite"),Y=z.objectStore(cs),re=yield Y.get(x),qe=D(re);return void 0===qe?yield Y.delete(x):yield Y.put(qe,x),yield z.done,qe&&(!re||re.fid!==qe.fid)&&Ot(I,qe.fid),qe})).apply(this,arguments)}function $(I){return B.apply(this,arguments)}function B(){return B=(0,F.Z)(function*(I){let D;const x=yield Wi(I.appConfig,k=>{const z=function Z(I){return Pn(I||{fid:ls(),registrationStatus:0})}(k),Y=function ve(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(qt.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},k=function ee(I,D){return Le.apply(this,arguments)}(I,x);return{installationEntry:x,registrationPromise:k}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Rt(I)}:{installationEntry:D}}(I,z);return D=Y.registrationPromise,Y.installationEntry});return x.fid===ei?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}}),B.apply(this,arguments)}function Le(){return Le=(0,F.Z)(function*(I,D){try{const x=yield function kr(I,D){return yt.apply(this,arguments)}(I,D);return $n(I.appConfig,x)}catch(x){throw At(x)&&409===x.customData.serverCode?yield qi(I.appConfig):yield $n(I.appConfig,{fid:D.fid,registrationStatus:0}),x}}),Le.apply(this,arguments)}function Rt(I){return en.apply(this,arguments)}function en(){return(en=(0,F.Z)(function*(I){let D=yield Kn(I.appConfig);for(;1===D.registrationStatus;)yield _i(100),D=yield Kn(I.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:k}=yield $(I);return k||x}return D})).apply(this,arguments)}function Kn(I){return Wi(I,D=>{if(!D)throw qt.create("installation-not-found");return Pn(D)})}function Pn(I){return function mn(I){return 1===I.registrationStatus&&I.registrationTime+be<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Hr(){return(Hr=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:D},x){const k=function Zi(I,{fid:D}){return`${an(I)}/${D}/authTokens:generate`}(I,x),z=function Or(I,{refreshToken:D}){const x=Jr(I);return x.append("Authorization",function So(I){return`${ze} ${I}`}(D)),x}(I,x),Y=D.getImmediate({optional:!0});if(Y){const dt=yield Y.getHeartbeatsHeader();dt&&z.append("x-firebase-client",dt)}const qe={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:Se,appId:I.appId}})},je=yield Ds(()=>fetch(k,qe));if(je.ok)return En(yield je.json());throw yield Nn("Generate Auth Token",je)})).apply(this,arguments)}function ds(I){return su.apply(this,arguments)}function su(){return su=(0,F.Z)(function*(I,D=!1){let x;const k=yield Wi(I.appConfig,Y=>{if(!zt(Y))throw qt.create("not-registered");const re=Y.authToken;if(!D&&function vt(I){return 2===I.requestStatus&&!function un(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+mt}(I)}(re))return Y;if(1===re.requestStatus)return x=function ce(I,D){return te.apply(this,arguments)}(I,D),Y;{if(!navigator.onLine)throw qt.create("app-offline");const qe=function tn(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}(Y);return x=function _t(I,D){return Tt.apply(this,arguments)}(I,qe),qe}});return x?yield x:k.authToken}),su.apply(this,arguments)}function te(){return(te=(0,F.Z)(function*(I,D){let x=yield Oe(I.appConfig);for(;1===x.authToken.requestStatus;)yield _i(100),x=yield Oe(I.appConfig);const k=x.authToken;return 0===k.requestStatus?ds(I,D):k})).apply(this,arguments)}function Oe(I){return Wi(I,D=>{if(!zt(D))throw qt.create("not-registered");return function Dr(I){return 1===I.requestStatus&&I.requestTime+be<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Tt(){return Tt=(0,F.Z)(function*(I,D){try{const x=yield function Kt(I,D){return Hr.apply(this,arguments)}(I,D),k=Object.assign(Object.assign({},D),{authToken:x});return yield $n(I.appConfig,k),x}catch(x){if(!At(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const k=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield $n(I.appConfig,k)}else yield qi(I.appConfig);throw x}}),Tt.apply(this,arguments)}function zt(I){return void 0!==I&&2===I.registrationStatus}function pl(){return(pl=(0,F.Z)(function*(I){const D=I,{installationEntry:x,registrationPromise:k}=yield $(D);return k?k.catch(console.error):ds(D).catch(console.error),x.fid})).apply(this,arguments)}function ma(){return ma=(0,F.Z)(function*(I,D=!1){const x=I;return yield function xi(I){return We.apply(this,arguments)}(x),(yield ds(x,D)).token}),ma.apply(this,arguments)}function We(){return(We=(0,F.Z)(function*(I){const{registrationPromise:D}=yield $(I);D&&(yield D)})).apply(this,arguments)}function hs(I){return qt.create("missing-app-config-values",{valueName:I})}const $t="installations",Ao=I=>{const D=I.getProvider("app").getImmediate(),x=function ou(I){if(!I||!I.options)throw hs("App Configuration");if(!I.name)throw hs("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!I.options[x])throw hs(x);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,ue._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},As=I=>{const D=I.getProvider("app").getImmediate(),x=(0,ue._getProvider)(D,$t).getImmediate();return{getId:()=>function or(I){return pl.apply(this,arguments)}(x),getToken:z=>function Sp(I){return ma.apply(this,arguments)}(x,z)}};(function xo(){(0,ue._registerComponent)(new ae.wA($t,Ao,"PUBLIC")),(0,ue._registerComponent)(new ae.wA("installations-internal",As,"PRIVATE"))})(),(0,ue.registerVersion)(pe,_e),(0,ue.registerVersion)(pe,_e,"esm2017");const Yn="@firebase/remote-config",Lr=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Rs{constructor(D,x,k,z){this.client=D,this.storage=x,this.storageCache=k,this.logger=z}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const k=Date.now()-x,z=k<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${k}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${z}.`),z}fetch(D){var x=this;return(0,F.Z)(function*(){const[k,z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(z&&x.isCachedDataFresh(D.cacheMaxAgeMillis,k))return z;D.eTag=z&&z.eTag;const Y=yield x.client.fetch(D),re=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Y.status&&re.push(x.storage.setLastSuccessfulFetchResponse(Y)),yield Promise.all(re),Y})()}}function qm(I=navigator){return I.languages&&I.languages[0]||I.language}class Fc{constructor(D,x,k,z,Y,re){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=k,this.projectId=z,this.apiKey=Y,this.appId=re}fetch(D){var x=this;return(0,F.Z)(function*(){const[k,z]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),re=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},je={sdk_version:x.sdkVersion,app_instance_id:k,app_instance_id_token:z,app_id:x.appId,language_code:qm()},dt={method:"POST",headers:qe,body:JSON.stringify(je)},Nt=fetch(re,dt),Pt=new Promise((Rr,ns)=>{D.signal.addEventListener(()=>{const fo=new Error("The operation was aborted.");fo.name="AbortError",ns(fo)})});let Wr;try{yield Promise.race([Nt,Pt]),Wr=yield Nt}catch(Rr){let ns="fetch-client-network";throw"AbortError"===Rr?.name&&(ns="fetch-timeout"),Lr.create(ns,{originalErrorMessage:Rr?.message})}let Cn=Wr.status;const Vt=Wr.headers.get("ETag")||void 0;let ho,ea;if(200===Wr.status){let Rr;try{Rr=yield Wr.json()}catch(ns){throw Lr.create("fetch-client-parse",{originalErrorMessage:ns?.message})}ho=Rr.entries,ea=Rr.state}if("INSTANCE_STATE_UNSPECIFIED"===ea?Cn=500:"NO_CHANGE"===ea?Cn=304:("NO_TEMPLATE"===ea||"EMPTY_CONFIG"===ea)&&(ho={}),304!==Cn&&200!==Cn)throw Lr.create("fetch-status",{httpStatus:Cn});return{status:Cn,eTag:Vt,config:ho}})()}}class Zm{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,F.Z)(function*(){const k=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,k)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:k}){var z=this;return(0,F.Z)(function*(){yield function Wm(I,D){return new Promise((x,k)=>{const z=Math.max(D-Date.now(),0),Y=setTimeout(x,z);I.addEventListener(()=>{clearTimeout(Y),k(Lr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const Y=yield z.client.fetch(D);return yield z.storage.deleteThrottleMetadata(),Y}catch(Y){if(!function mh(I){if(!(I instanceof se.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(Y))throw Y;const re={throttleEndTimeMillis:Date.now()+(0,se.$s)(k),backoffCount:k+1};return yield z.storage.setThrottleMetadata(re),z.attemptFetch(D,re)}})()}}class Iv{constructor(D,x,k,z,Y){this.app=D,this._client=x,this._storageCache=k,this._storage=z,this._logger=Y,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function yl(I,D){const x=I.target.error||void 0;return Lr.create(D,{originalErrorMessage:x&&x?.message})}const Mi="app_namespace_store";class Cv{constructor(D,x,k,z=function Ea(){return new Promise((I,D)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=k=>{D(yl(k,"storage-open"))},x.onsuccess=k=>{I(k.target.result)},x.onupgradeneeded=k=>{0===k.oldVersion&&k.target.result.createObjectStore(Mi,{keyPath:"compositeKey"})}}catch(x){D(Lr.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=D,this.appName=x,this.namespace=k,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,F.Z)(function*(){const k=yield x.openDbPromise;return new Promise((z,Y)=>{const qe=k.transaction([Mi],"readonly").objectStore(Mi),je=x.createCompositeKey(D);try{const dt=qe.get(je);dt.onerror=Nt=>{Y(yl(Nt,"storage-get"))},dt.onsuccess=Nt=>{const Pt=Nt.target.result;z(Pt?Pt.value:void 0)}}catch(dt){Y(Lr.create("storage-get",{originalErrorMessage:dt?.message}))}})})()}set(D,x){var k=this;return(0,F.Z)(function*(){const z=yield k.openDbPromise;return new Promise((Y,re)=>{const je=z.transaction([Mi],"readwrite").objectStore(Mi),dt=k.createCompositeKey(D);try{const Nt=je.put({compositeKey:dt,value:x});Nt.onerror=Pt=>{re(yl(Pt,"storage-set"))},Nt.onsuccess=()=>{Y()}}catch(Nt){re(Lr.create("storage-set",{originalErrorMessage:Nt?.message}))}})})()}delete(D){var x=this;return(0,F.Z)(function*(){const k=yield x.openDbPromise;return new Promise((z,Y)=>{const qe=k.transaction([Mi],"readwrite").objectStore(Mi),je=x.createCompositeKey(D);try{const dt=qe.delete(je);dt.onerror=Nt=>{Y(yl(Nt,"storage-delete"))},dt.onsuccess=()=>{z()}}catch(dt){Y(Lr.create("storage-delete",{originalErrorMessage:dt?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Rp{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,F.Z)(function*(){const x=D.storage.getLastFetchStatus(),k=D.storage.getLastSuccessfulFetchTimestampMillis(),z=D.storage.getActiveConfig(),Y=yield x;Y&&(D.lastFetchStatus=Y);const re=yield k;re&&(D.lastSuccessfulFetchTimestampMillis=re);const qe=yield z;qe&&(D.activeConfig=qe)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Lc(){return cu.apply(this,arguments)}function cu(){return(cu=(0,F.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function Ms(){(0,ue._registerComponent)(new ae.wA("remote-config",function I(D,{instanceIdentifier:x}){const k=D.getProvider("app").getImmediate(),z=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Lr.create("registration-window");if(!(0,se.hl)())throw Lr.create("indexed-db-unavailable");const{projectId:Y,apiKey:re,appId:qe}=k.options;if(!Y)throw Lr.create("registration-project-id");if(!re)throw Lr.create("registration-api-key");if(!qe)throw Lr.create("registration-app-id");const je=new Cv(qe,k.name,x=x||"firebase"),dt=new Rp(je),Nt=new ye.Yd(Yn);Nt.logLevel=ye.in.ERROR;const Pt=new Fc(z,ue.SDK_VERSION,x,Y,re,qe),Wr=new Zm(Pt,je),Cn=new Rs(Wr,je,dt,Nt),Vt=new Iv(k,Cn,dt,je,Nt);return function wi(I){const D=(0,se.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Vt),Vt},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(Yn,"0.4.4"),(0,ue.registerVersion)(Yn,"0.4.4","esm2017")}();const vh=(I,D)=>D.some(x=>I instanceof x);let Vc,ro;const wl=new WeakMap,io=new WeakMap,ii=new WeakMap,Gr=new WeakMap,du=new WeakMap;let Ns={get(I,D,x){if(I instanceof IDBTransaction){if("done"===D)return io.get(I);if("objectStoreNames"===D)return I.objectStoreNames||ii.get(I);if("store"===D)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return zr(I[D])},set:(I,D,x)=>(I[D]=x,!0),has:(I,D)=>I instanceof IDBTransaction&&("done"===D||"store"===D)||D in I};function Eh(I){return"function"==typeof I?function wh(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function vl(){return ro||(ro=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...D){return I.apply(gr(this),D),zr(wl.get(this))}:function(...D){return zr(I.apply(gr(this),D))}:function(D,...x){const k=I.call(gr(this),D,...x);return ii.set(k,D.sort?D.sort():[D]),zr(k)}}(I):(I instanceof IDBTransaction&&function Ia(I){if(io.has(I))return;const D=new Promise((x,k)=>{const z=()=>{I.removeEventListener("complete",Y),I.removeEventListener("error",re),I.removeEventListener("abort",re)},Y=()=>{x(),z()},re=()=>{k(I.error||new DOMException("AbortError","AbortError")),z()};I.addEventListener("complete",Y),I.addEventListener("error",re),I.addEventListener("abort",re)});io.set(I,D)}(I),vh(I,function Mp(){return Vc||(Vc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,Ns):I)}function zr(I){if(I instanceof IDBRequest)return function Sr(I){const D=new Promise((x,k)=>{const z=()=>{I.removeEventListener("success",Y),I.removeEventListener("error",re)},Y=()=>{x(zr(I.result)),z()},re=()=>{k(I.error),z()};I.addEventListener("success",Y),I.addEventListener("error",re)});return D.then(x=>{x instanceof IDBCursor&&wl.set(x,I)}).catch(()=>{}),du.set(D,I),D}(I);if(Gr.has(I))return Gr.get(I);const D=Eh(I);return D!==I&&(Gr.set(I,D),du.set(D,I)),D}const gr=I=>du.get(I);function El(I,D,{blocked:x,upgrade:k,blocking:z,terminated:Y}={}){const re=indexedDB.open(I,D),qe=zr(re);return k&&re.addEventListener("upgradeneeded",je=>{k(zr(re.result),je.oldVersion,je.newVersion,zr(re.transaction))}),x&&re.addEventListener("blocked",()=>x()),qe.then(je=>{Y&&je.addEventListener("close",()=>Y()),z&&je.addEventListener("versionchange",()=>z())}).catch(()=>{}),qe}function Ps(I,{blocked:D}={}){const x=indexedDB.deleteDatabase(I);return D&&x.addEventListener("blocked",()=>D()),zr(x).then(()=>{})}const Uc=["get","getKey","getAll","getAllKeys","count"],so=["put","add","delete","clear"],Ca=new Map;function hu(I,D){if(!(I instanceof IDBDatabase)||D in I||"string"!=typeof D)return;if(Ca.get(D))return Ca.get(D);const x=D.replace(/FromIndex$/,""),k=D!==x,z=so.includes(x);if(!(x in(k?IDBIndex:IDBObjectStore).prototype)||!z&&!Uc.includes(x))return;const Y=function(){var re=(0,F.Z)(function*(qe,...je){const dt=this.transaction(qe,z?"readwrite":"readonly");let Nt=dt.store;return k&&(Nt=Nt.index(je.shift())),(yield Promise.all([Nt[x](...je),z&&dt.done]))[0]});return function(je){return re.apply(this,arguments)}}();return Ca.set(D,Y),Y}!function Ar(I){Ns=I(Ns)}(I=>({...I,get:(D,x,k)=>hu(D,x)||I.get(D,x,k),has:(D,x)=>!!hu(D,x)||I.has(D,x)}));const kt="/firebase-messaging-sw.js",fu="/firebase-cloud-messaging-push-scope",Ih="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ch="https://fcmregistrations.googleapis.com/v1",Il="google.c.a.c_id",bh="google.c.a.c_l",Cl="google.c.a.ts",Km="google.c.a.e";var de=(()=>{return(I=de||(de={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",de;var I})();function Ut(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function pu(I){const x=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),k=atob(x),z=new Uint8Array(k.length);for(let Y=0;Y<k.length;++Y)z[Y]=k.charCodeAt(Y);return z}const gu="fcm_token_details_db",mr=5,No="fcm_token_object_Store";function si(){return si=(0,F.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Y=>Y.name).includes(gu))return null;let D=null;return(yield El(gu,mr,{upgrade:(k=(0,F.Z)(function*(z,Y,re,qe){var je;if(Y<2||!z.objectStoreNames.contains(No))return;const dt=qe.objectStore(No),Nt=yield dt.index("fcmSenderId").get(I);if(yield dt.clear(),Nt)if(2===Y){const Pt=Nt;if(!Pt.auth||!Pt.p256dh||!Pt.endpoint)return;D={token:Pt.fcmToken,createTime:null!==(je=Pt.createTime)&&void 0!==je?je:Date.now(),subscriptionOptions:{auth:Pt.auth,p256dh:Pt.p256dh,endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:"string"==typeof Pt.vapidKey?Pt.vapidKey:Ut(Pt.vapidKey)}}}else if(3===Y){const Pt=Nt;D={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Ut(Pt.auth),p256dh:Ut(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Ut(Pt.vapidKey)}}}else if(4===Y){const Pt=Nt;D={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Ut(Pt.auth),p256dh:Ut(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Ut(Pt.vapidKey)}}}}),function(Y,re,qe,je){return k.apply(this,arguments)})})).close(),yield Ps(gu),yield Ps("fcm_vapid_details_db"),yield Ps("undefined"),function Th(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var k}),si.apply(this,arguments)}const Dl="firebase-messaging-database",Ym=1,Os="firebase-messaging-store";let mu=null;function ur(){return mu||(mu=El(Dl,Ym,{upgrade:(I,D)=>{0===D&&I.createObjectStore(Os)}})),mu}function Ni(I){return gs.apply(this,arguments)}function gs(){return gs=(0,F.Z)(function*(I){const D=Tl(I),k=yield(yield ur()).transaction(Os).objectStore(Os).get(D);if(k)return k;{const z=yield function bl(I){return si.apply(this,arguments)}(I.appConfig.senderId);if(z)return yield Po(I,z),z}}),gs.apply(this,arguments)}function Po(I,D){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,F.Z)(function*(I,D){const x=Tl(I),z=(yield ur()).transaction(Os,"readwrite");return yield z.objectStore(Os).put(D,x),yield z.done,D})).apply(this,arguments)}function _u(){return(_u=(0,F.Z)(function*(I){const D=Tl(I),k=(yield ur()).transaction(Os,"readwrite");yield k.objectStore(Os).delete(D),yield k.done})).apply(this,arguments)}function Tl({appConfig:I}){return I.appId}const lr=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ba(I,D){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,F.Z)(function*(I,D){const x=yield jc(I),k=xh(D),z={method:"POST",headers:x,body:JSON.stringify(k)};let Y;try{Y=yield(yield fetch(yu(I.appConfig),z)).json()}catch(re){throw lr.create("token-subscribe-failed",{errorInfo:re?.toString()})}if(Y.error)throw lr.create("token-subscribe-failed",{errorInfo:Y.error.message});if(!Y.token)throw lr.create("token-subscribe-no-token");return Y.token})).apply(this,arguments)}function Ah(){return(Ah=(0,F.Z)(function*(I,D){const x=yield jc(I),k=xh(D.subscriptionOptions),z={method:"PATCH",headers:x,body:JSON.stringify(k)};let Y;try{Y=yield(yield fetch(`${yu(I.appConfig)}/${D.token}`,z)).json()}catch(re){throw lr.create("token-update-failed",{errorInfo:re?.toString()})}if(Y.error)throw lr.create("token-update-failed",{errorInfo:Y.error.message});if(!Y.token)throw lr.create("token-update-no-token");return Y.token})).apply(this,arguments)}function Al(I,D){return xl.apply(this,arguments)}function xl(){return(xl=(0,F.Z)(function*(I,D){const k={method:"DELETE",headers:yield jc(I)};try{const Y=yield(yield fetch(`${yu(I.appConfig)}/${D}`,k)).json();if(Y.error)throw lr.create("token-unsubscribe-failed",{errorInfo:Y.error.message})}catch(z){throw lr.create("token-unsubscribe-failed",{errorInfo:z?.toString()})}})).apply(this,arguments)}function yu({projectId:I}){return`${Ch}/projects/${I}/registrations`}function jc(I){return vu.apply(this,arguments)}function vu(){return(vu=(0,F.Z)(function*({appConfig:I,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function xh({p256dh:I,auth:D,endpoint:x,vapidKey:k}){const z={web:{endpoint:x,auth:D,p256dh:I}};return k!==Ih&&(z.web.applicationPubKey=k),z}const Rl=6048e5;function Ml(){return Ml=(0,F.Z)(function*(I){const D=yield function Op(I,D){return Rh.apply(this,arguments)}(I.swRegistration,I.vapidKey),x={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:Ut(D.getKey("auth")),p256dh:Ut(D.getKey("p256dh"))},k=yield Ni(I.firebaseDependencies);if(k){if(function Xm(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}(k.subscriptionOptions,x))return Date.now()>=k.createTime+Rl?function On(I,D){return Nl.apply(this,arguments)}(I,{token:k.token,createTime:Date.now(),subscriptionOptions:x}):k.token;try{yield Al(I.firebaseDependencies,k.token)}catch(z){console.warn(z)}return Pp(I.firebaseDependencies,x)}return Pp(I.firebaseDependencies,x)}),Ml.apply(this,arguments)}function ks(){return ks=(0,F.Z)(function*(I){const D=yield Ni(I.firebaseDependencies);D&&(yield Al(I.firebaseDependencies,D.token),yield function Sh(I){return _u.apply(this,arguments)}(I.firebaseDependencies));const x=yield I.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()}),ks.apply(this,arguments)}function Nl(){return Nl=(0,F.Z)(function*(I,D){try{const x=yield function Sl(I,D){return Ah.apply(this,arguments)}(I.firebaseDependencies,D),k=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield Po(I.firebaseDependencies,k),x}catch(x){throw yield function Vr(I){return ks.apply(this,arguments)}(I),x}}),Nl.apply(this,arguments)}function Pp(I,D){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,F.Z)(function*(I,D){const k={token:yield ba(I,D),createTime:Date.now(),subscriptionOptions:D};return yield Po(I,k),k.token})).apply(this,arguments)}function Rh(){return(Rh=(0,F.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:pu(D)})})).apply(this,arguments)}function Pl(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function $c(I,D){if(!D.notification)return;I.notification={};const x=D.notification.title;x&&(I.notification.title=x);const k=D.notification.body;k&&(I.notification.body=k);const z=D.notification.image;z&&(I.notification.image=z);const Y=D.notification.icon;Y&&(I.notification.icon=Y)}(D,I),function Hc(I,D){D.data&&(I.data=D.data)}(D,I),function Mh(I,D){var x,k,z,Y,re;if(!(D.fcmOptions||null!==(x=D.notification)&&void 0!==x&&x.click_action))return;I.fcmOptions={};const qe=null!==(z=null===(k=D.fcmOptions)||void 0===k?void 0:k.link)&&void 0!==z?z:null===(Y=D.notification)||void 0===Y?void 0:Y.click_action;qe&&(I.fcmOptions.link=qe);const je=null===(re=D.fcmOptions)||void 0===re?void 0:re.analytics_label;je&&(I.fcmOptions.analyticsLabel=je)}(D,I),D}function Da(I,D){const x=[];for(let k=0;k<I.length;k++)x.push(I.charAt(k)),k<D.length&&x.push(D.charAt(k));return x.join("")}function Fs(I){return lr.create("missing-app-config-values",{valueName:I})}Da("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Da("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Jm{constructor(D,x,k){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function Ta(I){if(!I||!I.options)throw Fs("App Configuration Object");if(!I.name)throw Fs("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=I;for(const k of D)if(!x[k])throw Fs(k);return{appName:I.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:z,installations:x,analyticsProvider:k}}_delete(){return Promise.resolve()}}function kp(I){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,F.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(kt,{scope:fu}),I.swRegistration.update().catch(()=>{})}catch(D){throw lr.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function wu(){return(wu=(0,F.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield kp(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw lr.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function Fo(){return(Fo=(0,F.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=Ih)})).apply(this,arguments)}function Sa(){return Sa=(0,F.Z)(function*(I,D){if(!navigator)throw lr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw lr.create("permission-blocked");return yield function ko(I,D){return Fo.apply(this,arguments)}(I,D?.vapidKey),yield function bv(I,D){return wu.apply(this,arguments)}(I,D?.serviceWorkerRegistration),function Np(I){return Ml.apply(this,arguments)}(I)}),Sa.apply(this,arguments)}function Lo(){return(Lo=(0,F.Z)(function*(I,D,x){const k=function Vo(I){switch(I){case de.NOTIFICATION_CLICKED:return"notification_open";case de.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(k,{message_id:x[Il],message_name:x[bh],message_time:x[Cl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Uo(){return Uo=(0,F.Z)(function*(I,D){const x=D.data;if(!x.isFirebaseMessaging)return;I.onMessageHandler&&x.messageType===de.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Pl(x)):I.onMessageHandler.next(Pl(x)));const k=x.data;(function Gc(I){return"object"==typeof I&&!!I&&Il in I})(k)&&"1"===k[Km]&&(yield function zc(I,D,x){return Lo.apply(this,arguments)}(I,x.messageType,k))}),Uo.apply(this,arguments)}const oo="@firebase/messaging",Bo=I=>{const D=new Jm(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Fl(I,D){return Uo.apply(this,arguments)}(D,x)),D},Ll=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:k=>function kl(I,D){return Sa.apply(this,arguments)}(D,k)}};function Fp(){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,F.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Eu(){(0,ue._registerComponent)(new ae.wA("messaging",Bo,"PUBLIC")),(0,ue._registerComponent)(new ae.wA("messaging-internal",Ll,"PRIVATE")),(0,ue.registerVersion)(oo,"0.12.4"),(0,ue.registerVersion)(oo,"0.12.4","esm2017")}();const In="analytics",kh="firebase_id",Ul="origin",Wc=6e4,Bl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jl="https://www.googletagmanager.com/gtag/js",_r=new ye.Yd("@firebase/analytics"),Qn=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Zc(I){if(!I.startsWith(jl)){const D=Qn.create("invalid-gtag-resource",{gtagURL:I});return _r.warn(D.message),""}return I}function Iu(I){return Promise.all(I.map(D=>D.catch(x=>x)))}function Ho(){return(Ho=(0,F.Z)(function*(I,D,x,k,z,Y){const re=k[z];try{if(re)yield D[re];else{const je=(yield Iu(x)).find(dt=>dt.measurementId===z);je&&(yield D[je.appId])}}catch(qe){_r.error(qe)}I("config",z,Y)})).apply(this,arguments)}function bu(){return(bu=(0,F.Z)(function*(I,D,x,k,z){try{let Y=[];if(z&&z.send_to){let re=z.send_to;Array.isArray(re)||(re=[re]);const qe=yield Iu(x);for(const je of re){const dt=qe.find(Pt=>Pt.measurementId===je),Nt=dt&&D[dt.appId];if(!Nt){Y=[];break}Y.push(Nt)}}0===Y.length&&(Y=Object.values(D)),yield Promise.all(Y),I("event",k,z||{})}catch(Y){_r.error(Y)}})).apply(this,arguments)}const Du=30,zo=new class Go{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Up(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Xt(){return(Xt=(0,F.Z)(function*(I){var D;const{appId:x,apiKey:k}=I,z={method:"GET",headers:Up(k)},Y=Bl.replace("{app-id}",x),re=yield fetch(Y,z);if(200!==re.status&&304!==re.status){let qe="";try{const je=yield re.json();null!==(D=je.error)&&void 0!==D&&D.message&&(qe=je.error.message)}catch{}throw Qn.create("config-fetch-failed",{httpStatus:re.status,responseMessage:qe})}return re.json()})).apply(this,arguments)}function Tu(){return(Tu=(0,F.Z)(function*(I,D=zo,x){const{appId:k,apiKey:z,measurementId:Y}=I.options;if(!k)throw Qn.create("no-app-id");if(!z){if(Y)return{measurementId:Y,appId:k};throw Qn.create("no-api-key")}const re=D.getThrottleMetadata(k)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new Tv;return setTimeout((0,F.Z)(function*(){qe.abort()}),void 0!==x?x:Wc),Yc({appId:k,apiKey:z,measurementId:Y},re,qe,D)})).apply(this,arguments)}function Yc(I,D,x){return Qc.apply(this,arguments)}function Qc(){return Qc=(0,F.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:x},k,z=zo){var Y;const{appId:re,measurementId:qe}=I;try{yield function Dv(I,D){return new Promise((x,k)=>{const z=Math.max(D-Date.now(),0),Y=setTimeout(x,z);I.addEventListener(()=>{clearTimeout(Y),k(Qn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(k,D)}catch(je){if(qe)return _r.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${je?.message}]`),{appId:re,measurementId:qe};throw je}try{const je=yield function Fh(I){return Xt.apply(this,arguments)}(I);return z.deleteThrottleMetadata(re),je}catch(je){const dt=je;if(!function Bp(I){if(!(I instanceof se.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(dt)){if(z.deleteThrottleMetadata(re),qe)return _r.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${dt?.message}]`),{appId:re,measurementId:qe};throw je}const Nt=503===Number(null===(Y=dt?.customData)||void 0===Y?void 0:Y.httpStatus)?(0,se.$s)(x,z.intervalMillis,Du):(0,se.$s)(x,z.intervalMillis),Pt={throttleEndTimeMillis:Date.now()+Nt,backoffCount:x+1};return z.setThrottleMetadata(re,Pt),_r.debug(`Calling attemptFetch again in ${Nt} millis`),Yc(I,Pt,k,z)}}),Qc.apply(this,arguments)}class Tv{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let qo,Hp;function jp(){return(jp=(0,F.Z)(function*(I,D,x,k,z){if(z&&z.global)I("event",x,k);else{const Y=yield D;I("event",x,Object.assign(Object.assign({},k),{send_to:Y}))}})).apply(this,arguments)}function rn(){return(rn=(0,F.Z)(function*(){if(!(0,se.hl)())return _r.warn(Qn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(I){return _r.warn(Qn.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function ut(){return ut=(0,F.Z)(function*(I,D,x,k,z,Y,re){var qe;const je=function e_(I){return Tu.apply(this,arguments)}(I);je.then(Cn=>{x[Cn.measurementId]=Cn.appId,I.options.measurementId&&Cn.measurementId!==I.options.measurementId&&_r.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Cn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Cn=>_r.error(Cn)),D.push(je);const dt=function oi(){return rn.apply(this,arguments)}().then(Cn=>{if(Cn)return k.getId()}),[Nt,Pt]=yield Promise.all([je,dt]);(function Ma(I){const D=window.document.getElementsByTagName("script");for(const x of Object.values(D))if(x.src&&x.src.includes(jl)&&x.src.includes(I))return x;return null})(Y)||function Vs(I,D){const x=function Cu(I,D){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(I,D)),x}("firebase-js-sdk-policy",{createScriptURL:Zc}),k=document.createElement("script"),z=`${jl}?l=${I}&id=${D}`;k.src=x?x?.createScriptURL(z):z,k.async=!0,document.head.appendChild(k)}(Y,Nt.measurementId),Hp&&(z("consent","default",Hp),function Jc(I){Hp=I}(void 0)),z("js",new Date);const Wr=null!==(qe=re?.config)&&void 0!==qe?qe:{};return Wr[Ul]="firebase",Wr.update=!0,null!=Pt&&(Wr[kh]=Pt),z("config",Nt.measurementId,Wr),qo&&(z("set",qo),function ql(I){qo=I}(void 0)),Nt.measurementId}),ut.apply(this,arguments)}class qr{constructor(D){this.app=D}_delete(){return delete Vn[this.app.options.appId],Promise.resolve()}}let Vn={},Lh=[];const Au={};let ed,Oi,ui="dataLayer",Wl="gtag",Na=!1;function Us(I,D,x){!function Ru(){const I=[];if((0,se.ru)()&&I.push("This is a browser extension environment."),(0,se.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((k,z)=>`(${z+1}) ${k}`).join(" "),x=Qn.create("invalid-analytics-context",{errorInfo:D});_r.warn(x.message)}}();const k=I.options.appId;if(!k)throw Qn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Qn.create("no-api-key");_r.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Vn[k])throw Qn.create("already-exists",{id:k});if(!Na){!function Lp(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(ui);const{wrappedGtag:Y,gtagCore:re}=function ao(I,D,x,k,z){let Y=function(...re){window[k].push(arguments)};return window[z]&&"function"==typeof window[z]&&(Y=window[z]),window[z]=function Ra(I,D,x,k){function Y(){return Y=(0,F.Z)(function*(re,...qe){try{if("event"===re){const[je,dt]=qe;yield function Kc(I,D,x,k,z){return bu.apply(this,arguments)}(I,D,x,je,dt)}else if("config"===re){const[je,dt]=qe;yield function $l(I,D,x,k,z,Y){return Ho.apply(this,arguments)}(I,D,x,k,je,dt)}else if("consent"===re){const[je]=qe;I("consent","update",je)}else if("get"===re){const[je,dt,Nt]=qe;I("get",je,dt,Nt)}else if("set"===re){const[je]=qe;I("set",je)}else I(re,...qe)}catch(je){_r.error(je)}}),Y.apply(this,arguments)}return function z(re){return Y.apply(this,arguments)}}(Y,I,D,x),{gtagCore:Y,wrappedGtag:window[z]}}(Vn,Lh,Au,ui,Wl);Oi=Y,ed=re,Na=!0}return Vn[k]=function ai(I,D,x,k,z,Y,re){return ut.apply(this,arguments)}(I,Lh,Au,D,ed,ui,x),new qr(I)}function Zl(){return uo.apply(this,arguments)}function uo(){return(uo=(0,F.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const Yo="@firebase/analytics";!function Gp(){(0,ue._registerComponent)(new ae.wA(In,(D,{options:x})=>Us(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ue._registerComponent)(new ae.wA("analytics-internal",function I(D){try{const x=D.getProvider(In).getImmediate();return{logEvent:(k,z,Y)=>function Vh(I,D,x,k){I=(0,se.m9)(I),function Sv(I,D,x,k,z){return jp.apply(this,arguments)}(Oi,Vn[I.app.options.appId],D,x,k).catch(z=>_r.error(z))}(x,k,z,Y)}}catch(x){throw Qn.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ue.registerVersion)(Yo,"0.10.0"),(0,ue.registerVersion)(Yo,"0.10.0","esm2017")}();var Mu=L(4408),Xi=L(7565);const vr=new class Pu extends Xi.v{}(class Nu extends Mu.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,k=0){return null!=k&&k>0||null==k&&this.delay>0?super.requestAsyncId(D,x,k):(D.flush(this),0)}});var sd=L(4986),Un=L(8505),co=L(5363),Qo=L(9468);const Ii=new d.GfV("7.5.0"),Jn="__angularfire_symbol__analyticsIsSupportedValue",Xo="__angularfire_symbol__analyticsIsSupported",od="__angularfire_symbol__remoteConfigIsSupportedValue",Pa="__angularfire_symbol__remoteConfigIsSupported",Ji="__angularfire_symbol__messagingIsSupportedValue",Bs="__angularfire_symbol__messagingIsSupported";function Ql(I,D,x){if(D){if(1===D.length)return D[0];const Y=D.filter(re=>re.app===x);if(1===Y.length)return Y[0]}return x.container.getProvider(I).getImmediate({optional:!0})}globalThis[Xo]||(globalThis[Xo]=Zl().then(I=>globalThis[Jn]=I).catch(()=>globalThis[Jn]=!1)),globalThis[Bs]||(globalThis[Bs]=Fp().then(I=>globalThis[Ji]=I).catch(()=>globalThis[Ji]=!1)),globalThis[Pa]||(globalThis[Pa]=Lc().then(I=>globalThis[od]=I).catch(()=>globalThis[od]=!1));const Xl=(I,D)=>{const x=D?[D]:(0,J.C6)(),k=[];return x.forEach(z=>{z.container.getProvider(I).instances.forEach(re=>{k.includes(re)||k.push(re)})}),k};function js(){}class ad{constructor(D,x=vr){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,k){const z=this.zone;return this.delegate.schedule(function(re){z.runGuarded(()=>{D.apply(this,[re])})},x,k)}}class Jl{constructor(D){this.zone=D,this.task=null}call(D,x){const k=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",js,{},js,js)),x.pipe((0,Un.b)({next:k,complete:k,error:k})).subscribe(D).add(k)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let bt=(()=>{class I{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new ad(Zone.current)),this.insideAngular=x.run(()=>new ad(Zone.current,sd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(x){return new(x||I)(d.LFG(d.R0b))},I.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function es(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Bh(I){return I.pipe((0,co.Q)(es().outsideAngular))}function ts(I){return es(),function $h(I){return function(x){return(x=x.lift(new Jl(I.ngZone))).pipe((0,Qo.R)(I.outsideAngular),(0,co.Q)(I.insideAngular))}}(es())(I)}},2090:(Et,Te,L)=>{L.d(Te,{$s:()=>qi,BH:()=>Ce,DV:()=>To,Dv:()=>pr,G6:()=>Se,GJ:()=>Ds,L:()=>fe,LL:()=>et,Pz:()=>Ie,Sg:()=>Ge,UG:()=>ie,UI:()=>kr,US:()=>ae,Wj:()=>ti,Wl:()=>En,Yr:()=>be,ZB:()=>K,ZR:()=>Ft,aH:()=>Pe,b$:()=>Zt,cI:()=>an,dS:()=>Ts,eu:()=>Be,g5:()=>F,gK:()=>$r,gQ:()=>nn,h$:()=>Ee,hl:()=>ze,hu:()=>J,jU:()=>xt,lb:()=>yn,m9:()=>ni,ne:()=>dn,p$:()=>H,pd:()=>ls,r3:()=>Ti,ru:()=>nt,tV:()=>G,uI:()=>st,ug:()=>Qt,vZ:()=>yt,w1:()=>pe,w9:()=>Or,xO:()=>Fr,xb:()=>So,z$:()=>ke,zI:()=>mt,zd:()=>ei});const d={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},J=function($,B){if(!$)throw F(B)},F=function($){return new Error("Firebase Database ("+d.SDK_VERSION+") INTERNAL ASSERT FAILED: "+$)},ue=function($){const B=[];let Z=0;for(let ve=0;ve<$.length;ve++){let ee=$.charCodeAt(ve);ee<128?B[Z++]=ee:ee<2048?(B[Z++]=ee>>6|192,B[Z++]=63&ee|128):55296==(64512&ee)&&ve+1<$.length&&56320==(64512&$.charCodeAt(ve+1))?(ee=65536+((1023&ee)<<10)+(1023&$.charCodeAt(++ve)),B[Z++]=ee>>18|240,B[Z++]=ee>>12&63|128,B[Z++]=ee>>6&63|128,B[Z++]=63&ee|128):(B[Z++]=ee>>12|224,B[Z++]=ee>>6&63|128,B[Z++]=63&ee|128)}return B},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,B){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let ee=0;ee<$.length;ee+=3){const Le=$[ee],Rt=ee+1<$.length,en=Rt?$[ee+1]:0,Kn=ee+2<$.length,Pn=Kn?$[ee+2]:0;let Hr=(15&en)<<2|Pn>>6,Zi=63&Pn;Kn||(Zi=64,Rt||(Hr=64)),ve.push(Z[Le>>2],Z[(3&Le)<<4|en>>4],Z[Hr],Z[Zi])}return ve.join("")},encodeString($,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa($):this.encodeByteArray(ue($),B)},decodeString($,B){return this.HAS_NATIVE_SUPPORT&&!B?atob($):function($){const B=[];let Z=0,ve=0;for(;Z<$.length;){const ee=$[Z++];if(ee<128)B[ve++]=String.fromCharCode(ee);else if(ee>191&&ee<224){const Le=$[Z++];B[ve++]=String.fromCharCode((31&ee)<<6|63&Le)}else if(ee>239&&ee<365){const Kn=((7&ee)<<18|(63&$[Z++])<<12|(63&$[Z++])<<6|63&$[Z++])-65536;B[ve++]=String.fromCharCode(55296+(Kn>>10)),B[ve++]=String.fromCharCode(56320+(1023&Kn))}else{const Le=$[Z++],Rt=$[Z++];B[ve++]=String.fromCharCode((15&ee)<<12|(63&Le)<<6|63&Rt)}}return B.join("")}(this.decodeStringToByteArray($,B))},decodeStringToByteArray($,B){this.init_();const Z=B?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let ee=0;ee<$.length;){const Le=Z[$.charAt(ee++)],en=ee<$.length?Z[$.charAt(ee)]:0;++ee;const Pn=ee<$.length?Z[$.charAt(ee)]:64;++ee;const Kt=ee<$.length?Z[$.charAt(ee)]:64;if(++ee,null==Le||null==en||null==Pn||null==Kt)throw new ye;ve.push(Le<<2|en>>4),64!==Pn&&(ve.push(en<<4&240|Pn>>2),64!==Kt&&ve.push(Pn<<6&192|Kt))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class ye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ee=function($){const B=ue($);return ae.encodeByteArray(B,!0)},fe=function($){return Ee($).replace(/\./g,"")},G=function($){try{return ae.decodeString($,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function H($){return K(void 0,$)}function K($,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return B}for(const Z in B)!B.hasOwnProperty(Z)||!He(Z)||($[Z]=K($[Z],B[Z]));return $}function He($){return"__proto__"!==$}const Me=()=>{try{return function De(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=$&&G($[1]);return B&&JSON.parse(B)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},Pe=()=>{var $;return null===($=Me())||void 0===$?void 0:$.config},Ie=$=>{var B;return null===(B=Me())||void 0===B?void 0:B[`_${$}`]};class Ce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,Z)=>{this.resolve=B,this.reject=Z})}wrapCallback(B){return(Z,ve)=>{Z?this.reject(Z):this.resolve(ve),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(Z):B(Z,ve))}}}function Ge($,B){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=B||"demo-project",ee=$.iat||0,Le=$.sub||$.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Rt=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:ee,exp:ee+3600,auth_time:ee,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},$);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(Rt)),""].join(".")}function ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function st(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function ie(){var $;const B=null===($=Me())||void 0===$?void 0:$.forceEnvironment;if("node"===B)return!0;if("browser"===B)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function xt(){return"object"==typeof self&&self.self===self}function nt(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Zt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function pe(){const $=ke();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function be(){return!0===d.NODE_CLIENT||!0===d.NODE_ADMIN}function Se(){return!ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ze(){try{return"object"==typeof indexedDB}catch{return!1}}function Be(){return new Promise(($,B)=>{try{let Z=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",ee=self.indexedDB.open(ve);ee.onsuccess=()=>{ee.result.close(),Z||self.indexedDB.deleteDatabase(ve),$(!0)},ee.onupgradeneeded=()=>{Z=!1},ee.onerror=()=>{var Le;B((null===(Le=ee.error)||void 0===Le?void 0:Le.message)||"")}}catch(Z){B(Z)}})}function mt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ft extends Error{constructor(B,Z,ve){super(Z),this.code=B,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,Ft.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,et.prototype.create)}}class et{constructor(B,Z,ve){this.service=B,this.serviceName=Z,this.errors=ve}create(B,...Z){const ve=Z[0]||{},ee=`${this.service}/${B}`,Le=this.errors[B],Rt=Le?function qt($,B){return $.replace(At,(Z,ve)=>{const ee=B[ve];return null!=ee?String(ee):`<${ve}?>`})}(Le,ve):"Error";return new Ft(ee,`${this.serviceName}: ${Rt} (${ee}).`,ve)}}const At=/\{\$([^}]+)}/g;function an($){return JSON.parse($)}function En($){return JSON.stringify($)}const Nn=function($){let B={},Z={},ve={},ee="";try{const Le=$.split(".");B=an(G(Le[0])||""),Z=an(G(Le[1])||""),ee=Le[2],ve=Z.d||{},delete Z.d}catch{}return{header:B,claims:Z,data:ve,signature:ee}},Or=function($){const Z=Nn($).claims;return!!Z&&"object"==typeof Z&&Z.hasOwnProperty("iat")},Ds=function($){const B=Nn($).claims;return"object"==typeof B&&!0===B.admin};function Ti($,B){return Object.prototype.hasOwnProperty.call($,B)}function To($,B){if(Object.prototype.hasOwnProperty.call($,B))return $[B]}function So($){for(const B in $)if(Object.prototype.hasOwnProperty.call($,B))return!1;return!0}function kr($,B,Z){const ve={};for(const ee in $)Object.prototype.hasOwnProperty.call($,ee)&&(ve[ee]=B.call(Z,$[ee],ee,$));return ve}function yt($,B){if($===B)return!0;const Z=Object.keys($),ve=Object.keys(B);for(const ee of Z){if(!ve.includes(ee))return!1;const Le=$[ee],Rt=B[ee];if(_i(Le)&&_i(Rt)){if(!yt(Le,Rt))return!1}else if(Le!==Rt)return!1}for(const ee of ve)if(!Z.includes(ee))return!1;return!0}function _i($){return null!==$&&"object"==typeof $}function Fr($){const B=[];for(const[Z,ve]of Object.entries($))Array.isArray(ve)?ve.forEach(ee=>{B.push(encodeURIComponent(Z)+"="+encodeURIComponent(ee))}):B.push(encodeURIComponent(Z)+"="+encodeURIComponent(ve));return B.length?"&"+B.join("&"):""}function ei($){const B={};return $.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[ee,Le]=ve.split("=");B[decodeURIComponent(ee)]=decodeURIComponent(Le)}}),B}function ls($){const B=$.indexOf("?");if(!B)return"";const Z=$.indexOf("#",B);return $.substring(B,Z>0?Z:void 0)}class nn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,Z){Z||(Z=0);const ve=this.W_;if("string"==typeof B)for(let Kt=0;Kt<16;Kt++)ve[Kt]=B.charCodeAt(Z)<<24|B.charCodeAt(Z+1)<<16|B.charCodeAt(Z+2)<<8|B.charCodeAt(Z+3),Z+=4;else for(let Kt=0;Kt<16;Kt++)ve[Kt]=B[Z]<<24|B[Z+1]<<16|B[Z+2]<<8|B[Z+3],Z+=4;for(let Kt=16;Kt<80;Kt++){const Hr=ve[Kt-3]^ve[Kt-8]^ve[Kt-14]^ve[Kt-16];ve[Kt]=4294967295&(Hr<<1|Hr>>>31)}let Pn,mn,ee=this.chain_[0],Le=this.chain_[1],Rt=this.chain_[2],en=this.chain_[3],Kn=this.chain_[4];for(let Kt=0;Kt<80;Kt++){Kt<40?Kt<20?(Pn=en^Le&(Rt^en),mn=1518500249):(Pn=Le^Rt^en,mn=1859775393):Kt<60?(Pn=Le&Rt|en&(Le|Rt),mn=2400959708):(Pn=Le^Rt^en,mn=3395469782);const Hr=(ee<<5|ee>>>27)+Pn+Kn+mn+ve[Kt]&4294967295;Kn=en,en=Rt,Rt=4294967295&(Le<<30|Le>>>2),Le=ee,ee=Hr}this.chain_[0]=this.chain_[0]+ee&4294967295,this.chain_[1]=this.chain_[1]+Le&4294967295,this.chain_[2]=this.chain_[2]+Rt&4294967295,this.chain_[3]=this.chain_[3]+en&4294967295,this.chain_[4]=this.chain_[4]+Kn&4294967295}update(B,Z){if(null==B)return;void 0===Z&&(Z=B.length);const ve=Z-this.blockSize;let ee=0;const Le=this.buf_;let Rt=this.inbuf_;for(;ee<Z;){if(0===Rt)for(;ee<=ve;)this.compress_(B,ee),ee+=this.blockSize;if("string"==typeof B){for(;ee<Z;)if(Le[Rt]=B.charCodeAt(ee),++Rt,++ee,Rt===this.blockSize){this.compress_(Le),Rt=0;break}}else for(;ee<Z;)if(Le[Rt]=B[ee],++Rt,++ee,Rt===this.blockSize){this.compress_(Le),Rt=0;break}}this.inbuf_=Rt,this.total_+=Z}digest(){const B=[];let Z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ee=this.blockSize-1;ee>=56;ee--)this.buf_[ee]=255&Z,Z/=256;this.compress_(this.buf_);let ve=0;for(let ee=0;ee<5;ee++)for(let Le=24;Le>=0;Le-=8)B[ve]=this.chain_[ee]>>Le&255,++ve;return B}}function dn($,B){const Z=new ot($,B);return Z.subscribe.bind(Z)}class ot{constructor(B,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{B(this)}).catch(ve=>{this.error(ve)})}next(B){this.forEachObserver(Z=>{Z.next(B)})}error(B){this.forEachObserver(Z=>{Z.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,Z,ve){let ee;if(void 0===B&&void 0===Z&&void 0===ve)throw new Error("Missing Observer.");ee=function Si($,B){if("object"!=typeof $||null===$)return!1;for(const Z of B)if(Z in $&&"function"==typeof $[Z])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:Z,complete:ve},void 0===ee.next&&(ee.next=yi),void 0===ee.error&&(ee.error=yi),void 0===ee.complete&&(ee.complete=yi);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ee.error(this.finalError):ee.complete()}catch{}}),this.observers.push(ee),Le}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,B)}sendOne(B,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{Z(this.observers[B])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yi(){}const pr=function($,B,Z,ve){let ee;if(ve<B?ee="at least "+B:ve>Z&&(ee=0===Z?"none":"no more than "+Z),ee)throw new Error($+" failed: Was called with "+ve+(1===ve?" argument.":" arguments.")+" Expects "+ee+".")};function $r($,B){return`${$} failed: ${B} argument `}function ti($,B,Z,ve){if((!ve||Z)&&"function"!=typeof Z)throw new Error($r($,B)+"must be a valid function.")}function yn($,B,Z,ve){if((!ve||Z)&&("object"!=typeof Z||null===Z))throw new Error($r($,B)+"must be a valid context object.")}const Ts=function($){const B=[];let Z=0;for(let ve=0;ve<$.length;ve++){let ee=$.charCodeAt(ve);if(ee>=55296&&ee<=56319){const Le=ee-55296;ve++,J(ve<$.length,"Surrogate pair missing trail surrogate."),ee=65536+(Le<<10)+($.charCodeAt(ve)-56320)}ee<128?B[Z++]=ee:ee<2048?(B[Z++]=ee>>6|192,B[Z++]=63&ee|128):ee<65536?(B[Z++]=ee>>12|224,B[Z++]=ee>>6&63|128,B[Z++]=63&ee|128):(B[Z++]=ee>>18|240,B[Z++]=ee>>12&63|128,B[Z++]=ee>>6&63|128,B[Z++]=63&ee|128)}return B},Qt=function($){let B=0;for(let Z=0;Z<$.length;Z++){const ve=$.charCodeAt(Z);ve<128?B++:ve<2048?B+=2:ve>=55296&&ve<=56319?(B+=4,Z++):B+=3}return B},hn=1e3,Ai=2,$n=144e5,sr=.5;function qi($,B=hn,Z=Ai){const ve=B*Math.pow(Z,$),ee=Math.round(sr*ve*(Math.random()-.5)*2);return Math.min($n,ve+ee)}function ni($){return $&&$._delegate?$._delegate:$}},3912:(Et,Te,L)=>{var d=L(4650);let J=null;function F(){return J}class se{}const ae=new d.OlP("DocumentToken");let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ee(){return(0,d.LFG)(G)}()},providedIn:"platform"}),n})();const fe=new d.OlP("Location Initialized");let G=(()=>{class n extends ye{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){H()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){H()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function K(){return new G((0,d.LFG)(ae))}()},providedIn:"platform"}),n})();function H(){return!!window.history.pushState}function He(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function De(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ze(n){return n&&"?"!==n[0]?"?"+n:n}let gt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Me)},providedIn:"root"}),n})();const ge=new d.OlP("appBaseHref");let Me=(()=>{class n extends gt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return He(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ze(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const l=this.prepareExternalUrl(i+Ze(o));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){const l=this.prepareExternalUrl(i+Ze(o));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ye),d.LFG(ge,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ne=(()=>{class n extends gt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=He(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let l=this.prepareExternalUrl(i+Ze(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){let l=this.prepareExternalUrl(i+Ze(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ye),d.LFG(ge,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ue=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Ge(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(De(Ce(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ze(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Ce(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ze(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ze(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ze,n.joinWithSlash=He,n.stripTrailingSlash=De,n.\u0275fac=function(t){return new(t||n)(d.LFG(gt))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Pe(){return new Ue((0,d.LFG)(gt))}()},providedIn:"root"}),n})();function Ce(n){return n.replace(/\/index.html$/,"")}var xt=(()=>((xt=xt||{})[xt.Format=0]="Format",xt[xt.Standalone=1]="Standalone",xt))(),nt=(()=>((nt=nt||{})[nt.Narrow=0]="Narrow",nt[nt.Abbreviated=1]="Abbreviated",nt[nt.Wide=2]="Wide",nt[nt.Short=3]="Short",nt))(),Zt=(()=>((Zt=Zt||{})[Zt.Short=0]="Short",Zt[Zt.Medium=1]="Medium",Zt[Zt.Long=2]="Long",Zt[Zt.Full=3]="Full",Zt))(),ft=(()=>((ft=ft||{})[ft.Decimal=0]="Decimal",ft[ft.Group=1]="Group",ft[ft.List=2]="List",ft[ft.PercentSign=3]="PercentSign",ft[ft.PlusSign=4]="PlusSign",ft[ft.MinusSign=5]="MinusSign",ft[ft.Exponential=6]="Exponential",ft[ft.SuperscriptingExponent=7]="SuperscriptingExponent",ft[ft.PerMille=8]="PerMille",ft[ft.Infinity=9]="Infinity",ft[ft.NaN=10]="NaN",ft[ft.TimeSeparator=11]="TimeSeparator",ft[ft.CurrencyDecimal=12]="CurrencyDecimal",ft[ft.CurrencyGroup=13]="CurrencyGroup",ft))();function Ft(n,e){return kr((0,d.cg1)(n)[d.wAp.DateFormat],e)}function et(n,e){return kr((0,d.cg1)(n)[d.wAp.TimeFormat],e)}function qt(n,e){return kr((0,d.cg1)(n)[d.wAp.DateTimeFormat],e)}function At(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===ft.CurrencyDecimal)return t[d.wAp.NumberSymbols][ft.Decimal];if(e===ft.CurrencyGroup)return t[d.wAp.NumberSymbols][ft.Group]}return r}function Ds(n){if(!n[d.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[d.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function kr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function yt(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const ei=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ls={},nn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var dn=(()=>((dn=dn||{})[dn.Short=0]="Short",dn[dn.ShortGMT=1]="ShortGMT",dn[dn.Long=2]="Long",dn[dn.Extended=3]="Extended",dn))(),ot=(()=>((ot=ot||{})[ot.FullYear=0]="FullYear",ot[ot.Month=1]="Month",ot[ot.Date=2]="Date",ot[ot.Hours=3]="Hours",ot[ot.Minutes=4]="Minutes",ot[ot.Seconds=5]="Seconds",ot[ot.FractionalSeconds=6]="FractionalSeconds",ot[ot.Day=7]="Day",ot))(),Ot=(()=>((Ot=Ot||{})[Ot.DayPeriods=0]="DayPeriods",Ot[Ot.Days=1]="Days",Ot[Ot.Months=2]="Months",Ot[Ot.Eras=3]="Eras",Ot))();function Si(n,e,t,r){let i=function ee(n){if(Rt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,o=1,l=1]=n.split("-").map(f=>+f);return yi(i,o-1,l)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(ei))return function Le(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const l=Number(n[4]||0)-t,f=Number(n[5]||0)-r,_=Number(n[6]||0),w=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return o.call(e,l,f,_,w),e}(r)}const e=new Date(n);if(!Rt(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=pr(t,e)||e;let f,l=[];for(;e;){if(f=nn.exec(e),!f){l.push(e);break}{l=l.concat(f.slice(1));const b=l.pop();if(!b)break;e=b}}let _=i.getTimezoneOffset();r&&(_=B(r,_),i=function ve(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function Z(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(B(e,i)-i))}(i,r,!0));let w="";return l.forEach(b=>{const A=function $(n){if(ni[n])return ni[n];let e;switch(n){case"G":case"GG":case"GGG":e=Qt(Ot.Eras,nt.Abbreviated);break;case"GGGG":e=Qt(Ot.Eras,nt.Wide);break;case"GGGGG":e=Qt(Ot.Eras,nt.Narrow);break;case"y":e=yn(ot.FullYear,1,0,!1,!0);break;case"yy":e=yn(ot.FullYear,2,0,!0,!0);break;case"yyy":e=yn(ot.FullYear,3,0,!1,!0);break;case"yyyy":e=yn(ot.FullYear,4,0,!1,!0);break;case"Y":e=Wi(1);break;case"YY":e=Wi(2,!0);break;case"YYY":e=Wi(3);break;case"YYYY":e=Wi(4);break;case"M":case"L":e=yn(ot.Month,1,1);break;case"MM":case"LL":e=yn(ot.Month,2,1);break;case"MMM":e=Qt(Ot.Months,nt.Abbreviated);break;case"MMMM":e=Qt(Ot.Months,nt.Wide);break;case"MMMMM":e=Qt(Ot.Months,nt.Narrow);break;case"LLL":e=Qt(Ot.Months,nt.Abbreviated,xt.Standalone);break;case"LLLL":e=Qt(Ot.Months,nt.Wide,xt.Standalone);break;case"LLLLL":e=Qt(Ot.Months,nt.Narrow,xt.Standalone);break;case"w":e=xn(1);break;case"ww":e=xn(2);break;case"W":e=xn(1,!0);break;case"d":e=yn(ot.Date,1);break;case"dd":e=yn(ot.Date,2);break;case"c":case"cc":e=yn(ot.Day,1);break;case"ccc":e=Qt(Ot.Days,nt.Abbreviated,xt.Standalone);break;case"cccc":e=Qt(Ot.Days,nt.Wide,xt.Standalone);break;case"ccccc":e=Qt(Ot.Days,nt.Narrow,xt.Standalone);break;case"cccccc":e=Qt(Ot.Days,nt.Short,xt.Standalone);break;case"E":case"EE":case"EEE":e=Qt(Ot.Days,nt.Abbreviated);break;case"EEEE":e=Qt(Ot.Days,nt.Wide);break;case"EEEEE":e=Qt(Ot.Days,nt.Narrow);break;case"EEEEEE":e=Qt(Ot.Days,nt.Short);break;case"a":case"aa":case"aaa":e=Qt(Ot.DayPeriods,nt.Abbreviated);break;case"aaaa":e=Qt(Ot.DayPeriods,nt.Wide);break;case"aaaaa":e=Qt(Ot.DayPeriods,nt.Narrow);break;case"b":case"bb":case"bbb":e=Qt(Ot.DayPeriods,nt.Abbreviated,xt.Standalone,!0);break;case"bbbb":e=Qt(Ot.DayPeriods,nt.Wide,xt.Standalone,!0);break;case"bbbbb":e=Qt(Ot.DayPeriods,nt.Narrow,xt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Qt(Ot.DayPeriods,nt.Abbreviated,xt.Format,!0);break;case"BBBB":e=Qt(Ot.DayPeriods,nt.Wide,xt.Format,!0);break;case"BBBBB":e=Qt(Ot.DayPeriods,nt.Narrow,xt.Format,!0);break;case"h":e=yn(ot.Hours,1,-12);break;case"hh":e=yn(ot.Hours,2,-12);break;case"H":e=yn(ot.Hours,1);break;case"HH":e=yn(ot.Hours,2);break;case"m":e=yn(ot.Minutes,1);break;case"mm":e=yn(ot.Minutes,2);break;case"s":e=yn(ot.Seconds,1);break;case"ss":e=yn(ot.Seconds,2);break;case"S":e=yn(ot.FractionalSeconds,1);break;case"SS":e=yn(ot.FractionalSeconds,2);break;case"SSS":e=yn(ot.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=hn(dn.Short);break;case"ZZZZZ":e=hn(dn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=hn(dn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=hn(dn.Long);break;default:return null}return ni[n]=e,e}(b);w+=A?A(i,t,_):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),w}function yi(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function pr(n,e){const t=function _e(n){return(0,d.cg1)(n)[d.wAp.LocaleId]}(n);if(ls[t]=ls[t]||{},ls[t][e])return ls[t][e];let r="";switch(e){case"shortDate":r=Ft(n,Zt.Short);break;case"mediumDate":r=Ft(n,Zt.Medium);break;case"longDate":r=Ft(n,Zt.Long);break;case"fullDate":r=Ft(n,Zt.Full);break;case"shortTime":r=et(n,Zt.Short);break;case"mediumTime":r=et(n,Zt.Medium);break;case"longTime":r=et(n,Zt.Long);break;case"fullTime":r=et(n,Zt.Full);break;case"short":const i=pr(n,"shortTime"),o=pr(n,"shortDate");r=$r(qt(n,Zt.Short),[i,o]);break;case"medium":const l=pr(n,"mediumTime"),f=pr(n,"mediumDate");r=$r(qt(n,Zt.Medium),[l,f]);break;case"long":const _=pr(n,"longTime"),w=pr(n,"longDate");r=$r(qt(n,Zt.Long),[_,w]);break;case"full":const b=pr(n,"fullTime"),A=pr(n,"fullDate");r=$r(qt(n,Zt.Full),[b,A])}return r&&(ls[t][e]=r),r}function $r(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Ln(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,o=t));let l=String(n);for(;l.length<e;)l="0"+l;return r&&(l=l.slice(l.length-e)),o+l}function yn(n,e,t=0,r=!1,i=!1){return function(o,l){let f=function Ts(n,e){switch(n){case ot.FullYear:return e.getFullYear();case ot.Month:return e.getMonth();case ot.Date:return e.getDate();case ot.Hours:return e.getHours();case ot.Minutes:return e.getMinutes();case ot.Seconds:return e.getSeconds();case ot.FractionalSeconds:return e.getMilliseconds();case ot.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,o);if((t>0||f>-t)&&(f+=t),n===ot.Hours)0===f&&-12===t&&(f=12);else if(n===ot.FractionalSeconds)return function ti(n,e){return Ln(n,3).substring(0,e)}(f,e);const _=At(l,ft.MinusSign);return Ln(f,e,_,r,i)}}function Qt(n,e,t=xt.Format,r=!1){return function(i,o){return function cs(n,e,t,r,i,o){switch(t){case Ot.Months:return function ze(n,e,t){const r=(0,d.cg1)(n),o=kr([r[d.wAp.MonthsFormat],r[d.wAp.MonthsStandalone]],e);return kr(o,t)}(e,i,r)[n.getMonth()];case Ot.Days:return function Se(n,e,t){const r=(0,d.cg1)(n),o=kr([r[d.wAp.DaysFormat],r[d.wAp.DaysStandalone]],e);return kr(o,t)}(e,i,r)[n.getDay()];case Ot.DayPeriods:const l=n.getHours(),f=n.getMinutes();if(o){const w=function Ti(n){const e=(0,d.cg1)(n);return Ds(e),(e[d.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?yt(r):[yt(r[0]),yt(r[1])])}(e),b=function To(n,e,t){const r=(0,d.cg1)(n);Ds(r);const o=kr([r[d.wAp.ExtraData][0],r[d.wAp.ExtraData][1]],e)||[];return kr(o,t)||[]}(e,i,r),A=w.findIndex(P=>{if(Array.isArray(P)){const[U,q]=P,oe=l>=U.hours&&f>=U.minutes,he=l<q.hours||l===q.hours&&f<q.minutes;if(U.hours<q.hours){if(oe&&he)return!0}else if(oe||he)return!0}else if(P.hours===l&&P.minutes===f)return!0;return!1});if(-1!==A)return b[A]}return function be(n,e,t){const r=(0,d.cg1)(n),o=kr([r[d.wAp.DayPeriodsFormat],r[d.wAp.DayPeriodsStandalone]],e);return kr(o,t)}(e,i,r)[l<12?0:1];case Ot.Eras:return function Be(n,e){return kr((0,d.cg1)(n)[d.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,o,n,e,t,r)}}function hn(n){return function(e,t,r){const i=-1*r,o=At(t,ft.MinusSign),l=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case dn.Short:return(i>=0?"+":"")+Ln(l,2,o)+Ln(Math.abs(i%60),2,o);case dn.ShortGMT:return"GMT"+(i>=0?"+":"")+Ln(l,1,o);case dn.Long:return"GMT"+(i>=0?"+":"")+Ln(l,2,o)+":"+Ln(Math.abs(i%60),2,o);case dn.Extended:return 0===r?"Z":(i>=0?"+":"")+Ln(l,2,o)+":"+Ln(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}const Ai=0,$n=4;function qi(n){return yi(n.getFullYear(),n.getMonth(),n.getDate()+($n-n.getDay()))}function xn(n,e=!1){return function(t,r){let i;if(e){const o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,l=t.getDate();i=1+Math.floor((l+o)/7)}else{const o=qi(t),l=function sr(n){const e=yi(n,Ai,1).getDay();return yi(n,0,1+(e<=$n?$n:$n+7)-e)}(o.getFullYear()),f=o.getTime()-l.getTime();i=1+Math.round(f/6048e5)}return Ln(i,n,At(r,ft.MinusSign))}}function Wi(n,e=!1){return function(t,r){return Ln(qi(t).getFullYear(),n,At(r,ft.MinusSign),e)}}const ni={};function B(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Rt(n){return n instanceof Date&&!isNaN(n.valueOf())}const xi=/\s+/,We=[];let Lt=(()=>{class n{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this.initialClasses=We,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(xi):We}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(xi):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(xi).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class ar{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ss=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ar(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===o?void 0:o);else if(null!==o){const f=r.get(o);r.move(f,l),Hn(f,i)}});for(let i=0,o=r.length;i<o;i++){const f=r.get(i).context;f.index=i,f.count=o,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Hn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Hn(n,e){n.context.$implicit=e.item}let hs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new $t,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){au("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){au("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class $t{constructor(){this.$implicit=null,this.ngIf=null}}function au(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}const wa=new d.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),kc=new d.OlP("DATE_PIPE_DEFAULT_OPTIONS");let ri=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(null==t||""===t||t!=t)return null;try{return Si(t,r??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(l){throw function vi(n,e){return new d.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.soG,16),d.Y36(wa,24),d.Y36(kc,24))},n.\u0275pipe=d.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),Mi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const yh="server";function Ms(n){return n===yh}let cu=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new vh((0,d.LFG)(ae),window)}),n})();class vh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ro(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const l=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Vc(this.window.history)||Vc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Vc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Mh extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Gc extends Mh{static makeCurrent(){!function ue(n){J||(J=n)}(new Gc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ta(){return Da=Da||document.querySelector("base"),Da?Da.getAttribute("href"):null}();return null==t?null:function Jm(n){Fs=Fs||document.createElement("a"),Fs.setAttribute("href",n);const e=Fs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Da=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ma(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Fs,Da=null;const kp=new d.OlP("TRANSITION_ID"),bv=[{provide:d.ip1,useFactory:function Ol(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[kp,ae,d.zs3],multi:!0}];let ko=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Fo=new d.OlP("EventManagerPlugins");let kl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const l=i[o];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Fo),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Sa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let zc=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let o=i.get(t)??0;return o+=r,o>0?i.set(t,o):i.delete(t),o}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Lo=(()=>{class n extends zc{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(o=>o.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const o=this.styleRef.get(r);o?o.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Vo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Fl=/%COMP%/g,Eu=new d.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Ph(n,e){return e.flat(100).map(t=>t.replace(Fl,n))}function jo(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Yi=(()=>{class n{constructor(t,r,i,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=o,this.rendererByCompId=new Map,this.defaultRenderer=new Ls(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof kh?i.applyToHost(t):i instanceof In&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const l=this.eventManager,f=this.sharedStylesHost,_=this.removeStylesOnCompDestory;switch(r.encapsulation){case d.ifc.Emulated:o=new kh(l,f,r,this.appId,_);break;case d.ifc.ShadowDom:return new Oh(l,f,t,r);default:o=new In(l,f,r,_)}o.onDestroy=()=>i.delete(r.id),i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(kl),d.LFG(Lo),d.LFG(d.AFp),d.LFG(Eu))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Ls{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Vo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(xa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(xa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=Vo[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Vo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,jo(r)):this.eventManager.addEventListener(e,t,jo(r))}}function xa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Oh extends Ls{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Ph(i.id,i.styles);for(const l of o){const f=document.createElement("style");f.textContent=l,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class In extends Ls{constructor(e,t,r,i,o=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Ph(o,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class kh extends In{constructor(e,t,r,i,o){const l=i+"-"+r.id;super(e,t,r,o,l),this.contentAttr=function Fp(n){return"_ngcontent-%COMP%".replace(Fl,n)}(l),this.hostAttr=function Vl(n){return"_nghost-%COMP%".replace(Fl,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Ul=(()=>{class n extends Sa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Wc=["alt","control","meta","shift"],Bl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let _r=(()=>{class n extends Sa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),l=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,o.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let l="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),l="code."),Wc.forEach(w=>{const b=r.indexOf(w);b>-1&&(r.splice(b,1),l+=w+".")}),l+=o,0!=r.length||0===o.length)return null;const _={};return _.domEventName=i,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let i=Bl[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Wc.forEach(l=>{l!==i&&(0,jl[l])(t)&&(o+=l+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Kc=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function Vs(){Gc.makeCurrent()},multi:!0},{provide:ae,useFactory:function $l(){return(0,d.RDi)(document),document},deps:[]}]),bu=new d.OlP(""),Ra=[{provide:d.rWj,useClass:class wu{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let o=i.length,l=!1;const f=function(_){l=l||_,o--,0==o&&r(l)};i.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],ao=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Lp(){return new d.qLn},deps:[]},{provide:Fo,useClass:Ul,multi:!0,deps:[ae,d.R0b,d.Lbi]},{provide:Fo,useClass:_r,multi:!0,deps:[ae]},{provide:Yi,useClass:Yi,deps:[kl,Lo,d.AFp,Eu]},{provide:d.FYo,useExisting:Yi},{provide:zc,useExisting:Lo},{provide:Lo,useClass:Lo,deps:[ae]},{provide:kl,useClass:kl,deps:[Fo,d.R0b]},{provide:class vl{},useClass:ko,deps:[]},[]];let Ma=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:kp,useExisting:d.AFp},bv]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(bu,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...ao,...Ra],imports:[Mi,d.hGG]}),n})(),Up=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function zo(){return new Up((0,d.LFG)(ae))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var rn=L(8996),ai=L(7669);function ut(...n){const e=(0,ai.yG)(n);return(0,rn.D)(n,e)}var qr=L(7579);class Vn extends qr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Au=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ui=L(9751);const{isArray:Wl}=Array,{getPrototypeOf:ed,prototype:Oi,keys:Na}=Object;function xu(n){if(1===n.length){const e=n[0];if(Wl(e))return{args:e,keys:null};if(function Ru(n){return n&&"object"==typeof n&&ed(n)===Oi}(e)){const t=Na(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Us=L(4671),ct=L(4004);const{isArray:td}=Array;function uo(n){return(0,ct.U)(e=>function Zl(n,e){return td(e)?n(...e):n(e)}(n,e))}function lo(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Xn=L(5403),nd=L(9672);function rd(...n){const e=(0,ai.yG)(n),t=(0,ai.jO)(n),{args:r,keys:i}=xu(n);if(0===r.length)return(0,rn.D)([],e);const o=new ui.y(function Zo(n,e,t=Us.y){return r=>{Ko(e,()=>{const{length:i}=n,o=new Array(i);let l=i,f=i;for(let _=0;_<i;_++)Ko(e,()=>{const w=(0,rn.D)(n[_],e);let b=!1;w.subscribe((0,Xn.x)(r,A=>{o[_]=A,b||(b=!0,f--),f||r.next(t(o.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>lo(i,l):Us.y));return t?o.pipe(uo(t)):o}function Ko(n,e,t){n?(0,nd.f)(t,n,e):e()}var Kl=L(8189);function Yl(...n){return function Vh(){return(0,Kl.J)(1)}()((0,rn.D)(n,(0,ai.yG)(n)))}var Yo=L(8421);function Uh(n){return new ui.y(e=>{(0,Yo.Xf)(n()).subscribe(e)})}var Gp=L(9635),Mu=L(576);function Nu(n,e){const t=(0,Mu.m)(n)?n:()=>n,r=i=>i.error(t());return new ui.y(e?i=>e.schedule(r,0,i):r)}var Xi=L(515),Pu=L(727),vr=L(4482);function id(){return(0,vr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Xn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class sd extends ui.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,vr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pu.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Xn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pu.w0.EMPTY)}return e}refCount(){return id()(this)}}function Un(n,e){return(0,vr.e)((t,r)=>{let i=null,o=0,l=!1;const f=()=>l&&!i&&r.complete();t.subscribe((0,Xn.x)(r,_=>{i?.unsubscribe();let w=0;const b=o++;(0,Yo.Xf)(n(_,b)).subscribe(i=(0,Xn.x)(r,A=>r.next(e?e(_,A,b,w++):A),()=>{i=null,f()}))},()=>{l=!0,f()}))})}function co(n){return n<=0?()=>Xi.E:(0,vr.e)((e,t)=>{let r=0;e.subscribe((0,Xn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Qo(...n){const e=(0,ai.yG)(n);return(0,vr.e)((t,r)=>{(e?Yl(n,t,e):Yl(n,t)).subscribe(r)})}function Ii(n,e){return(0,vr.e)((t,r)=>{let i=0;t.subscribe((0,Xn.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}var Jn=L(5577);function Xo(n){return(0,vr.e)((e,t)=>{let r=!1;e.subscribe((0,Xn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function od(n=Pa){return(0,vr.e)((e,t)=>{let r=!1;e.subscribe((0,Xn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Pa(){return new Au}function Ji(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ii((i,o)=>n(i,o,r)):Us.y,co(1),t?Xo(e):od(()=>new Au))}function Bs(n,e){return(0,Mu.m)(e)?(0,Jn.z)(n,e,1):(0,Jn.z)(n,1)}var xr=L(8505);function Jo(n){return(0,vr.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,Xn.x)(t,void 0,void 0,l=>{o=(0,Yo.Xf)(n(l,Jo(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Oa(n,e){return(0,vr.e)(function zp(n,e,t,r,i){return(o,l)=>{let f=t,_=e,w=0;o.subscribe((0,Xn.x)(l,b=>{const A=w++;_=f?n(_,b,A):(f=!0,b),r&&l.next(_)},i&&(()=>{f&&l.next(_),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Ql(n){return n<=0?()=>Xi.E:(0,vr.e)((e,t)=>{let r=[];e.subscribe((0,Xn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Xl(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ii((i,o)=>n(i,o,r)):Us.y,Ql(1),t?Xo(e):od(()=>new Au))}function Jl(n){return(0,vr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const bt="primary",es=Symbol("RouteTitle");class ec{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ki(n){return new ec(n)}function Bh(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const l=r[o],f=n[o];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ts(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!$h(n[i],e[i]))return!1;return!0}function $h(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function Hh(n){return Array.prototype.concat.apply([],n)}function Gh(n){return n.length>0?n[n.length-1]:null}function D(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function x(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,rn.D)(Promise.resolve(n)):ut(n)}const k=!1,z={exact:function je(n,e,t){if(!Rr(n.segments,e.segments)||!Wr(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!je(n.children[r],e.children[r],t))return!1;return!0},subset:Nt},Y={exact:function qe(n,e){return ts(n,e)},subset:function dt(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>$h(n[t],e[t]))},ignored:()=>!0};function re(n,e,t){return z[t.paths](n.root,e.root,t.matrixParams)&&Y[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Nt(n,e,t){return Pt(n,e,e.segments,t)}function Pt(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Rr(i,t)||e.hasChildren()||!Wr(i,t,r))}if(n.segments.length===t.length){if(!Rr(n.segments,t)||!Wr(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Nt(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Rr(n.segments,i)&&Wr(n.segments,i,r)&&n.children[bt])&&Pt(n.children[bt],e,o,r)}}function Wr(n,e,t){return e.every((r,i)=>Y[t](n[i].parameters,r.parameters))}class Cn{constructor(e=new Vt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ki(this.queryParams)),this._queryParamMap}toString(){return ld.serialize(this)}}class Vt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,D(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qp(this)}}class ho{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ki(this.parameters)),this._parameterMap}toString(){return t_(this)}}function Rr(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let fo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new ud},providedIn:"root"}),n})();class ud{parse(e){const t=new dd(e);return new Cn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ou(e.root,!0)}`,r=function Av(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ta(t)}=${ta(i)}`).join("&"):`${ta(t)}=${ta(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Wp(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ld=new ud;function qp(n){return n.segments.map(e=>t_(e)).join("/")}function Ou(n,e){if(!n.hasChildren())return qp(n);if(e){const t=n.children[bt]?Ou(n.children[bt],!1):"",r=[];return D(n.children,(i,o)=>{o!==bt&&r.push(`${o}:${Ou(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function ns(n,e){let t=[];return D(n.children,(r,i)=>{i===bt&&(t=t.concat(e(r,i)))}),D(n.children,(r,i)=>{i!==bt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===bt?[Ou(n.children[bt],!1)]:[`${i}:${Ou(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[bt]?`${qp(n)}/${t[0]}`:`${qp(n)}/(${t.join("//")})`}}function cd(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ta(n){return cd(n).replace(/%3B/gi,";")}function na(n){return cd(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tc(n){return decodeURIComponent(n)}function Zp(n){return tc(n.replace(/\+/g,"%20"))}function t_(n){return`${na(n.path)}${function Kp(n){return Object.keys(n).map(e=>`;${na(e)}=${na(n[e])}`).join("")}(n.parameters)}`}const n_=/^[^\/()?;=#]+/;function zh(n){const e=n.match(n_);return e?e[0]:""}const cI=/^[^=?&#]+/,xv=/^[^&#]+/;class dd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Vt([],{}):new Vt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[bt]=new Vt(e,t)),r}parseSegment(){const e=zh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,k);return this.capture(e),new ho(tc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=zh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=zh(this.remaining);i&&(r=i,this.capture(r))}e[tc(t)]=tc(r)}parseQueryParam(e){const t=function ku(n){const e=n.match(cI);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function r_(n){const e=n.match(xv);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Zp(t),o=Zp(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=zh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,k);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=bt);const l=this.parseChildren();t[o]=1===Object.keys(l).length?l[bt]:new Vt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,k)}}function qh(n){return n.segments.length>0?new Vt([],{[bt]:n}):n}function ka(n){const e={};for(const r of Object.keys(n.children)){const o=ka(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Rv(n){if(1===n.numberOfChildren&&n.children[bt]){const e=n.children[bt];return new Vt(n.segments.concat(e.segments),e.children)}return n}(new Vt(n.segments,e))}function Fu(n){return n instanceof Cn}const nc=!1;function i_(n,e,t,r,i){if(0===t.length)return ra(e.root,e.root,e.root,r,i);const o=function pd(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Zh(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,l)=>{if("object"==typeof o&&null!=o){if(o.outlets){const f={};return D(o.outlets,(_,w)=>{f[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:f}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===l?(o.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,o]},[]);return new Zh(t,e,r)}(t);return o.toRoot()?ra(e.root,e.root,new Vt([],{}),r,i):function l(_){const w=function Kh(n,e,t,r){if(n.isAbsolute)return new Lu(e.root,!0,0);if(-1===r)return new Lu(t,t===e.root,0);return function Vu(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new d.vHH(4005,nc&&"Invalid number of '../'");i=r.segments.length}return new Lu(r,!1,i-o)}(t,r+(fd(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,_),b=w.processChildren?$s(w.segmentGroup,w.index,o.commands):Qh(w.segmentGroup,w.index,o.commands);return ra(e.root,w.segmentGroup,b,r,i)}(n.snapshot?._lastPathIndex)}function fd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Wh(n){return"object"==typeof n&&null!=n&&n.outlets}function ra(n,e,t,r,i){let l,o={};r&&D(r,(_,w)=>{o[w]=Array.isArray(_)?_.map(b=>`${b}`):`${_}`}),l=n===e?t:s_(n,e,t);const f=qh(ka(l));return new Cn(f,o,i)}function s_(n,e,t){const r={};return D(n.children,(i,o)=>{r[o]=i===e?t:s_(i,e,t)}),new Vt(n.segments,r)}class Zh{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&fd(r[0]))throw new d.vHH(4003,nc&&"Root segment cannot have matrix parameters");const i=r.find(Wh);if(i&&i!==Gh(r))throw new d.vHH(4004,nc&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Lu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Qh(n,e,t){if(n||(n=new Vt([],{})),0===n.segments.length&&n.hasChildren())return $s(n,e,t);const r=function Qp(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const l=n.segments[i],f=t[r];if(Wh(f))break;const _=`${f}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!Jp(_,w,l))return o;r+=2}else{if(!Jp(_,{},l))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Vt(n.segments.slice(0,r.pathIndex),{});return o.children[bt]=new Vt(n.segments.slice(r.pathIndex),n.children),$s(o,0,i)}return r.match&&0===i.length?new Vt(n.segments,{}):r.match&&!n.hasChildren()?gd(n,e,t):r.match?$s(n,0,i):gd(n,e,t)}function $s(n,e,t){if(0===t.length)return new Vt(n.segments,{});{const r=function Yh(n){return Wh(n[0])?n[0].outlets:{[bt]:n}}(t),i={};if(!r[bt]&&n.children[bt]&&1===n.numberOfChildren&&0===n.children[bt].segments.length){const o=$s(n.children[bt],e,t);return new Vt(n.segments,o.children)}return D(r,(o,l)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[l]=Qh(n.children[l],e,o))}),D(n.children,(o,l)=>{void 0===r[l]&&(i[l]=o)}),new Vt(n.segments,i)}}function gd(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(Wh(o)){const _=md(o.outlets);return new Vt(r,_)}if(0===i&&fd(t[0])){r.push(new ho(n.segments[e].path,Xp(t[0]))),i++;continue}const l=Wh(o)?o.outlets[bt]:`${o}`,f=i<t.length-1?t[i+1]:null;l&&f&&fd(f)?(r.push(new ho(l,Xp(f))),i+=2):(r.push(new ho(l,{})),i++)}return new Vt(r,{})}function md(n){const e={};return D(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=gd(new Vt([],{}),0,t))}),e}function Xp(n){const e={};return D(n,(t,r)=>e[r]=`${t}`),e}function Jp(n,e,t){return n==t.path&&ts(e,t.parameters)}const _d="imperative";class po{constructor(e,t){this.id=e,this.url=t}}class eg extends po{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _s extends po{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class yd extends po{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class La extends po{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class vd extends po{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class rc extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nv extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pv extends po{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ov extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tg extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wd{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class o_{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class a_{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ic{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ng{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fi{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let ig=(()=>{class n{createUrlTree(t,r,i,o,l,f){return i_(t||r.root,i,o,l,f)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),kv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(e){return ig.\u0275fac(e)},providedIn:"root"}),n})();class og{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ag(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ag(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Zr(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Zr(e,this._root).map(t=>t.value)}}function ag(n,e){if(n===e.value)return e;for(const t of e.children){const r=ag(n,t);if(r)return r}return null}function Zr(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Zr(n,t);if(r.length)return r.unshift(e),r}return[]}class Li{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function sc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Fv extends og{constructor(e,t){super(e),this.snapshot=t,Bu(this,e)}toString(){return this.snapshot.toString()}}function Lv(n,e){const t=function Vv(n,e){const l=new Jh([],{},{},"",{},bt,e,null,n.root,-1,{});return new go("",new Li(l,[]))}(n,e),r=new Vn([new ho("",{})]),i=new Vn({}),o=new Vn({}),l=new Vn({}),f=new Vn(""),_=new wr(r,i,l,f,o,bt,e,t.root);return _.snapshot=t.root,new Fv(new Li(_,[]),t)}class wr{constructor(e,t,r,i,o,l,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=f,this.title=this.data?.pipe((0,ct.U)(w=>w[es]))??ut(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ct.U)(e=>ki(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ct.U)(e=>ki(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ug(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function Xh(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Jh{get title(){return this.data?.[es]}constructor(e,t,r,i,o,l,f,_,w,b,A){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=f,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=b,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ki(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ki(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class go extends og{constructor(e,t){super(t),this.url=e,Bu(this,t)}toString(){return lg(this._root)}}function Bu(n,e){e.value._routerState=n,e.children.forEach(t=>Bu(n,t))}function lg(n){const e=n.children.length>0?` { ${n.children.map(lg).join(", ")} } `:"";return`${n.value}${e}`}function oc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ts(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ts(e.params,t.params)||n.params.next(t.params),function jh(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ts(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ts(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Hs(n,e){const t=ts(n.params,e.params)&&function ea(n,e){return Rr(n,e)&&n.every((t,r)=>ts(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Hs(n.parent,e.parent))}function ac(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function l_(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ac(n,r,i);return ac(n,r)})}(n,e,t);return new Li(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const l=o.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>ac(n,f)),l}}const r=function c_(n){return new wr(new Vn(n.url),new Vn(n.params),new Vn(n.queryParams),new Vn(n.fragment),new Vn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>ac(n,o));return new Li(r,i)}}const d_="ngNavigationCancelingError";function y(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Fu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=p(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function p(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[d_]=!0,r.cancellationCode=e,t&&(r.url=t),r}function g(n){return E(n)&&Fu(n.url)}function E(n){return n&&n[d_]}class S{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new M,this.attachRef=null}}let M=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new S,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const j=!1;let Q=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=bt,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(M),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,j);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,j);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,j);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,j);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,_=new xe(t,f,i.injector);if(r&&function $e(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(l);this.activated=i.createComponent(w,i.length,_)}else this.activated=i.createComponent(l,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),n})();class xe{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===wr?this.route:e===M?this.childContexts:this.parent.get(e,t)}}let tt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Q],encapsulation:2}),n})();function rt(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Cd(n){const e=n.children&&n.children.map(Cd),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==bt&&(t.component=tt),t}function rs(n){return n.outlet||bt}function ef(n,e){const t=n.filter(r=>rs(r)===e);return t.push(...n.filter(r=>rs(r)!==e)),t}function uc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class tf{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),oc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=sc(t);e.children.forEach(o=>{const l=o.value.outlet;this.deactivateRoutes(o,i[l],r),delete i[l]}),D(i,(o,l)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=sc(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=sc(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=sc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Fi(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ic(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(oc(i),i===o)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),oc(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=uc(i.snapshot),_=f?.get(d._Vd)??null;l.attachRef=null,l.route=i,l.resolver=_,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class jv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class $v{constructor(e,t){this.component=e,this.route=t}}function dg(n,e,t){const r=n._root;return nf(r,e?e._root:null,t,[r.value])}function bd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function nf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=sc(e);return n.children.forEach(l=>{(function dI(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){const _=function BN(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Rr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Rr(n.url,e.url)||!ts(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hs(n,e)||!ts(n.queryParams,e.queryParams);default:return!Hs(n,e)}}(l,o,o.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new jv(r)):(o.data=l.data,o._resolvedData=l._resolvedData),nf(n,e,o.component?f?f.children:null:t,r,i),_&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new $v(f.outlet.component,l))}else l&&hg(e,f,i),i.canActivateChecks.push(new jv(r)),nf(n,null,o.component?f?f.children:null:t,r,i)})(l,o[l.value.outlet],t,r.concat([l.value]),i),delete o[l.value.outlet]}),D(o,(l,f)=>hg(l,t.getContext(f),i)),i}function hg(n,e,t){const r=sc(n),i=n.value;D(r,(o,l)=>{hg(o,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new $v(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function rf(n){return"function"==typeof n}function $u(n){return n instanceof Au||"EmptyError"===n?.name}const f_=Symbol("INITIAL_VALUE");function lc(){return Un(n=>rd(n.map(e=>e.pipe(co(1),Qo(f_)))).pipe((0,ct.U)(e=>{for(const t of e)if(!0!==t){if(t===f_)return f_;if(!1===t||t instanceof Cn)return t}return!0}),Ii(e=>e!==f_),co(1)))}function Kv(n){return(0,Gp.z)((0,xr.b)(e=>{if(Fu(e))throw y(0,e)}),(0,ct.U)(e=>!0===e))}const Yv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gI(n,e,t,r,i){const o=Qv(n,e,t);return o.matched?function sf(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ut(i.map(l=>{const f=bd(l,n);return x(function qv(n){return n&&rf(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(lc(),Kv()):ut(!0)}(r=rt(e,r),e,t).pipe((0,ct.U)(l=>!0===l?o:{...Yv})):ut(o)}function Qv(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Yv}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Bh)(t,n,e);if(!i)return{...Yv};const o={};D(i.posParams,(f,_)=>{o[_]=f.path});const l=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function af(n,e,t,r){if(t.length>0&&function jT(n,e,t){return t.some(r=>Xv(n,e,r)&&rs(r)!==bt)}(n,t,r)){const o=new Vt(e,function mI(n,e,t,r){const i={};i[bt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&rs(o)!==bt){const l=new Vt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[rs(o)]=l}return i}(n,e,r,new Vt(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function _I(n,e,t){return t.some(r=>Xv(n,e,r))}(n,t,r)){const o=new Vt(n.segments,function BT(n,e,t,r,i){const o={};for(const l of r)if(Xv(n,t,l)&&!i[rs(l)]){const f=new Vt([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,o[rs(l)]=f}return{...i,...o}}(n,e,t,r,n.children));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const i=new Vt(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Xv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function yI(n,e,t,r){return!!(rs(n)===r||r!==bt&&Xv(e,t,n))&&("**"===n.path||Qv(e,n,t).matched)}function uf(n,e,t){return 0===e.length&&!n.children[t]}const m_=!1;class Hu{constructor(e){this.segmentGroup=e||null}}class lf{constructor(e){this.urlTree=e}}function fg(n){return Nu(new Hu(n))}function Jv(n){return Nu(new lf(n))}class vI{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=af(this.urlTree.root,[],[],this.config).segmentGroup,t=new Vt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,bt).pipe((0,ct.U)(o=>this.createUrlTree(ka(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Jo(o=>{if(o instanceof lf)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Hu?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,bt).pipe((0,ct.U)(i=>this.createUrlTree(ka(i),e.queryParams,e.fragment))).pipe(Jo(i=>{throw i instanceof Hu?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,m_)}createUrlTree(e,t,r){const i=qh(e);return new Cn(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ct.U)(o=>new Vt([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,rn.D)(i).pipe(Bs(o=>{const l=r.children[o],f=ef(t,o);return this.expandSegmentGroup(e,f,l,o).pipe((0,ct.U)(_=>({segment:_,outlet:o})))}),Oa((o,l)=>(o[l.outlet]=l.segment,o),{}),Xl())}expandSegment(e,t,r,i,o,l){return(0,rn.D)(r).pipe(Bs(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,o,l).pipe(Jo(w=>{if(w instanceof Hu)return ut(null);throw w}))),Ji(f=>!!f),Jo((f,_)=>{if($u(f))return uf(t,i,o)?ut(new Vt([],{})):fg(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,o,l,f){return yI(i,t,o,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,l):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l):fg(t):fg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Jv(o):this.lineralizeSegments(r,o).pipe((0,Jn.z)(l=>{const f=new Vt(l,{});return this.expandSegment(e,f,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){const{matched:f,consumedSegments:_,remainingSegments:w,positionalParamSegments:b}=Qv(t,i,o);if(!f)return fg(t);const A=this.applyRedirectCommands(_,i.redirectTo,b);return i.redirectTo.startsWith("/")?Jv(A):this.lineralizeSegments(i,A).pipe((0,Jn.z)(P=>this.expandSegment(e,t,r,P.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){return"**"===r.path?(e=rt(r,e),r.loadChildren?(r._loadedRoutes?ut({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ct.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new Vt(i,{})))):ut(new Vt(i,{}))):gI(t,r,i,e).pipe(Un(({matched:l,consumedSegments:f,remainingSegments:_})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Jn.z)(b=>{const A=b.injector??e,P=b.routes,{segmentGroup:U,slicedSegments:q}=af(t,f,_,P),oe=new Vt(U.segments,U.children);if(0===q.length&&oe.hasChildren())return this.expandChildren(A,P,oe).pipe((0,ct.U)(Ye=>new Vt(f,Ye)));if(0===P.length&&0===q.length)return ut(new Vt(f,{}));const he=rs(r)===o;return this.expandSegment(A,oe,P,q,he?bt:o,!0).pipe((0,ct.U)(lt=>new Vt(f.concat(lt.segments),lt.children)))})):fg(t)))}getChildConfig(e,t,r){return t.children?ut({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ut({routes:t._loadedRoutes,injector:t._loadedInjector}):function UT(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ut(!0):ut(i.map(l=>{const f=bd(l,n);return x(function Gv(n){return n&&rf(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(lc(),Kv())}(e,t,r).pipe((0,Jn.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,xr.b)(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function HT(n){return Nu(p(m_,3))}())):ut({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ut(r);if(i.numberOfChildren>1||!i.children[bt])return e.redirectTo,Nu(new d.vHH(4e3,m_));i=i.children[bt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Cn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return D(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[o]=t[f]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let l={};return D(t.children,(f,_)=>{l[_]=this.createSegmentGroup(e,f,r,i)}),new Vt(o,l)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,m_);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class ew{}class pg{constructor(e,t,r,i,o,l,f){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=l,this.urlSerializer=f}recognize(){const e=af(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,bt).pipe((0,ct.U)(t=>{if(null===t)return null;const r=new Jh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},bt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Li(r,t),o=new go(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,r=ug(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,rn.D)(Object.keys(r.children)).pipe(Bs(i=>{const o=r.children[i],l=ef(t,i);return this.processSegmentGroup(e,l,o,i)}),Oa((i,o)=>i&&o?(i.push(...o),i):null),function js(n,e=!1){return(0,vr.e)((t,r)=>{let i=0;t.subscribe((0,Xn.x)(r,o=>{const l=n(o,i++);(l||e)&&r.next(o),!l&&r.complete()}))})}(i=>null!==i),Xo(null),Xl(),(0,ct.U)(i=>{if(null===i)return null;const o=EI(i);return function qT(n){n.sort((e,t)=>e.value.outlet===bt?-1:t.value.outlet===bt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,r,i,o){return(0,rn.D)(t).pipe(Bs(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,o)),Ji(l=>!!l),Jo(l=>{if($u(l))return uf(r,i,o)?ut([]):ut(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,o){if(t.redirectTo||!yI(t,r,i,o))return ut(null);let l;if("**"===t.path){const f=i.length>0?Gh(i).parameters:{},_=CI(r)+i.length;l=ut({snapshot:new Jh(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Va(t),rs(t),t.component??t._loadedComponent??null,t,II(r),_,bI(t)),consumedSegments:[],remainingSegments:[]})}else l=gI(r,t,i,e).pipe((0,ct.U)(({matched:f,consumedSegments:_,remainingSegments:w,parameters:b})=>{if(!f)return null;const A=CI(r)+_.length;return{snapshot:new Jh(_,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Va(t),rs(t),t.component??t._loadedComponent??null,t,II(r),A,bI(t)),consumedSegments:_,remainingSegments:w}}));return l.pipe(Un(f=>{if(null===f)return ut(null);const{snapshot:_,consumedSegments:w,remainingSegments:b}=f;e=t._injector??e;const A=t._loadedInjector??e,P=function WT(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:U,slicedSegments:q}=af(r,w,b,P.filter(he=>void 0===he.redirectTo));if(0===q.length&&U.hasChildren())return this.processChildren(A,P,U).pipe((0,ct.U)(he=>null===he?null:[new Li(_,he)]));if(0===P.length&&0===q.length)return ut([new Li(_,[])]);const oe=rs(t)===o;return this.processSegment(A,P,U,q,oe?bt:o).pipe((0,ct.U)(he=>null===he?null:[new Li(_,he)]))}))}}function ZT(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function EI(n){const e=[],t=new Set;for(const r of n){if(!ZT(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=EI(r.children);e.push(new Li(r.value,i))}return e.filter(r=>!t.has(r))}function II(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function CI(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Va(n){return n.data||{}}function bI(n){return n.resolve||{}}function nw(n){return"string"==typeof n.title||null===n.title}function rw(n){return Un(e=>{const t=n(e);return t?(0,rn.D)(t).pipe((0,ct.U)(()=>e)):ut(e)})}const cf=new d.OlP("ROUTES");let sw=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.f3M)(d.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ut(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=x(t.loadComponent()).pipe((0,ct.U)(SI),(0,xr.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Jl(()=>{this.componentLoaders.delete(t)})),i=new sd(r,()=>new qr.x).pipe(id());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ut({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ct.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,w,b=!1;Array.isArray(f)?w=f:(_=f.create(t).injector,w=Hh(_.get(cf,[],d.XFs.Self|d.XFs.Optional)));return{routes:w.map(Cd),injector:_}}),Jl(()=>{this.childrenLoaders.delete(r)})),l=new sd(o,()=>new qr.x).pipe(id());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return x(t()).pipe((0,ct.U)(SI),(0,Jn.z)(r=>r instanceof d.YKP||Array.isArray(r)?ut(r):(0,rn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function SI(n){return function ia(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let y_=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new qr.x,this.configLoader=(0,d.f3M)(sw),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(fo),this.rootContexts=(0,d.f3M)(M),this.navigationId=0,this.afterPreactivation=()=>ut(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new o_(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new wd(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Vn({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:_d,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ii(r=>0!==r.id),(0,ct.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Un(r=>{let i=!1,o=!1;return ut(r).pipe((0,xr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Un(l=>{const f=t.browserUrlTree.toString(),_=!t.navigated||l.extractedUrl.toString()!==f||f!==t.currentUrlTree.toString();if(!_&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const b="";return this.events.next(new La(l.id,t.serializeUrl(r.rawUrl),b,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Xi.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return AI(l.source)&&(t.browserUrlTree=l.extractedUrl),ut(l).pipe(Un(b=>{const A=this.transitions?.getValue();return this.events.next(new eg(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),A!==this.transitions?.getValue()?Xi.E:Promise.resolve(b)}),function wI(n,e,t,r){return Un(i=>function GT(n,e,t,r,i){return new vI(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ct.U)(o=>({...i,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,xr.b)(b=>{this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},r.urlAfterRedirects=b.urlAfterRedirects}),function YT(n,e,t,r,i){return(0,Jn.z)(o=>function tw(n,e,t,r,i,o,l="emptyOnly"){return new pg(n,e,t,r,i,l,o).recognize().pipe(Un(f=>null===f?function zT(n){return new ui.y(e=>e.error(n))}(new ew):ut(f)))}(n,e,t,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i).pipe((0,ct.U)(l=>({...o,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,xr.b)(b=>{if(r.targetSnapshot=b.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!b.extras.skipLocationChange){const P=t.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);t.setBrowserUrl(P,b)}t.browserUrlTree=b.urlAfterRedirects}const A=new rc(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(A)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:b,extractedUrl:A,source:P,restoredState:U,extras:q}=l,oe=new eg(b,this.urlSerializer.serialize(A),P,U);this.events.next(oe);const he=Lv(A,this.rootComponentType).snapshot;return ut(r={...l,targetSnapshot:he,urlAfterRedirects:A,extras:{...q,skipLocationChange:!1,replaceUrl:!1}})}{const b="";return this.events.next(new La(l.id,t.serializeUrl(r.extractedUrl),b,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Xi.E}}),(0,xr.b)(l=>{const f=new Nv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),(0,ct.U)(l=>r={...l,guards:dg(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function p_(n,e){return(0,Jn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:l}}=t;return 0===l.length&&0===o.length?ut({...t,guardsResult:!0}):function LT(n,e,t,r){return(0,rn.D)(n).pipe((0,Jn.z)(i=>function VT(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?ut(o.map(f=>{const _=uc(e)??i,w=bd(f,_);return x(function kT(n){return n&&rf(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):_.runInContext(()=>w(n,e,t,r))).pipe(Ji())})).pipe(lc()):ut(!0)}(i.component,i.route,t,e,r)),Ji(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Jn.z)(f=>f&&function hI(n){return"boolean"==typeof n}(f)?function Wv(n,e,t,r){return(0,rn.D)(e).pipe(Bs(i=>Yl(function Dd(n,e){return null!==n&&e&&e(new a_(n)),ut(!0)}(i.route.parent,r),function g_(n,e){return null!==n&&e&&e(new ng(n)),ut(!0)}(i.route,r),function Zv(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(l=>function Hv(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Uh(()=>ut(l.guards.map(_=>{const w=uc(l.node)??t,b=bd(_,w);return x(function zv(n){return n&&rf(n.canActivateChild)}(b)?b.canActivateChild(r,n):w.runInContext(()=>b(r,n))).pipe(Ji())})).pipe(lc())));return ut(o).pipe(lc())}(n,i.path,t),function pI(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ut(!0);const i=r.map(o=>Uh(()=>{const l=uc(e)??t,f=bd(o,l);return x(function jN(n){return n&&rf(n.canActivate)}(f)?f.canActivate(e,n):l.runInContext(()=>f(e,n))).pipe(Ji())}));return ut(i).pipe(lc())}(n,i.route,t))),Ji(i=>!0!==i,!0))}(r,o,n,e):ut(f)),(0,ct.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,l=>this.events.next(l)),(0,xr.b)(l=>{if(r.guardsResult=l.guardsResult,Fu(l.guardsResult))throw y(0,l.guardsResult);const f=new Pv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(f)}),Ii(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),rw(l=>{if(l.guards.canActivateChecks.length)return ut(l).pipe((0,xr.b)(f=>{const _=new Ov(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(_)}),Un(f=>{let _=!1;return ut(f).pipe(function $N(n,e){return(0,Jn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ut(t);let o=0;return(0,rn.D)(i).pipe(Bs(l=>function HN(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!nw(i)&&(o[es]=i.title),function DI(n,e,t,r){const i=function GN(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ut({});const o={};return(0,rn.D)(i).pipe((0,Jn.z)(l=>function TI(n,e,t,r){const i=uc(e)??r,o=bd(n,i);return x(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[l],e,t,r).pipe(Ji(),(0,xr.b)(f=>{o[l]=f}))),Ql(1),function ad(n){return(0,ct.U)(()=>n)}(o),Jo(l=>$u(l)?Xi.E:Nu(l)))}(o,n,e,r).pipe((0,ct.U)(l=>(n._resolvedData=l,n.data=ug(n,t).resolve,i&&nw(i)&&(n.data[es]=i.title),null)))}(l.route,r,n,e)),(0,xr.b)(()=>o++),Ql(1),(0,Jn.z)(l=>o===i.length?ut(t):Xi.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,xr.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,xr.b)(f=>{const _=new tg(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(_)}))}),rw(l=>{const f=_=>{const w=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,xr.b)(b=>{_.component=b}),(0,ct.U)(()=>{})));for(const b of _.children)w.push(...f(b));return w};return rd(f(l.targetSnapshot.root)).pipe(Xo(),co(1))}),rw(()=>this.afterPreactivation()),(0,ct.U)(l=>{const f=function ju(n,e,t){const r=ac(n,e._root,t?t._root:void 0);return new Fv(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:f}}),(0,xr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,ct.U)(r=>(new tf(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),co(1),(0,xr.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new _s(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),Jl(()=>{i||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Jo(l=>{if(o=!0,E(l)){g(l)||(t.navigated=!0,t.restoreHistory(r,!0));const f=new yd(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(f),g(l)){const _=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),w={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||AI(r.source)};t.scheduleNavigation(_,_d,null,w,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const f=new vd(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(f);try{r.resolve(t.errorHandler(l))}catch(_){r.reject(_)}}return Xi.E}))}))}cancelNavigationTransition(t,r,i){const o=new yd(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function AI(n){return n!==_d}let xI=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===bt);return r}getResolvedTitleForRoute(t){return t.data[es]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(QT)},providedIn:"root"}),n})(),QT=(()=>{class n extends xI{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Up))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(JT)},providedIn:"root"}),n})();class XT{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let JT=(()=>{class n extends XT{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Bt=new d.OlP("",{providedIn:"root",factory:()=>({})});let MI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(NI)},providedIn:"root"}),n})(),NI=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tS(n){throw n}function nS(n,e,t){return e.parse("/")}const PI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ys=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)(Bt,{optional:!0})||{},this.errorHandler=this.options.errorHandler||tS,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||nS,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(MI),this.routeReuseStrategy=(0,d.f3M)(RI),this.urlCreationStrategy=(0,d.f3M)(kv),this.titleStrategy=(0,d.f3M)(xI),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Hh((0,d.f3M)(cf,{optional:!0})??[]),this.navigationTransitions=(0,d.f3M)(y_),this.urlSerializer=(0,d.f3M)(fo),this.location=(0,d.f3M)(Ue),this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Cn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Lv(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),_d,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const _={...i};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(o.state=_)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,l,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Cd),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:l,queryParamsHandling:f,preserveFragment:_}=r,w=_?this.currentUrlTree.fragment:l;let b=null;switch(f){case"merge":b={...this.currentUrlTree.queryParams,...o};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=o||null}return null!==b&&(b=this.removeEmptyProps(b)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,b,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Fu(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,_d,null,r)}navigate(t,r={skipLocationChange:!1}){return function iS(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...PI}:!1===r?{...rS}:r,Fu(t))return re(this.currentUrlTree,t,i);const o=this.parseUrl(t);return re(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,l){if(this.disposed)return Promise.resolve(!1);let f,_,w,b;return l?(f=l.resolve,_=l.reject,w=l.promise):w=new Promise((A,P)=>{f=A,_=P}),b="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:b,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:f,reject:_,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(A=>Promise.reject(A))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-(this.browserPageId??this.currentPageId);0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),df=(()=>{class n{constructor(t,r,i,o,l,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=l,this.locationStrategy=f,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new qr.x;const _=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=t.events.subscribe(w=>{w instanceof _s&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||o||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ys),d.Y36(wr),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(gt))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&d.NdJ("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&d.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})();class ow{}let aw=(()=>{class n{constructor(t,r,i,o,l){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Ii(t=>t instanceof _s),Bs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=(0,d.MMx)(o.providers,t,`Route: ${o.path}`));const l=o._injector??t,f=o._loadedInjector??l;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(l,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(f,o.children??o._loadedRoutes))}return(0,rn.D)(i).pipe((0,Kl.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ut(null);const o=i.pipe((0,Jn.z)(l=>null===l?ut(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,rn.D)([o,l]).pipe((0,Kl.J)())}return o})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ys),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(ow),d.LFG(sw))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _g=new d.OlP("");let kI=(()=>{class n{constructor(t,r,i,o,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof eg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof _s&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Uu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Uu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();var _o=(()=>((_o=_o||{})[_o.COMPLETE=0]="COMPLETE",_o[_o.FAILED=1]="FAILED",_o[_o.REDIRECTING=2]="REDIRECTING",_o))();const yg=!1;function Td(n,e){return{\u0275kind:n,\u0275providers:e}}const lw=new d.OlP("",{providedIn:"root",factory:()=>!1});function vg(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(ys),i=n.get(FI);1===n.get(w_)&&r.initialNavigation(),n.get(LI,null,d.XFs.Optional)?.setUpPreloading(),n.get(_g,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const FI=new d.OlP(yg?"bootstrap done indicator":"",{factory:()=>new qr.x}),w_=new d.OlP(yg?"initial navigation":"",{providedIn:"root",factory:()=>1});function uS(){let n=[];return n=yg?[{provide:d.Xts,multi:!0,useFactory:()=>{const e=(0,d.f3M)(ys);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function rg(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Td(1,n)}const LI=new d.OlP(yg?"router preloader":"");function lS(n){return Td(0,[{provide:LI,useExisting:aw},{provide:ow,useExisting:n}])}const pf=!1,hS=new d.OlP(pf?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),cw=[Ue,{provide:fo,useClass:ud},ys,M,{provide:wr,useFactory:function uw(n){return n.routerState.root},deps:[ys]},sw,pf?{provide:lw,useValue:!0}:[]];function fS(){return new d.PXZ("Router",ys)}let pS=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[cw,pf&&r?.enableTracing?uS().\u0275providers:[],{provide:cf,multi:!0,useValue:t},{provide:hS,useFactory:BI,deps:[[ys,new d.FiY,new d.tp0]]},{provide:Bt,useValue:r||{}},r?.useHash?{provide:gt,useClass:Ne}:{provide:gt,useClass:Me},{provide:_g,useFactory:()=>{const n=(0,d.f3M)(cu),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(Bt),r=(0,d.f3M)(y_),i=(0,d.f3M)(fo);return t.scrollOffset&&n.setOffset(t.scrollOffset),new kI(i,r,n,e,t)}},r?.preloadingStrategy?lS(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:fS},r?.initialNavigation?mS(r):[],[{provide:jI,useFactory:vg},{provide:d.tb,multi:!0,useExisting:jI}]]}}static forChild(t){return{ngModule:n,providers:[{provide:cf,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(hS,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[tt]}),n})();function BI(n){if(pf&&n)throw new d.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function mS(n){return["disabled"===n.initialNavigation?Td(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(ys);return()=>{e.setUpLocationChangeListener()}}},{provide:w_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Td(2,[{provide:w_,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(fe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(ys),o=e.get(FI);(function WN(n,e){n.events.pipe(Ii(t=>t instanceof _s||t instanceof yd||t instanceof vd||t instanceof La),(0,ct.U)(t=>t instanceof _s||t instanceof La?_o.COMPLETE:t instanceof yd&&(0===t.code||1===t.code)?_o.REDIRECTING:_o.FAILED),Ii(t=>t!==_o.REDIRECTING),co(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(y_).afterPreactivation=()=>(r(!0),o.closed?ut(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const jI=new d.OlP(pf?"Router Initializer":"");var Sd=L(9260),Ad=L(4986),pn=L(4976);function mf(){return(0,vr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Xn.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}function dw(n,e=Us.y){return n=n??hw,(0,vr.e)((t,r)=>{let i,o=!0;t.subscribe((0,Xn.x)(r,l=>{const f=e(l);(o||!n(i,f))&&(o=!1,i=f,r.next(l))}))})}function hw(n,e){return n===e}var it,Mr=L(2011),I_=(L(3042),L(3942)),me=L(5861),is=L(6881),sa=L(4859),yo=L(1877),O=L(2090),HI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vo={},fw=fw||{},Dt=HI||self;function C_(){}function b_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function D_(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var T_="closure_uid_"+(1e9*Math.random()>>>0),_S=0;function yS(n,e,t){return n.call.apply(n.bind,arguments)}function vS(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ci(n,e,t){return(Ci=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yS:vS).apply(null,arguments)}function S_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function li(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,o){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function Ua(){this.s=this.s,this.o=this.o}Ua.prototype.s=!1,Ua.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function pw(n){Object.prototype.hasOwnProperty.call(n,T_)&&n[T_]||(n[T_]=++_S)}(this)},Ua.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const GI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function gw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function zI(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(b_(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let l=0;l<o;l++)n[i+l]=r[l]}else n.push(r)}}function Vi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Vi.prototype.h=function(){this.defaultPrevented=!0};var Ba=function(){if(!Dt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Dt.addEventListener("test",C_,e),Dt.removeEventListener("test",C_,e)}catch{}return n}();function _f(n){return/^[\s\xa0]*$/.test(n)}var qI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function mw(n,e){return n<e?-1:n>e?1:0}function Eg(){var n=Dt.navigator;return n&&(n=n.userAgent)?n:""}function ja(n){return-1!=Eg().indexOf(n)}function _w(n){return _w[" "](n),n}function WI(n,e,t){return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}_w[" "]=C_;var wf,n,yw=ja("Opera"),yf=ja("Trident")||ja("MSIE"),ZI=ja("Edge"),vf=ZI||yf,Ig=ja("Gecko")&&!(-1!=Eg().toLowerCase().indexOf("webkit")&&!ja("Edge"))&&!(ja("Trident")||ja("MSIE"))&&!ja("Edge"),A_=-1!=Eg().toLowerCase().indexOf("webkit")&&!ja("Edge");function ES(){var n=Dt.document;return n?n.documentMode:void 0}e:{var KI="",x_=(n=Eg(),Ig?/rv:([^\);]+)(\)|;)/.exec(n):ZI?/Edge\/([\d\.]+)/.exec(n):yf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):A_?/WebKit\/(\S+)/.exec(n):yw?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(x_&&(KI=x_?x_[1]:""),yf){var R_=ES();if(null!=R_&&R_>parseFloat(KI)){wf=String(R_);break e}}wf=KI}var YI={},M_=Dt.document&&yf&&(ES()||parseInt(wf,10))||void 0;function cc(n,e){if(Vi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ig){e:{try{_w(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:bg[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&cc.$.h.call(this)}}li(cc,Vi);var bg={2:"touch",3:"pen",4:"mouse"};cc.prototype.h=function(){cc.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Dg="closure_listenable_"+(1e6*Math.random()|0),XI=0;function JI(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++XI,this.fa=this.ia=!1}function N_(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function vw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Ef(n){const e={};for(const t in n)e[t]=n[t];return e}const eC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function IS(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<eC.length;o++)t=eC[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function P_(n){this.src=n,this.g={},this.h=0}function ww(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=GI(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(N_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ew(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==r)return i}return-1}P_.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var l=Ew(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new JI(e,this.src,o,!!r,i)).ia=t,n.push(e)),e};var Iw="closure_lm_"+(1e6*Math.random()|0),Cw={};function tC(n,e,t,r,i){if(r&&r.once)return O_(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)tC(n,e[o],t,r,i);return null}return t=Tw(t),n&&n[Dg]?n.O(e,t,D_(r)?!!r.capture:!!r,i):nC(n,e,t,!1,r,i)}function nC(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var l=D_(i)?!!i.capture:!!i,f=bw(n);if(f||(n[Iw]=f=new P_(n)),(t=f.add(e,t,r,l,o)).proxy)return t;if(r=function rC(){const e=CS;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Ba||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(sC(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function O_(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)O_(n,e[o],t,r,i);return null}return t=Tw(t),n&&n[Dg]?n.P(e,t,D_(r)?!!r.capture:!!r,i):nC(n,e,t,!0,r,i)}function iC(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)iC(n,e[o],t,r,i);else r=D_(r)?!!r.capture:!!r,t=Tw(t),n&&n[Dg]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ew(o=n.g[e],t,r,i))&&(N_(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=bw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ew(e,t,r,i)),(t=-1<n?e[n]:null)&&Tg(t))}function Tg(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Dg])ww(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(sC(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=bw(e))?(ww(t,n),0==t.h&&(t.src=null,e[Iw]=null)):N_(n)}}}function sC(n){return n in Cw?Cw[n]:Cw[n]="on"+n}function CS(n,e){if(n.fa)n=!0;else{e=new cc(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Tg(n),n=t.call(r,e)}return n}function bw(n){return(n=n[Iw])instanceof P_?n:null}var Dw="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tw(n){return"function"==typeof n?n:(n[Dw]||(n[Dw]=function(e){return n.handleEvent(e)}),n[Dw])}function ci(){Ua.call(this),this.i=new P_(this),this.S=this,this.J=null}function bi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Vi(e,n);else if(e instanceof Vi)e.target=e.target||n;else{var i=e;IS(e=new Vi(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var l=e.g=t[o];i=Sg(l,r,!0,e)&&i}if(i=Sg(l=e.g=n,r,!0,e)&&i,i=Sg(l,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Sg(l=e.g=t[o],r,!1,e)&&i}function Sg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var l=e[o];if(l&&!l.fa&&l.capture==t){var f=l.listener,_=l.la||l.src;l.ia&&ww(n.i,l),i=!1!==f.call(_,r)&&i}}return i&&!r.defaultPrevented}li(ci,Ua),ci.prototype[Dg]=!0,ci.prototype.removeEventListener=function(n,e,t,r){iC(this,n,e,t,r)},ci.prototype.N=function(){if(ci.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)N_(t[r]);delete n.g[e],n.h--}}this.J=null},ci.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ci.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var k_=Dt.JSON.stringify;function bS(){var n=oa;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Aw,Sw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new XN,n=>n.reset());class XN{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function F_(n){Dt.setTimeout(()=>{throw n},0)}function oC(n,e){Aw||function xw(){var n=Dt.Promise.resolve(void 0);Aw=function(){n.then(Ag)}}(),Rw||(Aw(),Rw=!0),oa.add(n,e)}var Rw=!1,oa=new class QN{constructor(){this.h=this.g=null}add(e,t){const r=Sw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Ag(){for(var n;n=bS();){try{n.h.call(n.g)}catch(t){F_(t)}var e=Sw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Rw=!1}function Kr(n,e){ci.call(this),this.h=n||1,this.g=e||Dt,this.j=Ci(this.qb,this),this.l=Date.now()}function Gu(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function If(n,e,t){if("function"==typeof n)t&&(n=Ci(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ci(n.handleEvent,n)}return 2147483647<Number(e)?-1:Dt.setTimeout(n,e||0)}function Gs(n){n.g=If(()=>{n.g=null,n.i&&(n.i=!1,Gs(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}li(Kr,ci),(it=Kr.prototype).ga=!1,it.T=null,it.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),bi(this,"tick"),this.ga&&(Gu(this),this.start()))}},it.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.N=function(){Kr.$.N.call(this),Gu(this),delete this.g};class Mw extends Ua{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Gs(this)}N(){super.N(),this.g&&(Dt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ha(n){Ua.call(this),this.h=n,this.g={}}li(Ha,Ua);var xd=[];function Rd(n,e,t,r){Array.isArray(t)||(t&&(xd[0]=t.toString()),t=xd);for(var i=0;i<t.length;i++){var o=tC(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function Md(n){vw(n.g,function(e,t){this.g.hasOwnProperty(t)&&Tg(e)},n),n.g={}}function zu(){this.g=!0}function aa(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function aC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var l=1;l<i.length;l++)i[l]=""}}}return k_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ha.prototype.N=function(){Ha.$.N.call(this),Md(this)},Ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zu.prototype.Ea=function(){this.g=!1},zu.prototype.info=function(){};var dc={},Nw=null;function xg(){return Nw=Nw||new ci}function Pw(n){Vi.call(this,dc.Ta,n)}function Tf(n){const e=xg();bi(e,new Pw(e))}function Ow(n,e){Vi.call(this,dc.STAT_EVENT,n),this.stat=e}function Ui(n){const e=xg();bi(e,new Ow(e,n))}function kw(n,e){Vi.call(this,dc.Ua,n),this.size=e}function Rg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Dt.setTimeout(function(){n()},e)}dc.Ta="serverreachability",li(Pw,Vi),dc.STAT_EVENT="statevent",li(Ow,Vi),dc.Ua="timingevent",li(kw,Vi);var L_={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Fw={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Lw(){}function V_(){}Lw.prototype.h=null;var Af,Nd={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Uw(){Vi.call(this,"d")}function Sf(){Vi.call(this,"c")}function xf(){}function Mg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Ha(this),this.P=Bw,this.V=new Kr(n=vf?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new U_}function U_(){this.i=null,this.g="",this.h=!1}li(Uw,Vi),li(Sf,Vi),li(xf,Lw),xf.prototype.g=function(){return new XMLHttpRequest},xf.prototype.i=function(){return{}},Af=new xf;var Bw=45e3,B_={},Ng={};function Pg(n,e,t){n.L=1,n.v=Ug(Ga(e)),n.s=t,n.S=!0,jw(n,null)}function jw(n,e){n.G=Date.now(),Og(n),n.A=Ga(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),hC(t.i,"t",r),n.C=0,t=n.l.I,n.h=new U_,n.g=bC(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Mw(Ci(n.Pa,n,n.g),n.O)),Rd(n.U,n.g,"readystatechange",n.nb),e=n.I?Ef(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Tf(),function Cf(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var l="",f=o.split("&"),_=0;_<f.length;_++){var w=f[_].split("=");if(1<w.length){var b=w[0];w=w[1];var A=b.split("_");l=2<=A.length&&"type"==A[1]?l+(b+"=")+w+"&":l+(b+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function $w(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function j_(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=uC(n,t),i==Ng){4==e&&(n.o=4,Ui(14),r=!1),aa(n.j,n.m,null,"[Incomplete Response]");break}if(i==B_){n.o=4,Ui(15),aa(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}aa(n.j,n.m,i,null),Gw(n,i)}$w(n)&&i!=Ng&&i!=B_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ui(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ca&&(n.ca=!0,(e=n.l).g==n&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),W_(e),e.L=!0,Ui(11))):(aa(n.j,n.m,t,"[Invalid Chunked Response]"),hc(n),Rf(n))}function uC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ng:(t=Number(e.substring(t,r)),isNaN(t)?B_:(r+=1)+t>e.length?Ng:(e=e.substr(r,t),n.C=r+t,e))}function Og(n){n.Y=Date.now()+n.P,Hw(n,n.P)}function Hw(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Rg(Ci(n.lb,n),e)}function kg(n){n.B&&(Dt.clearTimeout(n.B),n.B=null)}function Rf(n){0==n.l.H||n.J||u0(n.l,n)}function hc(n){kg(n);var e=n.M;e&&"function"==typeof e.ra&&e.ra(),n.M=null,Gu(n.V),Md(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.ra())}function Gw(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Yw(t.h,n)))if(!n.K&&Yw(t.h,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Wg(t),z_(t)}q_(t),Ui(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.M&&0==t.A&&!t.v&&(t.v=Rg(Ci(t.ib,t),6e3));if(1>=Kw(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else Vd(t,11)}else if((n.K||t.g==n)&&Wg(t),!_f(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.V=w[0],w=w[1],2==t.H)if("c"==w[0]){t.J=w[1],t.oa=w[2];const b=w[3];null!=b&&(t.qa=b,t.j.info("VER="+t.qa));const A=w[4];null!=A&&(t.Ga=A,t.j.info("SVER="+t.Ga));const P=w[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const q=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(q){var o=r.h;o.g||-1==q.indexOf("spdy")&&-1==q.indexOf("quic")&&-1==q.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(H_(o,o.h),o.h=null))}if(r.F){const oe=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;oe&&(r.Da=oe,Gn(r.G,r.F,oe))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-n.G,t.j.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=CC(r,r.I?r.oa:null,r.Y),l.K){Qw(r.h,l);var f=l,_=r.K;_&&f.setTimeout(_),f.B&&(kg(f),Og(f)),r.g=l}else o0(r);0<t.i.length&&zg(t)}else"stop"!=w[0]&&"close"!=w[0]||Vd(t,7);else 3==t.H&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Vd(t,7):Of(t):"noop"!=w[0]&&t.l&&t.l.Aa(w),t.A=0)}Tf()}catch{}}function $_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(b_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function TS(n){if(n.sa&&"function"==typeof n.sa)return n.sa();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(b_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function DS(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(b_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(it=Mg.prototype).setTimeout=function(n){this.P=n},it.nb=function(n){n=n.target;const e=this.M;e&&3==qu(n)?e.l():this.Pa(n)},it.Pa=function(n){try{if(n==this.g)e:{const b=qu(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||vf||this.g&&(this.h.h||this.g.ja()||Jw(this.g)))){this.J||4!=b||7==e||Tf(),kg(this);var t=this.g.da();this.aa=t;t:if($w(this)){var r=Jw(this.g);n="";var i=r.length,o=4==qu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){hc(this),Rf(this);var l="";break t}this.h.i=new Dt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function bf(n,e,t,r,i,o,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+l})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_f(f)){var w=f;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Ui(12),hc(this),Rf(this);break e}aa(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gw(this,t)}this.S?(j_(this,b,l),vf&&this.i&&3==b&&(Rd(this.U,this.V,"tick",this.mb),this.V.start())):(aa(this.j,this.m,l,null),Gw(this,l)),4==b&&hc(this),this.i&&!this.J&&(4==b?u0(this.l,this):(this.i=!1,Og(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ui(12)):(this.o=0,Ui(13)),hc(this),Rf(this)}}}catch{}},it.mb=function(){if(this.g){var n=qu(this.g),e=this.g.ja();this.C<e.length&&(kg(this),j_(this,n,e),this.i&&4!=n&&Og(this))}},it.cancel=function(){this.J=!0,hc(this)},it.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Df(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Tf(),Ui(17)),hc(this),this.o=2,Rf(this)):Hw(this,this.Y-n)};var Fg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fc(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof fc){this.h=void 0!==e?e:n.h,Lg(this,n.j),this.s=n.s,this.g=n.g,Vg(this,n.m),this.l=n.l,e=n.i;var t=new Od;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),zw(this,t),this.o=n.o}else n&&(t=String(n).match(Fg))?(this.h=!!e,Lg(this,t[1]||"",!0),this.s=pc(t[2]||""),this.g=pc(t[3]||"",!0),Vg(this,t[4]),this.l=pc(t[5]||"",!0),zw(this,t[6]||"",!0),this.o=pc(t[7]||"")):(this.h=!!e,this.i=new Od(null,this.h))}function Ga(n){return new fc(n)}function Lg(n,e,t){n.j=t?pc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Vg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function zw(n,e,t){e instanceof Od?(n.i=e,function RS(n,e){e&&!n.j&&(kd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(xS(this,r),hC(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=wo(e,Ww)),n.i=new Od(e,n.h))}function Gn(n,e,t){n.i.set(e,t)}function Ug(n){return Gn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function pc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function wo(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,SS),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function SS(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}fc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(wo(e,cC,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(wo(e,cC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(wo(t,"/"==t.charAt(0)?Pd:qw,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",wo(t,AS)),n.join("")};var cC=/[#\/\?@]/g,qw=/[#\?:]/g,Pd=/[#\?]/g,Ww=/[#\?@]/g,AS=/#/g;function Od(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function kd(n){n.g||(n.g=new Map,n.h=0,n.i&&function lC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function xS(n,e){kd(n),e=Fd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function dC(n,e){return kd(n),e=Fd(n,e),n.g.has(e)}function hC(n,e,t){xS(n,e),0<t.length&&(n.i=null,n.g.set(Fd(n,e),gw(t)),n.h+=t.length)}function Fd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Zw(n){this.l=n||MS,n=Dt.PerformanceNavigationTiming?0<(n=Dt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Dt.g&&Dt.g.Ka&&Dt.g.Ka()&&Dt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=Od.prototype).add=function(n,e){kd(this),this.i=null,n=Fd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){kd(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},it.sa=function(){kd(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},it.Z=function(n){kd(this);let e=[];if("string"==typeof n)dC(this,n)&&(e=e.concat(this.g.get(Fd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},it.set=function(n,e){return kd(this),this.i=null,dC(this,n=Fd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=o;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var MS=10;function fC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Kw(n){return n.h?1:n.g?n.g.size:0}function Yw(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function H_(n,e){n.g?n.g.add(e):n.h=e}function Qw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Ld(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return gw(n.i)}function Xw(){}function NS(){this.g=new Xw}function pC(n,e,t){const r=t||"";try{$_(n,function(i,o){let l=i;D_(i)&&(l=k_(i)),e.push(r+o+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Bg(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function G_(n){this.l=n.fc||null,this.j=n.ob||!1}function jg(n,e){ci.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=$g,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Zw.prototype.cancel=function(){if(this.i=Ld(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Xw.prototype.stringify=function(n){return Dt.JSON.stringify(n,void 0)},Xw.prototype.parse=function(n){return Dt.JSON.parse(n,void 0)},li(G_,Lw),G_.prototype.g=function(){return new jg(this.l,this.j)},G_.prototype.i=function(n){return function(){return n}}({}),li(jg,ci);var $g=0;function ua(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Hg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Gg(n)}function Gg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=jg.prototype).open=function(n,e){if(this.readyState!=$g)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Gg(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Dt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hg(this)),this.readyState=$g},it.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Gg(this)),this.g&&(this.readyState=3,Gg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Dt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ua(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},it.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Hg(this):Gg(this),3==this.readyState&&ua(this)}},it.Za=function(n){this.g&&(this.response=this.responseText=n,Hg(this))},it.Ya=function(n){this.g&&(this.response=n,Hg(this))},it.ka=function(){this.g&&Hg(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(jg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var za=Dt.JSON.parse;function wn(n){ci.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Eo,this.L=this.M=!1}li(wn,ci);var Eo="",gC=/^https?$/i,mC=["POST","PUT"];function _C(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,yC(n),Mf(n)}function yC(n){n.F||(n.F=!0,bi(n,"complete"),bi(n,"error"))}function vC(n){if(n.h&&typeof fw<"u"&&(!n.C[1]||4!=qu(n)||2!=n.da()))if(n.v&&4==qu(n))If(n.La,0,n);else if(bi(n,"readystatechange"),4==qu(n)){n.h=!1;try{const f=n.da();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.I).match(Fg)[1]||null;if(!i&&Dt.self&&Dt.self.location){var o=Dt.self.location.protocol;i=o.substr(0,o.length-1)}r=!gC.test(i?i.toLowerCase():"")}t=r}if(t)bi(n,"complete"),bi(n,"success");else{n.m=6;try{var l=2<qu(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.da()+"]",yC(n)}}finally{Mf(n)}}}function Mf(n,e){if(n.g){Nf(n);const t=n.g,r=n.C[0]?C_:null;n.g=null,n.C=null,e||bi(n,"ready");try{t.onreadystatechange=r}catch{}}}function Nf(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Dt.clearTimeout(n.A),n.A=null)}function qu(n){return n.g?n.g.readyState:0}function Jw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Eo:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function wC(n){let e="";return vw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function e0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=wC(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Gn(n,e,t))}function Pf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function t0(n){this.Ga=0,this.i=[],this.j=new zu,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Pf("failFast",!1,n),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Pf("baseRetryDelayMs",5e3,n),this.hb=Pf("retryDelaySeedMs",1e4,n),this.eb=Pf("forwardChannelMaxRetries",2,n),this.xa=Pf("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.K=void 0,this.I=n&&n.supportsCrossDomainXhr||!1,this.J="",this.h=new Zw(n&&n.concurrentRequestLimit),this.Ja=new NS,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.j.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Of(n){if(n0(n),3==n.H){var e=n.W++,t=Ga(n.G);Gn(t,"SID",n.J),Gn(t,"RID",e),Gn(t,"TYPE","terminate"),kf(n,t),(e=new Mg(n,n.j,e,void 0)).L=2,e.v=Ug(Ga(t)),t=!1,Dt.navigator&&Dt.navigator.sendBeacon&&(t=Dt.navigator.sendBeacon(e.v.toString(),"")),!t&&Dt.Image&&((new Image).src=e.v,t=!0),t||(e.g=bC(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Og(e)}IC(n)}function z_(n){n.g&&(W_(n),n.g.cancel(),n.g=null)}function n0(n){z_(n),n.u&&(Dt.clearTimeout(n.u),n.u=null),Wg(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Dt.clearTimeout(n.m),n.m=null)}function zg(n){fC(n.h)||n.m||(n.m=!0,oC(n.Na,n),n.C=0)}function qg(n,e){var t;t=e?e.m:n.W++;const r=Ga(n.G);Gn(r,"SID",n.J),Gn(r,"RID",t),Gn(r,"AID",n.V),kf(n,r),n.o&&n.s&&e0(r,n.o,n.s),t=new Mg(n,n.j,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.i=e.F.concat(n.i)),e=s0(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),H_(n.h,t),Pg(t,r,e)}function kf(n,e){n.ma&&vw(n.ma,function(t,r){Gn(e,r,t)}),n.l&&$_({},function(t,r){Gn(e,r,t)})}function s0(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Ci(n.l.Va,n.l,n):null;e:{var i=n.i;let o=-1;for(;;){const l=["count="+t];-1==o?0<t?(o=i[0].h,l.push("ofs="+o)):o=0:l.push("ofs="+o);let f=!0;for(let _=0;_<t;_++){let w=i[_].h;const b=i[_].g;if(w-=o,0>w)o=Math.max(0,i[_].h-100),f=!1;else try{pC(b,l,"req"+w+"_")}catch{r&&r(b)}}if(f){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.F=n,r}function o0(n){n.g||n.u||(n.ba=1,oC(n.Ma,n),n.A=0)}function q_(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Rg(Ci(n.Ma,n),EC(n,n.A)),n.A++,0))}function W_(n){null!=n.B&&(Dt.clearTimeout(n.B),n.B=null)}function a0(n){n.g=new Mg(n,n.j,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ga(n.wa);Gn(e,"RID","rpc"),Gn(e,"SID",n.J),Gn(e,"CI",n.M?"0":"1"),Gn(e,"AID",n.V),Gn(e,"TYPE","xmlhttp"),kf(n,e),n.o&&n.s&&e0(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.oa,t.L=1,t.v=Ug(Ga(e)),t.s=null,t.S=!0,jw(t,n)}function Wg(n){null!=n.v&&(Dt.clearTimeout(n.v),n.v=null)}function u0(n,e){var t=null;if(n.g==e){Wg(n),W_(n),n.g=null;var r=2}else{if(!Yw(n.h,e))return;t=e.F,Qw(n.h,e),r=1}if(0!=n.H)if(n.ta=e.aa,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;bi(r=xg(),new kw(r,t)),zg(n)}else o0(n);else if(3==(i=e.o)||0==i&&0<n.ta||!(1==r&&function r0(n,e){return!(Kw(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.F.concat(n.i),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Rg(Ci(n.Na,n,e),EC(n,n.C)),n.C++,0)))}(n,e)||2==r&&q_(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Vd(n,5);break;case 4:Vd(n,10);break;case 3:Vd(n,6);break;default:Vd(n,2)}}function EC(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.l||(t*=2),t*e}function Vd(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Ci(n.pb,n);t||(t=new fc("//www.google.com/images/cleardot.gif"),Dt.location&&"http"==Dt.location.protocol||Lg(t,"https"),Ug(t)),function PS(n,e){const t=new zu;if(Dt.Image){const r=new Image;r.onload=S_(Bg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=S_(Bg,t,r,"TestLoadImage: error",!1,e),r.onabort=S_(Bg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=S_(Bg,t,r,"TestLoadImage: timeout",!1,e),Dt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ui(2);n.H=0,n.l&&n.l.za(e),IC(n),n0(n)}function IC(n){if(n.H=0,n.pa=[],n.l){const e=Ld(n.h);(0!=e.length||0!=n.i.length)&&(zI(n.pa,e),zI(n.pa,n.i),n.h.i.length=0,gw(n.i),n.i.length=0),n.l.ya()}}function CC(n,e,t){var r=t instanceof fc?Ga(t):new fc(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Vg(r,r.m);else{var i=Dt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new fc(null,void 0);r&&Lg(o,r),e&&(o.g=e),i&&Vg(o,i),t&&(o.l=t),r=o}return e=n.Da,(t=n.F)&&e&&Gn(r,t,e),Gn(r,"VER",n.qa),kf(n,r),r}function bC(n,e,t){if(e&&!n.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wn(t&&n.Ha&&!n.va?new G_({ob:!0}):n.va)).Oa(n.I),e}function DC(){}function Z_(){if(yf&&!(10<=Number(M_)))throw Error("Environmental error: no available transport.")}function zs(n,e){ci.call(this),this.g=new t0(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!_f(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_f(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ff(this)}function TC(n){Uw.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function SC(){Sf.call(this),this.status=1}function Ff(n){this.g=n}function la(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function l0(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var o=n.g[3],l=(e=n.g[0])+(o^(t=n.g[1])&((i=n.g[2])^o))+r[0]+3614090360&4294967295;l=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=t+(l<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^t&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^t&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^t&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^o&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^o&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^o&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^o&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^o)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~o))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(o|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~o))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(o|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~o))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(o|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((o=(e=t+((l=e+(i^(t|~o))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=o+((l=i+(e^(o|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+o&4294967295}function An(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var o=0|n[i];r&&o==e||(t[i]=o,r=!1)}this.g=t}(it=wn.prototype).Oa=function(n){this.M=n},it.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Af.g(),this.C=function Vw(n){return n.h||(n.h=n.i())}(this.u?this.u:Af),this.g.onreadystatechange=Ci(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){return void _C(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=Dt.FormData&&n instanceof Dt.FormData,!(0<=GI(mC,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,l]of t)this.g.setRequestHeader(o,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Nf(this),0<this.B&&((this.L=function OS(n){return yf&&function QI(){return WI(YI,9,function(){let n=0;const e=qI(String(wf)).split("."),t=qI("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",o=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;n=mw(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||mw(0==i[2].length,0==o[2].length)||mw(i[2],o[2]),i=i[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ci(this.ua,this)):this.A=If(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){_C(this,o)}},it.ua=function(){typeof fw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bi(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,bi(this,"complete"),bi(this,"abort"),Mf(this))},it.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mf(this,!0)),wn.$.N.call(this)},it.La=function(){this.s||(this.G||this.v||this.l?vC(this):this.kb())},it.kb=function(){vC(this)},it.da=function(){try{return 2<qu(this)?this.g.status:-1}catch{return-1}},it.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},it.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),za(e)}},it.Ia=function(){return this.m},it.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=t0.prototype).qa=8,it.H=1,it.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Mg(this,this.j,n,void 0);let o=this.s;if(this.U&&(o?(o=Ef(o),IS(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=s0(this,i,e),Gn(t=Ga(this.G),"RID",n),Gn(t,"CVER",22),this.F&&Gn(t,"X-HTTP-Session-Id",this.F),kf(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(wC(o)))+"&"+e:this.o&&e0(t,this.o,o)),H_(this.h,i),this.bb&&Gn(t,"TYPE","init"),this.P?(Gn(t,"$req",e),Gn(t,"SID","null"),i.ba=!0,Pg(i,t,null)):Pg(i,t,e),this.H=2}}else 3==this.H&&(n?qg(this,n):0==this.i.length||fC(this.h)||qg(this))},it.Ma=function(){if(this.u=null,a0(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var n=2*this.S;this.j.info("BP detection timer enabled: "+n),this.B=Rg(Ci(this.jb,this),n)}},it.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Ui(10),z_(this),a0(this))},it.ib=function(){null!=this.v&&(this.v=null,z_(this),q_(this),Ui(19))},it.pb=function(n){n?(this.j.info("Successfully pinged google.com"),Ui(2)):(this.j.info("Failed to ping google.com"),Ui(1))},(it=DC.prototype).Ba=function(){},it.Aa=function(){},it.za=function(){},it.ya=function(){},it.Va=function(){},Z_.prototype.g=function(n,e){return new zs(n,e)},li(zs,ci),zs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var n=this.g,e=this.l,t=this.h||void 0;Ui(0),n.Y=e,n.ma=t||{},n.M=n.aa,n.G=CC(n,null,n.Y),zg(n)},zs.prototype.close=function(){Of(this.g)},zs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=k_(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.fb++,n)),3==e.H&&zg(e)},zs.prototype.N=function(){this.g.l=null,delete this.j,Of(this.g),delete this.g,zs.$.N.call(this)},li(TC,Uw),li(SC,Sf),li(Ff,DC),Ff.prototype.Ba=function(){bi(this.g,"a")},Ff.prototype.Aa=function(n){bi(this.g,new TC(n))},Ff.prototype.za=function(n){bi(this.g,new SC)},Ff.prototype.ya=function(){bi(this.g,"b")},li(la,function kS(){this.blockSize=-1}),la.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},la.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=t;)l0(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<e;)if(r[i++]=n.charCodeAt(o++),i==this.blockSize){l0(this,r),i=0;break}}else for(;o<e;)if(r[i++]=n[o++],i==this.blockSize){l0(this,r),i=0;break}}this.h=i,this.i+=e},la.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var FS={};function c0(n){return-128<=n&&128>n?WI(FS,n,function(e){return new An([0|e],0>e?-1:0)}):new An([0|n],0>n?-1:0)}function qa(n){if(isNaN(n)||!isFinite(n))return Ud;if(0>n)return di(qa(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=K_;return new An(e,0)}var K_=4294967296,Ud=c0(0),Y_=c0(1),h0=c0(16777216);function Wa(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function qs(n){return-1==n.h}function di(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new An(t,~n.h).add(Y_)}function Zg(n,e){return n.add(di(e))}function Kg(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Lf(n,e){this.g=n,this.h=e}function Za(n,e){if(Wa(e))throw Error("division by zero");if(Wa(n))return new Lf(Ud,Ud);if(qs(n))return e=Za(di(n),e),new Lf(di(e.g),di(e.h));if(qs(e))return e=Za(n,di(e)),new Lf(di(e.g),e.h);if(30<n.g.length){if(qs(n)||qs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Y_,r=e;0>=r.X(n);)t=AC(t),r=AC(r);var i=Vf(t,1),o=Vf(r,1);for(r=Vf(r,2),t=Vf(t,2);!Wa(r);){var l=o.add(r);0>=l.X(n)&&(i=i.add(t),o=l),r=Vf(r,1),t=Vf(t,1)}return e=Zg(n,i.R(e)),new Lf(i,e)}for(i=Ud;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(o=qa(t)).R(e);qs(l)||0<l.X(n);)l=(o=qa(t-=r)).R(e);Wa(o)&&(o=Y_),i=i.add(o),n=Zg(n,l)}return new Lf(i,n)}function AC(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new An(t,n.h)}function Vf(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],o=0;o<r;o++)i[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new An(i,n.h)}(it=An.prototype).ea=function(){if(qs(this))return-di(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:K_+r)*e,e*=K_}return n},it.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Wa(this))return"0";if(qs(this))return"-"+di(this).toString(n);for(var e=qa(Math.pow(n,6)),t=this,r="";;){var i=Za(t,e).g,o=((0<(t=Zg(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Wa(t=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},it.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},it.X=function(n){return qs(n=Zg(this,n))?-1:Wa(n)?0:1},it.abs=function(){return qs(this)?di(this):this},it.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&n.D(i)),l=(o>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(o&=65535)}return new An(t,-2147483648&t[t.length-1]?-1:0)},it.R=function(n){if(Wa(this)||Wa(n))return Ud;if(qs(this))return qs(n)?di(this).R(di(n)):di(di(this).R(n));if(qs(n))return di(this.R(di(n)));if(0>this.X(h0)&&0>n.X(h0))return qa(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var o=this.D(r)>>>16,l=65535&this.D(r),f=n.D(i)>>>16,_=65535&n.D(i);t[2*r+2*i]+=l*_,Kg(t,2*r+2*i),t[2*r+2*i+1]+=o*_,Kg(t,2*r+2*i+1),t[2*r+2*i+1]+=l*f,Kg(t,2*r+2*i+1),t[2*r+2*i+2]+=o*f,Kg(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new An(t,0)},it.gb=function(n){return Za(this,n).h},it.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new An(t,this.h&n.h)},it.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new An(t,this.h|n.h)},it.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new An(t,this.h^n.h)},Z_.prototype.createWebChannel=Z_.prototype.g,zs.prototype.send=zs.prototype.u,zs.prototype.open=zs.prototype.m,zs.prototype.close=zs.prototype.close,L_.NO_ERROR=0,L_.TIMEOUT=8,L_.HTTP_ERROR=6,Fw.COMPLETE="complete",V_.EventType=Nd,Nd.OPEN="a",Nd.CLOSE="b",Nd.ERROR="c",Nd.MESSAGE="d",ci.prototype.listen=ci.prototype.O,wn.prototype.listenOnce=wn.prototype.P,wn.prototype.getLastError=wn.prototype.Sa,wn.prototype.getLastErrorCode=wn.prototype.Ia,wn.prototype.getStatus=wn.prototype.da,wn.prototype.getResponseJson=wn.prototype.Wa,wn.prototype.getResponseText=wn.prototype.ja,wn.prototype.send=wn.prototype.ha,wn.prototype.setWithCredentials=wn.prototype.Oa,la.prototype.digest=la.prototype.l,la.prototype.reset=la.prototype.reset,la.prototype.update=la.prototype.j,An.prototype.add=An.prototype.add,An.prototype.multiply=An.prototype.R,An.prototype.modulo=An.prototype.gb,An.prototype.compare=An.prototype.X,An.prototype.toNumber=An.prototype.ea,An.prototype.toString=An.prototype.toString,An.prototype.getBits=An.prototype.D,An.fromNumber=qa,An.fromString=function d0(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return di(d0(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=qa(Math.pow(e,8)),r=Ud,i=0;i<n.length;i+=8){var o=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+o),e);8>o?(o=qa(Math.pow(e,o)),r=r.R(o).add(qa(l))):r=(r=r.R(t)).add(qa(l))}return r};var Uf=vo.createWebChannelTransport=function(){return new Z_},JN=vo.getStatEventTarget=function(){return xg()},Yg=vo.ErrorCode=L_,eP=vo.EventType=Fw,xC=vo.Event=dc,f0=vo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},tP=vo.FetchXmlHttpFactory=G_,St=vo.WebChannel=V_,LS=vo.XhrIo=wn,VS=vo.Md5=la,Bf=vo.Integer=An;const Bd="@firebase/firestore";class hi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hi.UNAUTHENTICATED=new hi(null),hi.GOOGLE_CREDENTIALS=new hi("google-credentials-uid"),hi.FIRST_PARTY=new hi("first-party-uid"),hi.MOCK_USER=new hi("mock-user");let Wu="9.21.0";const ca=new yo.Yd("@firebase/firestore");function er(){return ca.logLevel}function Fe(n,...e){if(ca.logLevel<=yo.in.DEBUG){const t=e.map(Q_);ca.debug(`Firestore (${Wu}): ${n}`,...t)}}function Er(n,...e){if(ca.logLevel<=yo.in.ERROR){const t=e.map(Q_);ca.error(`Firestore (${Wu}): ${n}`,...t)}}function Io(n,...e){if(ca.logLevel<=yo.in.WARN){const t=e.map(Q_);ca.warn(`Firestore (${Wu}): ${n}`,...t)}}function Q_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function at(n="Unexpected state"){const e=`FIRESTORE (${Wu}) INTERNAL ASSERTION FAILED: `+n;throw Er(e),new Error(e)}function wt(n,e){n||at()}function Je(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends O.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class cr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class MC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class US{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hi.UNAUTHENTICATED))}shutdown(){}}class BS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class X_{constructor(e){this.t=e,this.currentUser=hi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new cr,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const w=l;e.enqueueRetryable((0,me.Z)(function*(){yield w.promise,yield o(r.currentUser)}))},_=w=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new cr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new MC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new hi(e)}}class NC{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=hi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class PC{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new NC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(hi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class p0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jS{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=o=>{null!=o.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.T;return this.T=o.token,Fe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?i(o):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.T=t.token,new p0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Qg(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class OC{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Qg(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function jt(n,e){return n<e?-1:n>e?1:0}function jf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function g0(n){return n+"\0"}class zn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zn.fromMillis(Date.now())}static fromDate(e){return zn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new zn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new zn(0,0))}static max(){return new It(new zn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Xg{constructor(e,t,r){void 0===t?t=0:t>e.length&&at(),void 0===r?r=e.length-t:r>e.length-t&&at(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Xg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),l=t.get(i);if(o<l)return-1;if(o>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fn extends Xg{construct(e,t,r){return new fn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const $S=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ir extends Xg{construct(e,t,r){return new Ir(e,t,r)}static isValidIdentifier(e){return $S.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ir.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ir(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Ae(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Ae(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ae(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(o(),i++)}if(o(),l)throw new Ae(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ir(t)}static emptyPath(){return new Ir([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(fn.fromString(e))}static fromName(e){return new Qe(fn.fromString(e).popFirst(5))}static empty(){return new Qe(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new fn(e.slice()))}}class m0{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function kC(n){return n.fields.find(e=>2===e.kind)}function $f(n){return n.fields.filter(e=>2!==e.kind)}m0.UNKNOWN_ID=-1;class jd{constructor(e,t){this.fieldPath=e,this.kind=t}}class Jg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Jg(0,Ws.min())}}function _0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=It.fromTimestamp(1e9===r?new zn(t+1,0):new zn(t,r));return new Ws(i,Qe.empty(),e)}function Hf(n){return new Ws(n.readTime,n.key,-1)}class Ws{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ws(It.min(),Qe.empty(),-1)}static max(){return new Ws(It.max(),Qe.empty(),-1)}}function y0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:jt(n.largestBatchId,e.largestBatchId))}const LC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function $d(n){return v0.apply(this,arguments)}function v0(){return v0=(0,me.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==LC)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),v0.apply(this,arguments)}class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let i=0,o=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++o,l&&o===i&&t()},_=>r(_))}),l=!0,o===i&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(i=>i?ne.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,i)=>{const o=e.length,l=new Array(o);let f=0;for(let _=0;_<o;_++){const w=_;t(e[w]).next(b=>{l[w]=b,++f,f===o&&r(l)},b=>i(b))}})}static doWhile(e,t){return new ne((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class ey{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new cr,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new tm(e,t.error)):this.R.resolve()},this.transaction.onerror=r=>{const i=ty(r.target.error);this.R.reject(new tm(e,i))}}static open(e,t,r,i){try{return new ey(t,e.transaction(i,r))}catch(o){throw new tm(t,o)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new GS(t)}}class da{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===da.S((0,O.z$)())&&Er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),gc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,O.hl)())return!1;if(da.C())return!0;const e=(0,O.z$)(),t=da.S(e),r=0<t&&t<10,i=da.N(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,me.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=l=>{r(l.target.result)},o.onblocked=()=>{i(new tm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new Ae(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ae(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new tm(e,f))},o.onupgradeneeded=l=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.$(l.target.result,o.transaction,l.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,me.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{o.db=yield o.O(e);const _=ey.open(o.db,e,l?"readonly":"readwrite",r),w=i(_).next(b=>(_.P(),b)).catch(b=>(_.abort(b),ne.reject(b))).toPromise();return w.catch(()=>{}),yield _.v,w}catch(_){const w=_,b="FirebaseError"!==w.name&&f<3;if(Fe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",b),o.close(),!b)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class em{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return gc(this.L.delete())}}class tm extends Ae{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Zu(n){return"IndexedDbTransactionError"===n.name}class GS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),gc(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),gc(this.store.add(e))}get(e){return gc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),gc(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),gc(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.W(i,(l,f)=>{o.push(f)}).next(()=>o)}{const i=this.store.getAll(r.range);return new ne((o,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{o(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ne((i,o)=>{r.onerror=l=>{o(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(o,l,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ne((r,i)=>{t.onerror=o=>{const l=ty(o.target.error);i(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}W(e,t){const r=[];return new ne((i,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const _=new em(f),w=t(f.primaryKey,f.value,_);if(w instanceof ne){const b=w.catch(A=>(_.done(),ne.reject(A)));r.push(b)}_.isDone?i():null===_.K?f.continue():f.continue(_.K)}}).next(()=>ne.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function gc(n){return new ne((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=ty(r.target.error);t(i)}})}let UC=!1;function ty(n){const e=da.S((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return UC||(UC=!0,setTimeout(()=>{throw r},0)),r}}return n}class zS{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{Fe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Zu(r)?Fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield $d(r)}yield t.et(6e4)}))}}class w0{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,o=!0;return ne.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Fe("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(f=>{i-=f,r.add(l)});o=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,o)).next(f=>(Fe("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,o)=>{const l=Hf(o);y0(l,r)>0&&(r=l)}),new Ws(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Zs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Gf(n){return null==n}function zf(n){return 0===n&&1/n==-1/0}function BC(n){return"number"==typeof n&&Number.isInteger(n)&&!zf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Bi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ny(e)),e=qS(n.get(t),e);return ny(e)}function qS(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function ny(n){return n+"\x01\x01"}function Ka(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),fn.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const l=n.indexOf("\x01",o);switch((l<0||l>t)&&at(),n.charAt(l+1)){case"\x01":const f=n.substring(o,l);let _;0===i.length?_=f:(i+=f,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(o,l),i+="\0";break;case"\x11":i+=n.substring(o,l+1);break;default:at()}o=l+2}return new fn(r)}const E0=["userId","batchId"];function ry(n,e){return[n,Bi(e)]}function jC(n,e,t){return[n,Bi(e),t]}const WS={},ZS=["prefixPath","collectionGroup","readTime","documentId"],KS=["prefixPath","collectionGroup","documentId"],YS=["collectionGroup","readTime","prefixPath","documentId"],QS=["canonicalId","targetId"],XS=["targetId","path"],$C=["path","targetId"],HC=["collectionId","parent"],JS=["indexId","uid"],eA=["uid","sequenceNumber"],GC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tA=["indexId","uid","orderedDocumentKey"],nA=["userId","collectionPath","documentId"],rA=["userId","collectionPath","largestBatchId"],I0=["userId","collectionGroup","largestBatchId"],iy=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zC=[...iy,"documentOverlays"],sy=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qC=sy,iA=[...qC,"indexConfiguration","indexState","indexEntries"];class nm extends VC{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function fi(n,e){const t=Je(n);return da.M(t.at,e)}function C0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ks(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function b0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class jn{constructor(e,t){this.comparator=e,this.root=t||pi.EMPTY}insert(e,t){return new jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pi.BLACK,null,null))}remove(e){return new jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new D0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new D0(this.root,e,this.comparator,!1)}getReverseIterator(){return new D0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new D0(this.root,e,this.comparator,!0)}}class D0{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pi{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??pi.RED,this.left=i??pi.EMPTY,this.right=o??pi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new pi(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return pi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}pi.EMPTY=null,pi.RED=!0,pi.BLACK=!1,pi.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(n,e,t,r,i){return this}insert(n,e,t){return new pi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Fn{constructor(e){this.comparator=e,this.data=new jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new WC(this.data.getIterator())}getIteratorFrom(e){return new WC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Fn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Fn(this.comparator);return t.data=e,t}}class WC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function mc(n){return n.hasNext()?n.getNext():void 0}class vs{constructor(e){this.fields=e,e.sort(Ir.comparator)}static empty(){return new vs([])}unionWith(e){let t=new Fn(Ir.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new vs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class T0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ur{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new T0("Invalid base64 string: "+i):i}}(e);return new Ur(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new Ur(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ur.EMPTY_BYTE_STRING=new Ur("");const ZC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ku(n){if(wt(!!n),"string"==typeof n){let e=0;const t=ZC.exec(n);if(wt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dr(n.seconds),nanos:dr(n.nanos)}}function dr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Yu(n){return"string"==typeof n?Ur.fromBase64String(n):Ur.fromUint8Array(n)}function oy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ay(n){const e=n.mapValue.fields.__previous_value__;return oy(e)?ay(e):e}function rm(n){const e=Ku(n.mapValue.fields.__local_write_time__.timestampValue);return new zn(e.seconds,e.nanos)}class KC{constructor(e,t,r,i,o,l,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=_}}class Hd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Hd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Hd&&e.projectId===this.projectId&&e.database===this.database}}const Qu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},uy={nullValue:"NULL_VALUE"};function _c(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?oy(n)?4:x0(n)?9007199254740991:10:at()}function Xu(n,e){if(n===e)return!0;const t=_c(n);if(t!==_c(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rm(n).isEqual(rm(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ku(r.timestampValue),l=Ku(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Yu(n.bytesValue).isEqual(Yu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return dr(r.geoPointValue.latitude)===dr(i.geoPointValue.latitude)&&dr(r.geoPointValue.longitude)===dr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return dr(r.integerValue)===dr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=dr(r.doubleValue),l=dr(i.doubleValue);return o===l?zf(o)===zf(l):isNaN(o)&&isNaN(l)}return!1}(n,e);case 9:return jf(n.arrayValue.values||[],e.arrayValue.values||[],Xu);case 10:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(C0(o)!==C0(l))return!1;for(const f in o)if(o.hasOwnProperty(f)&&(void 0===l[f]||!Xu(o[f],l[f])))return!1;return!0}(n,e);default:return at()}var i}function im(n,e){return void 0!==(n.values||[]).find(t=>Xu(t,e))}function yc(n,e){if(n===e)return 0;const t=_c(n),r=_c(e);if(t!==r)return jt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return jt(n.booleanValue,e.booleanValue);case 2:return function(i,o){const l=dr(i.integerValue||i.doubleValue),f=dr(o.integerValue||o.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return YC(n.timestampValue,e.timestampValue);case 4:return YC(rm(n),rm(e));case 5:return jt(n.stringValue,e.stringValue);case 6:return function(i,o){const l=Yu(i),f=Yu(o);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),f=o.split("/");for(let _=0;_<l.length&&_<f.length;_++){const w=jt(l[_],f[_]);if(0!==w)return w}return jt(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const l=jt(dr(i.latitude),dr(o.latitude));return 0!==l?l:jt(dr(i.longitude),dr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const l=i.values||[],f=o.values||[];for(let _=0;_<l.length&&_<f.length;++_){const w=yc(l[_],f[_]);if(w)return w}return jt(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Qu.mapValue&&o===Qu.mapValue)return 0;if(i===Qu.mapValue)return 1;if(o===Qu.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),_=o.fields||{},w=Object.keys(_);f.sort(),w.sort();for(let b=0;b<f.length&&b<w.length;++b){const A=jt(f[b],w[b]);if(0!==A)return A;const P=yc(l[f[b]],_[w[b]]);if(0!==P)return P}return jt(f.length,w.length)}(n.mapValue,e.mapValue);default:throw at()}}function YC(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return jt(n,e);const t=Ku(n),r=Ku(e),i=jt(t.seconds,r.seconds);return 0!==i?i:jt(t.nanos,r.nanos)}function Gd(n){return ly(n)}function ly(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ku(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Yu(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const l of r.values||[])o?o=!1:i+=",",i+=ly(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",l=!0;for(const f of i)l?l=!1:o+=",",o+=`${f}:${ly(r.fields[f])}`;return o+"}"}(n.mapValue):at();var e}function zd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function A0(n){return!!n&&"integerValue"in n}function sm(n){return!!n&&"arrayValue"in n}function QC(n){return!!n&&"nullValue"in n}function XC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dy(n){return!!n&&"mapValue"in n}function Ju(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ks(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ju(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ju(n.arrayValue.values[t]);return e}return Object.assign({},n)}function x0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function JC(n){return"nullValue"in n?uy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?zd(Hd.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:at()}function eb(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?zd(Hd.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Qu:at()}function R0(n,e){const t=yc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function M0(n,e){const t=yc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class gi{constructor(e){this.value=e}static empty(){return new gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!dy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ju(t)}setAll(e){let t=Ir.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=Ju(l):i.push(f.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());dy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];dy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ks(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new gi(Ju(this.value))}}function tb(n){const e=[];return Ks(n.fields,(t,r)=>{const i=new Ir([t]);if(dy(r)){const o=tb(r.mapValue).fields;if(0===o.length)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new vs(e)}class tr{constructor(e,t,r,i,o,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=f}static newInvalidDocument(e){return new tr(e,0,It.min(),It.min(),It.min(),gi.empty(),0)}static newFoundDocument(e,t,r,i){return new tr(e,1,t,It.min(),r,i,0)}static newNoDocument(e,t){return new tr(e,2,t,It.min(),It.min(),gi.empty(),0)}static newUnknownDocument(e,t){return new tr(e,3,t,It.min(),It.min(),gi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(It.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class el{constructor(e,t){this.position=e,this.inclusive=t}}function nb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(r=o.field.isKeyField()?Qe.comparator(Qe.fromName(l.referenceValue),t.key):yc(l,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function rb(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xu(n.position[t],e.position[t]))return!1;return!0}class qf{constructor(e,t="asc"){this.field=e,this.dir=t}}function sA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Wf{}class ln extends Wf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new hy(e,t,r):"array-contains"===t?new ob(e,r):"in"===t?new fy(e,r):"not-in"===t?new ab(e,r):"array-contains-any"===t?new k0(e,r):new ln(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new oA(e,r):new aA(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(yc(t,this.value)):null!==t&&_c(this.value)===_c(t)&&this.matchesComparison(yc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return at()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class bn extends Wf{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new bn(e,t)}matches(e){return ss(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ss(n){return"and"===n.op}function N0(n){return"or"===n.op}function om(n){return Zf(n)&&ss(n)}function Zf(n){for(const e of n.filters)if(e instanceof bn)return!1;return!0}function P0(n){if(n instanceof ln)return n.field.canonicalString()+n.op.toString()+Gd(n.value);if(om(n))return n.filters.map(e=>P0(e)).join(",");{const e=n.filters.map(t=>P0(t)).join(",");return`${n.op}(${e})`}}function ib(n,e){return n instanceof ln?(t=n,(r=e)instanceof ln&&t.op===r.op&&t.field.isEqual(r.field)&&Xu(t.value,r.value)):n instanceof bn?function(t,r){return r instanceof bn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,o,l)=>i&&ib(o,r.filters[l]),!0)}(n,e):void at();var t,r}function sb(n,e){const t=n.filters.concat(e);return bn.create(t,n.op)}function am(n){return n instanceof ln?`${(e=n).field.canonicalString()} ${e.op} ${Gd(e.value)}`:n instanceof bn?function(e){return e.op.toString()+" {"+e.getFilters().map(am).join(" ,")+"}"}(n):"Filter";var e}class hy extends ln{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class oA extends ln{constructor(e,t){super(e,"in",t),this.keys=O0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class aA extends ln{constructor(e,t){super(e,"not-in",t),this.keys=O0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function O0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class ob extends ln{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sm(t)&&im(t.arrayValue,this.value)}}class fy extends ln{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&im(this.value.arrayValue,t)}}class ab extends ln{constructor(e,t){super(e,"not-in",t)}matches(e){if(im(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!im(this.value.arrayValue,t)}}class k0 extends ln{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>im(this.value.arrayValue,r))}}class F0{constructor(e,t=null,r=[],i=[],o=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=f,this.ft=null}}function py(n,e=null,t=[],r=[],i=null,o=null,l=null){return new F0(n,e,t,r,i,o,l)}function tl(n){const e=Je(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>P0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Gf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Gd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Gd(r)).join(",")),e.ft=t}return e.ft}function qd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ib(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!rb(n.startAt,e.startAt)&&rb(n.endAt,e.endAt)}function gy(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function my(n,e){return n.filters.filter(t=>t instanceof ln&&t.field.isEqual(e))}function ub(n,e,t){let r=uy,i=!0;for(const o of my(n,e)){let l=uy,f=!0;switch(o.op){case"<":case"<=":l=JC(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,f=!1;break;case"!=":case"not-in":l=uy}R0({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];R0({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function lb(n,e,t){let r=Qu,i=!0;for(const o of my(n,e)){let l=Qu,f=!0;switch(o.op){case">=":case">":l=eb(o.value),f=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,f=!1;break;case"!=":case"not-in":l=Qu}M0({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];M0({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Ya{constructor(e,t=null,r=[],i=[],o=null,l="F",f=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=f,this.endAt=_,this.dt=null,this._t=null}}function _y(n,e,t,r,i,o,l,f){return new Ya(n,e,t,r,i,o,l,f)}function Wd(n){return new Ya(n)}function cb(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function yy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function um(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function L0(n){return null!==n.collectionGroup}function vc(n){const e=Je(n);if(null===e.dt){e.dt=[];const t=um(e),r=yy(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new qf(t)),e.dt.push(new qf(Ir.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.dt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new qf(Ir.keyField(),o))}}}return e.dt}function ji(n){const e=Je(n);if(!e._t)if("F"===e.limitType)e._t=py(e.path,e.collectionGroup,vc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of vc(e))t.push(new qf(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new el(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new el(e.startAt.position,e.startAt.inclusive):null;e._t=py(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function V0(n,e){e.getFirstInequalityField(),um(n);const t=n.filters.concat([e]);return new Ya(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function lm(n,e,t){return new Ya(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function cm(n,e){return qd(ji(n),ji(e))&&n.limitType===e.limitType}function $i(n){return`${tl(ji(n))}|lt:${n.limitType}`}function wc(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>am(r)).join(", ")}]`),Gf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Gd(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Gd(r)).join(",")),`Target(${t})`}(ji(n))}; limitType=${n.limitType})`}function dm(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of vc(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,l){const f=nb(i,o,l);return i.inclusive?f<=0:f<0}(t.startAt,vc(t),r)||t.endAt&&!function(i,o,l){const f=nb(i,o,l);return i.inclusive?f>=0:f>0}(t.endAt,vc(t),r)));var t,r}function db(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uA(n){return(e,t)=>{let r=!1;for(const i of vc(n)){const o=rP(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function rP(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(i,o,l){const f=o.data.field(i),_=l.data.field(i);return null!==f&&null!==_?yc(f,_):at()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}class Qa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ks(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return b0(this.inner)}size(){return this.innerSize}}const U0=new jn(Qe.comparator);function mi(){return U0}const hb=new jn(Qe.comparator);function Zd(...n){let e=hb;for(const t of n)e=e.insert(t.key,t);return e}function fb(n){let e=hb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ha(){return hm()}function pb(){return hm()}function hm(){return new Qa(n=>n.toString(),(n,e)=>n.isEqual(e))}const lA=new jn(Qe.comparator),B0=new Fn(Qe.comparator);function Wt(...n){let e=B0;for(const t of n)e=e.add(t);return e}const gb=new Fn(jt);function Kf(){return gb}function vy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zf(e)?"-0":e}}function cA(n){return{integerValue:""+n}}function j0(n,e){return BC(e)?cA(e):vy(n,e)}class wy{constructor(){this._=void 0}}function mb(n,e,t){return n instanceof Kd?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&oy(i)&&(i=ay(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof nl?dA(n,e):n instanceof Yd?hA(n,e):function(r,i){const o=_b(r,i),l=yb(o)+yb(r.wt);return A0(o)&&A0(r.wt)?cA(l):vy(r.serializer,l)}(n,e)}function Yf(n,e,t){return n instanceof nl?dA(n,e):n instanceof Yd?hA(n,e):t}function _b(n,e){return n instanceof Qf?A0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Kd extends wy{}class nl extends wy{constructor(e){super(),this.elements=e}}function dA(n,e){const t=vb(e);for(const r of n.elements)t.some(i=>Xu(i,r))||t.push(r);return{arrayValue:{values:t}}}class Yd extends wy{constructor(e){super(),this.elements=e}}function hA(n,e){let t=vb(e);for(const r of n.elements)t=t.filter(i=>!Xu(i,r));return{arrayValue:{values:t}}}class Qf extends wy{constructor(e,t){super(),this.serializer=e,this.wt=t}}function yb(n){return dr(n.integerValue||n.doubleValue)}function vb(n){return sm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Xf{constructor(e,t){this.field=e,this.transform=t}}class fA{constructor(e,t){this.version=e,this.transformResults=t}}class qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ey{}function Eb(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Xd(n.key,qn.none()):new Qd(n.key,n.data,qn.none());{const t=n.data,r=gi.empty();let i=new Fn(Ir.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);null===l&&o.length>1&&(o=o.popLast(),l=t.field(o)),null===l?r.delete(o):r.set(o,l),i=i.add(o)}return new Xa(n.key,r,new vs(i.toArray()),qn.none())}}function Ib(n,e,t){n instanceof Qd?function(r,i,o){const l=r.value.clone(),f=Db(r.fieldTransforms,i,o.transformResults);l.setAll(f),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Xa?function(r,i,o){if(!fm(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Db(r.fieldTransforms,i,o.transformResults),f=i.data;f.setAll(bb(r)),f.setAll(l),i.convertToFoundDocument(o.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function pm(n,e,t,r){return n instanceof Qd?function(i,o,l,f){if(!fm(i.precondition,o))return l;const _=i.value.clone(),w=pA(i.fieldTransforms,f,o);return _.setAll(w),o.convertToFoundDocument(o.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Xa?function(i,o,l,f){if(!fm(i.precondition,o))return l;const _=pA(i.fieldTransforms,f,o),w=o.data;return w.setAll(bb(i)),w.setAll(_),o.convertToFoundDocument(o.version,w).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(l=t,fm(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l);var o,l}function Cb(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=_b(r.transform,i||null);null!=o&&(null===t&&(t=gi.empty()),t.set(r.field,o))}return t||null}function $0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&jf(t,r,(i,o)=>function wb(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof nl&&r instanceof nl||t instanceof Yd&&r instanceof Yd?jf(t.elements,r.elements,Xu):t instanceof Qf&&r instanceof Qf?Xu(t.wt,r.wt):t instanceof Kd&&r instanceof Kd);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Qd extends Ey{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xa extends Ey{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function bb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Db(n,e,t){const r=new Map;wt(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,f=e.data.field(o.field);r.set(o.field,Yf(l,f,t[i]))}return r}function pA(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,mb(o,l,e))}return r}class Xd extends Ey{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tb extends Ey{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Sb{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Ib(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=pb();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let f=this.applyToLocalView(l,o.mutatedFields);f=t.has(i.key)?null:f;const _=Eb(l,f);null!==_&&r.set(i.key,_),l.isValidDocument()||l.convertToNoDocument(It.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wt())}isEqual(e){return this.batchId===e.batchId&&jf(this.mutations,e.mutations,(t,r)=>$0(t,r))&&jf(this.baseMutations,e.baseMutations,(t,r)=>$0(t,r))}}class Ab{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){wt(e.mutations.length===r.length);let i=lA;const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new Ab(e,t,r,i)}}class xb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class sP{constructor(e,t){this.count=e,this.unchangedNames=t}}var Qr,_n;function gm(n){switch(n){default:return at();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function gA(n){if(void 0===n)return Er("GRPC error has no .code"),le.UNKNOWN;switch(n){case Qr.OK:return le.OK;case Qr.CANCELLED:return le.CANCELLED;case Qr.UNKNOWN:return le.UNKNOWN;case Qr.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Qr.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Qr.INTERNAL:return le.INTERNAL;case Qr.UNAVAILABLE:return le.UNAVAILABLE;case Qr.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Qr.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Qr.NOT_FOUND:return le.NOT_FOUND;case Qr.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Qr.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Qr.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Qr.ABORTED:return le.ABORTED;case Qr.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Qr.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Qr.DATA_LOSS:return le.DATA_LOSS;default:return at()}}(_n=Qr||(Qr={}))[_n.OK=0]="OK",_n[_n.CANCELLED=1]="CANCELLED",_n[_n.UNKNOWN=2]="UNKNOWN",_n[_n.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_n[_n.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_n[_n.NOT_FOUND=5]="NOT_FOUND",_n[_n.ALREADY_EXISTS=6]="ALREADY_EXISTS",_n[_n.PERMISSION_DENIED=7]="PERMISSION_DENIED",_n[_n.UNAUTHENTICATED=16]="UNAUTHENTICATED",_n[_n.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_n[_n.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_n[_n.ABORTED=10]="ABORTED",_n[_n.OUT_OF_RANGE=11]="OUT_OF_RANGE",_n[_n.UNIMPLEMENTED=12]="UNIMPLEMENTED",_n[_n.INTERNAL=13]="INTERNAL",_n[_n.UNAVAILABLE=14]="UNAVAILABLE",_n[_n.DATA_LOSS=15]="DATA_LOSS";class Iy{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Jd}static getOrCreateInstance(){return null===Jd&&(Jd=new Iy),Jd}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Jd=null;function H0(){return new TextEncoder}const Rb=new Bf([4294967295,4294967295],0);function mA(n){const e=H0().encode(n),t=new VS;return t.update(e),new Uint8Array(t.digest())}function Cy(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Bf([t,r],0),new Bf([i,o],0)]}class by{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new mm(`Invalid padding: ${t}`);if(r<0)throw new mm(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new mm(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new mm(`Invalid padding when bitmap length is 0: ${t}`);this.yt=8*e.length-t,this.It=Bf.fromNumber(this.yt)}Tt(e,t,r){let i=e.add(t.multiply(Bf.fromNumber(r)));return 1===i.compare(Rb)&&(i=new Bf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.It).toNumber()}Et(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}At(e){if(0===this.yt)return!1;const t=mA(e),[r,i]=Cy(t);for(let o=0;o<this.hashCount;o++){const l=this.Tt(r,i,o);if(!this.Et(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new by(o,i,t);return r.forEach(f=>l.insert(f)),l}insert(e){if(0===this.yt)return;const t=mA(e),[r,i]=Cy(t);for(let o=0;o<this.hashCount;o++){const l=this.Tt(r,i,o);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class mm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Dy{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Ty.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Dy(It.min(),i,new jn(jt),mi(),Wt())}}class Ty{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ty(r,t,Wt(),Wt(),Wt())}}class Sy{constructor(e,t,r,i){this.vt=e,this.removedTargetIds=t,this.key=r,this.Pt=i}}class Mb{constructor(e,t){this.targetId=e,this.bt=t}}class _m{constructor(e,t,r=Ur.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Nb{constructor(){this.Vt=0,this.St=yA(),this.Dt=Ur.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return 0!==this.Vt}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=Wt(),t=Wt(),r=Wt();return this.St.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:at()}}),new Ty(this.Dt,this.Ct,e,t,r)}$t(){this.xt=!1,this.St=yA()}Ft(e,t){this.xt=!0,this.St=this.St.insert(e,t)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class oP{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=mi(),this.jt=_A(),this.zt=new jn(jt)}Wt(e){for(const t of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(t,e.Pt):this.Jt(t,e.key,e.Pt);for(const t of e.removedTargetIds)this.Jt(t,e.key,e.Pt)}Yt(e){this.forEachTarget(e,t=>{const r=this.Xt(t);switch(e.state){case 0:this.Zt(t)&&r.Mt(e.resumeToken);break;case 1:r.qt(),r.Nt||r.$t(),r.Mt(e.resumeToken);break;case 2:r.qt(),r.Nt||this.removeTarget(t);break;case 3:this.Zt(t)&&(r.Ut(),r.Mt(e.resumeToken));break;case 4:this.Zt(t)&&(this.te(t),r.Mt(e.resumeToken));break;default:at()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((r,i)=>{this.Zt(i)&&t(i)})}ee(e){var t;const r=e.targetId,i=e.bt.count,o=this.ne(r);if(o){const l=o.target;if(gy(l))if(0===i){const f=new Qe(l.path);this.Jt(r,f,tr.newNoDocument(f,It.min()))}else wt(1===i);else{const f=this.se(r);if(f!==i){const _=this.ie(e,f);0!==_&&(this.te(r),this.zt=this.zt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Iy.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(w,b,A){var P,U,q,oe,he,Xe;const lt={localCacheCount:b,existenceFilterCount:A.count},Ye=A.unchangedNames;return Ye&&(lt.bloomFilter={applied:0===w,hashCount:null!==(P=Ye?.hashCount)&&void 0!==P?P:0,bitmapLength:null!==(oe=null===(q=null===(U=Ye?.bits)||void 0===U?void 0:U.bitmap)||void 0===q?void 0:q.length)&&void 0!==oe?oe:0,padding:null!==(Xe=null===(he=Ye?.bits)||void 0===he?void 0:he.padding)&&void 0!==Xe?Xe:0}),lt}(_,f,e.bt))}}}}ie(e,t){const{unchangedNames:r,count:i}=e.bt;if(!r||!r.bits)return 1;const{bits:{bitmap:o="",padding:l=0},hashCount:f=0}=r;let _,w;try{_=Yu(o).toUint8Array()}catch(b){if(b instanceof T0)return Io("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{w=new by(_,l,f)}catch(b){return Io(b instanceof mm?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===w.yt?1:i!==t-this.re(e.targetId,w)?2:0}re(e,t){const r=this.Kt.getRemoteKeysForTarget(e);let i=0;return r.forEach(o=>{const l=this.Kt.oe(),f=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;t.At(f)||(this.Jt(e,o,null),i++)}),i}ue(e){const t=new Map;this.Gt.forEach((o,l)=>{const f=this.ne(l);if(f){if(o.current&&gy(f.target)){const _=new Qe(f.target.path);null!==this.Qt.get(_)||this.ce(l,_)||this.Jt(l,_,tr.newNoDocument(_,e))}o.kt&&(t.set(l,o.Ot()),o.$t())}});let r=Wt();this.jt.forEach((o,l)=>{let f=!0;l.forEachWhile(_=>{const w=this.ne(_);return!w||"TargetPurposeLimboResolution"===w.purpose||(f=!1,!1)}),f&&(r=r.add(o))}),this.Qt.forEach((o,l)=>l.setReadTime(e));const i=new Dy(e,t,this.zt,this.Qt,r);return this.Qt=mi(),this.jt=_A(),this.zt=new jn(jt),i}Ht(e,t){if(!this.Zt(e))return;const r=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,r),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}Jt(e,t,r){if(!this.Zt(e))return;const i=this.Xt(e);this.ce(e,t)?i.Ft(t,1):i.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),r&&(this.Qt=this.Qt.insert(t,r))}removeTarget(e){this.Gt.delete(e)}se(e){const t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let t=this.Gt.get(e);return t||(t=new Nb,this.Gt.set(e,t)),t}ae(e){let t=this.jt.get(e);return t||(t=new Fn(jt),this.jt=this.jt.insert(e,t)),t}Zt(e){const t=null!==this.ne(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}ne(e){const t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new Nb),this.Kt.getRemoteKeysForTarget(e).forEach(t=>{this.Jt(e,t,null)})}ce(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}function _A(){return new jn(Qe.comparator)}function yA(){return new jn(Qe.comparator)}const vA={asc:"ASCENDING",desc:"DESCENDING"},wA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EA={and:"AND",or:"OR"};class aP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function G0(n,e){return n.useProto3Json||Gf(e)?e:{value:e}}function eh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function z0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function uP(n,e){return eh(n,e.toTimestamp())}function Dn(n){return wt(!!n),It.fromTimestamp(function(e){const t=Ku(e);return new zn(t.seconds,t.nanos)}(n))}function q0(n,e){return(t=n,new fn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ay(n){const e=fn.fromString(n);return wt($b(e)),e}function ym(n,e){return q0(n.databaseId,e.path)}function rl(n,e){const t=Ay(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(Ob(t))}function ws(n,e){return q0(n.databaseId,e)}function Pb(n){const e=Ay(n);return 4===e.length?fn.emptyPath():Ob(e)}function th(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ob(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function kb(n,e,t){return{name:ym(n,e),fields:t.value.mapValue.fields}}function xy(n,e,t){const r=rl(n,e.name),i=Dn(e.updateTime),o=e.createTime?Dn(e.createTime):It.min(),l=new gi({mapValue:{fields:e.fields}}),f=tr.newFoundDocument(r,i,o,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function vm(n,e){let t;if(e instanceof Qd)t={update:kb(n,e.key,e.value)};else if(e instanceof Xd)t={delete:ym(n,e.key)};else if(e instanceof Xa)t={update:kb(n,e.key,e.data),updateMask:CA(e.fieldMask)};else{if(!(e instanceof Tb))return at();t={verify:ym(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Kd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof nl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Yd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Qf)return{fieldPath:o.field.canonicalString(),increment:l.wt};throw at()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:uP(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:at()),t;var i}function Ry(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?qn.updateTime(Dn(i.updateTime)):void 0!==i.exists?qn.exists(i.exists):qn.none():qn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,l){let f=null;"setToServerValue"in l?(wt("REQUEST_TIME"===l.setToServerValue),f=new Kd):"appendMissingElements"in l?f=new nl(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new Yd(l.removeAllFromArray.values||[]):"increment"in l?f=new Qf(o,l.increment):at();const _=Ir.fromServerFormat(l.fieldPath);return new Xf(_,f)}(n,i)):[];var i;if(e.update){const i=rl(n,e.update.name),o=new gi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new vs((e.updateMask.fieldPaths||[]).map(w=>Ir.fromServerFormat(w)));return new Xa(i,o,l,t,r)}return new Qd(i,o,t,r)}if(e.delete){const i=rl(n,e.delete);return new Xd(i,t)}if(e.verify){const i=rl(n,e.verify);return new Tb(i,t)}return at()}function Ub(n,e){return{documents:[ws(n,e.path)]}}function My(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=ws(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ws(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return IA(bn.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(_){if(0!==_.length)return _.map(w=>{return{field:il((b=w).field),direction:Ec(b.dir)};var b})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const l=G0(n,e.limit);var f,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Bb(n){let e=Pb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){wt(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let o=[];t.where&&(o=function(b){const A=Ja(b);return A instanceof bn&&om(A)?A.getFilters():[A]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new qf(Jf((A=b).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let f=null;t.limit&&(f=function(b){let A;return A="object"==typeof b?b.value:b,Gf(A)?null:A}(t.limit));let _=null;var b;t.startAt&&(_=new el((b=t.startAt).values||[],!!b.before));let w=null;return t.endAt&&(w=function(b){return new el(b.values||[],!b.before)}(t.endAt)),_y(e,i,l,o,f,"F",_,w)}function Ja(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Jf(e.unaryFilter.field);return ln.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Jf(e.unaryFilter.field);return ln.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Jf(e.unaryFilter.field);return ln.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Jf(e.unaryFilter.field);return ln.create(o,"!=",{nullValue:"NULL_VALUE"});default:return at()}}(n):void 0!==n.fieldFilter?ln.create(Jf((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return bn.create(e.compositeFilter.filters.map(t=>Ja(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return at()}}(e.compositeFilter.op))}(n):at();var e}function Ec(n){return vA[n]}function jb(n){return wA[n]}function Z0(n){return EA[n]}function il(n){return{fieldPath:n.canonicalString()}}function Jf(n){return Ir.fromServerFormat(n.fieldPath)}function IA(n){return n instanceof ln?function(e){if("=="===e.op){if(XC(e.value))return{unaryFilter:{field:il(e.field),op:"IS_NAN"}};if(QC(e.value))return{unaryFilter:{field:il(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(XC(e.value))return{unaryFilter:{field:il(e.field),op:"IS_NOT_NAN"}};if(QC(e.value))return{unaryFilter:{field:il(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:il(e.field),op:jb(e.op),value:e.value}}}(n):n instanceof bn?function(e){const t=e.getFilters().map(r=>IA(r));return 1===t.length?t[0]:{compositeFilter:{op:Z0(e.op),filters:t}}}(n):at()}function CA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $b(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class sl{constructor(e,t,r,i,o=It.min(),l=It.min(),f=Ur.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f,this.expectedCount=_}withSequenceNumber(e){return new sl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Hb{constructor(e){this.le=e}}function bA(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:wm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ym(i=n.le,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:eh(i,o.version.toTimestamp()),createTime:eh(i,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:nh(e.version)};else{if(!e.isUnknownDocument())return at();r.unknownDocument={path:t.path.toArray(),version:nh(e.version)}}var i,o;return r}function wm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function nh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ic(n){const e=new zn(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function ep(n,e){const t=(e.baseMutations||[]).map(o=>Ry(n.le,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>Ry(n.le,o)),i=zn.fromMillis(e.localWriteTimeMs);return new Sb(e.batchId,i,t,r)}function rh(n){const e=Ic(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ic(n.lastLimboFreeSnapshotVersion):It.min();let r;var i;return void 0!==n.query.documents?(wt(1===(i=n.query).documents.length),r=ji(Wd(Pb(i.documents[0])))):r=ji(Bb(n.query)),new sl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ur.fromBase64String(n.resumeToken))}function K0(n,e){const t=nh(e.snapshotVersion),r=nh(e.lastLimboFreeSnapshotVersion);let i;i=gy(e.target)?Ub(n.le,e.target):My(n.le,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:tl(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Ny(n){const e=Bb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?lm(e,e.limit,"L"):e}function Py(n,e){return new xb(e.largestBatchId,Ry(n.le,e.overlayMutation))}function Y0(n,e){const t=e.path.lastSegment();return[n,Bi(e.path.popLast()),t]}function Q0(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:nh(r.readTime),documentKey:Bi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Oy{getBundleMetadata(e,t){return Em(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Ic(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Em(e).put({bundleId:(r=t).id,createTime:nh(Dn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return X0(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Ny(i.bundledQuery),readTime:Ic(i.readTime)};var i})}saveNamedQuery(e,t){return X0(e).put({name:(r=t).name,readTime:nh(Dn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Em(n){return fi(n,"bundles")}function X0(n){return fi(n,"namedQueries")}class ky{constructor(e,t){this.serializer=e,this.userId=t}static fe(e,t){return new ky(e,t.uid||"")}getOverlay(e,t){return Im(e).get(Y0(this.userId,t)).next(r=>r?Py(this.serializer,r):null)}getOverlays(e,t){const r=ha();return ne.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,l)=>{const f=new xb(t,l);i.push(this.de(e,f))}),ne.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Bi(l.getCollectionPath())));const o=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);o.push(Im(e).J("collectionPathOverlayIndex",f))}),ne.waitFor(o)}getOverlaysForCollection(e,t,r){const i=ha(),o=Bi(t),l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Im(e).j("collectionPathOverlayIndex",l).next(f=>{for(const _ of f){const w=Py(this.serializer,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=ha();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Im(e).X({index:"collectionGroupOverlayIndex",range:f},(_,w,b)=>{const A=Py(this.serializer,w);o.size()<i||A.largestBatchId===l?(o.set(A.getKey(),A),l=A.largestBatchId):b.done()}).next(()=>o)}de(e,t){return Im(e).put(function(r,i,o){const[l,f,_]=Y0(i,o.mutation.key);return{userId:i,collectionPath:f,documentId:_,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:vm(r.le,o.mutation)}}(this.serializer,this.userId,t))}}function Im(n){return fi(n,"documentOverlays")}class tp{constructor(){}_e(e,t){this.we(e,t),t.me()}we(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(dr(e.integerValue));else if("doubleValue"in e){const r=dr(e.doubleValue);isNaN(r)?this.ge(t,13):(this.ge(t,15),zf(r)?t.ye(0):t.ye(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ge(t,20),"string"==typeof r?t.pe(r):(t.pe(`${r.seconds||""}`),t.ye(r.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(Yu(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ge(t,45),t.ye(r.latitude||0),t.ye(r.longitude||0)}else"mapValue"in e?x0(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):at()}Ie(e,t){this.ge(t,25),this.Pe(e,t)}Pe(e,t){t.pe(e)}Re(e,t){const r=e.fields||{};this.ge(t,55);for(const i of Object.keys(r))this.Ie(i,t),this.we(r[i],t)}ve(e,t){const r=e.values||[];this.ge(t,50);for(const i of r)this.we(i,t)}Ae(e,t){this.ge(t,37),Qe.fromName(e).path.forEach(r=>{this.ge(t,60),this.Pe(r,t)})}ge(e,t){e.ye(t)}Te(e){e.ye(2)}}function lP(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function DA(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=lP(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}tp.be=new tp;class zb{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ve(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Se(r.value),r=t.next();this.De()}Ce(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.xe(r.value),r=t.next();this.Ne()}ke(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Se(r);else if(r<2048)this.Se(960|r>>>6),this.Se(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Se(480|r>>>12),this.Se(128|63&r>>>6),this.Se(128|63&r);else{const i=t.codePointAt(0);this.Se(240|i>>>18),this.Se(128|63&i>>>12),this.Se(128|63&i>>>6),this.Se(128|63&i)}}this.De()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.xe(r);else if(r<2048)this.xe(960|r>>>6),this.xe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.xe(480|r>>>12),this.xe(128|63&r>>>6),this.xe(128|63&r);else{const i=t.codePointAt(0);this.xe(240|i>>>18),this.xe(128|63&i>>>12),this.xe(128|63&i>>>6),this.xe(128|63&i)}}this.Ne()}Oe(e){const t=this.$e(e),r=DA(t);this.Fe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Be(e){const t=this.$e(e),r=DA(t);this.Fe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Le(){this.qe(255),this.qe(255)}Ue(){this.Ke(255),this.Ke(255)}reset(){this.position=0}seed(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ge(){return this.buffer.slice(0,this.position)}$e(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Se(e){const t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}xe(e){const t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}De(){this.qe(0),this.qe(1)}Ne(){this.Ke(0),this.Ke(1)}qe(e){this.Fe(1),this.buffer[this.position++]=e}Ke(e){this.Fe(1),this.buffer[this.position++]=~e}Fe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class TA{constructor(e){this.Qe=e}Ee(e){this.Qe.Ve(e)}pe(e){this.Qe.ke(e)}ye(e){this.Qe.Oe(e)}me(){this.Qe.Le()}}class SA{constructor(e){this.Qe=e}Ee(e){this.Qe.Ce(e)}pe(e){this.Qe.Me(e)}ye(e){this.Qe.Be(e)}me(){this.Qe.Ue()}}class Cm{constructor(){this.Qe=new zb,this.je=new TA(this.Qe),this.ze=new SA(this.Qe)}seed(e){this.Qe.seed(e)}We(e){return 0===e?this.je:this.ze}Ge(){return this.Qe.Ge()}reset(){this.Qe.reset()}}class np{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}He(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new np(this.indexId,this.documentKey,this.arrayValue,r)}}function ih(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=AA(n.arrayValue,e.arrayValue),0!==t?t:(t=AA(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function AA(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class cP{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Je=e.orderBy,this.Ye=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xe=r:this.Ye.push(r)}}Ze(e){wt(e.collectionGroup===this.collectionId);const t=kC(e);if(void 0!==t&&!this.tn(t))return!1;const r=$f(e);let i=0,o=0;for(;i<r.length&&this.tn(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Xe){const l=r[i];if(!this.en(this.Xe,l)||!this.nn(this.Je[o++],l))return!1;++i}for(;i<r.length;++i)if(o>=this.Je.length||!this.nn(this.Je[o++],r[i]))return!1;return!0}tn(e){for(const t of this.Ye)if(this.en(t,e))return!0;return!1}en(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}nn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function xA(n){var e,t;if(wt(n instanceof ln||n instanceof bn),n instanceof ln){if(n instanceof fy){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>ln.create(n.field,"==",o)))||[];return bn.create(i,"or")}return n}const r=n.filters.map(i=>xA(i));return bn.create(r,n.op)}function RA(n){if(0===n.getFilters().length)return[];const e=Fy(xA(n));return wt(qb(e)),rp(e)||J0(e)?[e]:e.getFilters()}function rp(n){return n instanceof ln}function J0(n){return n instanceof bn&&om(n)}function qb(n){return rp(n)||J0(n)||function(e){if(e instanceof bn&&N0(e)){for(const t of e.getFilters())if(!rp(t)&&!J0(t))return!1;return!0}return!1}(n)}function Fy(n){if(wt(n instanceof ln||n instanceof bn),n instanceof ln)return n;if(1===n.filters.length)return Fy(n.filters[0]);const e=n.filters.map(r=>Fy(r));let t=bn.create(e,n.op);return t=ip(t),qb(t)?t:(wt(t instanceof bn),wt(ss(t)),wt(t.filters.length>1),t.filters.reduce((r,i)=>ol(r,i)))}function ol(n,e){let t;return wt(n instanceof ln||n instanceof bn),wt(e instanceof ln||e instanceof bn),t=n instanceof ln?e instanceof ln?bn.create([n,e],"and"):eE(n,e):e instanceof ln?eE(e,n):function(r,i){if(wt(r.filters.length>0&&i.filters.length>0),ss(r)&&ss(i))return sb(r,i.getFilters());const o=N0(r)?r:i,l=N0(r)?i:r,f=o.filters.map(_=>ol(_,l));return bn.create(f,"or")}(n,e),ip(t)}function eE(n,e){if(ss(e))return sb(e,n.getFilters());{const t=e.filters.map(r=>ol(n,r));return bn.create(t,"or")}}function ip(n){if(wt(n instanceof ln||n instanceof bn),n instanceof ln)return n;const e=n.getFilters();if(1===e.length)return ip(e[0]);if(Zf(n))return n;const t=e.map(i=>ip(i)),r=[];return t.forEach(i=>{i instanceof ln?r.push(i):i instanceof bn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:bn.create(r,n.op)}class tE{constructor(){this.sn=new nE}addToCollectionParentIndex(e,t){return this.sn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Ws.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Ws.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class nE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Fn(fn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fn(fn.comparator)).toArray()}}const sp=new Uint8Array(0);class rE{constructor(e,t){this.user=e,this.databaseId=t,this.rn=new nE,this.on=new Qa(r=>tl(r),(r,i)=>qd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.rn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.rn.add(t)});const o={collectionId:r,parent:Bi(i)};return bm(e).put(o)}return ne.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[g0(t),""],!1,!0);return bm(e).j(i).next(o=>{for(const l of o){if(l.collectionId!==t)break;r.push(Ka(l.parent))}return r})}addFieldIndex(e,t){const r=iE(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const o=r.add(i);if(t.indexState){const l=Vy(e);return o.next(f=>{l.put(Q0(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=iE(e),i=Vy(e),o=Ly(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Ly(e);let i=!0;const o=new Map;return ne.forEach(this.un(t),l=>this.cn(e,l).next(f=>{i&&(i=!!f),o.set(l,f)})).next(()=>{if(i){let l=Wt();const f=[];return ne.forEach(o,(_,w)=>{var b;Fe("IndexedDbIndexManager",`Using index ${b=_,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Ye=>`${Ye.fieldPath}:${Ye.kind}`).join(",")}`} to execute ${tl(t)}`);const A=function(Ye,Ct){const Gt=kC(Ct);if(void 0===Gt)return null;for(const Jt of my(Ye,Gt.fieldPath))switch(Jt.op){case"array-contains-any":return Jt.value.arrayValue.values||[];case"array-contains":return[Jt.value]}return null}(w,_),P=function(Ye,Ct){const Gt=new Map;for(const Jt of $f(Ct))for(const Di of my(Ye,Jt.fieldPath))switch(Di.op){case"==":case"in":Gt.set(Jt.fieldPath.canonicalString(),Di.value);break;case"not-in":case"!=":return Gt.set(Jt.fieldPath.canonicalString(),Di.value),Array.from(Gt.values())}return null}(w,_),U=function(Ye,Ct){const Gt=[];let Jt=!0;for(const Di of $f(Ct)){const Do=0===Di.kind?ub(Ye,Di.fieldPath,Ye.startAt):lb(Ye,Di.fieldPath,Ye.startAt);Gt.push(Do.value),Jt&&(Jt=Do.inclusive)}return new el(Gt,Jt)}(w,_),q=function(Ye,Ct){const Gt=[];let Jt=!0;for(const Di of $f(Ct)){const Do=0===Di.kind?lb(Ye,Di.fieldPath,Ye.endAt):ub(Ye,Di.fieldPath,Ye.endAt);Gt.push(Do.value),Jt&&(Jt=Do.inclusive)}return new el(Gt,Jt)}(w,_),oe=this.an(_,w,U),he=this.an(_,w,q),Xe=this.hn(_,w,P),lt=this.ln(_.indexId,A,oe,U.inclusive,he,q.inclusive,Xe);return ne.forEach(lt,Ye=>r.H(Ye,t.limit).next(Ct=>{Ct.forEach(Gt=>{const Jt=Qe.fromSegments(Gt.documentKey);l.has(Jt)||(l=l.add(Jt),f.push(Jt))})}))}).next(()=>f)}return ne.resolve(null)})}un(e){let t=this.on.get(e);return t||(t=0===e.filters.length?[e]:RA(bn.create(e.filters,"and")).map(r=>py(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.on.set(e,t),t)}ln(e,t,r,i,o,l,f){const _=(null!=t?t.length:1)*Math.max(r.length,o.length),w=_/(null!=t?t.length:1),b=[];for(let A=0;A<_;++A){const P=t?this.fn(t[A/w]):sp,U=this.dn(e,P,r[A%w],i),q=this._n(e,P,o[A%w],l),oe=f.map(he=>this.dn(e,P,he,!0));b.push(...this.createRange(U,q,oe))}return b}dn(e,t,r,i){const o=new np(e,Qe.empty(),t,r);return i?o:o.He()}_n(e,t,r,i){const o=new np(e,Qe.empty(),t,r);return i?o.He():o}cn(e,t){const r=new cP(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let l=null;for(const f of o)r.Ze(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;const i=this.un(t);return ne.forEach(i,o=>this.cn(e,o).next(l=>{l?0!==r&&l.fields.length<function(f){let _=new Fn(Ir.comparator),w=!1;for(const b of f.filters)for(const A of b.getFlattenedFilters())A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?w=!0:_=_.add(A.field));for(const b of f.orderBy)b.field.isKeyField()||(_=_.add(b.field));return _.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}wn(e,t){const r=new Cm;for(const i of $f(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const l=r.We(i.kind);tp.be._e(o,l)}return r.Ge()}fn(e){const t=new Cm;return tp.be._e(e,t.We(0)),t.Ge()}mn(e,t){const r=new Cm;return tp.be._e(zd(this.databaseId,t),r.We(function(i){const o=$f(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.Ge()}hn(e,t,r){if(null===r)return[];let i=[];i.push(new Cm);let o=0;for(const l of $f(e)){const f=r[o++];for(const _ of i)if(this.gn(t,l.fieldPath)&&sm(f))i=this.yn(i,l,f);else{const w=_.We(l.kind);tp.be._e(f,w)}}return this.pn(i)}an(e,t,r){return this.hn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Ge();return t}yn(e,t,r){const i=[...e],o=[];for(const l of r.arrayValue.values||[])for(const f of i){const _=new Cm;_.seed(f.Ge()),tp.be._e(l,_.We(t.kind)),o.push(_)}return o}gn(e,t){return!!e.filters.find(r=>r instanceof ln&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=iE(e),i=Vy(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(o=>{const l=[];return ne.forEach(o,f=>i.get([f.indexId,this.uid]).next(_=>{l.push(function(w,b){const A=b?new Jg(b.sequenceNumber,new Ws(Ic(b.readTime),new Qe(Ka(b.documentKey)),b.largestBatchId)):Jg.empty(),P=w.fields.map(([U,q])=>new jd(Ir.fromServerFormat(U),q));return new m0(w.indexId,w.collectionGroup,P,A)}(f,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:jt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=iE(e),o=Vy(e);return this.In(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ne.forEach(f,_=>o.put(Q0(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ne.forEach(t,(i,o)=>{const l=r.get(i.collectionGroup);return(l?ne.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ne.forEach(f,_=>this.Tn(e,i,_).next(w=>{const b=this.En(o,_);return w.isEqual(b)?ne.resolve():this.An(e,o,_,w,b)}))))})}Rn(e,t,r,i){return Ly(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Ly(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}Tn(e,t,r){const i=Ly(e);let o=new Fn(ih);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(l,f)=>{o=o.add(new np(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>o)}En(e,t){let r=new Fn(ih);const i=this.wn(t,e);if(null==i)return r;const o=kC(t);if(null!=o){const l=e.data.field(o.fieldPath);if(sm(l))for(const f of l.arrayValue.values||[])r=r.add(new np(t.indexId,e.key,this.fn(f),i))}else r=r.add(new np(t.indexId,e.key,sp,i));return r}An(e,t,r,i,o){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,_,w,b,A){const P=f.getIterator(),U=_.getIterator();let q=mc(P),oe=mc(U);for(;q||oe;){let he=!1,Xe=!1;if(q&&oe){const lt=w(q,oe);lt<0?Xe=!0:lt>0&&(he=!0)}else null!=q?Xe=!0:he=!0;he?(b(oe),oe=mc(U)):Xe?(A(q),q=mc(P)):(q=mc(P),oe=mc(U))}}(i,o,ih,f=>{l.push(this.Rn(e,t,r,f))},f=>{l.push(this.vn(e,t,r,f))}),ne.waitFor(l)}In(e){let t=1;return Vy(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>ih(l,f)).filter((l,f,_)=>!f||0!==ih(l,_[f-1]));const i=[];i.push(e);for(const l of r){const f=ih(l,e),_=ih(l,t);if(0===f)i[0]=e.He();else if(f>0&&_<0)i.push(l),i.push(l.He());else if(_>0)break}i.push(t);const o=[];for(let l=0;l<i.length;l+=2){if(this.Pn(i[l],i[l+1]))return[];o.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,sp,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,sp,[]]))}return o}Pn(e,t){return ih(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(MA)}getMinOffset(e,t){return ne.mapArray(this.un(t),r=>this.cn(e,r).next(i=>i||at())).next(MA)}}function bm(n){return fi(n,"collectionParents")}function Ly(n){return fi(n,"indexEntries")}function iE(n){return fi(n,"indexConfiguration")}function Vy(n){return fi(n,"indexState")}function MA(n){wt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;y0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ws(e.readTime,e.documentKey,t)}const sE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Hi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Hi(e,Hi.DEFAULT_COLLECTION_PERCENTILE,Hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Wb(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],l=IDBKeyRange.only(t.batchId);let f=0;const _=r.X({range:l},(b,A,P)=>(f++,P.delete()));o.push(_.next(()=>{wt(1===f)}));const w=[];for(const b of t.mutations){const A=jC(e,b.key.path,t.batchId);o.push(i.delete(A)),w.push(b.key)}return ne.waitFor(o).next(()=>w)}function Uy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw at();e=n.noDocument}return JSON.stringify(e).length}Hi.DEFAULT_COLLECTION_PERCENTILE=10,Hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hi.DEFAULT=new Hi(41943040,Hi.DEFAULT_COLLECTION_PERCENTILE,Hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hi.DISABLED=new Hi(-1,0,0);class By{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.bn={}}static fe(e,t,r,i){wt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new By(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return al(e).X({index:"userMutationsIndex",range:r},(i,o,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=sh(e),l=al(e);return l.add({}).next(f=>{wt("number"==typeof f);const _=new Sb(f,t,r,i),w=function(P,U,q){const oe=q.baseMutations.map(Xe=>vm(P.le,Xe)),he=q.mutations.map(Xe=>vm(P.le,Xe));return{userId:U,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:oe,mutations:he}}(this.serializer,this.userId,_),b=[];let A=new Fn((P,U)=>jt(P.canonicalString(),U.canonicalString()));for(const P of i){const U=jC(this.userId,P.key.path,f);A=A.add(P.key.path.popLast()),b.push(l.put(w)),b.push(o.put(U,WS))}return A.forEach(P=>{b.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.bn[f]=_.keys()}),ne.waitFor(b).next(()=>_)})}lookupMutationBatch(e,t){return al(e).get(t).next(r=>r?(wt(r.userId===this.userId),ep(this.serializer,r)):null)}Vn(e,t){return this.bn[t]?ne.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.bn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return al(e).X({index:"userMutationsIndex",range:i},(l,f,_)=>{f.userId===this.userId&&(wt(f.batchId>=r),o=ep(this.serializer,f)),_.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return al(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,o,l)=>{r=o.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return al(e).j("userMutationsIndex",t).next(r=>r.map(i=>ep(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ry(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return sh(e).X({range:i},(l,f,_)=>{const[w,b,A]=l,P=Ka(b);if(w===this.userId&&t.path.isEqual(P))return al(e).get(A).next(U=>{if(!U)throw at();wt(U.userId===this.userId),o.push(ep(this.serializer,U))});_.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fn(jt);const i=[];return t.forEach(o=>{const l=ry(this.userId,o.path),f=IDBKeyRange.lowerBound(l),_=sh(e).X({range:f},(w,b,A)=>{const[P,U,q]=w,oe=Ka(U);P===this.userId&&o.path.isEqual(oe)?r=r.add(q):A.done()});i.push(_)}),ne.waitFor(i).next(()=>this.Sn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=ry(this.userId,r),l=IDBKeyRange.lowerBound(o);let f=new Fn(jt);return sh(e).X({range:l},(_,w,b)=>{const[A,P,U]=_,q=Ka(P);A===this.userId&&r.isPrefixOf(q)?q.length===i&&(f=f.add(U)):b.done()}).next(()=>this.Sn(e,f))}Sn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(al(e).get(o).next(l=>{if(null===l)throw at();wt(l.userId===this.userId),r.push(ep(this.serializer,l))}))}),ne.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Wb(e.at,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Dn(t.batchId)}),ne.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Dn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ne.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return sh(e).X({range:r},(o,l,f)=>{if(o[0]===this.userId){const _=Ka(o[1]);i.push(_)}else f.done()}).next(()=>{wt(0===i.length)})})}containsKey(e,t){return oE(e,this.userId,t)}Cn(e){return Zb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function oE(n,e,t){const r=ry(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let l=!1;return sh(n).X({range:o,Y:!0},(f,_,w)=>{const[b,A,P]=f;b===e&&A===i&&(l=!0),w.done()}).next(()=>l)}function al(n){return fi(n,"mutations")}function sh(n){return fi(n,"documentMutations")}function Zb(n){return fi(n,"mutationQueues")}class oh{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new oh(0)}static kn(){return new oh(-1)}}class Kb{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Mn(e).next(t=>{const r=new oh(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Mn(e).next(t=>It.fromTimestamp(new zn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Mn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Mn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.$n(e,t).next(()=>this.Mn(e).next(r=>(r.targetCount+=1,this.Fn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.$n(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Cc(e).delete(t.targetId)).next(()=>this.Mn(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Cc(e).X((l,f)=>{const _=rh(f);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,o.push(this.removeTargetData(e,_)))}).next(()=>ne.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Cc(e).X((r,i)=>{const o=rh(i);t(o)})}Mn(e){return NA(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}On(e,t){return NA(e).put("targetGlobalKey",t)}$n(e,t){return Cc(e).put(K0(this.serializer,t))}Fn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Mn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=tl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Cc(e).X({range:i,index:"queryTargetsIndex"},(l,f,_)=>{const w=rh(f);qd(t,w.target)&&(o=w,_.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=ul(e);return t.forEach(l=>{const f=Bi(l.path);i.push(o.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),ne.waitFor(i)}removeMatchingKeys(e,t,r){const i=ul(e);return ne.forEach(t,o=>{const l=Bi(o.path);return ne.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=ul(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ul(e);let o=Wt();return i.X({range:r,Y:!0},(l,f,_)=>{const w=Ka(l[1]),b=new Qe(w);o=o.add(b)}).next(()=>o)}containsKey(e,t){const r=Bi(t.path),i=IDBKeyRange.bound([r],[g0(r)],!1,!0);let o=0;return ul(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,f],_,w)=>{0!==l&&(o++,w.done())}).next(()=>o>0)}he(e,t){return Cc(e).get(t).next(r=>r?rh(r):null)}}function Cc(n){return fi(n,"targets")}function NA(n){return fi(n,"targetGlobal")}function ul(n){return fi(n,"targetDocuments")}function jy([n,e],[t,r]){const i=jt(n,t);return 0===i?jt(e,r):i}class PA{constructor(e){this.Bn=e,this.buffer=new Fn(jy),this.Ln=0}qn(){return++this.Ln}Un(e){const t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();jy(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Yb{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Kn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}get started(){return null!==this.Kn}Gn(e){var t=this;Fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Kn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Zu(r)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield $d(r)}yield t.Gn(3e5)}))}}class dP{constructor(e,t){this.Qn=e,this.params=t}calculateTargetCount(e,t){return this.Qn.jn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ne.resolve(Zs.ct);const r=new PA(t);return this.Qn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.Qn.zn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Qn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Qn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(sE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sE):this.Wn(e,t))}getCacheSize(e){return this.Qn.getCacheSize(e)}Wn(e,t){let r,i,o,l,f,_,w;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,l=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,f=Date.now(),this.removeTargets(e,r,t))).next(A=>(o=A,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(w=Date.now(),er()<=yo.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${o} targets in `+(_-f)+`ms\n\tRemoved ${A} documents in `+(w-_)+`ms\nTotal Duration: ${w-b}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:A})))}}class kA{constructor(e,t){this.db=e,this.garbageCollector=function OA(n,e){return new dP(n,e)}(this,t)}jn(e){const t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Hn(e){let t=0;return this.zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}zn(e,t){return this.Jn(e,(r,i)=>t(i))}addReference(e,t,r){return $y(e,r)}removeReference(e,t,r){return $y(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return $y(e,t)}Yn(e,t){return function(r,i){let o=!1;return Zb(r).Z(l=>oE(r,l,i).next(f=>(f&&(o=!0),ne.resolve(!f)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Jn(e,(l,f)=>{if(f<=t){const _=this.Yn(e,l).next(w=>{if(!w)return o++,r.getEntry(e,l).next(()=>(r.removeEntry(l,It.min()),ul(e).delete([0,Bi(l.path)])))});i.push(_)}}).next(()=>ne.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return $y(e,t)}Jn(e,t){const r=ul(e);let i,o=Zs.ct;return r.X({index:"documentTargetsIndex"},([l,f],{path:_,sequenceNumber:w})=>{0===l?(o!==Zs.ct&&t(new Qe(Ka(i)),o),o=w,i=_):o=Zs.ct}).next(()=>{o!==Zs.ct&&t(new Qe(Ka(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $y(n,e){return ul(n).put((r=n.currentSequenceNumber,{targetId:0,path:Bi(e.path),sequenceNumber:r}));var r}class Qb{constructor(){this.changes=new Qa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ah(e).put(r)}removeEntry(e,t,r){return ah(e).delete(function(i,o){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],wm(o),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Xn(e,r)))}getEntry(e,t){let r=tr.newInvalidDocument(t);return ah(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Hy(t))},(i,o)=>{r=this.Zn(t,o)}).next(()=>r)}ts(e,t){let r={size:0,document:tr.newInvalidDocument(t)};return ah(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Hy(t))},(i,o)=>{r={document:this.Zn(t,o),size:Uy(o)}}).next(()=>r)}getEntries(e,t){let r=mi();return this.es(e,t,(i,o)=>{const l=this.Zn(i,o);r=r.insert(i,l)}).next(()=>r)}ns(e,t){let r=mi(),i=new jn(Qe.comparator);return this.es(e,t,(o,l)=>{const f=this.Zn(o,l);r=r.insert(o,f),i=i.insert(o,Uy(l))}).next(()=>({documents:r,ss:i}))}es(e,t,r){if(t.isEmpty())return ne.resolve();let i=new Fn(UA);t.forEach(_=>i=i.add(_));const o=IDBKeyRange.bound(Hy(i.first()),Hy(i.last())),l=i.getIterator();let f=l.getNext();return ah(e).X({index:"documentKeyIndex",range:o},(_,w,b)=>{const A=Qe.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;f&&UA(f,A)<0;)r(f,null),f=l.getNext();f&&f.isEqual(A)&&(r(f,w),f=l.hasNext()?l.getNext():null),f?b.G(Hy(f)):b.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const o=t.path,l=[o.popLast().toArray(),o.lastSegment(),wm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ah(e).j(IDBKeyRange.bound(l,f,!0)).next(_=>{let w=mi();for(const b of _){const A=this.Zn(Qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);A.isFoundDocument()&&(dm(t,A)||i.has(A.key))&&(w=w.insert(A.key,A))}return w})}getAllFromCollectionGroup(e,t,r,i){let o=mi();const l=VA(t,r),f=VA(t,Ws.max());return ah(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(_,w,b)=>{const A=this.Zn(Qe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);o=o.insert(A.key,A),o.size===i&&b.done()}).next(()=>o)}newChangeBuffer(e){return new fP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return LA(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}Xn(e,t){return LA(e).put("remoteDocumentGlobalKey",t)}Zn(e,t){if(t){const r=function Gb(n,e){let t;if(e.document)t=xy(n.le,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),i=Ic(e.noDocument.readTime);t=tr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return at();{const r=Qe.fromSegments(e.unknownDocument.path),i=Ic(e.unknownDocument.version);t=tr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new zn(r[0],r[1]);return It.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return tr.newInvalidDocument(e)}}function FA(n){return new hP(n)}class fP extends Qb{constructor(e,t){super(),this.rs=e,this.trackRemovals=t,this.os=new Qa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Fn((o,l)=>jt(o.canonicalString(),l.canonicalString()));return this.changes.forEach((o,l)=>{const f=this.os.get(o);if(t.push(this.rs.removeEntry(e,o,f.readTime)),l.isValidDocument()){const _=bA(this.rs.serializer,l);i=i.add(o.path.popLast());const w=Uy(_);r+=w-f.size,t.push(this.rs.addEntry(e,o,_))}else if(r-=f.size,this.trackRemovals){const _=bA(this.rs.serializer,l.convertToNoDocument(It.min()));t.push(this.rs.addEntry(e,o,_))}}),i.forEach(o=>{t.push(this.rs.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.rs.updateMetadata(e,r)),ne.waitFor(t)}getFromCache(e,t){return this.rs.ts(e,t).next(r=>(this.os.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.rs.ns(e,t).next(({documents:r,ss:i})=>(i.forEach((o,l)=>{this.os.set(o,{size:l,readTime:r.get(o).readTime})}),r))}}function LA(n){return fi(n,"remoteDocumentGlobal")}function ah(n){return fi(n,"remoteDocumentsV14")}function Hy(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function VA(n,e){const t=e.documentKey.path.toArray();return[n,wm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function UA(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=jt(t[o],r[o]),i)return i;return i=jt(t.length,r.length),i||(i=jt(t[t.length-2],r[r.length-2]),i||jt(t[t.length-1],r[r.length-1]))}class pP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class BA{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&pm(r.mutation,i,vs.empty(),zn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Wt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Wt()){const i=ha();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=Zd();return o.forEach((f,_)=>{l=l.insert(f,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ha();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Wt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let o=mi();const l=hm(),f=hm();return t.forEach((_,w)=>{const b=r.get(w.key);i.has(w.key)&&(void 0===b||b.mutation instanceof Xa)?o=o.insert(w.key,w):void 0!==b?(l.set(w.key,b.mutation.getFieldMask()),pm(b.mutation,w,b.mutation.getFieldMask(),zn.now())):l.set(w.key,vs.empty())}),this.recalculateAndSaveOverlays(e,o).next(_=>(_.forEach((w,b)=>l.set(w,b)),t.forEach((w,b)=>{var A;return f.set(w,new pP(b,null!==(A=l.get(w))&&void 0!==A?A:null))}),f))}recalculateAndSaveOverlays(e,t){const r=hm();let i=new jn((l,f)=>l-f),o=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(_=>{const w=t.get(_);if(null===w)return;let b=r.get(_)||vs.empty();b=f.applyToLocalView(w,b),r.set(_,b);const A=(i.get(f.batchId)||Wt()).add(_);i=i.insert(f.batchId,A)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const _=f.getNext(),w=_.key,b=_.value,A=pb();b.forEach(P=>{if(!o.has(P)){const U=Eb(t.get(P),r.get(P));null!==U&&A.set(P,U),o=o.add(P)}}),l.push(this.documentOverlayCache.saveOverlays(e,w,A))}return ne.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):L0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ne.resolve(ha());let f=-1,_=o;return l.next(w=>ne.forEach(w,(b,A)=>(f<A.largestBatchId&&(f=A.largestBatchId),o.get(b)?ne.resolve():this.remoteDocumentCache.getEntry(e,b).next(P=>{_=_.insert(b,P)}))).next(()=>this.populateOverlays(e,w,o)).next(()=>this.computeViews(e,_,w,Wt())).next(b=>({batchId:f,changes:fb(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(r=>{let i=Zd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=Zd();return this.indexManager.getCollectionParents(e,i).next(l=>ne.forEach(l,f=>{const _=(w=t,b=f.child(i),new Ya(b,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,b;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((b,A)=>{o=o.insert(b,A)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(o=>{i.forEach((f,_)=>{const w=_.getKey();null===o.get(w)&&(o=o.insert(w,tr.newInvalidDocument(w)))});let l=Zd();return o.forEach((f,_)=>{const w=i.get(f);void 0!==w&&pm(w.mutation,_,vs.empty(),zn.now()),dm(t,_)&&(l=l.insert(f,_))}),l})}}class gP{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,t){return ne.resolve(this.us.get(t))}saveBundleMetadata(e,t){var r;return this.us.set(t.id,{id:(r=t).id,version:r.version,createTime:Dn(r.createTime)}),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.cs.get(t))}saveNamedQuery(e,t){return this.cs.set(t.name,{name:(r=t).name,query:Ny(r.bundledQuery),readTime:Dn(r.readTime)}),ne.resolve();var r}}class s{constructor(){this.overlays=new jn(Qe.comparator),this.hs=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ha();return ne.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.de(e,t,o)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hs.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hs.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const i=ha(),o=t.length+1,l=new Qe(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const _=f.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===o&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new jn((w,b)=>w-b);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let b=o.get(w.largestBatchId);null===b&&(b=ha(),o=o.insert(w.largestBatchId,b)),b.set(w.getKey(),w)}}const f=ha(),_=o.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,b)=>f.set(w,b)),!(f.size()>=i)););return ne.resolve(f)}de(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.hs.get(i.largestBatchId).delete(r.key);this.hs.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new xb(t,r));let o=this.hs.get(t);void 0===o&&(o=Wt(),this.hs.set(t,o)),this.hs.set(t,o.add(r.key))}}class a{constructor(){this.ls=new Fn(u.fs),this.ds=new Fn(u._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,t){const r=new u(e,t);this.ls=this.ls.add(r),this.ds=this.ds.add(r)}ws(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gs(new u(e,t))}ys(e,t){e.forEach(r=>this.removeReference(r,t))}ps(e){const t=new Qe(new fn([])),r=new u(t,e),i=new u(t,e+1),o=[];return this.ds.forEachInRange([r,i],l=>{this.gs(l),o.push(l.key)}),o}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const t=new Qe(new fn([])),r=new u(t,e),i=new u(t,e+1);let o=Wt();return this.ds.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new u(e,0),r=this.ls.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class u{constructor(e,t){this.key=e,this.Es=t}static fs(e,t){return Qe.comparator(e.key,t.key)||jt(e.Es,t.Es)}static _s(e,t){return jt(e.Es,t.Es)||Qe.comparator(e.key,t.key)}}class c{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.As=1,this.Rs=new Fn(u.fs)}checkEmpty(e){return ne.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.As;this.As++;const l=new Sb(o,t,r,i);this.mutationQueue.push(l);for(const f of i)this.Rs=this.Rs.add(new u(f.key,o)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ne.resolve(l)}lookupMutationBatch(e,t){return ne.resolve(this.vs(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ps(t+1),o=i<0?0:i;return ne.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(0===this.mutationQueue.length?-1:this.As-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new u(t,0),i=new u(t,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([r,i],l=>{const f=this.vs(l.Es);o.push(f)}),ne.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fn(jt);return t.forEach(i=>{const o=new u(i,0),l=new u(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([o,l],f=>{r=r.add(f.Es)})}),ne.resolve(this.bs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Qe.isDocumentKey(o)||(o=o.child(""));const l=new u(new Qe(o),0);let f=new Fn(jt);return this.Rs.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(f=f.add(_.Es)),!0)},l),ne.resolve(this.bs(f))}bs(e){const t=[];return e.forEach(r=>{const i=this.vs(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){wt(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ne.forEach(t.mutations,i=>{const o=new u(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Dn(e){}containsKey(e,t){const r=new u(t,0),i=this.Rs.firstAfterOrEqual(r);return ne.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ne.resolve()}Vs(e,t){return this.Ps(e)}Ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}vs(e){const t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class h{constructor(e){this.Ss=e,this.docs=new jn(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.Ss(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():tr.newInvalidDocument(t))}getEntries(e,t){let r=mi();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():tr.newInvalidDocument(i))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=mi();const l=t.path,f=new Qe(l.child("")),_=this.docs.getIteratorFrom(f);for(;_.hasNext();){const{key:w,value:{document:b}}=_.getNext();if(!l.isPrefixOf(w.path))break;w.path.length>l.length+1||y0(Hf(b),r)<=0||(i.has(b.key)||dm(t,b))&&(o=o.insert(b.key,b.mutableCopy()))}return ne.resolve(o)}getAllFromCollectionGroup(e,t,r,i){at()}Ds(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new m(this)}getSize(e){return ne.resolve(this.size)}}class m extends Qb{constructor(e){super(),this.rs=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.rs.addEntry(e,i)):this.rs.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.rs.getEntry(e,t)}getAllFromCache(e,t){return this.rs.getEntries(e,t)}}class v{constructor(e){this.persistence=e,this.Cs=new Qa(t=>tl(t),qd),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.xs=0,this.Ns=new a,this.targetCount=0,this.ks=oh.Nn()}forEachTarget(e,t){return this.Cs.forEach((r,i)=>t(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.xs&&(this.xs=t),ne.resolve()}$n(e){this.Cs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ks=new oh(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,t){return this.$n(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.$n(t),ne.resolve()}removeTargetData(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Cs.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Cs.delete(l),o.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ne.waitFor(o).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.Cs.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.Ns.ws(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.Ns.ys(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),ne.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ns.ps(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ns.Ts(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.Ns.containsKey(t))}}class C{constructor(e,t){this.Ms={},this.overlays={},this.Os=new Zs(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new v(this),this.indexManager=new tE,this.remoteDocumentCache=new h(r=>this.referenceDelegate.Bs(r)),this.serializer=new Hb(t),this.Ls=new gP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new s,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ms[e.toKey()];return r||(r=new c(t,this.referenceDelegate),this.Ms[e.toKey()]=r),r}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const i=new T(this.Os.next());return this.referenceDelegate.qs(),r(i).next(o=>this.referenceDelegate.Us(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ks(e,t){return ne.or(Object.values(this.Ms).map(r=>()=>r.containsKey(e,t)))}}class T extends VC{constructor(e){super(),this.currentSequenceNumber=e}}class R{constructor(e){this.persistence=e,this.Gs=new a,this.Qs=null}static js(e){return new R(e)}get zs(){if(this.Qs)return this.Qs;throw at()}addReference(e,t,r){return this.Gs.addReference(r,t),this.zs.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Gs.removeReference(r,t),this.zs.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.zs.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Gs.ps(t.targetId).forEach(i=>this.zs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.zs.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}qs(){this.Qs=new Set}Us(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.zs,r=>{const i=Qe.fromPath(r);return this.Ws(e,i).next(o=>{o||t.removeEntry(i,It.min())})}).next(()=>(this.Qs=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ws(e,t).next(r=>{r?this.zs.delete(t.toString()):this.zs.add(t.toString())})}Bs(e){return 0}Ws(e,t){return ne.or([()=>ne.resolve(this.Gs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ks(e,t)])}}class V{constructor(e){this.serializer=e}$(e,t,r,i){const o=new ey("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",E0,{unique:!0}),f.createObjectStore("documentMutations"),W(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=ne.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),W(e)),l=l.next(()=>function(f){const _=f.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(o))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,_){return _.store("mutations").j().next(w=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",E0,{unique:!0});const b=_.store("mutations"),A=w.map(P=>b.put(P));return ne.waitFor(A)})}(e,o))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Js(o))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ys(o)))),r<7&&i>=7&&(l=l.next(()=>this.Xs(o))),r<8&&i>=8&&(l=l.next(()=>this.Zs(e,o))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ti(o))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:nA});_.createIndex("collectionPathOverlayIndex",rA,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",I0,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:ZS});_.createIndex("documentKeyIndex",KS),_.createIndex("collectionGroupIndex",YS)}(e)).next(()=>this.ei(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.ni(e,o))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:JS}).createIndex("sequenceNumberIndex",eA,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:GC}).createIndex("documentKeyIndex",tA,{unique:!1})}(e))),l}Ys(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=Uy(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Js(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ne.forEach(i,o=>{const l=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(f=>ne.forEach(f,_=>{wt(_.userId===o.userId);const w=ep(this.serializer,_);return Wb(e,o.userId,w).next(()=>{})}))}))}Xs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.X((l,f)=>{const _=new fn(l),w=[0,Bi(_)];o.push(t.get(w).next(b=>b?ne.resolve():t.put({targetId:0,path:Bi(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ne.waitFor(o))})}Zs(e,t){e.createObjectStore("collectionParents",{keyPath:HC});const r=t.store("collectionParents"),i=new nE,o=l=>{if(i.add(l)){const f=l.lastSegment(),_=l.popLast();return r.put({collectionId:f,parent:Bi(_)})}};return t.store("remoteDocuments").X({Y:!0},(l,f)=>{const _=new fn(l);return o(_.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,f,_],w)=>{const b=Ka(f);return o(b.popLast())}))}ti(e){const t=e.store("targets");return t.X((r,i)=>{const o=rh(i),l=K0(this.serializer,o);return t.put(l)})}ei(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((o,l)=>{const f=t.store("remoteDocumentsV14"),_=(w=l,w.document?new Qe(fn.fromString(w.document.name).popFirst(5)):w.noDocument?Qe.fromSegments(w.noDocument.path):w.unknownDocument?Qe.fromSegments(w.unknownDocument.path):at()).path.toArray();var w;const b={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(b))}).next(()=>ne.waitFor(i))}ni(e,t){const r=t.store("mutations"),i=FA(this.serializer),o=new C(R.js,this.serializer.le);return r.j().next(l=>{const f=new Map;return l.forEach(_=>{var w;let b=null!==(w=f.get(_.userId))&&void 0!==w?w:Wt();ep(this.serializer,_).keys().forEach(A=>b=b.add(A)),f.set(_.userId,b)}),ne.forEach(f,(_,w)=>{const b=new hi(w),A=ky.fe(this.serializer,b),P=o.getIndexManager(b),U=By.fe(b,this.serializer,P,o.referenceDelegate);return new BA(i,U,A,P).recalculateAndSaveOverlaysForDocumentKeys(new nm(t,Zs.ct),_).next()})})}}function W(n){n.createObjectStore("targetDocuments",{keyPath:XS}).createIndex("documentTargetsIndex",$C,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",QS,{unique:!0}),n.createObjectStore("targetGlobal")}const X="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class we{constructor(e,t,r,i,o,l,f,_,w,b,A=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.si=o,this.window=l,this.document=f,this.ii=w,this.ri=b,this.oi=A,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=P=>Promise.resolve(),!we.D())throw new Ae(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kA(this,i),this.fi=t+"main",this.serializer=new Hb(_),this.di=new da(this.fi,this.oi,new V(this.serializer)),this.Fs=new Kb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=FA(this.serializer),this.Ls=new Oy,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&Er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(le.FAILED_PRECONDITION,X);return this.mi(),this.gi(),this.yi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Fs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Zs(e,this.ii)}).then(()=>{this.$s=!0}).catch(e=>(this.di&&this.di.close(),Promise.reject(e)))}pi(e){var t=this;return this.li=function(){var r=(0,me.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.di.B(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.wi())})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ke(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ii(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)))})}).next(()=>this.Ti(e)).next(t=>this.isPrimary&&!t?this.Ei(e).next(()=>!1):!!t&&this.Ai(e).next(()=>!0))).catch(e=>{if(Zu(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.li(e)),this.isPrimary=e})}Ii(e){return Ve(e).get("owner").next(t=>ne.resolve(this.Ri(t)))}vi(e){return Ke(e).delete(this.clientId)}Pi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.bi(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=fi(r,"clientMetadata");return i.j().next(o=>{const l=e.Vi(o,18e5),f=o.filter(_=>-1===l.indexOf(_));return ne.forEach(f,_=>i.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Si(r.clientId))}})()}yi(){this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Pi()).then(()=>this.yi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ti(e){return this.ri?ne.resolve(!0):Ve(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ae(le.FAILED_PRECONDITION,X);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ke(e).j().next(r=>void 0===this.Vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.$s=!1,e.Ci(),e.ai&&(e.ai.cancel(),e.ai=null),e.xi(),e.Ni(),yield e.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new nm(t,Zs.ct);return e.Ei(r).next(()=>e.vi(r))}),e.di.close(),e.ki()})()}Vi(e,t){return e.filter(r=>this.bi(r.updateTimeMs,t)&&!this.Di(r.clientId))}Mi(){return this.runTransaction("getActiveClients","readonly",e=>Ke(e).j().next(t=>this.Vi(t,18e5).map(r=>r.clientId)))}get started(){return this.$s}getMutationQueue(e,t){return By.fe(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new rE(e,this.serializer.le.databaseId)}getDocumentOverlayCache(e){return ky.fe(this.serializer,e)}getBundleCache(){return this.Ls}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(l=this.oi)?iA:14===l?qC:13===l?sy:12===l?zC:11===l?iy:void at();var l;let f;return this.di.runTransaction(e,i,o,_=>(f=new nm(_,this.Os?this.Os.next():Zs.ct),"readwrite-primary"===t?this.Ii(f).next(w=>!!w||this.Ti(f)).next(w=>{if(!w)throw Er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)),new Ae(le.FAILED_PRECONDITION,LC);return r(f)}).next(w=>this.Ai(f).next(()=>w)):this.Oi(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}Oi(e){return Ve(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)&&!this.Ri(t)&&!(this.ri||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(le.FAILED_PRECONDITION,X)})}Ai(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ve(e).put("owner",t)}static D(){return da.D()}Ei(e){const t=Ve(e);return t.get("owner").next(r=>this.Ri(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ne.resolve())}bi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Er(`Detected an update time that is in the future: ${e} > ${r}`),1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.wi()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Ci();const t=/(?:Version|Mobile)\/1[456]/;(0,O.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Ni(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Di(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Er("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ci(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){Er("Failed to set zombie client id.",e)}}ki(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch{}}Si(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ve(n){return fi(n,"owner")}function Ke(n){return fi(n,"clientMetadata")}function ht(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Mt{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Fi=i}static Bi(e,t){let r=Wt(),i=Wt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Mt(e,t.fromCache,r,i)}}class Re{constructor(){this.Li=!1}initialize(e,t){this.qi=e,this.indexManager=t,this.Li=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ui(e,t).next(o=>o||this.Ki(e,t,i,r)).next(o=>o||this.Gi(e,t))}Ui(e,t){if(cb(t))return ne.resolve(null);let r=ji(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=lm(t,null,"F"),r=ji(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Wt(...o);return this.qi.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(_=>{const w=this.Qi(t,f);return this.ji(t,w,l,_.readTime)?this.Ui(e,lm(t,null,"F")):this.zi(e,w,t,_)}))})))}Ki(e,t,r,i){return cb(t)||i.isEqual(It.min())?this.Gi(e,t):this.qi.getDocuments(e,r).next(o=>{const l=this.Qi(t,o);return this.ji(t,l,r,i)?this.Gi(e,t):(er()<=yo.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wc(t)),this.zi(e,l,t,_0(i,-1)))})}Qi(e,t){let r=new Fn(uA(e));return t.forEach((i,o)=>{dm(e,o)&&(r=r.add(o))}),r}ji(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Gi(e,t){return er()<=yo.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",wc(t)),this.qi.getDocumentsMatchingQuery(e,t,Ws.min())}zi(e,t,r,i){return this.qi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}class Ht{constructor(e,t,r,i){this.persistence=e,this.Wi=t,this.serializer=i,this.Hi=new jn(jt),this.Ji=new Qa(o=>tl(o),qd),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(r)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BA(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Hi))}}function Wn(n,e,t,r){return new Ht(n,e,t,r)}function Cr(n,e){return Xb.apply(this,arguments)}function Xb(){return Xb=(0,me.Z)(function*(n,e){const t=Je(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Zi(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],f=[];let _=Wt();for(const w of i){l.push(w.batchId);for(const b of w.mutations)_=_.add(b.key)}for(const w of o){f.push(w.batchId);for(const b of w.mutations)_=_.add(b.key)}return t.localDocuments.getDocuments(r,_).next(w=>({tr:w,removedBatchIds:l,addedBatchIds:f}))})})}),Xb.apply(this,arguments)}function mP(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Fs.getLastRemoteSnapshotVersion(t))}function _P(n,e,t){let r=Wt(),i=Wt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=mi();return t.forEach((f,_)=>{const w=o.get(f);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(f)),_.isNoDocument()&&_.version.isEqual(It.min())?(e.removeEntry(f,_.readTime),l=l.insert(f,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),l=l.insert(f,_)):Fe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",w.version," Watch version:",_.version)}),{er:l,nr:i}})}function D2(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Gy(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Fs.getTargetData(r,e).next(o=>o?(i=o,ne.resolve(i)):t.Fs.allocateTargetId(r).next(l=>(i=new sl(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Hi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Hi=t.Hi.insert(r.targetId,r),t.Ji.set(e,r.targetId)),r})}function zy(n,e,t){return jA.apply(this,arguments)}function jA(){return jA=(0,me.Z)(function*(n,e,t){const r=Je(n),i=r.Hi.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Zu(l))throw l;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Hi=r.Hi.remove(e),r.Ji.delete(i.target)}),jA.apply(this,arguments)}function Jb(n,e,t){const r=Je(n);let i=It.min(),o=Wt();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,_,w){const b=Je(f),A=b.Ji.get(w);return void 0!==A?ne.resolve(b.Hi.get(A)):b.Fs.getTargetData(_,w)}(r,l,ji(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Fs.getMatchingKeysForTargetId(l,f.targetId).next(_=>{o=_})}).next(()=>r.Wi.getDocumentsMatchingQuery(l,e,t?i:It.min(),t?o:Wt())).next(f=>(wP(r,db(e),f),{documents:f,sr:o})))}function yP(n,e){const t=Je(n),r=Je(t.Fs),i=t.Hi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.he(o,e).next(l=>l?l.target:null))}function vP(n,e){const t=Je(n),r=t.Yi.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Xi.getAllFromCollectionGroup(i,e,_0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(wP(t,e,i),i))}function wP(n,e,t){let r=n.Yi.get(e)||It.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Yi.set(e,r)}function $A(){return $A=(0,me.Z)(function*(n,e,t,r){const i=Je(n);let o=Wt(),l=mi();for(const w of t){const b=e.ir(w.metadata.name);w.document&&(o=o.add(b));const A=e.rr(w);A.setReadTime(e.ur(w.metadata.readTime)),l=l.insert(b,A)}const f=i.Xi.newChangeBuffer({trackRemovals:!0}),_=yield Gy(i,(w=r,ji(Wd(fn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>_P(w,f,l).next(b=>(f.apply(w),b)).next(b=>i.Fs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Fs.addMatchingKeys(w,o,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,b.er,b.nr)).next(()=>b.er)))}),$A.apply(this,arguments)}function S2(n,e){return HA.apply(this,arguments)}function HA(){return HA=(0,me.Z)(function*(n,e,t=Wt()){const r=yield Gy(n,ji(Ny(e.bundledQuery))),i=Je(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const l=Dn(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ls.saveNamedQuery(o,e);const f=r.withResumeToken(Ur.EMPTY_BYTE_STRING,l);return i.Hi=i.Hi.insert(f.targetId,f),i.Fs.updateTargetData(o,f).next(()=>i.Fs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Fs.addMatchingKeys(o,t,r.targetId)).next(()=>i.Ls.saveNamedQuery(o,e))})}),HA.apply(this,arguments)}function EP(n,e){return`firestore_clients_${n}_${e}`}function IP(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function GA(n,e){return`firestore_targets_${n}_${e}`}class eD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static cr(e,t,r){const i=JSON.parse(r);let o,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(o=new Ae(i.error.code,i.error.message))),l?new eD(e,t,i.state,o):(Er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class aE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static cr(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Ae(r.error.code,r.error.message))),o?new aE(e,r.state,i):(Er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static cr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Kf();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=BC(r.activeTargetIds[l]),o=o.add(r.activeTargetIds[l]);return i?new tD(e,o):(Er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zA{constructor(e,t){this.clientId=e,this.onlineState=t}static cr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zA(t.clientId,t.onlineState):(Er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class qA{constructor(){this.activeTargetIds=Kf()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WA{constructor(e,t,r,i,o){this.window=e,this.si=t,this.persistenceKey=r,this.dr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new jn(jt),this.started=!1,this.gr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.yr=EP(this.persistenceKey,this.dr),this.pr=`firestore_sequence_number_${this.persistenceKey}`,this.mr=this.mr.insert(this.dr,new qA),this.Ir=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Tr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Er=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.Ar=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Mi();for(const i of t){if(i===e.dr)continue;const o=e.getItem(EP(e.persistenceKey,i));if(o){const l=tD.cr(i,o);l&&(e.mr=e.mr.insert(l.clientId,l))}}e.vr();const r=e.storage.getItem(e.Ar);if(r){const i=e.Pr(r);i&&e.br(i)}for(const i of e.gr)e.wr(i);e.gr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.pr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Vr(this.mr)}isActiveQueryTarget(e){let t=!1;return this.mr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Sr(e,"pending")}updateMutationState(e,t,r){this.Sr(e,t,r),this.Dr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(GA(this.persistenceKey,e));if(r){const i=aE.cr(e,r);i&&(t=i.state)}}return this.Cr.hr(e),this.vr(),t}removeLocalQueryTarget(e){this.Cr.lr(e),this.vr()}isLocalQueryTarget(e){return this.Cr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(GA(this.persistenceKey,e))}updateQueryState(e,t,r){this.Nr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Dr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.kr(e)}notifyBundleLoaded(e){this.Mr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}wr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.yr)return void Er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ir.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.$r(i,null)}{const i=t.Fr(r.key,r.newValue);if(i)return t.$r(i.clientId,i)}}else if(t.Tr.test(r.key)){if(null!==r.newValue){const i=t.Br(r.key,r.newValue);if(i)return t.Lr(i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.qr(r.key,r.newValue);if(i)return t.Ur(i)}}else if(r.key===t.Ar){if(null!==r.newValue){const i=t.Pr(r.newValue);if(i)return t.br(i)}}else if(r.key===t.pr){const i=function(o){let l=Zs.ct;if(null!=o)try{const f=JSON.parse(o);wt("number"==typeof f),l=f}catch(f){Er("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==Zs.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Kr(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Gr(o)))}}else t.gr.push(r)}))}}get Cr(){return this.mr.get(this.dr)}vr(){this.setItem(this.yr,this.Cr.ar())}Sr(e,t,r){const i=new eD(this.currentUser,e,t,r),o=IP(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ar())}Dr(e){const t=IP(this.persistenceKey,this.currentUser,e);this.removeItem(t)}kr(e){this.storage.setItem(this.Ar,JSON.stringify({clientId:this.dr,onlineState:e}))}Nr(e,t,r){const i=GA(this.persistenceKey,e),o=new aE(e,t,r);this.setItem(i,o.ar())}Mr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Ir.exec(e);return t?t[1]:null}Fr(e,t){const r=this.Or(e);return tD.cr(r,t)}Br(e,t){const r=this.Tr.exec(e),i=Number(r[1]);return eD.cr(new hi(void 0!==r[2]?r[2]:null),i,t)}qr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return aE.cr(i,t)}Pr(e){return zA.cr(e)}Kr(e){return JSON.parse(e)}Lr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Qr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Ur(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}$r(e,t){const r=t?this.mr.insert(e,t):this.mr.remove(e),i=this.Vr(this.mr),o=this.Vr(r),l=[],f=[];return o.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{o.has(_)||f.push(_)}),this.syncEngine.zr(l,f).then(()=>{this.mr=r})}br(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Vr(e){let t=Kf();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class CP{constructor(){this.Wr=new qA,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,t,r){this.Hr[e]=t}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new qA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class A2{Jr(e){}shutdown(){}}class bP{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let nD=null;function ZA(){return null===nD?nD=268435456+Math.round(2147483648*Math.random()):nD++,"0x"+nD.toString(16)}const x2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class R2{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}const Es="WebChannelConnection";class M2 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.wo=(e.ssl?"https":"http")+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,t,r,i,o){const l=ZA(),f=this.Io(e,t);Fe("RestConnection",`Sending RPC '${e}' ${l}:`,f,r);const _={};return this.To(_,i,o),this.Eo(e,f,_,r).then(w=>(Fe("RestConnection",`Received RPC '${e}' ${l}: `,w),w),w=>{throw Io("RestConnection",`RPC '${e}' ${l} failed with error: `,w,"url: ",f,"request:",r),w})}Ao(e,t,r,i,o,l){return this.po(e,t,r,i,o)}To(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Io(e,t){return`${this.wo}/v1/${t}:${x2[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,t,r,i){const o=ZA();return new Promise((l,f)=>{const _=new LS;_.setWithCredentials(!0),_.listenOnce(eP.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Yg.NO_ERROR:const b=_.getResponseJson();Fe(Es,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(b)),l(b);break;case Yg.TIMEOUT:Fe(Es,`RPC '${e}' ${o} timed out`),f(new Ae(le.DEADLINE_EXCEEDED,"Request time out"));break;case Yg.HTTP_ERROR:const A=_.getStatus();if(Fe(Es,`RPC '${e}' ${o} failed with status:`,A,"response text:",_.getResponseText()),A>0){let P=_.getResponseJson();Array.isArray(P)&&(P=P[0]);const U=P?.error;if(U&&U.status&&U.message){const q=function(oe){const he=oe.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(he)>=0?he:le.UNKNOWN}(U.status);f(new Ae(q,U.message))}else f(new Ae(le.UNKNOWN,"Server responded with status "+_.getStatus()))}else f(new Ae(le.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{Fe(Es,`RPC '${e}' ${o} completed.`)}});const w=JSON.stringify(i);Fe(Es,`RPC '${e}' ${o} sending request:`,i),_.send(t,"POST",w,r,15)})}Ro(e,t,r){const i=ZA(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Uf(),f=JN(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new tP({})),this.To(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const w=o.join("");Fe(Es,`Creating RPC '${e}' stream ${i}: ${w}`,_);const b=l.createWebChannel(w,_);let A=!1,P=!1;const U=new R2({io:oe=>{P?Fe(Es,`Not sending because RPC '${e}' stream ${i} is closed:`,oe):(A||(Fe(Es,`Opening RPC '${e}' stream ${i} transport.`),b.open(),A=!0),Fe(Es,`RPC '${e}' stream ${i} sending:`,oe),b.send(oe))},ro:()=>b.close()}),q=(oe,he,Xe)=>{oe.listen(he,lt=>{try{Xe(lt)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return q(b,St.EventType.OPEN,()=>{P||Fe(Es,`RPC '${e}' stream ${i} transport opened.`)}),q(b,St.EventType.CLOSE,()=>{P||(P=!0,Fe(Es,`RPC '${e}' stream ${i} transport closed`),U.fo())}),q(b,St.EventType.ERROR,oe=>{P||(P=!0,Io(Es,`RPC '${e}' stream ${i} transport errored:`,oe),U.fo(new Ae(le.UNAVAILABLE,"The operation could not be completed")))}),q(b,St.EventType.MESSAGE,oe=>{var he;if(!P){const Xe=oe.data[0];wt(!!Xe);const Ye=Xe.error||(null===(he=Xe[0])||void 0===he?void 0:he.error);if(Ye){Fe(Es,`RPC '${e}' stream ${i} received error:`,Ye);const Ct=Ye.status;let Gt=function(Di){const Do=Qr[Di];if(void 0!==Do)return gA(Do)}(Ct),Jt=Ye.message;void 0===Gt&&(Gt=le.INTERNAL,Jt="Unknown error status: "+Ct+" with message "+Ye.message),P=!0,U.fo(new Ae(Gt,Jt)),b.close()}else Fe(Es,`RPC '${e}' stream ${i} received:`,Xe),U._o(Xe)}}),q(f,xC.STAT_EVENT,oe=>{oe.stat===f0.PROXY?Fe(Es,`RPC '${e}' stream ${i} detected buffering proxy`):oe.stat===f0.NOPROXY&&Fe(Es,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{U.lo()},0),U}}function DP(){return typeof window<"u"?window:null}function rD(){return typeof document<"u"?document:null}function uE(n){return new aP(n,!0)}class KA{constructor(e,t,r=1e3,i=1.5,o=6e4){this.si=e,this.timerId=t,this.vo=r,this.Po=i,this.bo=o,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const t=Math.floor(this.Vo+this.No()),r=Math.max(0,Date.now()-this.Do),i=Math.max(0,t-r);i>0&&Fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Vo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){null!==this.So&&(this.So.skipDelay(),this.So=null)}cancel(){null!==this.So&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}class TP{constructor(e,t,r,i,o,l,f,_){this.si=e,this.Mo=r,this.Oo=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new KA(e,t)}qo(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Ko()}stop(){var e=this;return(0,me.Z)(function*(){e.qo()&&(yield e.close(0))})()}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}jo(){var e=this;return(0,me.Z)(function*(){if(e.Uo())return e.close(0)})()}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Wo(),r.Ho(),r.Lo.cancel(),r.$o++,4!==e?r.Lo.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Er(t.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),r.Lo.Co()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Jo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.co(t)})()}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),t=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.$o===t&&this.Xo(r,i)},r=>{e(()=>{const i=new Ae(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Zo(i)})})}Xo(e,t){const r=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo(()=>{r(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(i=>{r(()=>this.Zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Ko(){var e=this;this.state=5,this.Lo.xo((0,me.Z)(function*(){e.state=0,e.start()}))}Zo(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return t=>{this.si.enqueueAndForget(()=>this.$o===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class N2 extends TP{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}tu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.Lo.reset();const t=function Lb(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:at(),i=e.targetChange.targetIds||[],o=function(_,w){return _.useProto3Json?(wt(void 0===w||"string"==typeof w),Ur.fromBase64String(w||"")):(wt(void 0===w||w instanceof Uint8Array),Ur.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(_){const w=void 0===_.code?le.UNKNOWN:gA(_.code);return new Ae(w,_.message||"")}(l);t=new _m(r,i,o,f||null)}else if("documentChange"in e){const r=e.documentChange,i=rl(n,r.document.name),o=Dn(r.document.updateTime),l=r.document.createTime?Dn(r.document.createTime):It.min(),f=new gi({mapValue:{fields:r.document.fields}}),_=tr.newFoundDocument(i,o,l,f);t=new Sy(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=rl(n,r.document),o=r.readTime?Dn(r.readTime):It.min(),l=tr.newNoDocument(i,o);t=new Sy([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=rl(n,r.document);t=new Sy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return at();{const r=e.filter,{count:i=0,unchangedNames:o}=r,l=new sP(i,o);t=new Mb(r.targetId,l)}}var _;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return It.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?It.min():o.readTime?Dn(o.readTime):It.min()}(e);return this.listener.eu(t,r)}nu(e){const t={};t.database=th(this.serializer),t.addTarget=function(i,o){let l;const f=o.target;if(l=gy(f)?{documents:Ub(i,f)}:{query:My(i,f)},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=z0(i,o.resumeToken);const _=G0(i,o.expectedCount);null!==_&&(l.expectedCount=_)}else if(o.snapshotVersion.compareTo(It.min())>0){l.readTime=eh(i,o.snapshotVersion.toTimestamp());const _=G0(i,o.expectedCount);null!==_&&(l.expectedCount=_)}return l}(this.serializer,e);const r=function W0(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.zo(t)}su(e){const t={};t.database=th(this.serializer),t.removeTarget=e,this.zo(t)}}class P2 extends TP{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const t=function Vb(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,i){let o=Dn(r.updateTime?r.updateTime:i);return o.isEqual(It.min())&&(o=Dn(i)),new fA(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Dn(e.commitTime);return this.listener.uu(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}au(){const e={};e.database=th(this.serializer),this.zo(e)}ou(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>vm(this.serializer,r))};this.zo(t)}}class O2 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.hu=!1}lu(){if(this.hu)throw new Ae(le.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,t,r){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.po(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ae(le.UNKNOWN,i.toString())})}Ao(e,t,r,i){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ao(e,t,r,o,l,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(le.UNKNOWN,o.toString())})}terminate(){this.hu=!0}}class F2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(Er(t),this.wu=!1):Fe("OnlineStateTracker",t)}Iu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class L2{constructor(e,t,r,i,o){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=o,this.vu.Jr(f=>{r.enqueueAndForget((0,me.Z)(function*(){var _;op(l)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,me.Z)(function*(w){const b=Je(w);b.Au.add(4),yield qy(b),b.Pu.set("Unknown"),b.Au.delete(4),yield lE(b)}),function(w){return _.apply(this,arguments)})(l))}))}),this.Pu=new F2(r,i)}}function lE(n){return QA.apply(this,arguments)}function QA(){return QA=(0,me.Z)(function*(n){if(op(n))for(const e of n.Ru)yield e(!0)}),QA.apply(this,arguments)}function qy(n){return XA.apply(this,arguments)}function XA(){return XA=(0,me.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),XA.apply(this,arguments)}function iD(n,e){const t=Je(n);t.Eu.has(e.targetId)||(t.Eu.set(e.targetId,e),tx(t)?ex(t):Zy(t).Uo()&&JA(t,e))}function cE(n,e){const t=Je(n),r=Zy(t);t.Eu.delete(e),r.Uo()&&SP(t,e),0===t.Eu.size&&(r.Uo()?r.Qo():op(t)&&t.Pu.set("Unknown"))}function JA(n,e){if(n.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(It.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Zy(n).nu(e)}function SP(n,e){n.bu.Lt(e),Zy(n).su(e)}function ex(n){n.bu=new oP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),he:e=>n.Eu.get(e)||null,oe:()=>n.datastore.serializer.databaseId}),Zy(n).start(),n.Pu.mu()}function tx(n){return op(n)&&!Zy(n).qo()&&n.Eu.size>0}function op(n){return 0===Je(n).Au.size}function AP(n){n.bu=void 0}function V2(n){return nx.apply(this,arguments)}function nx(){return nx=(0,me.Z)(function*(n){n.Eu.forEach((e,t)=>{JA(n,e)})}),nx.apply(this,arguments)}function U2(n,e){return rx.apply(this,arguments)}function rx(){return rx=(0,me.Z)(function*(n,e){AP(n),tx(n)?(n.Pu.pu(e),ex(n)):n.Pu.set("Unknown")}),rx.apply(this,arguments)}function B2(n,e,t){return ix.apply(this,arguments)}function ix(){return ix=(0,me.Z)(function*(n,e,t){if(n.Pu.set("Online"),e instanceof _m&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(i,o){const l=o.cause;for(const f of o.targetIds)i.Eu.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.Eu.delete(f),i.bu.removeTarget(f))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield sD(n,r)}else if(e instanceof Sy?n.bu.Wt(e):e instanceof Mb?n.bu.ee(e):n.bu.Yt(e),!t.isEqual(It.min()))try{const r=yield mP(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const l=i.bu.ue(o);return l.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const w=i.Eu.get(_);w&&i.Eu.set(_,w.withResumeToken(f.resumeToken,o))}}),l.targetMismatches.forEach((f,_)=>{const w=i.Eu.get(f);if(!w)return;i.Eu.set(f,w.withResumeToken(Ur.EMPTY_BYTE_STRING,w.snapshotVersion)),SP(i,f);const b=new sl(w.target,f,_,w.sequenceNumber);JA(i,b)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield sD(n,r)}var r}),ix.apply(this,arguments)}function sD(n,e,t){return sx.apply(this,arguments)}function sx(){return sx=(0,me.Z)(function*(n,e,t){if(!Zu(e))throw e;n.Au.add(1),yield qy(n),n.Pu.set("Offline"),t||(t=()=>mP(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.Au.delete(1),yield lE(n)}))}),sx.apply(this,arguments)}function xP(n,e){return e().catch(t=>sD(n,t,e))}function Wy(n){return ox.apply(this,arguments)}function ox(){return ox=(0,me.Z)(function*(n){const e=Je(n),t=ap(e);let r=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;j2(e);)try{const i=yield D2(e.localStore,r);if(null===i){0===e.Tu.length&&t.Qo();break}r=i.batchId,$2(e,i)}catch(i){yield sD(e,i)}RP(e)&&MP(e)}),ox.apply(this,arguments)}function j2(n){return op(n)&&n.Tu.length<10}function $2(n,e){n.Tu.push(e);const t=ap(n);t.Uo()&&t.ru&&t.ou(e.mutations)}function RP(n){return op(n)&&!ap(n).qo()&&n.Tu.length>0}function MP(n){ap(n).start()}function H2(n){return ax.apply(this,arguments)}function ax(){return ax=(0,me.Z)(function*(n){ap(n).au()}),ax.apply(this,arguments)}function G2(n){return ux.apply(this,arguments)}function ux(){return ux=(0,me.Z)(function*(n){const e=ap(n);for(const t of n.Tu)e.ou(t.mutations)}),ux.apply(this,arguments)}function z2(n,e,t){return lx.apply(this,arguments)}function lx(){return lx=(0,me.Z)(function*(n,e,t){const r=n.Tu.shift(),i=Ab.from(r,e,t);yield xP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Wy(n)}),lx.apply(this,arguments)}function q2(n,e){return cx.apply(this,arguments)}function cx(){return cx=(0,me.Z)(function*(n,e){var t;e&&ap(n).ru&&(yield(t=(0,me.Z)(function*(r,i){if(gm(o=i.code)&&o!==le.ABORTED){const l=r.Tu.shift();ap(r).Go(),yield xP(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Wy(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),RP(n)&&MP(n)}),cx.apply(this,arguments)}function NP(n,e){return dx.apply(this,arguments)}function dx(){return dx=(0,me.Z)(function*(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=op(t);t.Au.add(3),yield qy(t),r&&t.Pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Au.delete(3),yield lE(t)}),dx.apply(this,arguments)}function hx(n,e){return fx.apply(this,arguments)}function fx(){return fx=(0,me.Z)(function*(n,e){const t=Je(n);e?(t.Au.delete(2),yield lE(t)):e||(t.Au.add(2),yield qy(t),t.Pu.set("Unknown"))}),fx.apply(this,arguments)}function Zy(n){return n.Vu||(n.Vu=function(e,t,r){const i=Je(e);return i.lu(),new N2(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{oo:V2.bind(null,n),co:U2.bind(null,n),eu:B2.bind(null,n)}),n.Ru.push(function(){var e=(0,me.Z)(function*(t){t?(n.Vu.Go(),tx(n)?ex(n):n.Pu.set("Unknown")):(yield n.Vu.stop(),AP(n))});return function(t){return e.apply(this,arguments)}}())),n.Vu}function ap(n){return n.Su||(n.Su=function(e,t,r){const i=Je(e);return i.lu(),new P2(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{oo:H2.bind(null,n),co:q2.bind(null,n),cu:G2.bind(null,n),uu:z2.bind(null,n)}),n.Ru.push(function(){var e=(0,me.Z)(function*(t){t?(n.Su.Go(),yield Wy(n)):(yield n.Su.stop(),n.Tu.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.Tu.length} pending writes`),n.Tu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Su}class px{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,f=new px(e,t,l,i,o);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ky(n,e){if(Er("AsyncQueue",`${e}: ${n}`),Zu(n))return new Ae(le.UNAVAILABLE,`${e}: ${n}`);throw n}class Yy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=Zd(),this.sortedSet=new jn(this.comparator)}static emptySet(e){return new Yy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Yy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class PP{constructor(){this.Du=new jn(Qe.comparator)}track(e){const t=e.doc.key,r=this.Du.get(t);r?0!==e.type&&3===r.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==r.type?this.Du=this.Du.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Du=this.Du.remove(t):1===e.type&&2===r.type?this.Du=this.Du.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):at():this.Du=this.Du.insert(t,e)}Cu(){const e=[];return this.Du.inorderTraversal((t,r)=>{e.push(r)}),e}}class Qy{constructor(e,t,r,i,o,l,f,_,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=_,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new Qy(e,t,Yy.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class W2{constructor(){this.xu=void 0,this.listeners=[]}}class Z2{constructor(){this.queries=new Qa(e=>$i(e),cm),this.onlineState="Unknown",this.Nu=new Set}}function gx(n,e){return mx.apply(this,arguments)}function mx(){return mx=(0,me.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new W2),i)try{o.xu=yield t.onListen(r)}catch(l){const f=Ky(l,`Initialization of query '${wc(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,o),o.listeners.push(e),e.ku(t.onlineState),o.xu&&e.Mu(o.xu)&&vx(t)}),mx.apply(this,arguments)}function _x(n,e){return yx.apply(this,arguments)}function yx(){return yx=(0,me.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const l=o.listeners.indexOf(e);l>=0&&(o.listeners.splice(l,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),yx.apply(this,arguments)}function K2(n,e){const t=Je(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.Mu(i)&&(r=!0);l.xu=i}}r&&vx(t)}function Y2(n,e,t){const r=Je(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function vx(n){n.Nu.forEach(e=>{e.next()})}class wx{constructor(e,t,r){this.query=e,this.Ou=t,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=r||{}}Mu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Qy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),t=!0):this.Lu(e,this.onlineState)&&(this.qu(e),t=!0),this.Fu=e,t}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}Lu(e,t){return!e.fromCache||(!this.options.Uu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Bu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}qu(e){e=Qy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}class Q2{constructor(e,t){this.Ku=e,this.byteLength=t}Gu(){return"metadata"in this.Ku}}class OP{constructor(e){this.serializer=e}ir(e){return rl(this.serializer,e)}rr(e){return e.metadata.exists?xy(this.serializer,e.document,!1):tr.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}ur(e){return Dn(e)}}class X2{constructor(e,t,r){this.Qu=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=kP(e)}ju(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;const r=fn.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}zu(e){const t=new Map,r=new OP(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.ir(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||Wt()).add(o);t.set(l,f)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function T2(n,e,t,r){return $A.apply(this,arguments)}(e.localStore,new OP(e.serializer),e.documents,e.Qu.id),r=e.zu(e.documents);for(const i of e.queries)yield S2(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Wu:e.collectionGroups,Hu:t}})()}}function kP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class FP{constructor(e){this.key=e}}class LP{constructor(e){this.key=e}}class VP{constructor(e,t){this.query=e,this.Ju=t,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=Wt(),this.mutatedKeys=Wt(),this.Zu=uA(e),this.tc=new Yy(this.Zu)}get ec(){return this.Ju}nc(e,t){const r=t?t.sc:new PP,i=t?t.tc:this.tc;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,A)=>{const P=i.get(b),U=dm(this.query,A)?A:null,q=!!P&&this.mutatedKeys.has(P.key),oe=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let he=!1;P&&U?P.data.isEqual(U.data)?q!==oe&&(r.track({type:3,doc:U}),he=!0):this.ic(P,U)||(r.track({type:2,doc:U}),he=!0,(_&&this.Zu(U,_)>0||w&&this.Zu(U,w)<0)&&(f=!0)):!P&&U?(r.track({type:0,doc:U}),he=!0):P&&!U&&(r.track({type:1,doc:P}),he=!0,(_||w)&&(f=!0)),he&&(U?(l=l.add(U),o=oe?o.add(b):o.delete(b)):(l=l.delete(b),o=o.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),o=o.delete(b.key),r.track({type:1,doc:b})}return{tc:l,sc:r,ji:f,mutatedKeys:o}}ic(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const o=e.sc.Cu();o.sort((w,b)=>function(A,P){const U=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return U(A)-U(P)}(w.type,b.type)||this.Zu(w.doc,b.doc)),this.rc(r);const l=t?this.oc():[],f=0===this.Xu.size&&this.current?1:0,_=f!==this.Yu;return this.Yu=f,0!==o.length||_?{snapshot:new Qy(this.query,e.tc,i,o,e.mutatedKeys,0===f,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),uc:l}:{uc:l}}ku(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new PP,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(t=>this.Ju=this.Ju.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ju=this.Ju.delete(t)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=Wt(),this.tc.forEach(r=>{this.cc(r.key)&&(this.Xu=this.Xu.add(r.key))});const t=[];return e.forEach(r=>{this.Xu.has(r)||t.push(new LP(r))}),this.Xu.forEach(r=>{e.has(r)||t.push(new FP(r))}),t}ac(e){this.Ju=e.sr,this.Xu=Wt();const t=this.nc(e.documents);return this.applyChanges(t,!0)}hc(){return Qy.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}class J2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class eV{constructor(e){this.key=e,this.lc=!1}}class tV{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.fc={},this.dc=new Qa(f=>$i(f),cm),this._c=new Map,this.wc=new Set,this.mc=new jn(Qe.comparator),this.gc=new Map,this.yc=new a,this.Ic={},this.Tc=new Map,this.Ec=oh.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return!0===this.Ac}}function nV(n,e){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,me.Z)(function*(n,e){const t=Gx(n);let r,i;const o=t.dc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.hc();else{const l=yield Gy(t.localStore,ji(e)),f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield Ix(t,e,r,"current"===f,l.resumeToken),t.isPrimaryClient&&iD(t.remoteStore,l)}return i}),Ex.apply(this,arguments)}function Ix(n,e,t,r,i){return Cx.apply(this,arguments)}function Cx(){return Cx=(0,me.Z)(function*(n,e,t,r,i){n.Rc=(A,P,U)=>{return(q=(0,me.Z)(function*(oe,he,Xe,lt){let Ye=he.view.nc(Xe);Ye.ji&&(Ye=yield Jb(oe.localStore,he.query,!1).then(({documents:Jt})=>he.view.nc(Jt,Ye)));const Ct=lt&&lt.targetChanges.get(he.targetId),Gt=he.view.applyChanges(Ye,oe.isPrimaryClient,Ct);return Px(oe,he.targetId,Gt.uc),Gt.snapshot}),function(oe,he,Xe,lt){return q.apply(this,arguments)})(n,A,P,U);var q};const o=yield Jb(n.localStore,e,!0),l=new VP(e,o.sr),f=l.nc(o.documents),_=Ty.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=l.applyChanges(f,n.isPrimaryClient,_);Px(n,t,w.uc);const b=new J2(e,t,l);return n.dc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),w.snapshot}),Cx.apply(this,arguments)}function rV(n,e){return bx.apply(this,arguments)}function bx(){return bx=(0,me.Z)(function*(n,e){const t=Je(n),r=t.dc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(o=>!cm(o,e))),void t.dc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield zy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),cE(t.remoteStore,r.targetId),Xy(t,r.targetId)}).catch($d))):(Xy(t,r.targetId),yield zy(t.localStore,r.targetId,!0))}),bx.apply(this,arguments)}function Dx(){return Dx=(0,me.Z)(function*(n,e,t){const r=zx(n);try{const i=yield function(o,l){const f=Je(o),_=zn.now(),w=l.reduce((P,U)=>P.add(U.key),Wt());let b,A;return f.persistence.runTransaction("Locally write mutations","readwrite",P=>{let U=mi(),q=Wt();return f.Xi.getEntries(P,w).next(oe=>{U=oe,U.forEach((he,Xe)=>{Xe.isValidDocument()||(q=q.add(he))})}).next(()=>f.localDocuments.getOverlayedDocuments(P,U)).next(oe=>{b=oe;const he=[];for(const Xe of l){const lt=Cb(Xe,b.get(Xe.key).overlayedDocument);null!=lt&&he.push(new Xa(Xe.key,lt,tb(lt.value.mapValue),qn.exists(!0)))}return f.mutationQueue.addMutationBatch(P,_,he,l)}).next(oe=>{A=oe;const he=oe.applyToLocalDocumentSet(b,q);return f.documentOverlayCache.saveOverlays(P,oe.batchId,he)})}).then(()=>({batchId:A.batchId,changes:fb(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,f){let _=o.Ic[o.currentUser.toKey()];_||(_=new jn(jt)),_=_.insert(l,f),o.Ic[o.currentUser.toKey()]=_}(r,i.batchId,t),yield uh(r,i.changes),yield Wy(r.remoteStore)}catch(i){const o=Ky(i,"Failed to persist write");t.reject(o)}}),Dx.apply(this,arguments)}function UP(n,e){return Tx.apply(this,arguments)}function Tx(){return Tx=(0,me.Z)(function*(n,e){const t=Je(n);try{const r=yield function b2(n,e){const t=Je(n),r=e.snapshotVersion;let i=t.Hi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.Xi.newChangeBuffer({trackRemovals:!0});i=t.Hi;const f=[];e.targetChanges.forEach((b,A)=>{const P=i.get(A);if(!P)return;f.push(t.Fs.removeMatchingKeys(o,b.removedDocuments,A).next(()=>t.Fs.addMatchingKeys(o,b.addedDocuments,A)));let U=P.withSequenceNumber(o.currentSequenceNumber);var q,oe,he;null!==e.targetMismatches.get(A)?U=U.withResumeToken(Ur.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):b.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(b.resumeToken,r)),i=i.insert(A,U),oe=U,he=b,(0===(q=P).resumeToken.approximateByteSize()||oe.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||he.addedDocuments.size+he.modifiedDocuments.size+he.removedDocuments.size>0)&&f.push(t.Fs.updateTargetData(o,U))});let _=mi(),w=Wt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(o,b))}),f.push(_P(o,l,e.documentUpdates).next(b=>{_=b.er,w=b.nr})),!r.isEqual(It.min())){const b=t.Fs.getLastRemoteSnapshotVersion(o).next(A=>t.Fs.setTargetsMetadata(o,o.currentSequenceNumber,r));f.push(b)}return ne.waitFor(f).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,_,w)).next(()=>_)}).then(o=>(t.Hi=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.gc.get(o);l&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.lc=!0:i.modifiedDocuments.size>0?wt(l.lc):i.removedDocuments.size>0&&(wt(l.lc),l.lc=!1))}),yield uh(t,r,e)}catch(r){yield $d(r)}}),Tx.apply(this,arguments)}function BP(n,e,t){const r=Je(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.dc.forEach((o,l)=>{const f=l.view.ku(e);f.snapshot&&i.push(f.snapshot)}),function(o,l){const f=Je(o);f.onlineState=l;let _=!1;f.queries.forEach((w,b)=>{for(const A of b.listeners)A.ku(l)&&(_=!0)}),_&&vx(f)}(r.eventManager,e),i.length&&r.fc.eu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function sV(n,e,t){return Sx.apply(this,arguments)}function Sx(){return Sx=(0,me.Z)(function*(n,e,t){const r=Je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.gc.get(e),o=i&&i.key;if(o){let l=new jn(Qe.comparator);l=l.insert(o,tr.newNoDocument(o,It.min()));const f=Wt().add(o),_=new Dy(It.min(),new Map,new jn(jt),l,f);yield UP(r,_),r.mc=r.mc.remove(o),r.gc.delete(e),Ox(r)}else yield zy(r.localStore,e,!1).then(()=>Xy(r,e,t)).catch($d)}),Sx.apply(this,arguments)}function oV(n,e){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,me.Z)(function*(n,e){const t=Je(n),r=e.batch.batchId;try{const i=yield function C2(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Xi.newChangeBuffer({trackRemovals:!0});return function(l,f,_,w){const b=_.batch,A=b.keys();let P=ne.resolve();return A.forEach(U=>{P=P.next(()=>w.getEntry(f,U)).next(q=>{const oe=_.docVersions.get(U);wt(null!==oe),q.version.compareTo(oe)<0&&(b.applyToRemoteDocument(q,_),q.isValidDocument()&&(q.setReadTime(_.commitVersion),w.addEntry(q)))})}),P.next(()=>l.mutationQueue.removeMutationBatch(f,b))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=Wt();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(f=f.add(l.batch.mutations[_].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);Nx(t,r,null),Mx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield uh(t,i)}catch(i){yield $d(i)}}),Ax.apply(this,arguments)}function aV(n,e,t){return xx.apply(this,arguments)}function xx(){return xx=(0,me.Z)(function*(n,e,t){const r=Je(n);try{const i=yield function(o,l){const f=Je(o);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return f.mutationQueue.lookupMutationBatch(_,l).next(b=>(wt(null!==b),w=b.keys(),f.mutationQueue.removeMutationBatch(_,b))).next(()=>f.mutationQueue.performConsistencyCheck(_)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(_,w,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>f.localDocuments.getDocuments(_,w))})}(r.localStore,e);Nx(r,e,t),Mx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield uh(r,i)}catch(i){yield $d(i)}}),xx.apply(this,arguments)}function Rx(){return Rx=(0,me.Z)(function*(n,e){const t=Je(n);op(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const l=Je(o);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Tc.get(r)||[];i.push(e),t.Tc.set(r,i)}catch(r){const i=Ky(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Rx.apply(this,arguments)}function Mx(n,e){(n.Tc.get(e)||[]).forEach(t=>{t.resolve()}),n.Tc.delete(e)}function Nx(n,e,t){const r=Je(n);let i=r.Ic[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ic[r.currentUser.toKey()]=i}}function Xy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.dc.delete(r),t&&n.fc.vc(r,t);n._c.delete(e),n.isPrimaryClient&&n.yc.ps(e).forEach(r=>{n.yc.containsKey(r)||jP(n,r)})}function jP(n,e){n.wc.delete(e.path.canonicalString());const t=n.mc.get(e);null!==t&&(cE(n.remoteStore,t),n.mc=n.mc.remove(e),n.gc.delete(t),Ox(n))}function Px(n,e,t){for(const r of t)r instanceof FP?(n.yc.addReference(r.key,e),lV(n,r)):r instanceof LP?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.yc.removeReference(r.key,e),n.yc.containsKey(r.key)||jP(n,r.key)):at()}function lV(n,e){const t=e.key,r=t.path.canonicalString();n.mc.get(t)||n.wc.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.wc.add(r),Ox(n))}function Ox(n){for(;n.wc.size>0&&n.mc.size<n.maxConcurrentLimboResolutions;){const e=n.wc.values().next().value;n.wc.delete(e);const t=new Qe(fn.fromString(e)),r=n.Ec.next();n.gc.set(r,new eV(t)),n.mc=n.mc.insert(t,r),iD(n.remoteStore,new sl(ji(Wd(t.path)),r,"TargetPurposeLimboResolution",Zs.ct))}}function uh(n,e,t){return kx.apply(this,arguments)}function kx(){return kx=(0,me.Z)(function*(n,e,t){const r=Je(n),i=[],o=[],l=[];var f;r.dc.isEmpty()||(r.dc.forEach((f,_)=>{l.push(r.Rc(_,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const b=Mt.Bi(_.targetId,w);o.push(b)}}))}),yield Promise.all(l),r.fc.eu(i),yield(f=(0,me.Z)(function*(_,w){const b=Je(_);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>ne.forEach(w,P=>ne.forEach(P.$i,U=>b.persistence.referenceDelegate.addReference(A,P.targetId,U)).next(()=>ne.forEach(P.Fi,U=>b.persistence.referenceDelegate.removeReference(A,P.targetId,U)))))}catch(A){if(!Zu(A))throw A;Fe("LocalStore","Failed to update sequence numbers: "+A)}for(const A of w){const P=A.targetId;if(!A.fromCache){const U=b.Hi.get(P),oe=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);b.Hi=b.Hi.insert(P,oe)}}}),function(_,w){return f.apply(this,arguments)})(r.localStore,o))}),kx.apply(this,arguments)}function cV(n,e){return Fx.apply(this,arguments)}function Fx(){return Fx=(0,me.Z)(function*(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield Cr(t.localStore,e);t.currentUser=e,(i=t).Tc.forEach(l=>{l.forEach(f=>{f.reject(new Ae(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Tc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield uh(t,r.tr)}var i}),Fx.apply(this,arguments)}function dV(n,e){const t=Je(n),r=t.gc.get(e);if(r&&r.lc)return Wt().add(r.key);{let i=Wt();const o=t._c.get(e);if(!o)return i;for(const l of o){const f=t.dc.get(l);i=i.unionWith(f.view.ec)}return i}}function hV(n,e){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,me.Z)(function*(n,e){const t=Je(n),r=yield Jb(t.localStore,e.query,!0),i=e.view.ac(r);return t.isPrimaryClient&&Px(t,e.targetId,i.uc),i}),Lx.apply(this,arguments)}function fV(n,e){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,me.Z)(function*(n,e){const t=Je(n);return vP(t.localStore,e).then(r=>uh(t,r))}),Vx.apply(this,arguments)}function pV(n,e,t,r){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,me.Z)(function*(n,e,t,r){const i=Je(n),o=yield function(l,f){const _=Je(l),w=Je(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",b=>w.Vn(b,f).next(A=>A?_.localDocuments.getDocuments(b,A):ne.resolve(null)))}(i.localStore,e);var f;null!==o?("pending"===t?yield Wy(i.remoteStore):"acknowledged"===t||"rejected"===t?(Nx(i,e,r||null),Mx(i,e),f=e,Je(Je(i.localStore).mutationQueue).Dn(f)):at(),yield uh(i,o)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ux.apply(this,arguments)}function Bx(){return Bx=(0,me.Z)(function*(n,e){const t=Je(n);if(Gx(t),zx(t),!0===e&&!0!==t.Ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield $P(t,r.toArray());t.Ac=!0,yield hx(t.remoteStore,!0);for(const o of i)iD(t.remoteStore,o)}else if(!1===e&&!1!==t.Ac){const r=[];let i=Promise.resolve();t._c.forEach((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Xy(t,l),zy(t.localStore,l,!0))),cE(t.remoteStore,l)}),yield i,yield $P(t,r),function(o){const l=Je(o);l.gc.forEach((f,_)=>{cE(l.remoteStore,_)}),l.yc.Is(),l.gc=new Map,l.mc=new jn(Qe.comparator)}(t),t.Ac=!1,yield hx(t.remoteStore,!1)}}),Bx.apply(this,arguments)}function $P(n,e,t){return jx.apply(this,arguments)}function jx(){return jx=(0,me.Z)(function*(n,e,t){const r=Je(n),i=[],o=[];for(const l of e){let f;const _=r._c.get(l);if(_&&0!==_.length){f=yield Gy(r.localStore,ji(_[0]));for(const w of _){const b=r.dc.get(w),A=yield hV(r,b);A.snapshot&&o.push(A.snapshot)}}else{const w=yield yP(r.localStore,l);f=yield Gy(r.localStore,w),yield Ix(r,HP(w),l,!1,f.resumeToken)}i.push(f)}return r.fc.eu(o),i}),jx.apply(this,arguments)}function HP(n){return _y(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function mV(n){const e=Je(n);return Je(Je(e.localStore).persistence).Mi()}function _V(n,e,t,r){return $x.apply(this,arguments)}function $x(){return $x=(0,me.Z)(function*(n,e,t,r){const i=Je(n);if(i.Ac)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const o=i._c.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=yield vP(i.localStore,db(o[0])),f=Dy.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ur.EMPTY_BYTE_STRING);yield uh(i,l,f);break}case"rejected":yield zy(i.localStore,e,!0),Xy(i,e,r);break;default:at()}}),$x.apply(this,arguments)}function yV(n,e,t){return Hx.apply(this,arguments)}function Hx(){return Hx=(0,me.Z)(function*(n,e,t){const r=Gx(n);if(r.Ac){for(const i of e){if(r._c.has(i)){Fe("SyncEngine","Adding an already active target "+i);continue}const o=yield yP(r.localStore,i),l=yield Gy(r.localStore,o);yield Ix(r,HP(o),l.targetId,!1,l.resumeToken),iD(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield zy(r.localStore,i,!1).then(()=>{cE(r.remoteStore,i),Xy(r,i)}).catch($d))}}),Hx.apply(this,arguments)}function Gx(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=UP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sV.bind(null,e),e.fc.eu=K2.bind(null,e.eventManager),e.fc.vc=Y2.bind(null,e.eventManager),e}function zx(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aV.bind(null,e),e}class dE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.serializer=uE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Wn(this.persistence,new Re,e.initialUser,this.serializer)}createPersistence(e){return new C(R.js,this.serializer)}createSharedClientState(e){return new CP}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class qx extends dE{constructor(e,t,r){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.bc.initialize(r,e),yield zx(r.bc.syncEngine),yield Wy(r.bc.remoteStore),yield r.persistence.pi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Wn(this.persistence,new Re,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Yb(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new w0(t,this.persistence);return new zS(e.asyncQueue,r)}createPersistence(e){const t=ht(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Hi.withCacheSize(this.cacheSizeBytes):Hi.DEFAULT;return new we(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,DP(),rD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new CP}}class GP extends qx{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const i=r.bc.syncEngine;r.sharedClientState instanceof WA&&(r.sharedClientState.syncEngine={Qr:pV.bind(null,i),jr:_V.bind(null,i),zr:yV.bind(null,i),Mi:mV.bind(null,i),Gr:fV.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.pi(function(){var o=(0,me.Z)(function*(l){yield function gV(n,e){return Bx.apply(this,arguments)}(r.bc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=DP();if(!WA.D(t))throw new Ae(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ht(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new WA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Jy{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>BP(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=cV.bind(null,r.syncEngine),yield hx(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Z2}createDatastore(e){const t=uE(e.databaseInfo.databaseId),r=new M2(e.databaseInfo);return new O2(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=f=>BP(this.syncEngine,f,0),l=bP.D()?new bP:new A2,new L2(t,r,i,o,l);var t,r,i,o,l}createSyncEngine(e,t){return function(r,i,o,l,f,_,w){const b=new tV(r,i,o,l,f,_);return w&&(b.Ac=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=Je(t);Fe("RemoteStore","RemoteStore shutting down."),r.Au.add(5),yield qy(r),r.vu.shutdown(),r.Pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function zP(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class oD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class EV{constructor(e,t){this.Dc=e,this.serializer=t,this.metadata=new cr,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then(r=>{r&&r.Gu()?this.metadata.resolve(r.Ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Ku)}`))},r=>this.metadata.reject(r))}close(){return this.Dc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}Pc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.xc()})()}xc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Nc();if(null===t)return null;const r=e.Cc.decode(t),i=Number(r);isNaN(i)&&e.kc(`length string (${r}) is not valid number`);const o=yield e.Mc(i);return new Q2(JSON.parse(o),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Nc(){var e=this;return(0,me.Z)(function*(){for(;e.Oc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.kc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Mc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.kc("Reached the end of bundle when more is expected.");const r=t.Cc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}kc(e){throw this.Dc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,me.Z)(function*(){const t=yield e.Dc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class IV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,me.Z)(function*(o,l){const f=Je(o),_=th(f.serializer)+"/documents",w={documents:l.map(U=>ym(f.serializer,U))},b=yield f.Ao("BatchGetDocuments",_,w,l.length),A=new Map;b.forEach(U=>{const q=function Fb(n,e){return"found"in e?function(t,r){wt(!!r.found);const i=rl(t,r.found.name),o=Dn(r.found.updateTime),l=r.found.createTime?Dn(r.found.createTime):It.min(),f=new gi({mapValue:{fields:r.found.fields}});return tr.newFoundDocument(i,o,l,f)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const i=rl(t,r.missing),o=Dn(r.readTime);return tr.newNoDocument(i,o)}(n,e):at()}(f.serializer,U);A.set(q.key.toString(),q)});const P=[];return l.forEach(U=>{const q=A.get(U.toString());wt(!!q),P.push(q)}),P}),function(o,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=Qe.fromPath(i);e.mutations.push(new Tb(o,e.precondition(o)))}),yield(r=(0,me.Z)(function*(i,o){const l=Je(i),f=th(l.serializer)+"/documents",_={writes:o.map(w=>vm(l.serializer,w))};yield l.po("Commit",f,_)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at();t=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(It.min())?qn.exists(!1):qn.updateTime(t):qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new Ae(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qn.updateTime(t)}return qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class CV{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Fc=r.maxAttempts,this.Lo=new KA(this.asyncQueue,"transaction_retry")}run(){this.Fc-=1,this.Bc()}Bc(){var e=this;this.Lo.xo((0,me.Z)(function*(){const t=new IV(e.datastore),r=e.Lc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.qc(o)}))}).catch(i=>{e.qc(i)})}))}Lc(e){try{const t=this.updateFunction(e);return!Gf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}qc(e){this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bc(),Promise.resolve()))):this.deferred.reject(e)}Uc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!gm(t)}return!1}}class bV{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=hi.UNAUTHENTICATED,this.clientId=OC.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,me.Z)(function*(f){Fe("FirestoreClient","Received user=",f.uid),yield o.authCredentialListener(f),o.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Fe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Ky(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function aD(n,e){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,me.Z)(function*(o){r.isEqual(o)||(yield Cr(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Wx.apply(this,arguments)}function Zx(n,e){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Yx(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>NP(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>NP(e.remoteStore,o)),n._onlineComponents=e}),Kx.apply(this,arguments)}function qP(n){return"FirebaseError"===n.name?n.code===le.FAILED_PRECONDITION||n.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function Yx(n){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,me.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield aD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!qP(t))throw t;Io("Error using user provided cache. Falling back to memory cache: "+t),yield aD(n,new dE)}}else Fe("FirestoreClient","Using default OfflineComponentProvider"),yield aD(n,new dE);return n._offlineComponents}),Qx.apply(this,arguments)}function uD(n){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,me.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield Zx(n,n._uninitializedComponentsProvider._online)):(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield Zx(n,new Jy))),n._onlineComponents}),Xx.apply(this,arguments)}function WP(n){return Yx(n).then(e=>e.persistence)}function lD(n){return Yx(n).then(e=>e.localStore)}function ZP(n){return uD(n).then(e=>e.remoteStore)}function Jx(n){return uD(n).then(e=>e.syncEngine)}function ev(n){return eR.apply(this,arguments)}function eR(){return eR=(0,me.Z)(function*(n){const e=yield uD(n),t=e.eventManager;return t.onListen=nV.bind(null,e.syncEngine),t.onUnlisten=rV.bind(null,e.syncEngine),t}),eR.apply(this,arguments)}function YP(n,e,t={}){const r=new cr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,o,l,f,_){const w=new oD({next:A=>{o.enqueueAndForget(()=>_x(i,b));const P=A.docs.has(l);!P&&A.fromCache?_.reject(new Ae(le.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&A.fromCache&&f&&"server"===f.source?_.reject(new Ae(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(A)},error:A=>_.reject(A)}),b=new wx(Wd(l.path),w,{includeMetadataChanges:!0,Uu:!0});return gx(i,b)}(yield ev(n),n.asyncQueue,e,t,r)})),r.promise}function QP(n,e,t={}){const r=new cr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,o,l,f,_){const w=new oD({next:A=>{o.enqueueAndForget(()=>_x(i,b)),A.fromCache&&"server"===f.source?_.reject(new Ae(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(A)},error:A=>_.reject(A)}),b=new wx(l,w,{includeMetadataChanges:!0,Uu:!0});return gx(i,b)}(yield ev(n),n.asyncQueue,e,t,r)})),r.promise}const XP=new Map;function tR(n,e,t){if(!t)throw new Ae(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function JP(n,e,t,r){if(!0===e&&!0===r)throw new Ae(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function eO(n){if(!Qe.isDocumentKey(n))throw new Ae(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tO(n){if(Qe.isDocumentKey(n))throw new Ae(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":at()}function gn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cD(n);throw new Ae(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function nO(n,e){if(e<=0)throw new Ae(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class rO{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!this.experimentalForceLongPolling&&void 0!==e.experimentalAutoDetectLongPolling&&!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rO({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ae(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new US;switch(t.type){case"firstParty":return new PC(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ae(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=XP.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),XP.delete(e),t.terminate())}(this),Promise.resolve()}}class hr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hr(this.firestore,e,this._key)}}class os{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class bc extends os{constructor(e,t,r){super(e,t,Wd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hr(this.firestore,null,new Qe(e))}withConverter(e){return new bc(this.firestore,e,this._path)}}function sO(n,e,...t){if(n=(0,O.m9)(n),tR("collection","path",e),n instanceof hE){const r=fn.fromString(e,...t);return tO(r),new bc(n,null,r)}{if(!(n instanceof hr||n instanceof bc))throw new Ae(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return tO(r),new bc(n.firestore,null,r)}}function dD(n,e,...t){if(n=(0,O.m9)(n),1===arguments.length&&(e=OC.A()),tR("doc","path",e),n instanceof hE){const r=fn.fromString(e,...t);return eO(r),new hr(n,null,new Qe(r))}{if(!(n instanceof hr||n instanceof bc))throw new Ae(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return eO(r),new hr(n.firestore,n instanceof bc?n.converter:null,new Qe(r))}}function oO(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),(n instanceof hr||n instanceof bc)&&(e instanceof hr||e instanceof bc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function nR(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),n instanceof os&&e instanceof os&&n.firestore===e.firestore&&cm(n._query,e._query)&&n.converter===e.converter}class OV{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new KA(this,"async_queue_retry"),this.Yc=()=>{const t=rD();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Lo.ko()};const e=rD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const t=rD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const t=new cr;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}ta(){var e=this;return(0,me.Z)(function*(){if(0!==e.Gc.length){try{yield e.Gc[0](),e.Gc.shift(),e.Lo.reset()}catch(t){if(!Zu(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Gc.length>0&&e.Lo.xo(()=>e.ta())}})()}Zc(e){const t=this.Kc.then(()=>(this.Wc=!0,e().catch(r=>{throw this.zc=r,this.Wc=!1,Er("INTERNAL UNHANDLED ERROR: ",function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),l}(r)),r}).then(r=>(this.Wc=!1,r))));return this.Kc=t,t}enqueueAfterDelay(e,t,r){this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);const i=px.createAndSchedule(this,e,t,r,o=>this.ea(o));return this.jc.push(i),i}Xc(){this.zc&&at()}verifyOperationInProgress(){}na(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Kc,yield t}while(t!==e.Kc)})()}sa(e){for(const t of this.jc)if(t.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.jc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const t=this.jc.indexOf(e);this.jc.splice(t,1)}}function rR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class kV{constructor(){this._progressObserver={},this._taskCompletionResolver=new cr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class fr extends hE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new OV,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||aO(this),this._firestoreClient.terminate()}}function Xr(n){return n._firestoreClient||aO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function aO(n){var e,t,r;const i=n._freezeSettings(),o=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new KC(n._databaseId,f,n._persistenceKey,(w=i).host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,w.useFetchStreams));var f,w;n._firestoreClient=new bV(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function uO(n,e,t){const r=new cr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield aD(n,t),yield Zx(n,e),r.resolve()}catch(i){const o=i;if(!qP(o))throw o;Io("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function lO(n){if(n._initialized||n._terminated)throw new Ae(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Dc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dc(Ur.fromBase64String(e))}catch(t){throw new Ae(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Dc(Ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class lh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Dm{constructor(e){this._methodName=e}}class hD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}const qV=/^__.*__$/;class WV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Xa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qd(e,this.data,t,this.fieldTransforms)}}class cO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class fD{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.oa(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new fD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ca({path:r,ha:!1});return i.la(e),i}fa(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ca({path:r,ha:!1});return i.oa(),i}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return mD(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(0===e.length)throw this._a("Document fields must not be empty");if(dO(this.ua)&&qV.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class ZV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||uE(e)}ga(e,t,r,i=!1){return new fD({ua:e,methodName:t,ma:r,path:Ir.emptyPath(),ha:!1,wa:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tm(n){const e=n._freezeSettings(),t=uE(n._databaseId);return new ZV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pD(n,e,t,r,i,o={}){const l=n.ga(o.merge||o.mergeFields?2:0,e,t,i);aR("Data must be an object, but it was:",l,r);const f=pO(r,l);let _,w;if(o.merge)_=new vs(l.fieldMask),w=l.fieldTransforms;else if(o.mergeFields){const b=[];for(const A of o.mergeFields){const P=gE(e,A,t);if(!l.contains(P))throw new Ae(le.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);mO(b,P)||b.push(P)}_=new vs(b),w=l.fieldTransforms.filter(A=>_.covers(A.field))}else _=null,w=l.fieldTransforms;return new WV(new gi(f),_,w)}class pE extends Dm{_toFieldTransform(e){if(2!==e.ua)throw e._a(1===e.ua?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pE}}function hO(n,e,t){return new fD({ua:3,ma:e.settings.ma,methodName:n._methodName,ha:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class iR extends Dm{_toFieldTransform(e){return new Xf(e.path,new Kd)}isEqual(e){return e instanceof iR}}class KV extends Dm{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=hO(this,e,!0),r=this.ya.map(o=>Sm(o,t)),i=new nl(r);return new Xf(e.path,i)}isEqual(e){return this===e}}class YV extends Dm{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=hO(this,e,!0),r=this.ya.map(o=>Sm(o,t)),i=new Yd(r);return new Xf(e.path,i)}isEqual(e){return this===e}}class QV extends Dm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=new Qf(e.serializer,j0(e.serializer,this.pa));return new Xf(e.path,t)}isEqual(e){return this===e}}function sR(n,e,t,r){const i=n.ga(1,e,t);aR("Data must be an object, but it was:",i,r);const o=[],l=gi.empty();Ks(r,(_,w)=>{const b=gD(e,_,t);w=(0,O.m9)(w);const A=i.fa(b);if(w instanceof pE)o.push(b);else{const P=Sm(w,A);null!=P&&(o.push(b),l.set(b,P))}});const f=new vs(o);return new cO(l,f,i.fieldTransforms)}function oR(n,e,t,r,i,o){const l=n.ga(1,e,t),f=[gE(e,r,t)],_=[i];if(o.length%2!=0)throw new Ae(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<o.length;P+=2)f.push(gE(e,o[P])),_.push(o[P+1]);const w=[],b=gi.empty();for(let P=f.length-1;P>=0;--P)if(!mO(w,f[P])){const U=f[P];let q=_[P];q=(0,O.m9)(q);const oe=l.fa(U);if(q instanceof pE)w.push(U);else{const he=Sm(q,oe);null!=he&&(w.push(U),b.set(U,he))}}const A=new vs(w);return new cO(b,A,l.fieldTransforms)}function fO(n,e,t,r=!1){return Sm(t,n.ga(r?4:3,e))}function Sm(n,e){if(gO(n=(0,O.m9)(n)))return aR("Unsupported field value:",e,n),pO(n,e);if(n instanceof Dm)return function(t,r){if(!dO(r.ua))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ha&&4!==e.ua)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const l of t){let f=Sm(l,r.da(o));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return j0(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=zn.fromDate(t);return{timestampValue:eh(r.serializer,i)}}if(t instanceof zn){const i=new zn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:eh(r.serializer,i)}}if(t instanceof hD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Dc)return{bytesValue:z0(r.serializer,t._byteString)};if(t instanceof hr){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r._a(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:q0(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${cD(t)}`)}(n,e)}function pO(n,e){const t={};return b0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ks(n,(r,i)=>{const o=Sm(i,e.aa(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function gO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof zn||n instanceof hD||n instanceof Dc||n instanceof hr||n instanceof Dm)}function aR(n,e,t){if(!gO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=cD(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function gE(n,e,t){if((e=(0,O.m9)(e))instanceof lh)return e._internalPath;if("string"==typeof e)return gD(n,e);throw mD("Field path arguments must be of type string or ",n,!1,void 0,t)}const XV=new RegExp("[~\\*/\\[\\]]");function gD(n,e,t){if(e.search(XV)>=0)throw mD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new lh(...e.split("."))._internalPath}catch{throw mD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mD(n,e,t,r,i){const o=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(o||l)&&(_+=" (found",o&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Ae(le.INVALID_ARGUMENT,f+n+_)}function mO(n,e){return n.some(t=>t.isEqual(e))}class mE{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new hr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new JV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_D("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class JV extends mE{data(){return super.data()}}function _D(n,e){return"string"==typeof e?gD(n,e):e instanceof lh?e._internalPath:e._delegate._internalPath}function _O(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ae(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uR{}class _E extends uR{}function up(n,e,...t){let r=[];e instanceof uR&&r.push(e),r=r.concat(t),function(i){const o=i.filter(f=>f instanceof tv).length,l=i.filter(f=>f instanceof yE).length;if(o>1||o>0&&l>0)throw new Ae(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class yE extends _E{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new yE(e,t,r)}_apply(e){const t=this._parse(e);return EO(e._query,t),new os(e.firestore,e.converter,V0(e._query,t))}_parse(e){const t=Tm(e.firestore);return function(i,o,l,f,_,w,b){let A;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Ae(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){wO(b,w);const P=[];for(const U of b)P.push(vO(f,i,U));A={arrayValue:{values:P}}}else A=vO(f,i,b)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||wO(b,w),A=fO(l,"where",b,"in"===w||"not-in"===w);return ln.create(_,w,A)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class tv extends uR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new tv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:bn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const f of l)EO(o,f),o=V0(o,f)}(e._query,t),new os(e.firestore,e.converter,V0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class lR extends _E{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lR(e,t)}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new Ae(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new qf(i,o);return function(f,_){if(null===yy(f)){const w=um(f);null!==w&&IO(0,w,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new os(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new Ya(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class yD extends _E{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new yD(e,t,r)}_apply(e){return new os(e.firestore,e.converter,lm(e._query,this._limit,this._limitType))}}class vD extends _E{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new vD(e,t,r)}_apply(e){const t=yO(e,this.type,this._docOrFields,this._inclusive);return new os(e.firestore,e.converter,(i=t,new Ya((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class wD extends _E{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new wD(e,t,r)}_apply(e){const t=yO(e,this.type,this._docOrFields,this._inclusive);return new os(e.firestore,e.converter,(i=t,new Ya((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function yO(n,e,t,r){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof mE)return function(i,o,l,f,_){if(!f)throw new Ae(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const b of vc(i))if(b.field.isKeyField())w.push(zd(o,f.key));else{const A=f.data.field(b.field);if(oy(A))throw new Ae(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const P=b.field.canonicalString();throw new Ae(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}w.push(A)}return new el(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Tm(n.firestore);return function(o,l,f,_,w,b){const A=o.explicitOrderBy;if(w.length>A.length)throw new Ae(le.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let U=0;U<w.length;U++){const q=w[U];if(A[U].field.isKeyField()){if("string"!=typeof q)throw new Ae(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof q}`);if(!L0(o)&&-1!==q.indexOf("/"))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${q}' contains a slash.`);const oe=o.path.child(fn.fromString(q));if(!Qe.isDocumentKey(oe))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${oe}' is not because it contains an odd number of segments.`);const he=new Qe(oe);P.push(zd(l,he))}else{const oe=fO(f,_,q);P.push(oe)}}return new el(P,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function vO(n,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new Ae(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!L0(e)&&-1!==t.indexOf("/"))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fn.fromString(t));if(!Qe.isDocumentKey(r))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zd(n,new Qe(r))}if(t instanceof hr)return zd(n,t._key);throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cD(t)}.`)}function wO(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EO(n,e){if(e.isInequality()){const r=um(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const o=yy(n);null!==o&&IO(0,i,o)}const t=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ae(le.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function IO(n,e,t){if(!t.isEqual(e))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class cR{convertValue(e,t="none"){switch(_c(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw at()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ks(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new hD(dr(e.latitude),dr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ay(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rm(e));default:return null}}convertTimestamp(e){const t=Ku(e);return new zn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fn.fromString(e);wt($b(r));const i=new Hd(r.get(1),r.get(3)),o=new Qe(r.popFirst(5));return i.isEqual(t)||Er(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function ED(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class uU extends cR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hr(this.firestore,null,t)}}class Am{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ch extends mE{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(_D("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class vE extends ch{data(e={}){return super.data(e)}}class lp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Am(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new vE(this._firestore,this._userDataWriter,r.key,r,new Am(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new vE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Am(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new vE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Am(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==l.type&&(_=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),1!==l.type&&(o=o.add(l.doc),w=o.indexOf(l.doc.key)),{type:cU(l.type),doc:f,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function cU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function bO(n,e){return n instanceof ch&&e instanceof ch?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof lp&&e instanceof lp&&n._firestore===e._firestore&&nR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class cp extends cR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hr(this.firestore,null,t)}}function DO(n,e,t){n=gn(n,hr);const r=gn(n.firestore,fr),i=ED(n.converter,e,t);return nv(r,[pD(Tm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,qn.none())])}function TO(n,e,t,...r){n=gn(n,hr);const i=gn(n.firestore,fr),o=Tm(i);let l;return l="string"==typeof(e=(0,O.m9)(e))||e instanceof lh?oR(o,"updateDoc",n._key,e,t,r):sR(o,"updateDoc",n._key,e),nv(i,[l.toMutation(n._key,qn.exists(!0))])}function SO(n,...e){var t,r,i;n=(0,O.m9)(n);let o={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||rR(e[l])||(o=e[l],l++);const f={includeMetadataChanges:o.includeMetadataChanges};if(rR(e[l])){const A=e[l];e[l]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[l+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[l+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let _,w,b;if(n instanceof hr)w=gn(n.firestore,fr),b=Wd(n._key.path),_={next:A=>{e[l]&&e[l](dR(w,n,A))},error:e[l+1],complete:e[l+2]};else{const A=gn(n,os);w=gn(A.firestore,fr),b=A._query;const P=new cp(w);_={next:U=>{e[l]&&e[l](new lp(w,P,A,U))},error:e[l+1],complete:e[l+2]},_O(n._query)}return function(A,P,U,q){const oe=new oD(q),he=new wx(P,oe,U);return A.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return gx(yield ev(A),he)})),()=>{oe.Sc(),A.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return _x(yield ev(A),he)}))}}(Xr(w),b,f,_)}function nv(n,e){return function(t,r){const i=new cr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function iV(n,e,t){return Dx.apply(this,arguments)}(yield Jx(t),r,i)})),i.promise}(Xr(n),e)}function dR(n,e,t){const r=t.docs.get(e._key),i=new cp(n);return new ch(n,i,e._key,r,new Am(t.hasPendingWrites,t.fromCache),e.converter)}const AU={maxAttempts:5};class AO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tm(e)}set(e,t,r){this._verifyNotCommitted();const i=dp(e,this._firestore),o=ED(i.converter,t,r),l=pD(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,qn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=dp(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof lh?oR(this._dataReader,"WriteBatch.update",o._key,t,r,i):sR(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(l.toMutation(o._key,qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=dp(e,this._firestore);return this._mutations=this._mutations.concat(new Xd(t._key,qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dp(n,e){if((n=(0,O.m9)(n)).firestore!==e)throw new Ae(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class xU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Tm(e)}get(e){const t=dp(e,this._firestore),r=new uU(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return at();const o=i[0];if(o.isFoundDocument())return new mE(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new mE(this._firestore,r,t._key,null,t.converter);throw at()})}set(e,t,r){const i=dp(e,this._firestore),o=ED(i.converter,t,r),l=pD(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const o=dp(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof lh?oR(this._dataReader,"Transaction.update",o._key,t,r,i):sR(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,l),this}delete(e){const t=dp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=dp(e,this._firestore),r=new cp(this._firestore);return super.get(e).then(i=>new ch(this._firestore,r,t._key,i._document,new Am(!1,!1),t.converter))}}!function(n,e=!0){Wu=is.SDK_VERSION,(0,is._registerComponent)(new sa.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),l=new fr(new X_(t.getProvider("auth-internal")),new jS(t.getProvider("app-check-internal")),function(f,_){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ae(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hd(f.options.projectId,_)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,is.registerVersion)(Bd,"3.11.0",n),(0,is.registerVersion)(Bd,"3.11.0","esm2017")}();function hR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function RO(){if(typeof Uint8Array>"u")throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function MO(){if(!function S0(){return typeof atob<"u"}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}class wE{constructor(e){this._delegate=e}static fromBase64String(e){return MO(),new wE(Dc.fromBase64String(e))}static fromUint8Array(e){return RO(),new wE(Dc.fromUint8Array(e))}toBase64(){return MO(),this._delegate.toBase64()}toUint8Array(){return RO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fR(n){return function VU(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class UU{enableIndexedDbPersistence(e,t){return function LV(n,e){lO(n=gn(n,fr));const t=Xr(n);if(t._uninitializedComponentsProvider)throw new Ae(le.FAILED_PRECONDITION,"SDK cache is already specified.");Io("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Jy;return uO(t,i,new qx(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function VV(n){lO(n=gn(n,fr));const e=Xr(n);if(e._uninitializedComponentsProvider)throw new Ae(le.FAILED_PRECONDITION,"SDK cache is already specified.");Io("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Jy;return uO(e,r,new GP(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function UV(n){if(n._initialized&&!n._terminated)throw new Ae(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new cr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!da.D())return Promise.resolve();const i=r+"main";yield da.delete(i)}),function(r){return t.apply(this,arguments)})(ht(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class NO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Hd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Io("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function iO(n,e,t,r={}){var i;const o=(n=gn(n,hE))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Io("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,f;if("string"==typeof r.mockUserToken)l=r.mockUserToken,f=hi.MOCK_USER;else{l=(0,O.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ae(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new hi(_)}n._authCredentials=new BS(new MC(l,f))}}(this._delegate,e,t,r)}enableNetwork(){return function jV(n){return function DV(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield WP(n),t=yield ZP(n);return e.setNetworkEnabled(!0),function(r){const i=Je(r);return i.Au.delete(0),lE(i)}(t)}))}(Xr(n=gn(n,fr)))}(this._delegate)}disableNetwork(){return function $V(n){return function TV(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield WP(n),t=yield ZP(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(i){const o=Je(i);o.Au.add(0),yield qy(o),o.Pu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Xr(n=gn(n,fr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,JP("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function BV(n){return function(e){const t=new cr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function uV(n,e){return Rx.apply(this,arguments)}(yield Jx(e),t)})),t.promise}(Xr(n=gn(n,fr)))}(this._delegate)}onSnapshotsInSync(e){return function vU(n,e){return function xV(n,e){const t=new oD(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield ev(n),i=t,Je(r).Nu.add(i),void i.next();var r,i})),()=>{t.Sc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield ev(n),i=t,void Je(r).Nu.delete(i);var r,i}))}}(Xr(n=gn(n,fr)),rR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new rv(this,sO(this._delegate,e))}catch(t){throw Ys(t,"collection()","Firestore.collection()")}}doc(e){try{return new eu(this,dD(this._delegate,e))}catch(t){throw Ys(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Qs(this,function PV(n,e){if(n=gn(n,hE),tR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new os(n,null,(t=e,new Ya(fn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ys(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function RU(n,e,t){n=gn(n,fr);const r=Object.assign(Object.assign({},AU),t);return function(i){if(i.maxAttempts<1)throw new Ae(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,l){const f=new cr;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const _=yield function KP(n){return uD(n).then(e=>e.datastore)}(i);new CV(i.asyncQueue,_,l,o,f).run()})),f.promise}(Xr(n),i=>e(new xU(n,i)),r)}(this._delegate,t=>e(new PO(this,t)))}batch(){return Xr(this._delegate),new OO(new AO(this._delegate,e=>nv(this._delegate,e)))}loadBundle(e){return function HV(n,e){const t=Xr(n=gn(n,fr)),r=new kV;return function RV(n,e,t,r){const i=function(o,l){let f;return f="string"==typeof o?H0().encode(o):o,_=function(_,w){if(_ instanceof Uint8Array)return zP(_,w);if(_ instanceof ArrayBuffer)return zP(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new EV(_,l);var _}(t,uE(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function vV(n,e,t){const r=Je(n);var i;(i=(0,me.Z)(function*(o,l,f){try{const _=yield l.getMetadata();if(yield function(P,U){const q=Je(P),oe=Dn(U.createTime);return q.persistence.runTransaction("hasNewerBundle","readonly",he=>q.Ls.getBundleMetadata(he,U.id)).then(he=>!!he&&he.createTime.compareTo(oe)>=0)}(o.localStore,_))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(P=_).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);f._updateProgress(kP(_));const w=new X2(_,o.localStore,l.serializer);let b=yield l.Pc();for(;b;){const P=yield w.ju(b);P&&f._updateProgress(P),b=yield l.Pc()}const A=yield w.complete();return yield uh(o,A.Hu,void 0),yield function(P,U){const q=Je(P);return q.persistence.runTransaction("Save bundle","readwrite",oe=>q.Ls.saveBundleMetadata(oe,U))}(o.localStore,_),f._completeWith(A.progress),Promise.resolve(A.Wu)}catch(_){return Io("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var P}),function(o,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Jx(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function GV(n,e){return function MV(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const i=Je(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.Ls.getNamedQuery(o,r))}(yield lD(n),e)}))}(Xr(n=gn(n,fr)),e).then(t=>t?new os(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Qs(this,t):null)}}class ID extends cR{constructor(e){super(),this.firestore=e}convertBytes(e){return new wE(new Dc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return eu.forKey(t,this.firestore,null)}}class PO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ID(e)}get(e){const t=Rm(e);return this._delegate.get(t).then(r=>new EE(this._firestore,new ch(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Rm(e);return r?(hR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Rm(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Rm(e);return this._delegate.delete(t),this}}class OO{constructor(e){this._delegate=e}set(e,t,r){const i=Rm(e);return r?(hR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Rm(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Rm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class xm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new vE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new IE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=xm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new xm(e,new ID(e),t),i.set(t,o)),o}}xm.INSTANCES=new WeakMap;class eu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ID(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new eu(t,new hr(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new eu(t,new hr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new rv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new rv(this.firestore,sO(this._delegate,e))}catch(t){throw Ys(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,O.m9)(e))instanceof hr&&oO(this._delegate,e)}set(e,t){t=hR("DocumentReference.set",t);try{return t?DO(this._delegate,e,t):DO(this._delegate,e)}catch(r){throw Ys(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?TO(this._delegate,e):TO(this._delegate,e,t,...r)}catch(i){throw Ys(i,"updateDoc()","DocumentReference.update()")}}delete(){return function _U(n){return nv(gn(n.firestore,fr),[new Xd(n._key,qn.none())])}(this._delegate)}onSnapshot(...e){const t=kO(e),r=FO(e,i=>new EE(this.firestore,new ch(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return SO(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function hU(n){n=gn(n,hr);const e=gn(n.firestore,fr),t=Xr(e),r=new cp(e);return function SV(n,e){const t=new cr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,o,l){try{const f=yield function(_,w){const b=Je(_);return b.persistence.runTransaction("read document","readonly",A=>b.localDocuments.getDocument(A,w))}(i,o);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new Ae(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=Ky(f,`Failed to get document '${o} from cache`);l.reject(_)}}),function(i,o,l){return r.apply(this,arguments)})(yield lD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ch(e,r,n._key,i,new Am(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function fU(n){n=gn(n,hr);const e=gn(n.firestore,fr);return YP(Xr(e),n._key,{source:"server"}).then(t=>dR(e,n,t))}(this._delegate):function dU(n){n=gn(n,hr);const e=gn(n.firestore,fr);return YP(Xr(e),n._key).then(t=>dR(e,n,t))}(this._delegate),t.then(r=>new EE(this.firestore,new ch(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new eu(this.firestore,this._delegate.withConverter(e?xm.getInstance(this.firestore,e):null))}}function Ys(n,e,t){return n.message=n.message.replace(e,t),n}function kO(n){for(const e of n)if("object"==typeof e&&!fR(e))return e;return{}}function FO(n,e){var t,r;let i;return i=fR(n[0])?n[0]:fR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class EE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new eu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bO(this._delegate,e._delegate)}}class IE extends EE{data(e){const t=this._delegate.data(e);return function RC(n,e){n||at()}(void 0!==t),t}}class Qs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ID(e)}where(e,t,r){try{return new Qs(this.firestore,up(this._delegate,function eU(n,e,t){const r=e,i=_D("where",n);return yE._create(i,r,t)}(e,t,r)))}catch(i){throw Ys(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Qs(this.firestore,up(this._delegate,function tU(n,e="asc"){const t=e,r=_D("orderBy",n);return lR._create(r,t)}(e,t)))}catch(r){throw Ys(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Qs(this.firestore,up(this._delegate,function nU(n){return nO("limit",n),yD._create("limit",n,"F")}(e)))}catch(t){throw Ys(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Qs(this.firestore,up(this._delegate,function rU(n){return nO("limitToLast",n),yD._create("limitToLast",n,"L")}(e)))}catch(t){throw Ys(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Qs(this.firestore,up(this._delegate,function iU(...n){return vD._create("startAt",n,!0)}(...e)))}catch(t){throw Ys(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Qs(this.firestore,up(this._delegate,function sU(...n){return vD._create("startAfter",n,!1)}(...e)))}catch(t){throw Ys(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Qs(this.firestore,up(this._delegate,function oU(...n){return wD._create("endBefore",n,!1)}(...e)))}catch(t){throw Ys(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Qs(this.firestore,up(this._delegate,function aU(...n){return wD._create("endAt",n,!0)}(...e)))}catch(t){throw Ys(t,"endAt()","Query.endAt()")}}isEqual(e){return nR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function gU(n){n=gn(n,os);const e=gn(n.firestore,fr),t=Xr(e),r=new cp(e);return function AV(n,e){const t=new cr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,o,l){try{const f=yield Jb(i,o,!0),_=new VP(o,f.sr),w=_.nc(f.documents),b=_.applyChanges(w,!1);l.resolve(b.snapshot)}catch(f){const _=Ky(f,`Failed to execute query '${o} against cache`);l.reject(_)}}),function(i,o,l){return r.apply(this,arguments)})(yield lD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new lp(e,r,n,i))}(this._delegate):"server"===e?.source?function mU(n){n=gn(n,os);const e=gn(n.firestore,fr),t=Xr(e),r=new cp(e);return QP(t,n._query,{source:"server"}).then(i=>new lp(e,r,n,i))}(this._delegate):function pU(n){n=gn(n,os);const e=gn(n.firestore,fr),t=Xr(e),r=new cp(e);return _O(n._query),QP(t,n._query).then(i=>new lp(e,r,n,i))}(this._delegate),t.then(r=>new pR(this.firestore,new lp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=kO(e),r=FO(e,i=>new pR(this.firestore,new lp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return SO(this._delegate,t,r)}withConverter(e){return new Qs(this.firestore,this._delegate.withConverter(e?xm.getInstance(this.firestore,e):null))}}class jU{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new IE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class pR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Qs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new IE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new jU(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new IE(this._firestore,r))})}isEqual(e){return bO(this._delegate,e._delegate)}}class rv extends Qs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new eu(this.firestore,e):null}doc(e){try{return new eu(this.firestore,void 0===e?dD(this._delegate):dD(this._delegate,e))}catch(t){throw Ys(t,"doc()","CollectionReference.doc()")}}add(e){return function yU(n,e){const t=gn(n.firestore,fr),r=dD(n),i=ED(n.converter,e);return nv(t,[pD(Tm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,qn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new eu(this.firestore,t))}isEqual(e){return oO(this._delegate,e._delegate)}withConverter(e){return new rv(this.firestore,this._delegate.withConverter(e?xm.getInstance(this.firestore,e):null))}}function Rm(n){return gn(n,hr)}class gR{constructor(...e){this._delegate=new lh(...e)}static documentId(){return new gR(Ir.keyField().canonicalString())}isEqual(e){return(e=(0,O.m9)(e))instanceof lh&&this._delegate._internalPath.isEqual(e._internalPath)}}class Mm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function NU(){return new iR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Mm(e)}static delete(){const e=function MU(){return new pE("deleteField")}();return e._methodName="FieldValue.delete",new Mm(e)}static arrayUnion(...e){const t=function PU(...n){return new KV("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Mm(t)}static arrayRemove(...e){const t=function OU(...n){return new YV("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Mm(t)}static increment(e){const t=function kU(n){return new QV("increment",n)}(e);return t._methodName="FieldValue.increment",new Mm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const $U={Firestore:NO,GeoPoint:hD,Timestamp:zn,Blob:wE,Transaction:PO,WriteBatch:OO,DocumentReference:eu,DocumentSnapshot:EE,Query:Qs,QueryDocumentSnapshot:IE,QuerySnapshot:pR,CollectionReference:rv,FieldPath:gR,FieldValue:Mm,setLogLevel:function BU(n){!function nP(n){ca.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function GU(n){(function HU(n,e){n.INTERNAL.registerComponent(new sa.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},$U)))})(n,(e,t)=>new NO(e,t,new UU)),n.registerVersion("@firebase/firestore-compat","0.3.8")}(I_.Z);var mR=L(6451),CD=L(5363),zU=L(6063);class qU extends qr.x{constructor(e=1/0,t=1/0,r=zU.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:l}=this;t||(r.push(e),!i&&r.push(o.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let l=0;l<o.length&&!e.closed;l+=r?1:2)e.next(o[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const l=t.now();let f=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)f=_;f&&r.splice(0,f+1)}}}var LO=L(3099);function VO(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,LO.B)({connector:()=>new qU(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function UO(n,e){return(0,Mu.m)(e)?Un(()=>n,e):Un(()=>n)}var _R=L(9468);L(259);const vR=new Map,jO={activated:!1,tokenObservers:[]},QU={initialized:!1,enabled:!1};function Br(n){return vR.get(n)||Object.assign({},jO)}function DD(){return QU}const wR="https://content-firebaseappcheck.googleapis.com/v1",tB="exchangeDebugToken",$O={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class rB{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new O.BH,yield function iB(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new O.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const as=new O.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function CR(){return CR=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const A=yield i.getHeartbeatsHeader();A&&(r["X-Firebase-Client"]=A)}const o={method:"POST",body:JSON.stringify(e),headers:r};let l,f;try{l=yield fetch(n,o)}catch(A){throw as.create("fetch-network-error",{originalErrorMessage:A?.message})}if(200!==l.status)throw as.create("fetch-status-error",{httpStatus:l.status});try{f=yield l.json()}catch(A){throw as.create("fetch-parse-error",{originalErrorMessage:A?.message})}const _=f.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw as.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const w=1e3*Number(_[1]),b=Date.now();return{token:f.token,expireTimeMillis:b+w,issuedAtTimeMillis:b}}),CR.apply(this,arguments)}const uB="firebase-app-check-database",lB=1,CE="firebase-app-check-store";let xD=null;function bR(){return bR=(0,me.Z)(function*(n,e){const r=(yield function zO(){return xD||(xD=new Promise((n,e)=>{try{const t=indexedDB.open(uB,lB);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(as.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(CE,{keyPath:"compositeKey"})}}catch(t){e(as.create("storage-open",{originalErrorMessage:t?.message}))}}),xD)}()).transaction(CE,"readwrite"),o=r.objectStore(CE).put({compositeKey:n,value:e});return new Promise((l,f)=>{o.onsuccess=_=>{l()},r.onerror=_=>{var w;f(as.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})}),bR.apply(this,arguments)}const bE=new yo.Yd("@firebase/app-check");function SR(n,e){return(0,O.hl)()?function dB(n,e){return function qO(n,e){return bR.apply(this,arguments)}(function ZO(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{bE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function MR(){return MR=(0,me.Z)(function*(){const n=DD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),MR.apply(this,arguments)}const _B={error:"UNKNOWN_ERROR"};function yB(n){return O.US.encodeString(JSON.stringify(n),!1)}function RD(n){return NR.apply(this,arguments)}function NR(){return NR=(0,me.Z)(function*(n,e=!1){const t=n.app;!function ER(n){if(!Br(n).activated)throw as.create("use-before-activation",{appName:n.name})}(t);const r=Br(t);let o,i=r.token;if(i&&!iv(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(iv(_)?i=_:yield SR(t,void 0))}if(!e&&i&&iv(i))return{token:i.token};let f,l=!1;if(function xR(){return DD().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function AD(n,e){return CR.apply(this,arguments)}(function HO(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${wR}/projects/${t}/apps/${r}:${tB}?key=${i}`,body:{debug_token:e}}}(t,yield function RR(){return MR.apply(this,arguments)}()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield SR(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Br(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?bE.warn(_.message):bE.error(_),o=_}return i?o?f=iv(i)?{token:i.token,internalError:o}:QO(o):(f={token:i.token},r.token=i,yield SR(t,i)):f=QO(o),l&&function YO(n,e){const t=Br(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f}),NR.apply(this,arguments)}function kR(n,e){const t=Br(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function KO(n){const{app:e}=n,t=Br(e);let r=t.tokenRefresher;r||(r=function wB(n){const{app:e}=n;return new rB((0,me.Z)(function*(){let r;if(r=Br(e).token?yield RD(n,!0):yield RD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Br(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},$O.RETRIAL_MIN_WAIT,$O.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function iv(n){return n.expireTimeMillis-Date.now()>0}function QO(n){return{token:yB(_B),error:n}}class EB{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Br(this.app);for(const t of e)kR(this.app,t.next);return Promise.resolve()}}const sk="app-check-internal";!function kB(){(0,is._registerComponent)(new sa.wA("app-check",n=>function IB(n,e){return new EB(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(sk).initialize()})),(0,is._registerComponent)(new sa.wA(sk,n=>function CB(n){return{getToken:e=>RD(n,e),addTokenListener:e=>function OR(n,e,t,r){const{app:i}=n,o=Br(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&iv(o.token)){const f=o.token;Promise.resolve().then(()=>{t({token:f.token}),KO(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>KO(n))}(n,"INTERNAL",e),removeTokenListener:e=>kR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,is.registerVersion)("@firebase/app-check","0.7.0")}();class DE{constructor(){return(0,pn.vb)("app-check")}}typeof window<"u"&&window;const BR=new d.OlP("angularfire2.auth.use-emulator"),jR=new d.OlP("angularfire2.auth.settings"),$R=new d.OlP("angularfire2.auth.tenant-id"),HR=new d.OlP("angularfire2.auth.langugage-code"),GR=new d.OlP("angularfire2.auth.use-device-language"),zR=new d.OlP("angularfire.auth.persistence"),qR=(n,e,t,r,i,o,l,f)=>(0,Mr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,o&&_.useDeviceLanguage(),l)for(const[w,b]of Object.entries(l))_.settings[w]=b;return f&&_.setPersistence(f),_},[t,r,i,o,l,f]);let ND=(()=>{class n{constructor(t,r,i,o,l,f,_,w,b,A,P,U){const q=new qr.x,oe=ut(void 0).pipe((0,CD.Q)(l.outsideAngular),Un(()=>o.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,3042)))),(0,ct.U)(()=>(0,Mr.on)(t,o,r)),(0,ct.U)(he=>qR(he,o,f,w,b,A,_,P)),VO({bufferSize:1,refCount:!1}));if(Ms(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ut(null);else{oe.pipe(Ji()).subscribe();const Xe=oe.pipe(Un(Ct=>Ct.getRedirectResult().then(Gt=>Gt,()=>null)),pn.iC,VO({bufferSize:1,refCount:!1})),lt=oe.pipe(Un(Ct=>new ui.y(Gt=>({unsubscribe:o.runOutsideAngular(()=>Ct.onAuthStateChanged(Jt=>Gt.next(Jt),Jt=>Gt.error(Jt),()=>Gt.complete()))})))),Ye=oe.pipe(Un(Ct=>new ui.y(Gt=>({unsubscribe:o.runOutsideAngular(()=>Ct.onIdTokenChanged(Jt=>Gt.next(Jt),Jt=>Gt.error(Jt),()=>Gt.complete()))}))));this.authState=Xe.pipe(UO(lt),(0,_R.R)(l.outsideAngular),(0,CD.Q)(l.insideAngular)),this.user=Xe.pipe(UO(Ye),(0,_R.R)(l.outsideAngular),(0,CD.Q)(l.insideAngular)),this.idToken=this.user.pipe(Un(Ct=>Ct?(0,rn.D)(Ct.getIdToken()):ut(null))),this.idTokenResult=this.user.pipe(Un(Ct=>Ct?(0,rn.D)(Ct.getIdTokenResult()):ut(null))),this.credential=(0,mR.T)(Xe,q,this.authState.pipe(Ii(Ct=>!Ct))).pipe((0,ct.U)(Ct=>Ct?.user?Ct:null),(0,_R.R)(l.outsideAngular),(0,CD.Q)(l.insideAngular))}return(0,Mr.pX)(this,oe,o,{spy:{apply:(he,Xe,lt)=>{(he.startsWith("signIn")||he.startsWith("createUser"))&&lt.then(Ye=>q.next(Ye))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Mr.Dh),d.LFG(Mr.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(pn.HU),d.LFG(BR,8),d.LFG(jR,8),d.LFG($R,8),d.LFG(HR,8),d.LFG(GR,8),d.LFG(zR,8),d.LFG(DE,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jB=(()=>{class n{constructor(){Sd.Z.registerVersion("angularfire",pn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[ND]}),n})();function ak(n,e){return function $B(n,e=Ad.z){return new ui.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function WR(n,e){return ak(n,e).pipe((0,ct.U)(t=>({payload:t,type:"query"})))}function PD(n,e){return WR(n,e).pipe(Qo(void 0),mf(),(0,ct.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const _=i.find(b=>b.doc.ref.isEqual(l.ref)),w=t?.payload.docs.find(b=>b.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||o.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),o}))}function uk(n,e,t){return PD(n,t).pipe(Oa((r,i)=>function GB(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function zB(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ZR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ZR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ZR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),dw(),(0,ct.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function ZR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function lk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class ck{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=PD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ct.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Qo(void 0),mf(),Ii(([r,i])=>i.length>0||!r),(0,ct.U)(([r,i])=>i),pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Oa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=lk(e);return uk(this.query,t,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return WR(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),pn.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(pn.iC)}add(e){return this.ref.add(e)}doc(e){return new dk(this.ref.doc(e),this.afs)}}class dk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=pk(r,t);return new ck(i,o,this.afs)}snapshotChanges(){return function HB(n,e){return ak(n,e).pipe(Qo(void 0),mf(),(0,ct.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ct.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,rn.D)(this.ref.get(e)).pipe(pn.iC)}}class qB{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?PD(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ii(t=>t.length>0),pn.iC):PD(this.query,this.afs.schedulers.outsideAngular).pipe(pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Oa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=lk(e);return uk(this.query,t,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return WR(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),pn.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(pn.iC)}}const hk=new d.OlP("angularfire2.enableFirestorePersistence"),fk=new d.OlP("angularfire2.firestore.persistenceSettings"),WB=new d.OlP("angularfire2.firestore.settings"),ZB=new d.OlP("angularfire2.firestore.use-emulator");function pk(n,e=(t=>t)){return{query:e(n),ref:n}}let OD=(()=>{class n{constructor(t,r,i,o,l,f,_,w,b,A,P,U,q,oe,he,Xe,lt){this.schedulers=_;const Ye=(0,Mr.on)(t,f,r),Ct=b;A&&qR(Ye,f,P,q,oe,he,U,Xe),[this.firestore,this.persistenceEnabled$]=(0,Mr.cc)(`${Ye.name}.firestore`,"AngularFirestore",Ye.name,()=>{const Gt=f.runOutsideAngular(()=>Ye.firestore());if(o&&Gt.settings(o),Ct&&Gt.useEmulator(...Ct),i&&!Ms(l)){const Jt=()=>{try{return(0,rn.D)(Gt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Di){return typeof console<"u"&&console.warn(Di),ut(!1)}};return[Gt,f.runOutsideAngular(Jt)]}return[Gt,ut(!1)]},[o,Ct,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:l}=pk(i,r),f=this.schedulers.ngZone.run(()=>o);return new ck(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),o=this.firestore.collectionGroup(t);return new qB(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new dk(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Mr.Dh),d.LFG(Mr.xv,8),d.LFG(hk,8),d.LFG(WB,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(pn.HU),d.LFG(fk,8),d.LFG(ZB,8),d.LFG(ND,8),d.LFG(BR,8),d.LFG(jR,8),d.LFG($R,8),d.LFG(HR,8),d.LFG(GR,8),d.LFG(zR,8),d.LFG(DE,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),KB=(()=>{class n{constructor(){Sd.Z.registerVersion("angularfire",pn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:hk,useValue:!0},{provide:fk,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[OD]}),n})(),KR=(()=>{class n{constructor(t){this.afs=t}loadFeaturedPosts(){return this.afs.collection("posts",t=>t.where("isFeatured","==",!0).limit(4)).snapshotChanges().pipe((0,ct.U)(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,data:i}})))}loadLatest(){return this.afs.collection("posts",t=>t.orderBy("createdAt")).snapshotChanges().pipe((0,ct.U)(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,data:i}})))}loadCategoryPosts(t){return this.afs.collection("posts",r=>r.where("category.categoryId","==",t).limit(4)).snapshotChanges().pipe((0,ct.U)(r=>r.map(i=>{const o=i.payload.doc.data();return{id:i.payload.doc.id,data:o}})))}loadPost(t){return this.afs.doc(`posts/${t}`).valueChanges()}loadSimilarPost(t){return this.afs.collection("posts",r=>r.where("category.categoryId","==",t).limit(4)).snapshotChanges().pipe((0,ct.U)(r=>r.map(i=>{const o=i.payload.doc.data();return{id:i.payload.doc.id,data:o}})))}countViews(t){const r={views:Sd.Z.firestore.FieldValue.increment(1)};this.afs.doc(`posts/${t}`).update(r).then(()=>{console.log("Views count update ...!")})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(OD))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function YB(n,e){1&n&&(d.TgZ(0,"small",9),d._uU(1," Featured "),d.qZA())}const QB=function(n){return["/post",n]};function XB(n,e){if(1&n&&(d.TgZ(0,"div",1),d._UZ(1,"img",2),d.TgZ(2,"div",3)(3,"small",4),d._uU(4),d.qZA(),d.YNc(5,YB,2,0,"small",5),d.TgZ(6,"small",6),d._uU(7),d.qZA(),d.TgZ(8,"h5",7),d._uU(9),d.qZA(),d.TgZ(10,"P"),d._uU(11),d.qZA(),d.TgZ(12,"small",8),d._uU(13),d.ALo(14,"date"),d.qZA()()()),2&n){const t=d.oxw();d.Q6J("routerLink",d.VKq(10,QB,t.postData.id)),d.xp6(1),d.s9C("src",t.postData.data.postImgPath,d.LSH),d.xp6(3),d.Oqu(t.postData.data.category.category),d.xp6(1),d.Q6J("ngIf",t.postData.data.isFeatured),d.xp6(2),d.hij("Views - ",t.postData.data.views,""),d.xp6(2),d.hij(" ",t.postData.data.title," "),d.xp6(2),d.hij(" ",t.postData.data.excerpt," "),d.xp6(2),d.hij("Last Updated - ",d.lcZ(14,8,t.postData.data.createdAt.toMillis())," ")}}let YR=(()=>{class n{constructor(){}ngOnInit(){console.log(this.postData)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-post-card"]],inputs:{postData:"postData"},decls:1,vars:1,consts:[["class","card shadow-effect",3,"routerLink",4,"ngIf"],[1,"card","shadow-effect",3,"routerLink"],["alt","post-image",1,"card-img-top",3,"src"],[1,"card-body"],[1,"bg-light","text-danger","text-center"],["class","bg-light text-success text-center","style","margin-left: 25px;",4,"ngIf"],[1,"bg-light","text-info","text-center",2,"margin-left","25px"],[1,"mt-1"],[1,"bg-light","text-warning","text-center","ml-3"],[1,"bg-light","text-success","text-center",2,"margin-left","25px"]],template:function(t,r){1&t&&d.YNc(0,XB,15,12,"div",0),2&t&&d.Q6J("ngIf",r.postData)},dependencies:[hs,df,ri],styles:[".card[_ngcontent-%COMP%]{max-width:400px;min-height:500px;cursor:pointer}"]}),n})();function JB(n,e){if(1&n&&(d.TgZ(0,"div",9),d._UZ(1,"app-post-card",10),d.qZA()),2&n){const t=e.$implicit;d.xp6(1),d.Q6J("postData",t)}}function ej(n,e){if(1&n&&(d.TgZ(0,"div",11),d._UZ(1,"app-post-card",10),d.qZA()),2&n){const t=e.$implicit;d.xp6(1),d.Q6J("postData",t)}}let tj=(()=>{class n{constructor(t){this.postService=t,this.featuredPostsArray=[],this.latestPostsArray=[]}ngOnInit(){this.postService.loadFeaturedPosts().subscribe(t=>{this.featuredPostsArray=t}),this.postService.loadLatest().subscribe(t=>{this.latestPostsArray=t})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(KR))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home"]],decls:18,vars:2,consts:[[1,"featured-section"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","text-center","mt-5"],[1,"text-white"],["class","col-lg-3",4,"ngFor","ngForOf"],[1,"container","mt-5"],[1,"col-md-12","text-center"],["class","col-md-4 mt-3",4,"ngFor","ngForOf"],[1,"col-lg-3"],[3,"postData"],[1,"col-md-4","mt-3"]],template:function(t,r){1&t&&(d.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),d._uU(5," Featured Posts"),d.qZA(),d.TgZ(6,"p",4),d._uU(7,"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Neque, error."),d.qZA()()(),d.TgZ(8,"div",2),d.YNc(9,JB,2,1,"div",5),d.qZA()()(),d.TgZ(10,"section",6)(11,"div",7)(12,"h2"),d._uU(13," Latest Posts "),d.qZA(),d.TgZ(14,"p"),d._uU(15,"Lorem ipsum, dolor sit amet consectetur adipisicing elit."),d.qZA(),d.TgZ(16,"div",2),d.YNc(17,ej,2,1,"div",8),d.qZA()()()),2&t&&(d.xp6(9),d.Q6J("ngForOf",r.featuredPostsArray),d.xp6(8),d.Q6J("ngForOf",r.latestPostsArray))},dependencies:[Ss,YR],styles:[".featured-section[_ngcontent-%COMP%]{padding-left:130px;padding-right:130px;padding-bottom:130px;background-color:var(--primary-color)}"]}),n})();function nj(n,e){if(1&n&&(d.TgZ(0,"div",6),d._UZ(1,"app-post-card",7),d.qZA()),2&n){const t=e.$implicit;d.xp6(1),d.Q6J("postData",t)}}let rj=(()=>{class n{constructor(t,r){this.route=t,this.postsService=r,this.postsArray=[]}ngOnInit(){this.route.params.subscribe(t=>{this.categoryObj=t,this.postsService.loadCategoryPosts(t.id).subscribe(r=>{this.postsArray=r})})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(wr),d.Y36(KR))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-single-category"]],decls:9,vars:2,consts:[[1,"bg-theme","p-5"],[1,"container"],[1,"text-white"],[1,"container","mt-5","mb-5"],[1,"row"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],[3,"postData"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),d._uU(3),d.qZA(),d.TgZ(4,"p",2),d._uU(5,"Lorem ipsum dolor sit amet consectetur adipisicing elit."),d.qZA()()(),d.TgZ(6,"div",3)(7,"div",4),d.YNc(8,nj,2,1,"div",5),d.qZA()()),2&t&&(d.xp6(3),d.hij(" ",r.categoryObj.category,""),d.xp6(5),d.Q6J("ngForOf",r.postsArray))},dependencies:[Ss,YR]}),n})(),gk=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Nm=(()=>{class n extends gk{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const Tc=new d.OlP("NgValueAccessor"),oj={provide:Tc,useExisting:(0,d.Gpc)(()=>kD),multi:!0},uj=new d.OlP("CompositionEventMode");let kD=(()=>{class n extends gk{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function aj(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(uj,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[d._Bn([oj]),d.qOj]}),n})();const lj=!1;function hp(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Is=new d.OlP("NgValidators"),fp=new d.OlP("NgAsyncValidators"),cj=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function wk(n){return hp(n.value)?{required:!0}:null}function Ik(n){return hp(n.value)||cj.test(n.value)?null:{email:!0}}function FD(n){return null}function Tk(n){return null!=n}function Sk(n){const e=(0,d.QGY)(n)?(0,rn.D)(n):n;if(lj&&!(0,d.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new d.vHH(-1101,t)}return e}function Ak(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function xk(n,e){return e.map(t=>t(n))}function Rk(n){return n.map(e=>function dj(n){return!n.validate}(e)?e:t=>e.validate(t))}function QR(n){return null!=n?function Mk(n){if(!n)return null;const e=n.filter(Tk);return 0==e.length?null:function(t){return Ak(xk(t,e))}}(Rk(n)):null}function XR(n){return null!=n?function Nk(n){if(!n)return null;const e=n.filter(Tk);return 0==e.length?null:function(t){return function ij(...n){const e=(0,ai.jO)(n),{args:t,keys:r}=xu(n),i=new ui.y(o=>{const{length:l}=t;if(!l)return void o.complete();const f=new Array(l);let _=l,w=l;for(let b=0;b<l;b++){let A=!1;(0,Yo.Xf)(t[b]).subscribe((0,Xn.x)(o,P=>{A||(A=!0,w--),f[b]=P},()=>_--,void 0,()=>{(!_||!A)&&(w||o.next(r?lo(r,f):f),o.complete())}))}});return e?i.pipe(uo(e)):i}(xk(t,e).map(Sk)).pipe((0,ct.U)(Ak))}}(Rk(n)):null}function Pk(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function JR(n){return n?Array.isArray(n)?n:[n]:[]}function LD(n,e){return Array.isArray(n)?n.includes(e):n===e}function Fk(n,e){const t=JR(e);return JR(n).forEach(i=>{LD(t,i)||t.push(i)}),t}function Lk(n,e){return JR(e).filter(t=>!LD(n,t))}class Vk{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=QR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=XR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Xs extends Vk{get formDirective(){return null}get path(){return null}}class pp extends Vk{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Uk{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Bk=(()=>{class n extends Uk{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(pp,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),eM=(()=>{class n extends Uk{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Xs,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();function jk(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const rM=!1,TE="VALID",UD="INVALID",sv="PENDING",SE="DISABLED";function iM(n){return(BD(n)?n.validators:n)||null}function sM(n,e){return(BD(e)?e.asyncValidators:n)||null}function BD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Gk{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===TE}get invalid(){return this.status===UD}get pending(){return this.status==sv}get disabled(){return this.status===SE}get enabled(){return this.status!==SE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Fk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Fk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Lk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Lk(e,this._rawAsyncValidators))}hasValidator(e){return LD(this._rawValidators,e)}hasAsyncValidator(e){return LD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=sv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=SE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=TE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===TE||this.status===sv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?SE:TE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=sv,this._hasOwnPendingAsyncValidator=!0;const t=Sk(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?SE:this.errors?UD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sv)?sv:this._anyControlsHaveStatus(UD)?UD:TE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){BD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function yj(n){return Array.isArray(n)?QR(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function vj(n){return Array.isArray(n)?XR(n):n||null}(this._rawAsyncValidators)}}class oM extends Gk{constructor(e,t,r){super(iM(t),sM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Hk(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,rM?function _j(n,e){return`Must supply a value for form control ${jk(n,e)}`}(e,i):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function $k(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,rM?function gj(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new d.vHH(1001,rM?function mj(n,e){return`Cannot find form control ${jk(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const ov=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>jD}),jD="always";function AE(n,e,t=jD){aM(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Ij(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&zk(n,e)})}(n,e),function bj(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Cj(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&zk(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Ej(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function GD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function aM(n,e){const t=function Ok(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Pk(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function kk(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Pk(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();GD(e._rawValidators,i),GD(e._rawAsyncValidators,i)}function zk(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const xj={provide:Xs,useExisting:(0,d.Gpc)(()=>RE)},xE=(()=>Promise.resolve())();let RE=(()=>{class n extends Xs{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new oM({},QR(t),XR(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){xE.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),AE(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){xE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){xE.then(()=>{const r=this._findContainer(t.path),i=new oM({});(function qk(n,e){aM(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){xE.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){xE.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Wk(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Is,10),d.Y36(fp,10),d.Y36(ov,8))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([xj]),d.qOj]}),n})();function Zk(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Kk(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Yk=class extends Gk{constructor(e=null,t,r){super(iM(t),sM(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),BD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Kk(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Zk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Zk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Kk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Nj={provide:pp,useExisting:(0,d.Gpc)(()=>dM)},Jk=(()=>Promise.resolve())();let dM=(()=>{class n extends pp{constructor(t,r,i,o,l,f){super(),this._changeDetectorRef=l,this.callSetDisabledState=f,this.control=new Yk,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function cM(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===kD?t=o:function Sj(n){return Object.getPrototypeOf(n.constructor)===Nm}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function lM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){AE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Jk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,d.D6c)(r);Jk.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function $D(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Xs,9),d.Y36(Is,10),d.Y36(fp,10),d.Y36(Tc,10),d.Y36(d.sBO,8),d.Y36(ov,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([Nj]),d.qOj,d.TTD]}),n})(),hM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),t1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),Pm=(()=>{class n{constructor(){this._validator=FD}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):FD,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const Yj={provide:Is,useExisting:(0,d.Gpc)(()=>qD),multi:!0};let qD=(()=>{class n extends Pm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.D6c,this.createValidator=t=>wk}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([Yj]),d.qOj]}),n})();const Xj={provide:Is,useExisting:(0,d.Gpc)(()=>yM),multi:!0};let yM=(()=>{class n extends Pm{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=d.D6c,this.createValidator=t=>Ik}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[d._Bn([Xj]),d.qOj]}),n})(),n$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[t1]}),n})(),i$=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ov,useValue:t.callSetDisabledState??jD}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[n$]}),n})(),s$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-comment-form"]],decls:17,vars:0,consts:[[1,"card","mt-5","shadow-effect"],[1,"card-body"],[1,"form-group"],["for","name",1,"form-label"],["type","text","placeholder","Enter you name here",1,"form-control","shadow-effect"],["for","comment",1,"form-label"],["cols","30","rows","10","placeholder","Add your comment here",1,"form-control","shadow-effect"],[1,"btn","btn-info","btn-theme"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"h4"),d._uU(3," Leave a Comment"),d.qZA(),d.TgZ(4,"p"),d._uU(5,"You can leave a comment using this comment form"),d.qZA(),d.TgZ(6,"form")(7,"div",2)(8,"label",3),d._uU(9,"Name"),d.qZA(),d._UZ(10,"input",4),d.qZA(),d.TgZ(11,"div",2)(12,"label",5),d._uU(13,"Comment"),d.qZA(),d._UZ(14,"textarea",6),d.qZA(),d.TgZ(15,"button",7),d._uU(16,"Add a Comment"),d.qZA()()()())},dependencies:[hM,eM,RE],styles:[".btn-theme[_ngcontent-%COMP%]{height:58px;border:none;font-size:13px;background-color:var(--primary-color)}"]}),n})(),o$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-comment-list"]],decls:52,vars:0,consts:[[1,"card","mb-5","mt-5","pb-5","shadow-effect"],[1,"card-body"],[1,"mt-3","mb-3"],[1,"comment-box","mt-3"],[1,"mb-0"],[1,"text-danger"],["href","#",1,"mt-1"],["href","#",1,"mt-1","ml-3",2,"margin-left","25px"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),d._uU(3," Comments (15,256)"),d.qZA(),d.TgZ(4,"div",3)(5,"h6",4),d._uU(6," Jonh Doe"),d.qZA(),d.TgZ(7,"small",5),d._uU(8," LAST UPDATED -SEP 20, 2022"),d.qZA(),d.TgZ(9,"div",2),d._uU(10," Lorem ipsum dolor sit amet, consectetur adipisicing elit. Architecto voluptates exercitationem repudiandae iusto eaque nemo. "),d.qZA(),d.TgZ(11,"a",6),d._uU(12," Reply "),d.qZA(),d.TgZ(13,"a",7),d._uU(14," Vew Reply "),d.qZA(),d._UZ(15,"hr"),d.qZA(),d.TgZ(16,"div",3)(17,"h6",4),d._uU(18," Jonh Doe"),d.qZA(),d.TgZ(19,"small",5),d._uU(20," LAST UPDATED -SEP 20, 2022"),d.qZA(),d.TgZ(21,"div",2),d._uU(22," Lorem ipsum dolor sit amet, consectetur adipisicing elit. Architecto voluptates exercitationem repudiandae iusto eaque nemo. "),d.qZA(),d.TgZ(23,"a",6),d._uU(24," Reply "),d.qZA(),d.TgZ(25,"a",7),d._uU(26," Vew Reply "),d.qZA(),d._UZ(27,"hr"),d.qZA(),d.TgZ(28,"div",3)(29,"h6",4),d._uU(30," Jonh Doe"),d.qZA(),d.TgZ(31,"small",5),d._uU(32," LAST UPDATED -SEP 20, 2022"),d.qZA(),d.TgZ(33,"div",2),d._uU(34," Lorem ipsum dolor sit amet, consectetur adipisicing elit. Architecto voluptates exercitationem repudiandae iusto eaque nemo. "),d.qZA(),d.TgZ(35,"a",6),d._uU(36," Reply "),d.qZA(),d.TgZ(37,"a",7),d._uU(38," Vew Reply "),d.qZA(),d._UZ(39,"hr"),d.qZA(),d.TgZ(40,"div",3)(41,"h6",4),d._uU(42," Jonh Doe"),d.qZA(),d.TgZ(43,"small",5),d._uU(44," LAST UPDATED -SEP 20, 2022"),d.qZA(),d.TgZ(45,"div",2),d._uU(46," Lorem ipsum dolor sit amet, consectetur adipisicing elit. Architecto voluptates exercitationem repudiandae iusto eaque nemo. "),d.qZA(),d.TgZ(47,"a",6),d._uU(48," Reply "),d.qZA(),d.TgZ(49,"a",7),d._uU(50," Vew Reply "),d.qZA(),d._UZ(51,"hr"),d.qZA()()())},styles:[".comment-box[_ngcontent-%COMP%]{padding:15px 35px;background-color:#f0f0f0}"]}),n})();function a$(n,e){1&n&&(d.TgZ(0,"small",15),d._uU(1," Featured"),d.qZA())}function u$(n,e){if(1&n&&(d.TgZ(0,"div",6),d._UZ(1,"img",7),d.TgZ(2,"div",8)(3,"small",9),d._uU(4),d.qZA(),d.YNc(5,a$,2,0,"small",10),d.TgZ(6,"small",11),d._uU(7),d.qZA(),d.TgZ(8,"small",12),d._uU(9),d.ALo(10,"date"),d.qZA(),d.TgZ(11,"h1",13),d._uU(12),d.qZA(),d._UZ(13,"P",14),d.qZA()()),2&n){const t=d.oxw();d.xp6(1),d.MGl("src"," ",t.postData.postImgPath," ",d.LSH),d.xp6(3),d.hij(" ",t.postData.category.category," "),d.xp6(1),d.Q6J("ngIf",t.postData.isFeatured),d.xp6(2),d.hij(" Views - ",t.postData.views," "),d.xp6(2),d.hij(" LAST UPDATED - ",d.lcZ(10,7,t.postData.createdAt.toMillis())," "),d.xp6(3),d.hij(" ",t.postData.title," "),d.xp6(1),d.Q6J("innerHTML",t.postData.content,d.oJD)}}function l$(n,e){if(1&n&&(d.TgZ(0,"div"),d._UZ(1,"app-post-card",16),d.qZA()),2&n){const t=e.$implicit;d.xp6(1),d.Q6J("postData",t)}}const c$=[{path:"",component:tj},{path:"category/:category/:id",component:rj},{path:"post/:id",component:(()=>{class n{constructor(t,r){this.route=t,this.postService=r,this.similarPostArray=[]}ngOnInit(){this.route.params.subscribe(t=>{this.postService.countViews(t.id),this.postService.loadPost(t.id).subscribe(r=>{this.postData=r,this.loadSimilarPost(this.postData.category.categoryId)})})}loadSimilarPost(t){this.postService.loadSimilarPost(t).subscribe(r=>{this.similarPostArray=r})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(wr),d.Y36(KR))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-single-post"]],decls:8,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-md-9"],["class","card shadow-effect",4,"ngIf"],[1,"col-md-3"],[4,"ngFor","ngForOf"],[1,"card","shadow-effect"],["alt","",1,"card-img-top","img-fluid",3,"src"],[1,"card-body"],[1,"bg-light","text-danger","text-center"],["class","bg-light text-success text-center","style","margin-left: 25px;",4,"ngIf"],[1,"bg-light","text-info","text-center",2,"margin-left","25px"],[1,"bg-light","text-warning","text-center",2,"margin-left","25px"],[1,"mt-3","mb-3"],[3,"innerHTML"],[1,"bg-light","text-success","text-center",2,"margin-left","25px"],[3,"postData"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2),d.YNc(3,u$,14,9,"div",3),d._UZ(4,"app-comment-form")(5,"app-comment-list"),d.qZA(),d.TgZ(6,"div",4),d.YNc(7,l$,2,1,"div",5),d.qZA()()()),2&t&&(d.xp6(3),d.Q6J("ngIf",r.postData),d.xp6(4),d.Q6J("ngForOf",r.similarPostArray))},dependencies:[Ss,hs,s$,o$,YR,ri]}),n})()},{path:"about",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-about-us"]],decls:14,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","p-5","bg-theme"],[1,"text-white","text-center"],[1,"p-5","mt-4","bg-secondary-theme","text-theme-primary"],[1,"text-center"],[1,"btn","btn-info","btn-sm","mt-4","btn-theme"]],template:function(t,r){1&t&&(d.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),d._uU(3," About Us "),d.qZA(),d.TgZ(4,"div",3)(5,"p"),d._uU(6,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Itaque modi pariatur voluptates quo, assumenda ipsa possimus voluptas distinctio accusantium, hic ullam iste eaque aliquam aliquid? Expedita ab fugiat quod eligendi itaque voluptatibus doloribus, debitis facere vitae illum ut maiores, numquam veniam voluptates quas, accusantium dignissimos totam repellat provident. Facere, sapiente! Iusto molestiae quibusdam sed aut aperiam quas. Vero, blanditiis modi accusamus, maiores obcaecati architecto magnam voluptatem molestias eligendi nisi vel amet vitae eaque magni cum eum doloremque ea provident placeat consequatur. Libero nostrum quae officiis quam dolor dolore voluptates aspernatur veniam laborum, recusandae voluptas, amet minus veritatis dolores cupiditate vel!"),d.qZA(),d.TgZ(7,"p"),d._uU(8,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Itaque modi pariatur voluptates quo, assumenda ipsa possimus voluptas distinctio accusantium, hic ullam iste eaque aliquam aliquid? Expedita ab fugiat quod eligendi itaque voluptatibus doloribus, debitis facere vitae illum ut maiores, numquam veniam voluptates quas, accusantium dignissimos totam repellat provident. Facere, sapiente! Iusto molestiae quibusdam sed aut aperiam quas. Vero, blanditiis modi accusamus, maiores obcaecati architecto magnam voluptatem molestias eligendi nisi vel amet vitae eaque magni cum eum doloremque ea provident placeat consequatur. Libero nostrum quae officiis quam dolor dolore voluptates aspernatur veniam laborum, recusandae voluptas, amet minus veritatis dolores cupiditate vel!"),d.qZA(),d.TgZ(9,"p"),d._uU(10,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Itaque modi pariatur voluptates quo, assumenda ipsa possimus voluptas distinctio accusantium, hic ullam iste eaque aliquam aliquid? Expedita ab fugiat quod eligendi itaque voluptatibus doloribus, debitis facere vitae illum ut maiores, numquam veniam voluptates quas, accusantium dignissimos totam repellat provident. Facere, sapiente! Iusto molestiae quibusdam sed aut aperiam quas. Vero, blanditiis modi accusamus, maiores obcaecati architecto magnam voluptatem molestias eligendi nisi vel amet vitae eaque magni cum eum doloremque ea provident placeat consequatur. Libero nostrum quae officiis quam dolor dolore voluptates aspernatur veniam laborum, recusandae voluptas, amet minus veritatis dolores cupiditate vel!"),d.qZA(),d.TgZ(11,"div",4)(12,"button",5),d._uU(13," Back to Home "),d.qZA()()()()())},styles:[".btn-theme[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#fff}"]}),n})()},{path:"term-conditions",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-terms-and-condition"]],decls:14,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","p-5","bg-theme"],[1,"text-white","text-center"],[1,"p-5","mt-4","bg-secondary-theme","text-theme-primary"],[1,"text-center"],[1,"btn","btn-info","btn-sm","mt-4","btn-theme"]],template:function(t,r){1&t&&(d.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),d._uU(3," Terms & Condition "),d.qZA(),d.TgZ(4,"div",3)(5,"p"),d._uU(6,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Itaque modi pariatur voluptates quo, assumenda ipsa possimus voluptas distinctio accusantium, hic ullam iste eaque aliquam aliquid? Expedita ab fugiat quod eligendi itaque voluptatibus doloribus, debitis facere vitae illum ut maiores, numquam veniam voluptates quas, accusantium dignissimos totam repellat provident. Facere, sapiente! Iusto molestiae quibusdam sed aut aperiam quas. Vero, blanditiis modi accusamus, maiores obcaecati architecto magnam voluptatem molestias eligendi nisi vel amet vitae eaque magni cum eum doloremque ea provident placeat consequatur. Libero nostrum quae officiis quam dolor dolore voluptates aspernatur veniam laborum, recusandae voluptas, amet minus veritatis dolores cupiditate vel!"),d.qZA(),d.TgZ(7,"p"),d._uU(8,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Itaque modi pariatur voluptates quo, assumenda ipsa possimus voluptas distinctio accusantium, hic ullam iste eaque aliquam aliquid? Expedita ab fugiat quod eligendi itaque voluptatibus doloribus, debitis facere vitae illum ut maiores, numquam veniam voluptates quas, accusantium dignissimos totam repellat provident. Facere, sapiente! Iusto molestiae quibusdam sed aut aperiam quas. Vero, blanditiis modi accusamus, maiores obcaecati architecto magnam voluptatem molestias eligendi nisi vel amet vitae eaque magni cum eum doloremque ea provident placeat consequatur. Libero nostrum quae officiis quam dolor dolore voluptates aspernatur veniam laborum, recusandae voluptas, amet minus veritatis dolores cupiditate vel!"),d.qZA(),d.TgZ(9,"p"),d._uU(10,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Itaque modi pariatur voluptates quo, assumenda ipsa possimus voluptas distinctio accusantium, hic ullam iste eaque aliquam aliquid? Expedita ab fugiat quod eligendi itaque voluptatibus doloribus, debitis facere vitae illum ut maiores, numquam veniam voluptates quas, accusantium dignissimos totam repellat provident. Facere, sapiente! Iusto molestiae quibusdam sed aut aperiam quas. Vero, blanditiis modi accusamus, maiores obcaecati architecto magnam voluptatem molestias eligendi nisi vel amet vitae eaque magni cum eum doloremque ea provident placeat consequatur. Libero nostrum quae officiis quam dolor dolore voluptates aspernatur veniam laborum, recusandae voluptas, amet minus veritatis dolores cupiditate vel!"),d.qZA(),d.TgZ(11,"div",4)(12,"button",5),d._uU(13," Back to Home "),d.qZA()()()()())},styles:[".btn-theme[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#fff}"]}),n})()},{path:"contact",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-contact-us"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"contact-us works!"),d.qZA())}}),n})()}];let d$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[pS.forRoot(c$),pS]}),n})(),h$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-header"]],decls:4,vars:0,consts:[[1,"navbar","navbar-expand-lg","fixed-top","bg-white"],[1,"container","justify-content-center"],["routerLink","/",1,"site-logo"]],template:function(t,r){1&t&&(d.TgZ(0,"header",0)(1,"div",1)(2,"a",2),d._uU(3," ANG-BLOG"),d.qZA()()())},dependencies:[df],styles:["header[_ngcontent-%COMP%]{height:100px}.site-logo[_ngcontent-%COMP%]{font-size:1.5em}"]}),n})(),f$=(()=>{class n{constructor(t){this.afs=t}loadData(){return this.afs.collection("categories").snapshotChanges().pipe((0,ct.U)(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,data:i}})))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(OD))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const p$=function(n,e){return["/category",n,e]};function g$(n,e){if(1&n&&(d.TgZ(0,"ul",4)(1,"li",5)(2,"a",6),d._uU(3),d.qZA()()()),2&n){const t=e.$implicit;d.xp6(2),d.Q6J("routerLink",d.WLB(2,p$,t.data.category,t.id)),d.xp6(1),d.hij(" ",t.data.category,"")}}let m$=(()=>{class n{constructor(t){this.categoryService=t,this.categoryArray=[]}ngOnInit(){this.categoryService.loadData().subscribe(t=>{this.categoryArray=t})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(f$))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-category-navbar"]],decls:4,vars:1,consts:[[1,"navbar","navbar-expand-lg","fixed-top"],[1,"container"],[1,"collapse","navbar-collapse","justify-content-center"],["class","navbar-nav",4,"ngFor","ngForOf"],[1,"navbar-nav"],[1,"nav-item","ml-3"],["href","",1,"nav-link",3,"routerLink"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0)(1,"div",1)(2,"div",2),d.YNc(3,g$,4,5,"ul",3),d.qZA()()()),2&t&&(d.xp6(3),d.Q6J("ngForOf",r.categoryArray))},dependencies:[Ss,df],styles:["nav[_ngcontent-%COMP%]{margin-top:100px;height:50px;background-color:var(--navbar-footer-color)}.nav-link[_ngcontent-%COMP%]{text-transform:uppercase}"]}),n})(),_$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-footer"]],decls:22,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-12","text-center"],[1,"site-logo"],[1,""],[1,"nav","justify-content-center"],[1,"nav-item"],["href","#",1,"nav-link"],[1,"mb-2","mt-2"]],template:function(t,r){1&t&&(d.TgZ(0,"footer")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),d._uU(5,"ANG-BLOG"),d.qZA(),d.TgZ(6,"div",4)(7,"ul",5)(8,"li",6)(9,"a",7),d._uU(10,"Home"),d.qZA()(),d.TgZ(11,"li",6)(12,"a",7),d._uU(13,"About"),d.qZA()(),d.TgZ(14,"li",6)(15,"a",7),d._uU(16,"Terms & Conditions"),d.qZA()(),d.TgZ(17,"li",6)(18,"a",7),d._uU(19,"Contact"),d.qZA()()()(),d.TgZ(20,"p",8),d._uU(21,"Copyright @Copyright 2023 Angular Blogsite "),d.qZA()()()()())},styles:["footer[_ngcontent-%COMP%]{height:130px;padding:15px;background-color:var(--navbar-footer-color)}.site-logo[_ngcontent-%COMP%]{font-size:1.2em}"]}),n})(),y$=(()=>{class n{constructor(t){this.afs=t}addSubs(t){this.afs.collection("subscribers").add(t).then(()=>{console.log("Subscriber Saved Successfully")})}checkSubs(t){return this.afs.collection("subscribes",r=>r.where("email","==",t)).get()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(OD))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function v$(n,e){1&n&&(d.TgZ(0,"div",7),d._uU(1," Email is Already in use "),d.qZA())}function w$(n,e){1&n&&(d.TgZ(0,"div",8),d._uU(1,"Thank you for subscribing our newslatter service "),d.qZA())}function E$(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Name is Required"),d.qZA())}function I$(n,e){if(1&n&&(d.TgZ(0,"div",19),d.YNc(1,E$,2,0,"div",20),d.qZA()),2&n){d.oxw();const t=d.MAs(4);d.xp6(1),d.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function C$(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Email is Required"),d.qZA())}function b$(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Enter Valid Email"),d.qZA())}function D$(n,e){if(1&n&&(d.TgZ(0,"div",19),d.YNc(1,C$,2,0,"div",20),d.YNc(2,b$,2,0,"div",20),d.qZA()),2&n){d.oxw();const t=d.MAs(8);d.xp6(1),d.Q6J("ngIf",null==t.errors?null:t.errors.required),d.xp6(1),d.Q6J("ngIf",null==t.errors?null:t.errors.email)}}const y1=function(n){return{"is-invalid":n}};function T$(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"form",9,10),d.NdJ("ngSubmit",function(){d.CHM(t);const i=d.MAs(1),o=d.oxw();return d.KtG(o.onSubmit(i.value))}),d.TgZ(2,"div",11),d._UZ(3,"input",12,13),d.YNc(5,I$,2,1,"div",14),d.qZA(),d.TgZ(6,"div",11),d._UZ(7,"input",15,16),d.YNc(9,D$,3,2,"div",14),d.qZA(),d.TgZ(10,"div",17)(11,"button",18),d._uU(12,"SUBSCRIBE"),d.qZA()()()}if(2&n){const t=d.MAs(1),r=d.MAs(4),i=d.MAs(8);d.xp6(3),d.Q6J("ngClass",d.VKq(5,y1,r.touched&&r.invalid)),d.xp6(2),d.Q6J("ngIf",r.touched&&r.invalid),d.xp6(2),d.Q6J("ngClass",d.VKq(7,y1,i.touched&&i.invalid)),d.xp6(2),d.Q6J("ngIf",i.touched&&i.invalid),d.xp6(2),d.Q6J("disabled",t.invalid)}}let S$=(()=>{class n{constructor(t){this.subsService=t,this.isEmailError=!1,this.isSubscribed=!1}ngOnInit(){}onSubmit(t){const r={name:t.name,email:t.email};this.subsService.checkSubs(r.email).subscribe(i=>{i.empty?(this.subsService.addSubs(r),this.isSubscribed=!0):(console.log("Email is already in use"),this.isEmailError=!0)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(y$))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-subdcription-form"]],decls:10,vars:3,consts:[[1,"card","shadow-effect"],[1,"card-body"],[1,"text-center","mt-3","mb-5"],[1,"m-auto","subs-text"],["class","alert alert-danger pt-3",4,"ngIf"],["class","alert alert-info mt-3",4,"ngIf"],["class","form-inline row mb-3 mt-3",3,"ngSubmit",4,"ngIf"],[1,"alert","alert-danger","pt-3"],[1,"alert","alert-info","mt-3"],[1,"form-inline","row","mb-3","mt-3",3,"ngSubmit"],["subsForm","ngForm"],[1,"form-group","col-md-5"],["type","text","placeholder","Your Name","name","name","ngModel","","required","",1,"form-control",3,"ngClass"],["Name","ngModel"],["class","text-danger",4,"ngIf"],["type","email","placeholder","Email Address","name","email","ngModel","","required","","email","",1,"form-control",3,"ngClass"],["Email","ngModel"],[1,"col-md-2"],[1,"btn","btn-info","btn-block","btn-theme",3,"disabled"],[1,"text-danger"],[4,"ngIf"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),d._uU(4,"SUBSCRIPTION FORM"),d.qZA(),d.TgZ(5,"p",3),d._uU(6," Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eum, delectus! Ducimus, est. Voluptatibus ut perspiciatis vel dolor natus officiis, quisquam, magnam reiciendis doloremque esse expedita consequuntur! "),d.qZA(),d.YNc(7,v$,2,0,"div",4),d.YNc(8,w$,2,0,"div",5),d.YNc(9,T$,13,9,"form",6),d.qZA()()()),2&t&&(d.xp6(7),d.Q6J("ngIf",r.isEmailError),d.xp6(1),d.Q6J("ngIf",r.isSubscribed),d.xp6(1),d.Q6J("ngIf",!r.isSubscribed))},dependencies:[Lt,hs,hM,kD,Bk,eM,qD,yM,dM,RE],styles:[".card[_ngcontent-%COMP%]{background-color:var(--secondary-color);width:100%}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%]{width:100%}.btn-theme[_ngcontent-%COMP%]{height:58px;border:none;font-size:13px;background-color:var(--primary-color)}.subs-text[_ngcontent-%COMP%]{width:500px}"]}),n})(),A$=(()=>{class n{constructor(){this.title="ang-blog-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"app-body"],[1,"container","mt-5","mb-5"],[1,"row","justify-content-center"]],template:function(t,r){1&t&&(d._UZ(0,"app-header")(1,"app-category-navbar"),d.TgZ(2,"div",0),d._UZ(3,"router-outlet"),d.qZA(),d.TgZ(4,"div",1)(5,"div",2),d._UZ(6,"app-subdcription-form"),d.qZA()(),d._UZ(7,"app-footer"))},dependencies:[Q,h$,m$,_$,S$],styles:[".app-body[_ngcontent-%COMP%]{min-height:70vh;margin-top:150px}"]}),n})();const v1="firebasestorage.googleapis.com",w1="storageBucket";class Nr extends O.ZR{constructor(e,t,r=0){super(vM(e),`Firebase Storage: ${t} (${vM(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return vM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var nr=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(nr||(nr={})),nr))();function vM(n){return"storage/"+n}function wM(){return new Nr(nr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function E1(){return new Nr(nr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function I1(){return new Nr(nr.CANCELED,"User canceled the upload/download.")}function C1(){return new Nr(nr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function av(n){return new Nr(nr.INVALID_ARGUMENT,n)}function b1(){return new Nr(nr.APP_DELETED,"The Firebase app was deleted.")}function D1(n){return new Nr(nr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ME(n,e){return new Nr(nr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function NE(n){throw new Nr(nr.INTERNAL_ERROR,"Internal error: "+n)}class Cs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Cs.makeFromUrl(e,t)}catch{return new Cs(e,"")}if(""===r.path)return r;throw function U$(n){return new Nr(nr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(Ct){Ct.path_=decodeURIComponent(Ct.path)}const A=t.replace(/[.]/g,"\\."),Ye=[{regex:f,indices:{bucket:1,path:3},postModify:function o(Ct){"/"===Ct.path.charAt(Ct.path.length-1)&&(Ct.path_=Ct.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===v1?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let Ct=0;Ct<Ye.length;Ct++){const Gt=Ye[Ct],Jt=Gt.regex.exec(e);if(Jt){let Do=Jt[Gt.indices.path];Do||(Do=""),r=new Cs(Jt[Gt.indices.bucket],Do),Gt.postModify(r);break}}if(null==r)throw function V$(n){return new Nr(nr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class G${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function WD(n){return"string"==typeof n||n instanceof String}function T1(n){return EM()&&n instanceof Blob}function EM(){return typeof Blob<"u"&&!(0,O.UG)()}function IM(n,e,t,r){if(r<e)throw av(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw av(`Invalid value for '${n}'. Expected ${t} or less.`)}function dh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function S1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var gp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(gp||(gp={})),gp))();function A1(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||i||o}class Y${constructor(e,t,r,i,o,l,f,_,w,b,A,P=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=b,this.connectionFactory_=A,this.retry=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,q)=>{this.resolve_=U,this.reject_=q,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,l=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(f,f.getResponse());!function W$(n){return void 0!==n}(_)?o():o(_)}catch(_){l(_)}else if(null!==f){const _=wM();_.serverResponse=f.getErrorText(),l(this.errorCallback_?this.errorCallback_(f,_):_)}else l(i.canceled?this.appDelete_?b1():I1():E1())};this.canceled_?t(0,new ZD(!1,null,!0)):this.backoffId_=function z$(n,e,t){let r=1,i=null,o=null,l=!1,f=0;function _(){return 2===f}let w=!1;function b(...he){w||(w=!0,e.apply(null,he))}function A(he){i=setTimeout(()=>{i=null,n(U,_())},he)}function P(){o&&clearTimeout(o)}function U(he,...Xe){if(w)return void P();if(he)return P(),void b.call(null,he,...Xe);if(_()||l)return P(),void b.call(null,he,...Xe);let Ye;r<64&&(r*=2),1===f?(f=2,Ye=0):Ye=1e3*(r+Math.random()),A(Ye)}let q=!1;function oe(he){q||(q=!0,P(),!w&&(null!==i?(he||(f=2),clearTimeout(i),A(0)):he||(f=1)))}return A(0),o=setTimeout(()=>{l=!0,oe(!0)},t),oe}((r,i)=>{if(i)return void r(!1,new ZD(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const l=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const f=o.getErrorCode()===gp.NO_ERROR,_=o.getStatus();if(!f||A1(_,this.additionalRetryCodes_)&&this.retry){const b=o.getErrorCode()===gp.ABORT;return void r(!1,new ZD(!1,null,b))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new ZD(w,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function q$(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ZD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function rH(...n){const e=function nH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(EM())return new Blob(n);throw new Nr(nr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const fa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class CM{constructor(e,t){this.data=e,this.contentType=t||null}}function bM(n,e){switch(n){case fa.RAW:return new CM(x1(e));case fa.BASE64:case fa.BASE64URL:return new CM(R1(n,e));case fa.DATA_URL:return new CM(function aH(n){const e=new M1(n);return e.base64?R1(fa.BASE64,e.rest):function oH(n){let e;try{e=decodeURIComponent(n)}catch{throw ME(fa.DATA_URL,"Malformed data URL.")}return x1(e)}(e.rest)}(e),function uH(n){return new M1(n).contentType}(e))}throw wM()}function x1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function R1(n,e){switch(n){case fa.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw ME(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case fa.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw ME(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function sH(n){if(typeof atob>"u")throw function H$(n){return new Nr(nr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:ME(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class M1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ME(fa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function lH(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Sc{constructor(e,t){let r=0,i="";T1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(T1(this.data_)){const i=function iH(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Sc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Sc(r,!0)}}static getBlob(...e){if(EM()){const t=e.map(r=>r instanceof Sc?r.data_:r);return new Sc(rH.apply(null,t))}{const t=e.map(l=>WD(l)?bM(fa.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let f=0;f<l.length;f++)i[o++]=l[f]}),new Sc(i,!0)}}uploadData(){return this.data_}}function DM(n){let e;try{e=JSON.parse(n)}catch{return null}return function K$(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function N1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function hH(n,e){return e}class Js{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||hH}}let KD=null;function PE(){if(KD)return KD;const n=[];n.push(new Js("bucket")),n.push(new Js("generation")),n.push(new Js("metageneration")),n.push(new Js("name","fullPath",!0));const t=new Js("name");t.xform=function e(o,l){return function fH(n){return!WD(n)||n.length<2?n:N1(n)}(l)},n.push(t);const i=new Js("size");return i.xform=function r(o,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Js("timeCreated")),n.push(new Js("updated")),n.push(new Js("md5Hash",null,!0)),n.push(new Js("cacheControl",null,!0)),n.push(new Js("contentDisposition",null,!0)),n.push(new Js("contentEncoding",null,!0)),n.push(new Js("contentLanguage",null,!0)),n.push(new Js("contentType",null,!0)),n.push(new Js("metadata","customMetadata",!0)),KD=n,KD}function P1(n,e,t){const r=DM(e);return null===r?null:function gH(n,e,t){const r={type:"file"},i=t.length;for(let o=0;o<i;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return function pH(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new Cs(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(r,n),r}(n,r,t)}function TM(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const O1="prefixes",k1="items";class Ac{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function xc(n){if(!n)throw wM()}function YD(n,e){return function t(r,i){const o=P1(n,i,e);return xc(null!==o),o}}function uv(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function F$(){return new Nr(nr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function k$(){return new Nr(nr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function O$(n){return new Nr(nr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function L$(n){return new Nr(nr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function OE(n){const e=uv(n);return function t(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function P$(n){return new Nr(nr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function F1(n,e,t){const i=dh(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new Ac(i,"GET",YD(n,t),l);return f.errorHandler=OE(e),f}function EH(n,e,t,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);const f=dh(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,b=new Ac(f,"GET",function vH(n,e){return function t(r,i){const o=function yH(n,e,t){const r=DM(t);return null===r?null:function _H(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[O1])for(const i of t[O1]){const o=i.replace(/\/$/,""),l=n._makeStorageReference(new Cs(e,o));r.prefixes.push(l)}if(t[k1])for(const i of t[k1]){const o=n._makeStorageReference(new Cs(e,i.name));r.items.push(o)}return r}(n,e,r)}(n,e,i);return xc(null!==o),o}}(n,e.bucket),w);return b.urlParams=o,b.errorHandler=uv(e),b}function V1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function DH(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class QD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function SM(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{xc(!1)}return xc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const xH={STATE_CHANGED:"state_changed"},eo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function AM(n){switch(n){case"running":case"pausing":case"canceling":return eo.RUNNING;case"paused":return eo.PAUSED;case"success":return eo.SUCCESS;case"canceled":return eo.CANCELED;default:return eo.ERROR}}class RH{constructor(e,t,r){if(function Z$(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function lv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let j1=null;class MH{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=gp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=gp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=gp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw NE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw NE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw NE("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw NE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw NE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class NH extends MH{initXhr(){this.xhr_.responseType="text"}}function ll(){return j1?j1():new NH}class $1{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=PE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(nr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(A1(i.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=E1()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(nr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function TH(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l=V1(e,r,i),f={name:l.fullPath},_=dh(o,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},A=TM(l,t),q=new Ac(_,"POST",function U(oe){let he;SM(oe);try{he=oe.getResponseHeader("X-Goog-Upload-URL")}catch{xc(!1)}return xc(WD(he)),he},n.maxUploadRetryTime);return q.urlParams=f,q.headers=b,q.body=A,q.errorHandler=uv(e),q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ll,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function SH(n,e,t,r){const _=new Ac(t,"POST",function o(w){const b=SM(w,["active","final"]);let A=null;try{A=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{xc(!1)}A||xc(!1);const P=Number(A);return xc(!isNaN(P)),new QD(P,r.size(),"final"===b)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=uv(e),_}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,ll,t,r);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new QD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let l;try{l=function AH(n,e,t,r,i,o,l,f){const _=new QD(0,0);if(l?(_.current=l.current,_.total=l.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function j$(){return new Nr(nr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let b=w;i>0&&(b=Math.min(b,i));const A=_.current;let U="";U=0===b?"finalize":w===b?"upload, finalize":"upload";const q={"X-Goog-Upload-Command":U,"X-Goog-Upload-Offset":`${_.current}`},oe=r.slice(A,A+b);if(null===oe)throw C1();const Ye=new Ac(t,"POST",function he(Ct,Gt){const Jt=SM(Ct,["active","final"]),Di=_.current+b,Do=r.size();let UN;return UN="final"===Jt?YD(e,o)(Ct,Gt):null,new QD(Di,Do,"final"===Jt,UN)},e.maxUploadRetryTime);return Ye.headers=q,Ye.body=oe.uploadData(),Ye.progressCallback=f||null,Ye.errorHandler=uv(n),Ye}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const f=this._ref.storage._makeRequest(l,ll,i,o,!1);this._request=f,f.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=F1(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ll,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function U1(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},_=function f(){let Ye="";for(let Ct=0;Ct<2;Ct++)Ye+=Math.random().toString().slice(2);return Ye}();l["Content-Type"]="multipart/related; boundary="+_;const w=V1(e,r,i),b=TM(w,t),U=Sc.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===U)throw C1();const q={name:w.fullPath},oe=dh(o,n.host,n._protocol),Xe=n.maxUploadRetryTime,lt=new Ac(oe,"POST",YD(n,t),Xe);return lt.urlParams=q,lt.headers=l,lt.body=U.uploadData(),lt.errorHandler=uv(e),lt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ll,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=I1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=AM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const o=new RH(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(AM(this._state)){case eo.SUCCESS:lv(this._resolve.bind(null,this.snapshot))();break;case eo.CANCELED:case eo.ERROR:lv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(AM(this._state)){case eo.RUNNING:case eo.PAUSED:e.next&&lv(e.next.bind(e,this.snapshot))();break;case eo.SUCCESS:e.complete&&lv(e.complete.bind(e))();break;default:e.error&&lv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Om{constructor(e,t){this._service=e,this._location=t instanceof Cs?t:Cs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Om(e,t)}get root(){const e=new Cs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return N1(this._location.path)}get storage(){return this._service}get parent(){const e=function cH(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Cs(this._location.bucket,e);return new Om(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw D1(e)}}function G1(n,e,t){return xM.apply(this,arguments)}function xM(){return xM=(0,me.Z)(function*(n,e,t){const i=yield z1(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield G1(n,e,i.nextPageToken))}),xM.apply(this,arguments)}function z1(n,e){null!=e&&"number"==typeof e.maxResults&&IM("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=EH(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ll)}function GH(n){n._throwIfRoot("getDownloadURL");const e=function IH(n,e,t){const i=dh(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new Ac(i,"GET",function wH(n,e){return function t(r,i){const o=P1(n,i,e);return xc(null!==o),function mH(n,e,t,r){const i=DM(e);if(null===i||!WD(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const l=encodeURIComponent;return o.split(",").map(w=>{const A=n.fullPath;return dh("/b/"+l(n.bucket)+"/o/"+l(A),t,r)+S1({alt:"media",token:w})})[0]}(o,i,n.host,n._protocol)}}(n,t),l);return f.errorHandler=OE(e),f}(n.storage,n._location,PE());return n.storage.makeRequestWithTokens(e,ll).then(t=>{if(null===t)throw function $$(){return new Nr(nr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function q1(n,e){const t=function dH(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Cs(n._location.bucket,t);return new Om(n.storage,r)}function W1(n,e){if(n instanceof RM){const t=n;if(null==t._bucket)throw function B$(){return new Nr(nr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+w1+"' property when initializing the app?")}();const r=new Om(t,t._bucket);return null!=e?W1(r,e):r}return void 0!==e?q1(n,e):n}function ZH(n,e){if(e&&function qH(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof RM)return function WH(n,e){return new Om(n,e)}(n,e);throw av("To use ref(service, url), the first argument must be a Storage instance.")}return W1(n,e)}function Z1(n,e){const t=e?.[w1];return null==t?null:Cs.makeFromBucketSpec(t,n)}class RM{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=v1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Cs.makeFromBucketSpec(i,this._host):Z1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Cs.makeFromBucketSpec(this._url,e):Z1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){IM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){IM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,me.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,me.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Om(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new G$(b1());{const l=function tH(n,e,t,r,i,o,l=!0){const f=S1(n.urlParams),_=n.url+f,w=Object.assign({},n.headers);return function J$(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function Q$(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function X$(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(w,o),function eH(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new Y$(_,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,me.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const K1="@firebase/storage";function X1(n,e){return ZH(n=(0,O.m9)(n),e)}function iG(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new RM(t,r,i,e,is.SDK_VERSION)}!function sG(){(0,is._registerComponent)(new sa.wA("storage",iG,"PUBLIC").setMultipleInstances(!0)),(0,is.registerVersion)(K1,"0.11.2",""),(0,is.registerVersion)(K1,"0.11.2","esm2017")}();class XD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class eF{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new XD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new XD(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(o="function"==typeof t?l=>t(new XD(l,this,this._ref)):{next:t.next?l=>t.next(new XD(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class tF{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new hh(e,this._service))}get items(){return this._delegate.items.map(e=>new hh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class hh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function rG(n,e){return q1(n,e)}(this._delegate,e);return new hh(t,this.storage)}get root(){return new hh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new hh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new eF(function YH(n,e,t){return function UH(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new $1(n,new Sc(e),t)}(n=(0,O.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=fa.RAW,r){this._throwIfRoot("putString");const i=bM(t,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new eF(new $1(this._delegate,new Sc(i.data,!0),o),this)}listAll(){return function eG(n){return function jH(n){const e={prefixes:[],items:[]};return G1(n,e).then(()=>e)}(n=(0,O.m9)(n))}(this._delegate).then(e=>new tF(e,this.storage))}list(e){return function JH(n,e){return z1(n=(0,O.m9)(n),e)}(this._delegate,e||void 0).then(t=>new tF(t,this.storage))}getMetadata(){return function QH(n){return function $H(n){n._throwIfRoot("getMetadata");const e=F1(n.storage,n._location,PE());return n.storage.makeRequestWithTokens(e,ll)}(n=(0,O.m9)(n))}(this._delegate)}updateMetadata(e){return function XH(n,e){return function HH(n,e){n._throwIfRoot("updateMetadata");const t=function CH(n,e,t,r){const o=dh(e.fullServerUrl(),n.host,n._protocol),f=TM(t,r),w=n.maxOperationRetryTime,b=new Ac(o,"PATCH",YD(n,r),w);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=f,b.errorHandler=OE(e),b}(n.storage,n._location,e,PE());return n.storage.makeRequestWithTokens(t,ll)}(n=(0,O.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function tG(n){return GH(n=(0,O.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function nG(n){return function zH(n){n._throwIfRoot("deleteObject");const e=function bH(n,e){const r=dh(e.fullServerUrl(),n.host,n._protocol),f=new Ac(r,"DELETE",function l(_,w){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=OE(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ll)}(n=(0,O.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw D1(e)}}class nF{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(rF(e))throw av("ref() expected a child path but got a URL, use refFromURL instead.");return new hh(X1(this._delegate,e),this)}refFromURL(e){if(!rF(e))throw av("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Cs.makeFromUrl(e,this._delegate.host)}catch{throw av("refFromUrl() expected a valid full URL but got an invalid one.")}return new hh(X1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function J1(n,e,t,r={}){!function KH(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,O.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function rF(n){return/^[A-Za-z]+:\/\//.test(n)}function lG(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new nF(t,r)}function iF(n){const e=function dG(n){return new ui.y(e=>{const t=l=>e.next(l);t(n.snapshot);const o=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){o()}}).pipe(function x$(n,e=Ad.z){return(0,vr.e)((t,r)=>{let i=null,o=null,l=null;const f=()=>{if(i){i.unsubscribe(),i=null;const w=o;o=null,r.next(w)}};function _(){const w=l+n,b=e.now();if(b<w)return i=this.schedule(void 0,w-b),void r.add(i);f()}t.subscribe((0,Xn.x)(r,w=>{o=w,l=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{o=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ct.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function JD(n){return{getDownloadURL:()=>ut(void 0).pipe(pn.fc,Un(()=>n.getDownloadURL()),pn.iC),getMetadata:()=>ut(void 0).pipe(pn.fc,Un(()=>n.getMetadata()),pn.iC),delete:()=>(0,rn.D)(n.delete()),child:e=>JD(n.child(e)),updateMetadata:e=>(0,rn.D)(n.updateMetadata(e)),put:(e,t)=>iF(n.put(e,t)),putString:(e,t,r)=>iF(n.putString(e,t,r)),list:e=>(0,rn.D)(n.list(e)),listAll:()=>(0,rn.D)(n.listAll())}}!function cG(n){const e={TaskState:eo,TaskEvent:xH,StringFormat:fa,Storage:nF,Reference:hh};n.INTERNAL.registerComponent(new sa.wA("storage-compat",lG,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(I_.Z);const hG=new d.OlP("angularfire2.storageBucket"),fG=new d.OlP("angularfire2.storage.maxUploadRetryTime"),pG=new d.OlP("angularfire2.storage.maxOperationRetryTime"),gG=new d.OlP("angularfire2.storage.use-emulator");let mG=(()=>{class n{constructor(t,r,i,o,l,f,_,w,b,A){const P=(0,Mr.on)(t,l,r);this.storage=(0,Mr.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const U=l.runOutsideAngular(()=>P.storage(i||void 0)),q=b;return q&&U.useEmulator(...q),_&&U.setMaxUploadRetryTime(_),w&&U.setMaxOperationRetryTime(w),U},[_,w])}ref(t){return JD(this.storage.ref(t))}refFromURL(t){return JD(this.storage.refFromURL(t))}upload(t,r,i){return JD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Mr.Dh),d.LFG(Mr.xv,8),d.LFG(hG,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(pn.HU),d.LFG(fG,8),d.LFG(pG,8),d.LFG(gG,8),d.LFG(DE,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_G=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),yG=(()=>{class n{constructor(){Sd.Z.registerVersion("angularfire",pn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[mG],imports:[_G]}),n})();var vG=L(5032);const sF="@firebase/database";let MM="";function aF(n){MM=n}class IG{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,O.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,O.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class CG{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,O.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const uF=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new IG(e)}}catch{}return new CG},km=uF("localStorage"),NM=uF("sessionStorage"),cv=new yo.Yd("@firebase/database"),lF=function(){let n=1;return function(){return n++}}(),cF=function(n){const e=(0,O.dS)(n),t=new O.gQ;t.update(e);const r=t.digest();return O.US.encodeByteArray(r)},kE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=kE.apply(null,r):e+="object"==typeof r?(0,O.Wl)(r):r,e+=" "}return e};let Fm=null,dF=!0;const hF=function(n,e){(0,O.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(cv.logLevel=yo.in.VERBOSE,Fm=cv.log.bind(cv),e&&NM.set("logging_enabled",!0)):"function"==typeof n?Fm=n:(Fm=null,NM.remove("logging_enabled"))},Gi=function(...n){if(!0===dF&&(dF=!1,null===Fm&&!0===NM.get("logging_enabled")&&hF(!0)),Fm){const e=kE.apply(null,n);Fm(e)}},FE=function(n){return function(...e){Gi(n,...e)}},PM=function(...n){const e="FIREBASE INTERNAL ERROR: "+kE(...n);cv.error(e)},Rc=function(...n){const e=`FIREBASE FATAL ERROR: ${kE(...n)}`;throw cv.error(e),new Error(e)},bs=function(...n){const e="FIREBASE WARNING: "+kE(...n);cv.warn(e)},eT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},mp="[MIN_NAME]",fh="[MAX_NAME]",Lm=function(n,e){if(n===e)return 0;if(n===mp||e===fh)return-1;if(e===mp||n===fh)return 1;{const t=gF(n),r=gF(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},TG=function(n,e){return n===e?0:n<e?-1:1},LE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,O.Wl)(e))},OM=function(n){if("object"!=typeof n||null===n)return(0,O.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,O.Wl)(e[r]),t+=":",t+=OM(n[e[r]]);return t+="}",t},fF=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function zi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const pF=function(n){(0,O.hu)(!eT(n),"Invalid JSON number");const r=1023;let i,o,l,f,_;0===n?(o=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(o=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(_=11;_;_-=1)w.push(o%2?1:0),o=Math.floor(o/2);w.push(i?1:0),w.reverse();const b=w.join("");let A="";for(_=0;_<64;_+=8){let P=parseInt(b.substr(_,8),2).toString(16);1===P.length&&(P="0"+P),A+=P}return A.toLowerCase()},RG=new RegExp("^-?(0*)\\d{1,10}$"),gF=function(n){if(RG.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},dv=function(n){try{n()}catch(e){setTimeout(()=>{throw bs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},PG=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},VE=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class OG{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){bs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class kG{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Gi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bs(e)}}let UE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const wF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,CF="websocket",bF="long_polling";class FM{constructor(e,t,r,i,o=!1,l="",f=!1,_=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=_,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=km.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&km.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function DF(n,e,t){let r;if((0,O.hu)("string"==typeof e,"typeof type must == string"),(0,O.hu)("object"==typeof t,"typeof params must == object"),e===CF)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==bF)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function FG(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return zi(t,(o,l)=>{i.push(o+"="+l)}),r+i.join("&")}class LG{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,O.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,O.p$)(this.counters_)}}const LM={},VM={};function UM(n){const e=n.toString();return LM[e]||(LM[e]=new LG),LM[e]}class UG{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&dv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class _p{constructor(e,t,r,i,o,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=FE(e),this.stats_=UM(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),DF(t,bF,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new UG(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,O.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new BM((...o)=>{const[l,f,_,w,b]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=_;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[l,f]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&wF.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){_p.forceAllow_=!0}static forceDisallow(){_p.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!_p.forceAllow_&&(_p.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,O.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,O.h$)(t),i=fF(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,O.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class BM{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=lF(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=BM.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){Gi("frame writing exception"),f.stack&&Gi(f.stack),Gi(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Gi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,O.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Gi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let nT=null;typeof MozWebSocket<"u"?nT=MozWebSocket:typeof WebSocket<"u"&&(nT=WebSocket);let hv=(()=>{class n{constructor(t,r,i,o,l,f,_){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=FE(this.connId),this.stats_=UM(r),this.connURL=n.connectionURL_(r,f,_,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,l){const f={v:"5"};return!(0,O.Yr)()&&typeof location<"u"&&location.hostname&&wF.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),o&&(f.ac=o),l&&(f.p=l),DF(t,CF,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,km.set("previous_websocket_failure",!0);try{let i;if((0,O.Yr)()){i={headers:{"User-Agent":`Firebase/5/${MM}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new nT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==nT&&!n.forceDisallow_}static previouslyFailed(){return km.isInMemoryStorage||!0===km.get("previous_websocket_failure")}markConnectionHealthy(){km.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,O.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,O.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=fF(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),NF=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[_p,hv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=hv&&hv.isAvailable();let i=r&&!hv.previouslyFailed();if(t.webSocketOnly&&(r||bs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[hv];else{const o=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class UF{constructor(e,t,r,i,o,l,f,_,w,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=FE("c:"+this.id+":"),this.transportManager_=new NF(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=VE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=LE("t",e),r=LE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=LE("t",e),r=LE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=LE("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?PM("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):PM("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&bs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),VE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):VE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(km.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class BF{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class jF{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,O.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,O.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class rT extends jF{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new rT}getInitialEvent(e){return(0,O.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const $F=32,HF=768;class Mn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Sn(){return new Mn("")}function sn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function yp(n){return n.pieces_.length-n.pieceNum_}function Zn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Mn(n.pieces_,e)}function $M(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function BE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function GF(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Mn(e,0)}function br(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Mn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Mn(t,0)}function on(n){return n.pieceNum_>=n.pieces_.length}function to(n,e){const t=sn(n),r=sn(e);if(null===t)return e;if(t===r)return to(Zn(n),Zn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function a4(n,e){const t=BE(n,0),r=BE(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=Lm(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function HM(n,e){if(yp(n)!==yp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function tu(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(yp(n)>yp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class u4{constructor(e,t){this.errorPrefix_=t,this.parts_=BE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,O.ug)(this.parts_[r]);zF(this)}}function zF(n){if(n.byteLength_>HF)throw new Error(n.errorPrefix_+"has a key path longer than "+HF+" bytes ("+n.byteLength_+").");if(n.parts_.length>$F)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+$F+") or object contains a cycle "+Vm(n))}function Vm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class GM extends jF{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new GM}getInitialEvent(e){return(0,O.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const jE=1e3;let sT,Um=(()=>{class n extends BF{constructor(t,r,i,o,l,f,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=FE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=jE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");GM.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&rT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,l={r:o,a:t,b:r};this.log_((0,O.Wl)(l)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new O.BH,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const _=f.d;"ok"===f.s?r.resolve(_):r.reject(_)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const _={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,_=>{const w=_.d,b=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",_),"ok"!==b&&this.removeListen_(i,o),t.onComplete&&t.onComplete(b,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,O.r3)(t,"w")){const i=(0,O.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();bs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,O.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,O.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const l=o.s,f=o.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const l={p:t};o&&(l.q=i,l.t=o),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{o&&setTimeout(()=>{o(f.s,f.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,O.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):PM("Unrecognized action received from server: "+(0,O.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=jE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=jE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=jE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,me.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let _=!1,w=null;const b=function(){w?w.close():(_=!0,o())};t.realtime_={close:b,sendRequest:function(U){(0,O.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(U)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,q]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);_?Gi("getToken() completed but was canceled"):(Gi("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=q&&q.token,w=new UF(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,oe=>{bs(oe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(U){t.log_("Failed to get token: "+U),_||(t.repoInfo_.nodeAdmin&&bs(U),b())}}})()}interrupt(t){Gi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Gi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=jE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>OM(l)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new Mn(t).toString();let o;if(this.listens.has(i)){const l=this.listens.get(i);o=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){Gi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Gi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,O.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+MM.replace(/\./g,"-")]=1,(0,O.uI)()?t["framework.cordova"]=1:(0,O.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=rT.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class cn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new cn(e,t)}}class iT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new cn(mp,e),i=new cn(mp,t);return 0!==this.compare(r,i)}minPost(){return cn.MIN}}class ZF extends iT{static get __EMPTY_NODE(){return sT}static set __EMPTY_NODE(e){sT=e}compare(e,t){return Lm(e.name,t.name)}isDefinedOn(e){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return cn.MIN}maxPost(){return new cn(fh,sT)}makePost(e,t){return(0,O.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new cn(e,sT)}toString(){return".key"}}const Mc=new ZF;class oT{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let qM,cl=(()=>{class n{constructor(t,r,i,o,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??Co.EMPTY_NODE,this.right=l??Co.EMPTY_NODE}copy(t,r,i,o,l){return new n(t??this.key,r??this.value,i??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const l=i(t,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===l?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Co.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Co.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Co{constructor(e,t=Co.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Co(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,cl.BLACK,null,null))}remove(e){return new Co(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,cl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new oT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new oT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new oT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new oT(this.root_,null,this.comparator_,!0,e)}}function m4(n,e){return Lm(n.name,e.name)}function zM(n,e){return Lm(n,e)}Co.EMPTY_NODE=new class g4{copy(e,t,r,i,o){return this}insert(e,t,r){return new cl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const KF=function(n){return"number"==typeof n?"number:"+pF(n):"string:"+n},YF=function(n){if(n.isLeafNode()){const e=n.val();(0,O.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,O.r3)(e,".sv"),"Priority must be a string or number.")}else(0,O.hu)(n===qM||n.isEmpty(),"priority of unexpected type.");(0,O.hu)(n===qM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let QF,XF,JF,fv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),YF(this.priorityNode_)}static set __childrenNodeConstructor(t){QF=t}static get __childrenNodeConstructor(){return QF}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return on(t)?this:".priority"===sn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=sn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,O.hu)(".priority"!==i||1===yp(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+KF(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?pF(this.value_):this.value_,this.lazyHash_=cF(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,O.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,O.hu)(o>=0,"Unknown leaf type: "+r),(0,O.hu)(l>=0,"Unknown leaf type: "+i),o===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const rr=new class w4 extends iT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?Lm(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return cn.MIN}maxPost(){return new cn(fh,new fv("[PRIORITY-POST]",JF))}makePost(e,t){const r=XF(e);return new cn(t,new fv("[PRIORITY-POST]",r))}toString(){return".priority"}},E4=Math.log(2);class I4{constructor(e){this.count=parseInt(Math.log(e+1)/E4,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const aT=function(n,e,t,r){n.sort(e);const i=function(_,w){const b=w-_;let A,P;if(0===b)return null;if(1===b)return A=n[_],P=t?t(A):A,new cl(P,A.node,cl.BLACK,null,null);{const U=parseInt(b/2,10)+_,q=i(_,U),oe=i(U+1,w);return A=n[U],P=t?t(A):A,new cl(P,A.node,cl.BLACK,q,oe)}},f=function(_){let w=null,b=null,A=n.length;const P=function(q,oe){const he=A-q,Xe=A;A-=q;const lt=i(he+1,Xe),Ye=n[he],Ct=t?t(Ye):Ye;U(new cl(Ct,Ye.node,oe,null,lt))},U=function(q){w?(w.left=q,w=q):(b=q,w=q)};for(let q=0;q<_.count;++q){const oe=_.nextBitIsOne(),he=Math.pow(2,_.count-(q+1));oe?P(he,cl.BLACK):(P(he,cl.BLACK),P(he,cl.RED))}return b}(new I4(n.length));return new Co(r||e,f)};let WM;const pv={};class ph{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,O.hu)(pv&&rr,"ChildrenNode.ts has not been loaded"),WM=WM||new ph({".priority":pv},{".priority":rr}),WM}get(e){const t=(0,O.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Co?t:null}hasIndex(e){return(0,O.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,O.hu)(e!==Mc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(cn.Wrap);let f,l=o.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=o.getNext();f=i?aT(r,e.getCompare()):pv;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const b=Object.assign({},this.indexes_);return b[_]=f,new ph(b,w)}addToIndexes(e,t){const r=(0,O.UI)(this.indexes_,(i,o)=>{const l=(0,O.DV)(this.indexSet_,o);if((0,O.hu)(l,"Missing index implementation for "+o),i===pv){if(l.isDefinedOn(e.node)){const f=[],_=t.getIterator(cn.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&f.push(w),w=_.getNext();return f.push(e),aT(f,l.getCompare())}return pv}{const f=t.get(e.name);let _=i;return f&&(_=_.remove(new cn(e.name,f))),_.insert(e,e.node)}});return new ph(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,O.UI)(this.indexes_,i=>{if(i===pv)return i;{const o=t.get(e.name);return o?i.remove(new cn(e.name,o)):i}});return new ph(r,this.indexSet_)}}let $E,Yt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&YF(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $E||($E=new n(new Co(zM),null,ph.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$E}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?$E:r}}getChild(t){const r=sn(t);return null===r?this:this.getImmediateChild(r).getChild(Zn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,O.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new cn(t,r);let o,l;r.isEmpty()?(o=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=o.isEmpty()?$E:this.priorityNode_;return new n(o,f,l)}}updateChild(t,r){const i=sn(t);if(null===i)return r;{(0,O.hu)(".priority"!==sn(t)||1===yp(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Zn(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,l=!0;if(this.forEachChild(rr,(f,_)=>{r[f]=_.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?o=Math.max(o,Number(f)):l=!1}),!t&&l&&o<2*i){const f=[];for(const _ in r)f[_]=r[_];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+KF(this.getPriority().val())+":"),this.forEachChild(rr,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":cF(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const l=o.getPredecessorKey(new cn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new cn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new cn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,cn.Wrap);let l=o.peek();for(;null!=l&&r.compare(l,t)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,cn.Wrap);let l=o.peek();for(;null!=l&&r.compare(l,t)>0;)o.getNext(),l=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===HE?-1:0}withIndex(t){if(t===Mc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Mc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(rr),o=r.getIterator(rr);let l=i.getNext(),f=o.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=o.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===Mc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const HE=new class C4 extends Yt{constructor(){super(new Co(zM),Yt.EMPTY_NODE,ph.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Yt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(cn,{MIN:{value:new cn(mp,Yt.EMPTY_NODE)},MAX:{value:new cn(fh,HE)}}),ZF.__EMPTY_NODE=Yt.EMPTY_NODE,fv.__childrenNodeConstructor=Yt,function _4(n){qM=n}(HE),function v4(n){JF=n}(HE);const b4=!0;function Pr(n,e=null){if(null===n)return Yt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,O.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new fv(n,Pr(e));if(n instanceof Array||!b4){let t=Yt.EMPTY_NODE;return zi(n,(r,i)=>{if((0,O.r3)(n,r)&&"."!==r.substring(0,1)){const o=Pr(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(Pr(e))}{const t=[];let r=!1;if(zi(n,(l,f)=>{if("."!==l.substring(0,1)){const _=Pr(f);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new cn(l,_)))}}),0===t.length)return Yt.EMPTY_NODE;const o=aT(t,m4,l=>l.name,zM);if(r){const l=aT(t,rr.getCompare());return new Yt(o,Pr(e),new ph({".priority":l},{".priority":rr}))}return new Yt(o,Pr(e),ph.Default)}}!function y4(n){XF=n}(Pr);class ZM extends iT{constructor(e){super(),this.indexPath_=e,(0,O.hu)(!on(e)&&".priority"!==sn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?Lm(e.name,t.name):o}makePost(e,t){const r=Pr(e),i=Yt.EMPTY_NODE.updateChild(this.indexPath_,r);return new cn(t,i)}maxPost(){const e=Yt.EMPTY_NODE.updateChild(this.indexPath_,HE);return new cn(fh,e)}toString(){return BE(this.indexPath_,0).join("/")}}const KM=new class D4 extends iT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Lm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return cn.MIN}maxPost(){return cn.MAX}makePost(e,t){const r=Pr(e);return new cn(t,r)}toString(){return".value"}};function eL(n){return{type:"value",snapshotNode:n}}function gv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function GE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function zE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class YM{constructor(e){this.index_=e}updateChild(e,t,r,i,o,l){(0,O.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(GE(t,f)):(0,O.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?l.trackChildChange(gv(t,r)):l.trackChildChange(zE(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(rr,(i,o)=>{t.hasChild(i)||r.trackChildChange(GE(i,o))}),t.isLeafNode()||t.forEachChild(rr,(i,o)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(o)||r.trackChildChange(zE(i,o,l))}else r.trackChildChange(gv(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Yt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class qE{constructor(e){this.indexedFilter_=new YM(e.getIndex()),this.index_=e.getIndex(),this.startPost_=qE.getStartPost_(e),this.endPost_=qE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,o,l){return this.matches(new cn(t,r))||(r=Yt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Yt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Yt.EMPTY_NODE);const o=this;return t.forEachChild(rr,(l,f)=>{o.matches(new cn(l,f))||(i=i.updateImmediateChild(l,Yt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class S4{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new qE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,o,l){return this.rangedFilter_.matches(new cn(t,r))||(r=Yt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,l):this.fullLimitUpdateChild_(e,t,r,o,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Yt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=Yt.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const f=o.getNext();if(this.withinDirectionalStart(f)){if(!this.withinDirectionalEnd(f))break;i=i.updateImmediateChild(f.name,f.node),l++}}}else{let o;i=t.withIndex(this.index_),i=i.updatePriority(Yt.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;o.hasNext();){const f=o.getNext();l<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?l++:i=i.updateImmediateChild(f.name,Yt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let l;if(this.reverse_){const A=this.index_.getCompare();l=(P,U)=>A(U,P)}else l=this.index_.getCompare();const f=e;(0,O.hu)(f.numChildren()===this.limit_,"");const _=new cn(t,r),w=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),b=this.rangedFilter_.matches(_);if(f.hasChild(t)){const A=f.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=P&&(P.name===t||f.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const U=null==P?1:l(P,_);if(b&&!r.isEmpty()&&U>=0)return o?.trackChildChange(zE(t,r,A)),f.updateImmediateChild(t,r);{o?.trackChildChange(GE(t,A));const oe=f.updateImmediateChild(t,Yt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(o?.trackChildChange(gv(P.name,P.node)),oe.updateImmediateChild(P.name,P.node)):oe}}return r.isEmpty()?e:b&&l(w,_)>=0?(null!=o&&(o.trackChildChange(GE(w.name,w.node)),o.trackChildChange(gv(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(w.name,Yt.EMPTY_NODE)):e}}class uT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=rr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:mp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===rr}copy(){const e=new uT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function QM(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function XM(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function lT(n,e){const t=n.copy();return t.index_=e,t}function tL(n){const e={};if(n.isDefault())return e;let t;if(n.index_===rr?t="$priority":n.index_===KM?t="$value":n.index_===Mc?t="$key":((0,O.hu)(n.index_ instanceof ZM,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,O.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,O.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,O.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,O.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,O.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function nL(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==rr&&(e.i=n.index_.toString()),e}class cT extends BF{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=FE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,O.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=cT.getListenId_(e,r),f={};this.listens_[l]=f;const _=tL(e._queryParams);this.restRequest_(o+".json",_,(w,b)=>{let A=b;if(404===w&&(A=null,w=null),null===w&&this.onDataUpdate_(o,A,!1,r),(0,O.DV)(this.listens_,l)===f){let P;P=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(P,null)}})}unlisten(e,t){const r=cT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=tL(e._queryParams),r=e._path.toString(),i=new O.BH;return this.restRequest_(r+".json",t,(o,l)=>{let f=l;404===o&&(f=null,o=null),null===o?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,O.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let _=null;if(f.status>=200&&f.status<300){try{_=(0,O.cI)(f.responseText)}catch{bs("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,_)}else 401!==f.status&&404!==f.status&&bs("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class P4{constructor(){this.rootNode_=Yt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function dT(){return{value:null,children:new Map}}function mv(n,e,t){if(on(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=sn(e);n.children.has(r)||n.children.set(r,dT()),mv(n.children.get(r),e=Zn(e),t)}}function JM(n,e){if(on(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(rr,(r,i)=>{mv(n,new Mn(r),i)}),JM(n,e)}}if(n.children.size>0){const t=sn(e);return e=Zn(e),n.children.has(t)&&JM(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function eN(n,e,t){null!==n.value?t(e,n.value):function O4(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{eN(i,new Mn(e.toString()+"/"+r),t)})}class k4{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&zi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class V4{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new k4(e);const r=1e4+2e4*Math.random();VE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;zi(e,(i,o)=>{o>0&&(0,O.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),VE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var nu=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(nu||(nu={})),nu))();function rN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class hT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=nu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(on(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Mn(e));return new hT(Sn(),t,this.revert)}}return(0,O.hu)(sn(this.path)===e,"operationForChild called for unrelated child."),new hT(Zn(this.path),this.affectedTree,this.revert)}}class WE{constructor(e,t){this.source=e,this.path=t,this.type=nu.LISTEN_COMPLETE}operationForChild(e){return on(this.path)?new WE(this.source,Sn()):new WE(this.source,Zn(this.path))}}class Bm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=nu.OVERWRITE}operationForChild(e){return on(this.path)?new Bm(this.source,Sn(),this.snap.getImmediateChild(e)):new Bm(this.source,Zn(this.path),this.snap)}}class _v{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=nu.MERGE}operationForChild(e){if(on(this.path)){const t=this.children.subtree(new Mn(e));return t.isEmpty()?null:t.value?new Bm(this.source,Sn(),t.value):new _v(this.source,Sn(),t)}return(0,O.hu)(sn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new _v(this.source,Zn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class vp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(on(e))return this.isFullyInitialized()&&!this.filtered_;const t=sn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class U4{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ZE(n,e,t,r,i,o){const l=r.filter(f=>f.type===t);l.sort((f,_)=>function $4(n,e,t){if(null==e.childName||null==t.childName)throw(0,O.g5)("Should only compare child_ events.");const r=new cn(e.childName,e.snapshotNode),i=new cn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,_)),l.forEach(f=>{const _=function j4(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,o);i.forEach(w=>{w.respondsTo(f.type)&&e.push(w.createEvent(_,n.query_))})})}function fT(n,e){return{eventCache:n,serverCache:e}}function KE(n,e,t,r){return fT(new vp(e,t,r),n.serverCache)}function iL(n,e,t,r){return fT(n.eventCache,new vp(e,t,r))}function pT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function jm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let iN;class ir{constructor(e,t=(()=>(iN||(iN=new Co(TG)),iN))()){this.value=e,this.children=t}static fromObject(e){let t=new ir(null);return zi(e,(r,i)=>{t=t.set(new Mn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Sn(),value:this.value};if(on(e))return null;{const r=sn(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(Zn(e),t);return null!=o?{path:br(new Mn(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(on(e))return this;{const t=sn(e),r=this.children.get(t);return null!==r?r.subtree(Zn(e)):new ir(null)}}set(e,t){if(on(e))return new ir(t,this.children);{const r=sn(e),o=(this.children.get(r)||new ir(null)).set(Zn(e),t),l=this.children.insert(r,o);return new ir(this.value,l)}}remove(e){if(on(e))return this.children.isEmpty()?new ir(null):new ir(null,this.children);{const t=sn(e),r=this.children.get(t);if(r){const i=r.remove(Zn(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new ir(null):new ir(this.value,o)}return this}}get(e){if(on(e))return this.value;{const t=sn(e),r=this.children.get(t);return r?r.get(Zn(e)):null}}setTree(e,t){if(on(e))return t;{const r=sn(e),o=(this.children.get(r)||new ir(null)).setTree(Zn(e),t);let l;return l=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new ir(this.value,l)}}fold(e){return this.fold_(Sn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(br(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Sn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(on(e))return null;{const o=sn(e),l=this.children.get(o);return l?l.findOnPath_(Zn(e),br(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Sn(),t)}foreachOnPath_(e,t,r){if(on(e))return this;{this.value&&r(t,this.value);const i=sn(e),o=this.children.get(i);return o?o.foreachOnPath_(Zn(e),br(t,i),r):new ir(null)}}foreach(e){this.foreach_(Sn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(br(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class dl{constructor(e){this.writeTree_=e}static empty(){return new dl(new ir(null))}}function YE(n,e,t){if(on(e))return new dl(new ir(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const l=to(i,e);return o=o.updateChild(l,t),new dl(n.writeTree_.set(i,o))}{const i=new ir(t),o=n.writeTree_.setTree(e,i);return new dl(o)}}}function sN(n,e,t){let r=n;return zi(t,(i,o)=>{r=YE(r,br(e,i),o)}),r}function sL(n,e){if(on(e))return dl.empty();{const t=n.writeTree_.setTree(e,new ir(null));return new dl(t)}}function oN(n,e){return null!=$m(n,e)}function $m(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(to(t.path,e)):null}function oL(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(rr,(r,i)=>{e.push(new cn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new cn(r,i.value))}),e}function wp(n,e){if(on(e))return n;{const t=$m(n,e);return new dl(null!=t?new ir(t):n.writeTree_.subtree(e))}}function aN(n){return n.writeTree_.isEmpty()}function yv(n,e){return aL(Sn(),n.writeTree_,e)}function aL(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,O.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=aL(br(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(br(n,".priority"),r)),t}}function gT(n,e){return hL(e,n)}function Z4(n,e){if(n.snap)return tu(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&tu(br(n.path,t),e))return!0;return!1}function Y4(n){return n.visible}function uL(n,e,t){let r=dl.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const l=o.path;let f;if(o.snap)tu(t,l)?(f=to(t,l),r=YE(r,f,o.snap)):tu(l,t)&&(f=to(l,t),r=YE(r,Sn(),o.snap.getChild(f)));else{if(!o.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(tu(t,l))f=to(t,l),r=sN(r,f,o.children);else if(tu(l,t))if(f=to(l,t),on(f))r=sN(r,Sn(),o.children);else{const _=(0,O.DV)(o.children,sn(f));if(_){const w=_.getChild(Zn(f));r=YE(r,Sn(),w)}}}}}return r}function lL(n,e,t,r,i){if(r||i){const o=wp(n.visibleWrites,e);return!i&&aN(o)?t:i||null!=t||oN(o,Sn())?yv(uL(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(tu(w.path,e)||tu(e,w.path))},e),t||Yt.EMPTY_NODE):null}{const o=$m(n.visibleWrites,e);if(null!=o)return o;{const l=wp(n.visibleWrites,e);return aN(l)?t:null!=t||oN(l,Sn())?yv(l,t||Yt.EMPTY_NODE):null}}}function mT(n,e,t,r){return lL(n.writeTree,n.treePath,e,t,r)}function uN(n,e){return function Q4(n,e,t){let r=Yt.EMPTY_NODE;const i=$m(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(rr,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){const o=wp(n.visibleWrites,e);return t.forEachChild(rr,(l,f)=>{const _=yv(wp(o,new Mn(l)),f);r=r.updateImmediateChild(l,_)}),oL(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return oL(wp(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function cL(n,e,t,r){return function X4(n,e,t,r,i){(0,O.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=br(e,t);if(oN(n.visibleWrites,o))return null;{const l=wp(n.visibleWrites,o);return aN(l)?i.getChild(t):yv(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function _T(n,e){return function e3(n,e){return $m(n.visibleWrites,e)}(n.writeTree,br(n.treePath,e))}function lN(n,e,t){return function J4(n,e,t,r){const i=br(e,t),o=$m(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?yv(wp(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function dL(n,e){return hL(br(n.treePath,e),n.writeTree)}function hL(n,e){return{treePath:n,writeTree:e}}class i3{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,O.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,zE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,GE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,gv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,O.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,zE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const fL=new class s3{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class cN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new vp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return lN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:jm(this.viewCache_),o=function r3(n,e,t,r,i,o){return function t3(n,e,t,r,i,o,l){let f;const _=wp(n.visibleWrites,e),w=$m(_,Sn());if(null!=w)f=w;else{if(null==t)return[];f=yv(_,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const b=[],A=l.getCompare(),P=o?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let U=P.getNext();for(;U&&b.length<i;)0!==A(U,r)&&b.push(U),U=P.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function pL(n,e,t,r,i,o){const l=e.eventCache;if(null!=_T(r,t))return e;{let f,_;if(on(t))if((0,O.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=jm(e),A=uN(r,w instanceof Yt?w:Yt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),A,o)}else{const w=mT(r,jm(e));f=n.filter.updateFullNode(e.eventCache.getNode(),w,o)}else{const w=sn(t);if(".priority"===w){(0,O.hu)(1===yp(t),"Can't have a priority with additional path components");const b=l.getNode();_=e.serverCache.getNode();const A=cL(r,t,b,_);f=null!=A?n.filter.updatePriority(b,A):l.getNode()}else{const b=Zn(t);let A;if(l.isCompleteForChild(w)){_=e.serverCache.getNode();const P=cL(r,t,l.getNode(),_);A=null!=P?l.getNode().getImmediateChild(w).updateChild(b,P):l.getNode().getImmediateChild(w)}else A=lN(r,w,e.serverCache);f=null!=A?n.filter.updateChild(l.getNode(),w,A,b,i,o):l.getNode()}}return KE(e,f,l.isFullyInitialized()||on(t),n.filter.filtersNodes())}}function yT(n,e,t,r,i,o,l,f){const _=e.serverCache;let w;const b=l?n.filter:n.filter.getIndexedFilter();if(on(t))w=b.updateFullNode(_.getNode(),r,null);else if(b.filtersNodes()&&!_.isFiltered()){const U=_.getNode().updateChild(t,r);w=b.updateFullNode(_.getNode(),U,null)}else{const U=sn(t);if(!_.isCompleteForPath(t)&&yp(t)>1)return e;const q=Zn(t),he=_.getNode().getImmediateChild(U).updateChild(q,r);w=".priority"===U?b.updatePriority(_.getNode(),he):b.updateChild(_.getNode(),U,he,q,fL,null)}const A=iL(e,w,_.isFullyInitialized()||on(t),b.filtersNodes());return pL(n,A,t,i,new cN(i,A,o),f)}function dN(n,e,t,r,i,o,l){const f=e.eventCache;let _,w;const b=new cN(i,e,o);if(on(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),_=KE(e,w,!0,n.filter.filtersNodes());else{const A=sn(t);if(".priority"===A)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=KE(e,w,f.isFullyInitialized(),f.isFiltered());else{const P=Zn(t),U=f.getNode().getImmediateChild(A);let q;if(on(P))q=r;else{const oe=b.getCompleteChild(A);q=null!=oe?".priority"===$M(P)&&oe.getChild(GF(P)).isEmpty()?oe:oe.updateChild(P,r):Yt.EMPTY_NODE}_=U.equals(q)?e:KE(e,n.filter.updateChild(f.getNode(),A,q,P,b,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return _}function gL(n,e){return n.eventCache.isCompleteForChild(e)}function mL(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function hN(n,e,t,r,i,o,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=on(t)?r:new ir(null).setTree(t,r);const b=e.serverCache.getNode();return w.children.inorderTraversal((A,P)=>{if(b.hasChild(A)){const q=mL(0,e.serverCache.getNode().getImmediateChild(A),P);_=yT(n,_,new Mn(A),q,i,o,l,f)}}),w.children.inorderTraversal((A,P)=>{const U=!e.serverCache.isCompleteForChild(A)&&null===P.value;if(!b.hasChild(A)&&!U){const oe=mL(0,e.serverCache.getNode().getImmediateChild(A),P);_=yT(n,_,new Mn(A),oe,i,o,l,f)}}),_}class p3{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new YM(r.getIndex()),o=function A4(n){return n.loadsAllData()?new YM(n.getIndex()):n.hasLimit()?new S4(n):new qE(n)}(r);this.processor_=function o3(n){return{filter:n}}(o);const l=t.serverCache,f=t.eventCache,_=i.updateFullNode(Yt.EMPTY_NODE,l.getNode(),null),w=o.updateFullNode(Yt.EMPTY_NODE,f.getNode(),null),b=new vp(_,l.isFullyInitialized(),i.filtersNodes()),A=new vp(w,f.isFullyInitialized(),o.filtersNodes());this.viewCache_=fT(A,b),this.eventGenerator_=new U4(this.query_)}get query(){return this.query_}}function _3(n,e){const t=jm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!on(e)&&!t.getImmediateChild(sn(e)).isEmpty())?t.getChild(e):null}function _L(n){return 0===n.eventRegistrations_.length}function yL(n,e,t){const r=[];if(t){(0,O.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const l=n.eventRegistrations_[o];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function vL(n,e,t,r){e.type===nu.MERGE&&null!==e.source.queryId&&((0,O.hu)(jm(n.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(pT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function u3(n,e,t,r,i){const o=new i3;let l,f;if(t.type===nu.OVERWRITE){const w=t;w.source.fromUser?l=dN(n,e,w.path,w.snap,r,i,o):((0,O.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||e.serverCache.isFiltered()&&!on(w.path),l=yT(n,e,w.path,w.snap,r,i,f,o))}else if(t.type===nu.MERGE){const w=t;w.source.fromUser?l=function c3(n,e,t,r,i,o,l){let f=e;return r.foreach((_,w)=>{const b=br(t,_);gL(e,sn(b))&&(f=dN(n,f,b,w,i,o,l))}),r.foreach((_,w)=>{const b=br(t,_);gL(e,sn(b))||(f=dN(n,f,b,w,i,o,l))}),f}(n,e,w.path,w.children,r,i,o):((0,O.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||e.serverCache.isFiltered(),l=hN(n,e,w.path,w.children,r,i,f,o))}else if(t.type===nu.ACK_USER_WRITE){const w=t;l=w.revert?function f3(n,e,t,r,i,o){let l;if(null!=_T(r,t))return e;{const f=new cN(r,e,i),_=e.eventCache.getNode();let w;if(on(t)||".priority"===sn(t)){let b;if(e.serverCache.isFullyInitialized())b=mT(r,jm(e));else{const A=e.serverCache.getNode();(0,O.hu)(A instanceof Yt,"serverChildren would be complete if leaf node"),b=uN(r,A)}w=n.filter.updateFullNode(_,b,o)}else{const b=sn(t);let A=lN(r,b,e.serverCache);null==A&&e.serverCache.isCompleteForChild(b)&&(A=_.getImmediateChild(b)),w=null!=A?n.filter.updateChild(_,b,A,Zn(t),f,o):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(_,b,Yt.EMPTY_NODE,Zn(t),f,o):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=mT(r,jm(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,o)))}return l=e.serverCache.isFullyInitialized()||null!=_T(r,Sn()),KE(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,o):function d3(n,e,t,r,i,o,l){if(null!=_T(i,t))return e;const f=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(on(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return yT(n,e,t,_.getNode().getChild(t),i,o,f,l);if(on(t)){let w=new ir(null);return _.getNode().forEachChild(Mc,(b,A)=>{w=w.set(new Mn(b),A)}),hN(n,e,t,w,i,o,f,l)}return e}{let w=new ir(null);return r.foreach((b,A)=>{const P=br(t,b);_.isCompleteForPath(P)&&(w=w.set(b,_.getNode().getChild(P)))}),hN(n,e,t,w,i,o,f,l)}}(n,e,w.path,w.affectedTree,r,i,o)}else{if(t.type!==nu.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+t.type);l=function h3(n,e,t,r,i){const o=e.serverCache;return pL(n,iL(e,o.getNode(),o.isFullyInitialized()||on(t),o.isFiltered()),t,r,fL,i)}(n,e,t.path,r,o)}const _=o.getChanges();return function l3(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=pT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(eL(pT(e)))}}(e,l,_),{viewCache:l,changes:_}}(n.processor_,i,e,t,r);return function a3(n,e){(0,O.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,O.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,wL(n,o.changes,o.viewCache.eventCache.getNode(),null)}function wL(n,e,t,r){return function B4(n,e,t,r){const i=[],o=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(function T4(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),ZE(n,i,"child_removed",e,r,t),ZE(n,i,"child_added",e,r,t),ZE(n,i,"child_moved",o,r,t),ZE(n,i,"child_changed",e,r,t),ZE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let vT,ET;class EL{constructor(){this.views=new Map}}function fN(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,O.hu)(null!=o,"SyncTree gave us an op for an invalid query."),vL(o,e,t,r)}{let o=[];for(const l of n.views.values())o=o.concat(vL(l,e,t,r));return o}}function IL(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let f=mT(t,i?r:null),_=!1;f?_=!0:r instanceof Yt?(f=uN(t,r),_=!1):(f=Yt.EMPTY_NODE,_=!1);const w=fT(new vp(f,_,!1),new vp(r,i,!1));return new p3(e,w)}return l}function CL(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Ep(n,e){let t=null;for(const r of n.views.values())t=t||_3(r,e);return t}function bL(n,e){return e._queryParams.loadsAllData()?wT(n):n.views.get(e._queryIdentifier)}function DL(n,e){return null!=bL(n,e)}function Ip(n){return null!=wT(n)}function wT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let S3=1;class TL{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ir(null),this.pendingWriteTree_=function n3(){return{visibleWrites:dl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function pN(n,e,t,r,i){return function G4(n,e,t,r,i){(0,O.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=YE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?vv(n,new Bm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Cp(n,e,t=!1){const r=function q4(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function W4(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,O.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&Z4(f,r.path)?i=!1:tu(r.path,f.path)&&(o=!0)),l--}return!!i&&(o?(function K4(n){n.visibleWrites=uL(n.allWrites,Y4,Sn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=sL(n.visibleWrites,r.path):zi(r.children,_=>{n.visibleWrites=sL(n.visibleWrites,br(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let o=new ir(null);return null!=r.snap?o=o.set(Sn(),!0):zi(r.children,l=>{o=o.set(new Mn(l),!0)}),vv(n,new hT(r.path,o,t))}return[]}function QE(n,e,t){return vv(n,new Bm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function IT(n,e,t,r,i=!1){const o=e._path,l=n.syncPointTree_.get(o);let f=[];if(l&&("default"===e._queryIdentifier||DL(l,e))){const _=function b3(n,e,t,r){const i=e._queryIdentifier,o=[];let l=[];const f=Ip(n);if("default"===i)for(const[_,w]of n.views.entries())l=l.concat(yL(w,t,r)),_L(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||o.push(w.query));else{const _=n.views.get(i);_&&(l=l.concat(yL(_,t,r)),_L(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||o.push(_.query)))}return f&&!Ip(n)&&o.push(new(function E3(){return(0,O.hu)(vT,"Reference.ts has not been loaded"),vT}())(e._repo,e._path)),{removed:o,events:l}}(l,e,t,r);(function I3(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const w=_.removed;if(f=_.events,!i){const b=-1!==w.findIndex(P=>P._queryParams.loadsAllData()),A=n.syncPointTree_.findOnPath(o,(P,U)=>Ip(U));if(b&&!A){const P=n.syncPointTree_.subtree(o);if(!P.isEmpty()){const U=function O3(n){return n.fold((e,t,r)=>{if(t&&Ip(t))return[wT(t)];{let i=[];return t&&(i=CL(t)),zi(r,(o,l)=>{i=i.concat(l)}),i}})}(P);for(let q=0;q<U.length;++q){const oe=U[q],he=oe.query,Xe=RL(n,oe);n.listenProvider_.startListening(JE(he),XE(n,he),Xe.hashFn,Xe.onComplete)}}}!A&&w.length>0&&!r&&(b?n.listenProvider_.stopListening(JE(e),null):w.forEach(P=>{const U=n.queryToTagMap.get(bT(P));n.listenProvider_.stopListening(JE(P),U)}))}!function k3(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=bT(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,w)}return f}function SL(n,e,t,r){const i=mN(n,r);if(null!=i){const o=_N(i),l=o.path,f=o.queryId,_=to(l,e);return yN(n,l,new Bm(rN(f),_,t))}return[]}function gN(n,e,t,r=!1){const i=e._path;let o=null,l=!1;n.syncPointTree_.foreachOnPath(i,(P,U)=>{const q=to(P,i);o=o||Ep(U,q),l=l||Ip(U)});let _,f=n.syncPointTree_.get(i);f?(l=l||Ip(f),o=o||Ep(f,Sn())):(f=new EL,n.syncPointTree_=n.syncPointTree_.set(i,f)),null!=o?_=!0:(_=!1,o=Yt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((U,q)=>{const oe=Ep(q,Sn());oe&&(o=o.updateImmediateChild(U,oe))}));const w=DL(f,e);if(!w&&!e._queryParams.loadsAllData()){const P=bT(e);(0,O.hu)(!n.queryToTagMap.has(P),"View does not exist, but we have a tag");const U=function F3(){return S3++}();n.queryToTagMap.set(P,U),n.tagToQueryMap.set(U,P)}let A=function C3(n,e,t,r,i,o){const l=IL(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function y3(n,e){n.eventRegistrations_.push(e)}(l,t),function v3(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(rr,(o,l)=>{r.push(gv(o,l))}),t.isFullyInitialized()&&r.push(eL(t.getNode())),wL(n,r,t.getNode(),e)}(l,t)}(f,e,t,gT(n.pendingWriteTree_,i),o,_);if(!w&&!l&&!r){const P=bL(f,e);A=A.concat(function L3(n,e,t){const r=e._path,i=XE(n,e),o=RL(n,t),l=n.listenProvider_.startListening(JE(e),i,o.hashFn,o.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,O.hu)(!Ip(f.value),"If we're adding a query, it shouldn't be shadowed");else{const _=f.fold((w,b,A)=>{if(!on(w)&&b&&Ip(b))return[wT(b).query];{let P=[];return b&&(P=P.concat(CL(b).map(U=>U.query))),zi(A,(U,q)=>{P=P.concat(q)}),P}});for(let w=0;w<_.length;++w){const b=_[w];n.listenProvider_.stopListening(JE(b),XE(n,b))}}return l}(n,e,P))}return A}function CT(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,f)=>{const w=Ep(f,to(l,e));if(w)return w});return lL(i,e,o,t,!0)}function vv(n,e){return AL(e,n.syncPointTree_,null,gT(n.pendingWriteTree_,Sn()))}function AL(n,e,t,r){if(on(n.path))return xL(n,e,t,r);{const i=e.get(Sn());null==t&&null!=i&&(t=Ep(i,Sn()));let o=[];const l=sn(n.path),f=n.operationForChild(l),_=e.children.get(l);if(_&&f){const w=t?t.getImmediateChild(l):null,b=dL(r,l);o=o.concat(AL(f,_,w,b))}return i&&(o=o.concat(fN(i,n,r,t))),o}}function xL(n,e,t,r){const i=e.get(Sn());null==t&&null!=i&&(t=Ep(i,Sn()));let o=[];return e.children.inorderTraversal((l,f)=>{const _=t?t.getImmediateChild(l):null,w=dL(r,l),b=n.operationForChild(l);b&&(o=o.concat(xL(b,f,_,w)))}),i&&(o=o.concat(fN(i,n,r,t))),o}function RL(n,e){const t=e.query,r=XE(n,t);return{hashFn:()=>(function g3(n){return n.viewCache_.serverCache.getNode()}(e)||Yt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function M3(n,e,t){const r=mN(n,t);if(r){const i=_N(r),o=i.path,l=i.queryId,f=to(o,e);return yN(n,o,new WE(rN(l),f))}return[]}(n,t._path,r):function R3(n,e){return vv(n,new WE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function xG(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return IT(n,t,null,o)}}}}function XE(n,e){const t=bT(e);return n.queryToTagMap.get(t)}function bT(n){return n._path.toString()+"$"+n._queryIdentifier}function mN(n,e){return n.tagToQueryMap.get(e)}function _N(n){const e=n.indexOf("$");return(0,O.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Mn(n.substr(0,e))}}function yN(n,e,t){const r=n.syncPointTree_.get(e);return(0,O.hu)(r,"Missing sync point for query tag that we're tracking"),fN(r,t,gT(n.pendingWriteTree_,e),null)}function JE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function T3(){return(0,O.hu)(ET,"Reference.ts has not been loaded"),ET}())(n._repo,n._path):n}class vN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new vN(t)}node(){return this.node_}}class wN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=br(this.path_,e);return new wN(this.syncTree_,t)}node(){return CT(this.syncTree_,this.path_)}}const V3=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},ML=function(n,e,t){return n&&"object"==typeof n?((0,O.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?U3(n[".sv"],e,t):"object"==typeof n[".sv"]?B3(n[".sv"],e):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},U3=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,O.hu)(!1,"Unexpected server value: "+n)},B3=function(n,e,t){n.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,O.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,O.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},NL=function(n,e,t,r){return IN(e,new wN(t,n),r)},EN=function(n,e,t){return IN(n,new vN(e),t)};function IN(n,e,t){const r=n.getPriority().val(),i=ML(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,f=ML(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new fv(f,Pr(i)):n}{const l=n;return o=l,i!==l.getPriority().val()&&(o=o.updatePriority(new fv(i))),l.forEachChild(rr,(f,_)=>{const w=IN(_,e.getImmediateChild(f),t);w!==_&&(o=o.updateImmediateChild(f,w))}),o}}class CN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function DT(n,e){let t=e instanceof Mn?e:new Mn(e),r=n,i=sn(t);for(;null!==i;){const o=(0,O.DV)(r.node.children,i)||{children:{},childCount:0};r=new CN(i,r,o),t=Zn(t),i=sn(t)}return r}function Hm(n){return n.node.value}function bN(n,e){n.node.value=e,DN(n)}function PL(n){return n.node.childCount>0}function TT(n,e){zi(n.node.children,(t,r)=>{e(new CN(t,n,r))})}function OL(n,e,t,r){t&&!r&&e(n),TT(n,i=>{OL(i,e,!0,r)}),t&&r&&e(n)}function eI(n){return new Mn(null===n.parent?n.name:eI(n.parent)+"/"+n.name)}function DN(n){null!==n.parent&&function H3(n,e,t){const r=function j3(n){return void 0===Hm(n)&&!PL(n)}(t),i=(0,O.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,DN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,DN(n))}(n.parent,n.name,n)}const G3=/[\[\].#$\/\u0000-\u001F\u007F]/,z3=/[\[\].#$\u0000-\u001F\u007F]/,TN=10485760,ST=function(n){return"string"==typeof n&&0!==n.length&&!G3.test(n)},kL=function(n){return"string"==typeof n&&0!==n.length&&!z3.test(n)},tI=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!eT(n)||n&&"object"==typeof n&&(0,O.r3)(n,".sv")},Nc=function(n,e,t,r){r&&void 0===e||nI((0,O.gK)(n,"value"),e,t)},nI=function(n,e,t){const r=t instanceof Mn?new u4(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Vm(r));if("function"==typeof e)throw new Error(n+"contains a function "+Vm(r)+" with contents = "+e.toString());if(eT(e))throw new Error(n+"contains "+e.toString()+" "+Vm(r));if("string"==typeof e&&e.length>TN/3&&(0,O.ug)(e)>TN)throw new Error(n+"contains a string greater than "+TN+" utf8 bytes "+Vm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(zi(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(o=!0,!ST(l)))throw new Error(n+" contains an invalid key ("+l+") "+Vm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function l4(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,O.ug)(e),zF(n)})(r,l),nI(n,f,r),function c4(n){const e=n.parts_.pop();n.byteLength_-=(0,O.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+Vm(r)+" in addition to actual children.")}},FL=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,O.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];zi(e,(l,f)=>{const _=new Mn(l);if(nI(i,f,br(t,_)),".priority"===$M(_)&&!tI(f))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=BE(r);for(let l=0;l<o.length;l++)if((".priority"!==o[l]||l!==o.length-1)&&!ST(o[l]))throw new Error(n+"contains an invalid key ("+o[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(a4);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&tu(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},SN=function(n,e,t){if(!t||void 0!==e){if(eT(e))throw new Error((0,O.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!tI(e))throw new Error((0,O.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},rI=function(n,e,t,r){if(!(r&&void 0===t||ST(t)))throw new Error((0,O.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},iI=function(n,e,t,r){if(!(r&&void 0===t||kL(t)))throw new Error((0,O.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Z3=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),iI(n,e,t,r)},ru=function(n,e){if(".info"===sn(e))throw new Error(n+" failed = Can't modify data under /.info/")},LL=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ST(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),kL(n)}(t))throw new Error((0,O.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class K3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function AT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!HM(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function VL(n,e,t){AT(n,t),UL(n,r=>HM(r,e))}function pa(n,e,t){AT(n,t),UL(n,r=>tu(r,e)||tu(e,r))}function UL(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Y3(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Y3(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Fm&&Gi("event: "+t.toString()),dv(r)}}}const BL="repo_interrupt",Q3=25;class X3{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new K3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=dT(),this.transactionQueueTree_=new CN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jL(n){const t=n.infoData_.getNode(new Mn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function sI(n){return V3({timestamp:jL(n)})}function $L(n,e,t,r,i){n.dataUpdateCount++;const o=new Mn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const _=(0,O.UI)(t,w=>Pr(w));l=function N3(n,e,t,r){const i=mN(n,r);if(i){const o=_N(i),l=o.path,f=o.queryId,_=to(l,e),w=ir.fromObject(t);return yN(n,l,new _v(rN(f),_,w))}return[]}(n.serverSyncTree_,o,_,i)}else{const _=Pr(t);l=SL(n.serverSyncTree_,o,_,i)}else if(r){const _=(0,O.UI)(t,w=>Pr(w));l=function x3(n,e,t){const r=ir.fromObject(t);return vv(n,new _v({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,_)}else{const _=Pr(t);l=QE(n.serverSyncTree_,o,_)}let f=o;l.length>0&&(f=Ev(n,o)),pa(n.eventQueue_,f,l)}function HL(n,e){AN(n,"connected",e),!1===e&&function r6(n){wv(n,"onDisconnectEvents");const e=sI(n),t=dT();eN(n.onDisconnect_,Sn(),(i,o)=>{const l=NL(i,o,n.serverSyncTree_,e);mv(t,i,l)});let r=[];eN(t,Sn(),(i,o)=>{r=r.concat(QE(n.serverSyncTree_,i,o));const l=NN(n,i);Ev(n,l)}),n.onDisconnect_=dT(),pa(n.eventQueue_,Sn(),r)}(n)}function AN(n,e,t){const r=new Mn("/.info/"+e),i=Pr(t);n.infoData_.updateSnapshot(r,i);const o=QE(n.infoSyncTree_,r,i);pa(n.eventQueue_,r,o)}function xT(n){return n.nextWriteId_++}function xN(n,e,t,r,i){wv(n,"set",{path:e.toString(),value:t,priority:r});const o=sI(n),l=Pr(t,r),f=CT(n.serverSyncTree_,e),_=EN(l,f,o),w=xT(n),b=pN(n.serverSyncTree_,e,_,w,!0);AT(n.eventQueue_,b),n.server_.put(e.toString(),l.val(!0),(P,U)=>{const q="ok"===P;q||bs("set at "+e+" failed: "+P);const oe=Cp(n.serverSyncTree_,w,!q);pa(n.eventQueue_,e,oe),bp(0,i,P,U)});const A=NN(n,e);Ev(n,A),pa(n.eventQueue_,A,[])}function i6(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&JM(n.onDisconnect_,e),bp(0,t,r,i)})}function GL(n,e,t,r){const i=Pr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,l)=>{"ok"===o&&mv(n.onDisconnect_,e,i),bp(0,r,o,l)})}function RN(n,e,t){let r;r=".info"===sn(e._path)?IT(n.infoSyncTree_,e,t):IT(n.serverSyncTree_,e,t),VL(n.eventQueue_,e._path,r)}function zL(n){n.persistentConnection_&&n.persistentConnection_.interrupt(BL)}function wv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Gi(t,...e)}function bp(n,e,t,r){e&&dv(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const l=new Error(o);l.code=i,e(l)}})}function MN(n,e,t){return CT(n.serverSyncTree_,e,t)||Yt.EMPTY_NODE}function RT(n,e=n.transactionQueueTree_){if(e||MT(n,e),Hm(e)){const t=WL(n,e);(0,O.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function c6(n,e,t){const r=t.map(w=>w.currentWriteId),i=MN(n,e,r);let o=i;const l=i.hash();for(let w=0;w<t.length;w++){const b=t[w];(0,O.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const A=to(e,b.path);o=o.updateChild(A,b.currentOutputSnapshotRaw)}const f=o.val(!0),_=e;n.server_.put(_.toString(),f,w=>{wv(n,"transaction put response",{path:_.toString(),status:w});let b=[];if("ok"===w){const A=[];for(let P=0;P<t.length;P++)t[P].status=2,b=b.concat(Cp(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&A.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();MT(n,DT(n.transactionQueueTree_,e)),RT(n,n.transactionQueueTree_),pa(n.eventQueue_,e,b);for(let P=0;P<A.length;P++)dv(A[P])}else{if("datastale"===w)for(let A=0;A<t.length;A++)t[A].status=3===t[A].status?4:0;else{bs("transaction at "+_.toString()+" failed: "+w);for(let A=0;A<t.length;A++)t[A].status=4,t[A].abortReason=w}Ev(n,e)}},l)}(n,eI(e),t)}else PL(e)&&TT(e,t=>{RT(n,t)})}function Ev(n,e){const t=qL(n,e),r=eI(t);return function d6(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const _=e[f],w=to(t,_.path);let A,b=!1;if((0,O.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)b=!0,A=_.abortReason,i=i.concat(Cp(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=Q3)b=!0,A="maxretry",i=i.concat(Cp(n.serverSyncTree_,_.currentWriteId,!0));else{const P=MN(n,_.path,l);_.currentInputSnapshot=P;const U=e[f].update(P.val());if(void 0!==U){nI("transaction failed: Data returned ",U,_.path);let q=Pr(U);"object"==typeof U&&null!=U&&(0,O.r3)(U,".priority")||(q=q.updatePriority(P.getPriority()));const he=_.currentWriteId,Xe=sI(n),lt=EN(q,P,Xe);_.currentOutputSnapshotRaw=q,_.currentOutputSnapshotResolved=lt,_.currentWriteId=xT(n),l.splice(l.indexOf(he),1),i=i.concat(pN(n.serverSyncTree_,_.path,lt,_.currentWriteId,_.applyLocally)),i=i.concat(Cp(n.serverSyncTree_,he,!0))}else b=!0,A="nodata",i=i.concat(Cp(n.serverSyncTree_,_.currentWriteId,!0))}pa(n.eventQueue_,t,i),i=[],b&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===A?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(A),!1,null)))}MT(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)dv(r[f]);RT(n,n.transactionQueueTree_)}(n,WL(n,t),r),r}function qL(n,e){let t,r=n.transactionQueueTree_;for(t=sn(e);null!==t&&void 0===Hm(r);)r=DT(r,t),t=sn(e=Zn(e));return r}function WL(n,e){const t=[];return ZL(n,e,t),t.sort((r,i)=>r.order-i.order),t}function ZL(n,e,t){const r=Hm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);TT(e,i=>{ZL(n,i,t)})}function MT(n,e){const t=Hm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,bN(e,t.length>0?t:void 0)}TT(e,r=>{MT(n,r)})}function NN(n,e){const t=eI(qL(n,e)),r=DT(n.transactionQueueTree_,e);return function $3(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{PN(n,i)}),PN(n,r),OL(r,i=>{PN(n,i)}),t}function PN(n,e){const t=Hm(e);if(t){const r=[];let i=[],o=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,O.hu)(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):((0,O.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Cp(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===o?bN(e,void 0):t.length=o+1,pa(n.eventQueue_,eI(e),i);for(let l=0;l<r.length;l++)dv(r[l])}}const ON=function(n,e){const t=p6(n),r=t.namespace;return"firebase.com"===t.domain&&Rc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Rc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&bs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new FM(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Mn(t.pathString)}},p6=function(n){let e="",t="",r="",i="",o="",l=!0,f="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(f=n.substring(0,w-1),n=n.substring(w+2));let b=n.indexOf("/");-1===b&&(b=n.length);let A=n.indexOf("?");-1===A&&(A=n.length),e=n.substring(0,Math.min(b,A)),b<A&&(i=function h6(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,A)));const P=function f6(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):bs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,A)));w=e.indexOf(":"),w>=0?(l="https"===f||"wss"===f,_=parseInt(e.substring(w+1),10)):w=e.length;const U=e.slice(0,w);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const q=e.indexOf(".");r=e.substring(0,q).toLowerCase(),t=e.substring(q+1),o=r}"ns"in P&&(o=P.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:o}},KL="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",g6=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=KL.charAt(t%64),t=Math.floor(t/64);(0,O.hu)(0===t,"Cannot push at time == 0");let l=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=KL.charAt(e[i]);return(0,O.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class YL{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Wl)(this.snapshot.exportVal())}}class QL{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class kN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class XL{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new O.BH;return i6(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ru("OnDisconnect.remove",this._path);const e=new O.BH;return GL(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ru("OnDisconnect.set",this._path),Nc("OnDisconnect.set",e,this._path,!1);const t=new O.BH;return GL(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ru("OnDisconnect.setWithPriority",this._path),Nc("OnDisconnect.setWithPriority",e,this._path,!1),SN("OnDisconnect.setWithPriority",t,!1);const r=new O.BH;return function s6(n,e,t,r,i){const o=Pr(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(l,f)=>{"ok"===l&&mv(n.onDisconnect_,e,o),bp(0,i,l,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){ru("OnDisconnect.update",this._path),FL("OnDisconnect.update",e,this._path,!1);const t=new O.BH;return function o6(n,e,t,r){if((0,O.xb)(t))return Gi("onDisconnect().update() called with empty data.  Don't do anything."),void bp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&zi(t,(l,f)=>{const _=Pr(f);mv(n.onDisconnect_,br(e,l),_)}),bp(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class bo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return on(this._path)?null:$M(this._path)}get ref(){return new iu(this._repo,this._path)}get _queryIdentifier(){const e=nL(this._queryParams),t=OM(e);return"{}"===t?"default":t}get _queryObject(){return nL(this._queryParams)}isEqual(e){if(!((e=(0,O.m9)(e))instanceof bo))return!1;const t=this._repo===e._repo,r=HM(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function o4(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function NT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Dp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Mc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==mp)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==fh)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===rr){if(null!=e&&!tI(e)||null!=t&&!tI(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(n.getIndex()instanceof ZM||n.getIndex()===KM,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function PT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class iu extends bo{constructor(e,t){super(e,t,new uT,!1)}get parent(){const e=GF(this._path);return null===e?null:new iu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Gm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Mn(e),r=zm(this.ref,e);return new Gm(this._node.getChild(t),r,rr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Gm(i,zm(this.ref,r),rr)))}hasChild(e){const t=new Mn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function JL(n,e){return(n=(0,O.m9)(n))._checkNotDeleted("ref"),void 0!==e?zm(n._root,e):n._root}function e2(n,e){(n=(0,O.m9)(n))._checkNotDeleted("refFromURL");const t=ON(e,n._repo.repoInfo_.nodeAdmin);LL("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Rc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),JL(n,t.path.toString())}function zm(n,e){return null===sn((n=(0,O.m9)(n))._path)?Z3("child","path",e,!1):iI("child","path",e,!1),new iu(n._repo,br(n._path,e))}function FN(n,e){n=(0,O.m9)(n),ru("set",n._path),Nc("set",e,n._path,!1);const t=new O.BH;return xN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function w6(n,e){FL("update",e,n._path,!1);const t=new O.BH;return function n6(n,e,t,r){wv(n,"update",{path:e.toString(),value:t});let i=!0;const o=sI(n),l={};if(zi(t,(f,_)=>{i=!1,l[f]=NL(br(e,f),Pr(_),n.serverSyncTree_,o)}),i)Gi("update() called with empty data.  Don't do anything."),bp(0,r,"ok",void 0);else{const f=xT(n),_=function A3(n,e,t,r){!function z4(n,e,t,r){(0,O.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=sN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=ir.fromObject(t);return vv(n,new _v({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,f);AT(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,b)=>{const A="ok"===w;A||bs("update at "+e+" failed: "+w);const P=Cp(n.serverSyncTree_,f,!A),U=P.length>0?Ev(n,e):e;pa(n.eventQueue_,U,P),bp(0,r,w,b)}),zi(t,w=>{const b=NN(n,br(e,w));Ev(n,b)}),pa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function E6(n){n=(0,O.m9)(n);const e=new kN(()=>{}),t=new oI(e);return function t6(n,e,t){const r=function P3(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,b)=>{const A=to(w,t);r=r||Ep(b,A)});let i=n.syncPointTree_.get(t);i?r=r||Ep(i,Sn()):(i=new EL,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,l=o?new vp(r,!0,!1):null;return function m3(n){return pT(n.viewCache_)}(IL(i,e,gT(n.pendingWriteTree_,e._path),o?l.getNode():Yt.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const o=Pr(i).withIndex(e._queryParams.getIndex());let l;if(gN(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=QE(n.serverSyncTree_,e._path,o);else{const f=XE(n.serverSyncTree_,e);l=SL(n.serverSyncTree_,e._path,o,f)}return pa(n.eventQueue_,e._path,l),IT(n.serverSyncTree_,e,t,null,!0),o},i=>(wv(n,"get for query "+(0,O.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Gm(r,new iu(n._repo,n._path),n._queryParams.getIndex()))}class oI{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new YL("value",this,new Gm(e.snapshotNode,new iu(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new QL(this,e,t):null}matches(e){return e instanceof oI&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class OT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new QL(this,e,t):null}createEvent(e,t){(0,O.hu)(null!=e.childName,"Child events should have a childName.");const r=zm(new iu(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new YL(e.type,this,new Gm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof OT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function aI(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const _=t,w=(b,A)=>{RN(n._repo,n,f),_(b,A)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new kN(t,o||void 0),f="value"===e?new oI(l):new OT(e,l);return function a6(n,e,t){let r;r=".info"===sn(e._path)?gN(n.infoSyncTree_,e,t):gN(n.serverSyncTree_,e,t),VL(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>RN(n._repo,n,f)}function LN(n,e,t,r){return aI(n,"value",e,t,r)}function t2(n,e,t,r){return aI(n,"child_added",e,t,r)}function n2(n,e,t,r){return aI(n,"child_changed",e,t,r)}function r2(n,e,t,r){return aI(n,"child_moved",e,t,r)}function i2(n,e,t,r){return aI(n,"child_removed",e,t,r)}function s2(n,e,t){let r=null;const i=t?new kN(t):null;"value"===e?r=new oI(i):e&&(r=new OT(e,i)),RN(n._repo,n,r)}class hl{}class o2 extends hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nc("endAt",this._value,e._path,!0);const t=XM(e._queryParams,this._value,this._key);if(PT(t),Dp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new bo(e._repo,e._path,t,e._orderByCalled)}}class C6 extends hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nc("endBefore",this._value,e._path,!1);const t=function N4(n,e,t){let r;return r=XM(n,e,n.index_===Mc||t?t:mp),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(PT(t),Dp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new bo(e._repo,e._path,t,e._orderByCalled)}}class a2 extends hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nc("startAt",this._value,e._path,!0);const t=QM(e._queryParams,this._value,this._key);if(PT(t),Dp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new bo(e._repo,e._path,t,e._orderByCalled)}}class T6 extends hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nc("startAfter",this._value,e._path,!1);const t=function M4(n,e,t){let r;return r=QM(n,e,n.index_===Mc||t?t:fh),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(PT(t),Dp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new bo(e._repo,e._path,t,e._orderByCalled)}}class A6 extends hl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new bo(e._repo,e._path,function x4(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class R6 extends hl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new bo(e._repo,e._path,function R4(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class N6 extends hl{constructor(e){super(),this._path=e}_apply(e){NT(e,"orderByChild");const t=new Mn(this._path);if(on(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new ZM(t),i=lT(e._queryParams,r);return Dp(i),new bo(e._repo,e._path,i,!0)}}class O6 extends hl{_apply(e){NT(e,"orderByKey");const t=lT(e._queryParams,Mc);return Dp(t),new bo(e._repo,e._path,t,!0)}}class F6 extends hl{_apply(e){NT(e,"orderByPriority");const t=lT(e._queryParams,rr);return Dp(t),new bo(e._repo,e._path,t,!0)}}class V6 extends hl{_apply(e){NT(e,"orderByValue");const t=lT(e._queryParams,KM);return Dp(t),new bo(e._repo,e._path,t,!0)}}class B6 extends hl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Nc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new o2(this._value,this._key)._apply(new a2(this._value,this._key)._apply(e))}}function fl(n,...e){let t=(0,O.m9)(n);for(const r of e)t=r._apply(t);return t}(function w3(n){(0,O.hu)(!vT,"__referenceConstructor has already been defined"),vT=n})(iu),function D3(n){(0,O.hu)(!ET,"__referenceConstructor has already been defined"),ET=n}(iu);const $6="FIREBASE_DATABASE_EMULATOR_HOST",VN={};let u2=!1;function l2(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||Rc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Gi("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,l=ON(o,i),f=l.repoInfo;typeof process<"u"&&process.env&&(w=process.env[$6]),w?(_=!0,o=`http://${w}?ns=${f.namespace}`,l=ON(o,i),f=l.repoInfo):_=!l.repoInfo.secure;const b=i&&_?new UE(UE.OWNER):new kG(n.name,n.options,e);LL("Invalid Firebase Database URL",l),on(l.path)||Rc("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function z6(n,e,t,r){let i=VN[e.name];i||(i={},VN[e.name]=i);let o=i[n.toURLString()];return o&&Rc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new X3(n,u2,t,r),i[n.toURLString()]=o,o}(f,n,b,new OG(n.name,t));return new W6(A,n)}class W6{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function J3(n,e,t){if(n.stats_=UM(n.repoInfo_),n.forceRestClient_||PG())n.server_=new cT(n.repoInfo_,(r,i,o,l)=>{$L(n,r,i,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>HL(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Um(n.repoInfo_,e,(r,i,o,l)=>{$L(n,r,i,o,l)},r=>{HL(n,r)},r=>{!function e6(n,e){zi(e,(t,r)=>{AN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function VG(n,e){const t=n.toString();return VM[t]||(VM[t]=e()),VM[t]}(n.repoInfo_,()=>new V4(n.stats_,n.server_)),n.infoData_=new P4,n.infoSyncTree_=new TL({startListening:(r,i,o,l)=>{let f=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(f=QE(n.infoSyncTree_,r._path,_),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),AN(n,"connected",!1),n.serverSyncTree_=new TL({startListening:(r,i,o,l)=>(n.server_.listen(r,o,i,(f,_)=>{const w=l(f,_);pa(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new iu(this._repo,Sn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function G6(n,e){const t=VN[e];(!t||t[n.key]!==n)&&Rc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),zL(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Rc("Cannot call "+e+" on a deleted database.")}}function c2(){NF.IS_TRANSPORT_INITIALIZED&&bs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Z6(){c2(),_p.forceDisallow()}function K6(){c2(),hv.forceDisallow(),_p.forceAllow()}function X6(n,e){hF(n,e)}const ez={".sv":"timestamp"};class rz{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Um.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Um.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function J6(n){aF(is.SDK_VERSION),(0,is._registerComponent)(new sa.wA("database",(e,{instanceIdentifier:t})=>l2(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,is.registerVersion)(sF,"0.14.4",n),(0,is.registerVersion)(sF,"0.14.4","esm2017")}();const az=new yo.Yd("@firebase/database-compat"),h2=function(n){az.warn("FIREBASE WARNING: "+n)};class cz{constructor(e){this._delegate=e}cancel(e){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,h2("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class dz{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Tp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),iI("DataSnapshot.child","path",e,!1),new Tp(this._database,this._delegate.child(e))}hasChild(e){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),iI("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Tp(this._database,t)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new ga(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class us{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",t,!1);const l=us.getCancelAndContextArgs_("Query.on",r,i),f=(w,b)=>{t.call(l.context,new Tp(this.database,w),b)};f.userCallback=t,f.context=l.context;const _=null===(o=l.cancel)||void 0===o?void 0:o.bind(l.context);switch(e){case"value":return LN(this._delegate,f,_),t;case"child_added":return t2(this._delegate,f,_),t;case"child_removed":return i2(this._delegate,f,_),t;case"child_changed":return n2(this._delegate,f,_),t;case"child_moved":return r2(this._delegate,f,_),t;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,O.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,O.Wj)("Query.off","callback",t,!0),(0,O.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,s2(this._delegate,e,i)}else s2(this._delegate,e)}get(){return E6(this._delegate).then(e=>new Tp(this.database,e))}once(e,t,r,i){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",t,!0);const o=us.getCancelAndContextArgs_("Query.once",r,i),l=new O.BH,f=(w,b)=>{const A=new Tp(this.database,w);t&&t.call(o.context,A,b),l.resolve(A)};f.userCallback=t,f.context=o.context;const _=w=>{o.cancel&&o.cancel.call(o.context,w),l.reject(w)};switch(e){case"value":LN(this._delegate,f,_,{onlyOnce:!0});break;case"child_added":t2(this._delegate,f,_,{onlyOnce:!0});break;case"child_removed":i2(this._delegate,f,_,{onlyOnce:!0});break;case"child_changed":n2(this._delegate,f,_,{onlyOnce:!0});break;case"child_moved":r2(this._delegate,f,_,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new us(this.database,fl(this._delegate,function x6(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new A6(n)}(e)))}limitToLast(e){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new us(this.database,fl(this._delegate,function M6(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new R6(n)}(e)))}orderByChild(e){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new us(this.database,fl(this._delegate,function P6(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return iI("orderByChild","path",n,!1),new N6(n)}(e)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new us(this.database,fl(this._delegate,function k6(){return new O6}()))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new us(this.database,fl(this._delegate,function L6(){return new F6}()))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new us(this.database,fl(this._delegate,function U6(){return new V6}()))}startAt(e=null,t){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new us(this.database,fl(this._delegate,function D6(n=null,e){return rI("startAt","key",e,!0),new a2(n,e)}(e,t)))}startAfter(e=null,t){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new us(this.database,fl(this._delegate,function S6(n,e){return rI("startAfter","key",e,!0),new T6(n,e)}(e,t)))}endAt(e=null,t){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new us(this.database,fl(this._delegate,function I6(n,e){return rI("endAt","key",e,!0),new o2(n,e)}(e,t)))}endBefore(e=null,t){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new us(this.database,fl(this._delegate,function b6(n,e){return rI("endBefore","key",e,!0),new C6(n,e)}(e,t)))}equalTo(e,t){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new us(this.database,fl(this._delegate,function j6(n,e){return rI("equalTo","key",e,!0),new B6(n,e)}(e,t)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof us))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,O.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,O.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,O.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ga(this.database,new iu(this._delegate._repo,this._delegate._path))}}class ga extends us{constructor(e,t){super(e,new bo(t._repo,t._path,new uT,!1)),this.database=e,this._delegate=t}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ga(this.database,zm(this._delegate,e))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ga(this.database,e):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new ga(this.database,this._delegate.root)}set(e,t){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",t,!0);const r=FN(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,h2("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ru("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",t,!0);const r=w6(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function v6(n,e,t){if(ru("setWithPriority",n._path),Nc("setWithPriority",e,n._path,!1),SN("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new O.BH;return xN(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",e,!0);const t=function _6(n){return ru("remove",n._path),FN(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,O.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function iz(n,e,t){var r;if(n=(0,O.m9)(n),ru("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,o=new O.BH,f=LN(n,()=>{});return function l6(n,e,t,r,i,o){wv(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:lF(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=MN(n,e,void 0);l.currentInputSnapshot=f;const _=l.update(f.val());if(void 0===_)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{nI("transaction failed: Data returned ",_,l.path),l.status=0;const w=DT(n.transactionQueueTree_,e),b=Hm(w)||[];let A;b.push(l),bN(w,b),"object"==typeof _&&null!==_&&(0,O.r3)(_,".priority")?(A=(0,O.DV)(_,".priority"),(0,O.hu)(tI(A),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):A=(CT(n.serverSyncTree_,e)||Yt.EMPTY_NODE).getPriority().val();const P=sI(n),U=Pr(_,A),q=EN(U,f,P);l.currentOutputSnapshotRaw=U,l.currentOutputSnapshotResolved=q,l.currentWriteId=xT(n);const oe=pN(n.serverSyncTree_,e,q,l.currentWriteId,l.applyLocally);pa(n.eventQueue_,e,oe),RT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,b)=>{let A=null;_?o.reject(_):(A=new Gm(b,new iu(n._repo,n._path),rr),o.resolve(new rz(w,A)))},f,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new dz(o.committed,new Tp(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",t,!0);const r=function y6(n,e){n=(0,O.m9)(n),ru("setPriority",n._path),SN("setPriority",e,!1);const t=new O.BH;return xN(n._repo,br(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",t,!0);const r=function m6(n,e){n=(0,O.m9)(n),ru("push",n._path),Nc("push",e,n._path,!0);const t=jL(n._repo),r=g6(t),i=zm(n,r),o=zm(n,r);let l;return l=null!=e?FN(o,e).then(()=>o):Promise.resolve(o),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new ga(this.database,l));t&&i.then(()=>t(null),l=>t(l));const o=new ga(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return ru("Reference.onDisconnect",this._delegate._path),new cz(new XL(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class uI{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Z6,forceLongPolling:K6}}useEmulator(e,t,r={}){!function d2(n,e,t,r={}){(n=(0,O.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Rc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Rc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new UE(UE.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,O.Sg)(r.mockUserToken,n.app.options.projectId);o=new UE(l)}!function H6(n,e,t,r){n.repoInfo_=new FM(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,O.Dv)("database.ref",0,1,arguments.length),e instanceof ga){const t=e2(this._delegate,e.toString());return new ga(this,t)}{const t=JL(this._delegate,e);return new ga(this,t)}}refFromURL(e){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const r=e2(this._delegate,e);return new ga(this,r)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function Y6(n){(n=(0,O.m9)(n))._checkNotDeleted("goOffline"),zL(n._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function Q6(n){(n=(0,O.m9)(n))._checkNotDeleted("goOnline"),function u6(n){n.persistentConnection_&&n.persistentConnection_.resume(BL)}(n._repo)}(this._delegate)}}uI.ServerValue={TIMESTAMP:function tz(){return ez}(),increment:n=>function nz(n){return{".sv":{increment:n}}}(n)};var fz=Object.freeze({__proto__:null,initStandalone:function hz({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){aF(t);const l=new sa.zt("auth-internal",new sa.H0("database-standalone"));return l.setComponent(new sa.wA("auth-internal",()=>r,"PRIVATE")),{instance:new uI(l2(n,l,void 0,e,o),n),namespace:i}}});const pz=uI.ServerValue;function f2(n){return null==n}function p2(n){return"function"==typeof n.set}function g2(n,e){return p2(e)?e:n.ref(e)}function m2(n,e){if(function mz(n){return"string"==typeof n}(n))return e.stringCase();if(p2(n))return e.firebaseCase();if(function _z(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function lI(n,e,t="on",r=Ad.z){return new ui.y(i=>{let o=null;return o=n[t](e,(l,f)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,ct.U)(i=>{const{snapshot:o,prevKey:l}=i;let f=null;return o.exists()&&(f=o.key),{type:e,payload:o,prevKey:l,key:f}}),(0,LO.B)())}function _2(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function wz(n,e){const{payload:t,prevKey:r,key:i}=e,o=_2(n,i),l=function vz(n,e){if(f2(e))return 0;{const t=_2(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:f,key:_.key};return f=_.key,n=[...n,w],!1})}return n;case"child_added":if(o>-1){const f=n[o-1];(f&&f.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(o>-1){const f=n.splice(o,1)[0];return(n=n.slice()).splice(l,0,f),n}return n;default:return n}}function y2(n){return(f2(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function v2(n,e,t){return function yz(n,e,t){return lI(n,"value","once",t).pipe(Un(r=>{const i=[ut(r)];return e.forEach(o=>i.push(lI(n,o,"on",t))),(0,mR.T)(...i).pipe(Oa(wz,[]))}),dw())}(n,e=y2(e),t)}function w2(n,e,t){const r=(e=y2(e)).map(i=>lI(n,i,"on",t));return(0,mR.T)(...r)}function E2(n,e){return function(r,i){return m2(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function bz(n){return function(t){return t?m2(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function I2(n,e){return function(){return lI(n,"value","on",e)}}!function gz(n){n.INTERNAL.registerComponent(new sa.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new uI(i,r)},"PUBLIC").setServiceProps({Reference:ga,Query:us,Database:uI,DataSnapshot:Tp,enableLogging:X6,INTERNAL:fz,ServerValue:pz}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(I_.Z);const Sz=new d.OlP("angularfire2.realtimeDatabaseURL"),Az=new d.OlP("angularfire2.database.use-emulator");let xz=(()=>{class n{constructor(t,r,i,o,l,f,_,w,b,A,P,U,q,oe,he){this.schedulers=f;const Xe=_,lt=(0,Mr.on)(t,l,r);w&&qR(lt,l,b,P,U,q,A,oe),this.database=(0,Mr.cc)(`${lt.name}.database.${i}`,"AngularFireDatabase",lt.name,()=>{const Ye=l.runOutsideAngular(()=>lt.database(i||void 0));return Xe&&Ye.useEmulator(...Xe),Ye},[Xe])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>g2(this.database,t));let o=i;return r&&(o=r(i)),function Dz(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:E2(r,"update"),set:E2(r,"set"),push:i=>r.push(i),remove:bz(r),snapshotChanges:i=>v2(n,i,t).pipe(pn.iC),stateChanges:i=>w2(n,i,t).pipe(pn.iC),auditTrail:i=>function Ez(n,e,t){return function Cz(n,e,t){return function Iz(n,e){return lI(n,"value","on",e).pipe((0,ct.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function wG(...n){const e=(0,ai.jO)(n);return(0,vr.e)((t,r)=>{const i=n.length,o=new Array(i);let l=n.map(()=>!1),f=!1;for(let _=0;_<i;_++)(0,Yo.Xf)(n[_]).subscribe((0,Xn.x)(r,w=>{o[_]=w,!f&&!l[_]&&(l[_]=!0,(f=l.every(Us.y))&&(l=null))},vG.Z));t.subscribe((0,Xn.x)(r,_=>{if(f){const w=[_,...o];r.next(e?e(...w):w)}}))})}(e),(0,ct.U)(([i,o])=>{const l=i.lastKeyToLoad,f=o.map(_=>_.key);return{actions:o,lastKeyToLoad:l,loadedKeys:f}}),function EG(n){return(0,vr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Xn.x)(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,ct.U)(i=>i.actions))}(n,w2(n,e).pipe(Oa((i,o)=>[...i,o],[])),t)}(n,i,t).pipe(pn.iC),valueChanges:(i,o)=>v2(n,i,t).pipe((0,ct.U)(f=>f.map(_=>o&&o.idField?Object.assign(Object.assign({},_.payload.val()),{[o.idField]:_.key}):_.payload.val())),pn.iC)}}(o,this)}object(t){return function Tz(n,e){return{query:n,snapshotChanges:()=>I2(n,e.schedulers.outsideAngular)().pipe(pn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>I2(n,e.schedulers.outsideAngular)().pipe(pn.iC,(0,ct.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>g2(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Mr.Dh),d.LFG(Mr.xv,8),d.LFG(Sz,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(pn.HU),d.LFG(Az,8),d.LFG(ND,8),d.LFG(BR,8),d.LFG(jR,8),d.LFG($R,8),d.LFG(HR,8),d.LFG(GR,8),d.LFG(zR,8),d.LFG(DE,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Rz=(()=>{class n{constructor(){Sd.Z.registerVersion("angularfire",pn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[xz]}),n})();const Mz_firebaseConfig={apiKey:"AIzaSyC7vdHoyAA0erSZdl0bMWxzuTffGPdbsvc",authDomain:"ang-blog-37a1f.firebaseapp.com",projectId:"ang-blog-37a1f",storageBucket:"ang-blog-37a1f.appspot.com",messagingSenderId:"231976411012",appId:"1:231976411012:web:5c39ea665f88435aaac7d1"};let Nz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[A$]}),n.\u0275inj=d.cJS({imports:[Ma,d$,Mr.hO.initializeApp(Mz_firebaseConfig),KB,jB,yG,Rz,i$]}),n})();Kc().bootstrapModule(Nz).catch(n=>console.error(n))},9751:(Et,Te,L)=>{L.d(Te,{y:()=>Ee});var d=L(930),J=L(727),F=L(8822),ue=L(9635),se=L(2416),ae=L(576),ye=L(2806);let Ee=(()=>{class K{constructor(De){De&&(this._subscribe=De)}lift(De){const Ze=new K;return Ze.source=this,Ze.operator=De,Ze}subscribe(De,Ze,gt){const ge=function H(K){return K&&K instanceof d.Lv||function G(K){return K&&(0,ae.m)(K.next)&&(0,ae.m)(K.error)&&(0,ae.m)(K.complete)}(K)&&(0,J.Nn)(K)}(De)?De:new d.Hp(De,Ze,gt);return(0,ye.x)(()=>{const{operator:Me,source:Ne}=this;ge.add(Me?Me.call(ge,Ne):Ne?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(De){try{return this._subscribe(De)}catch(Ze){De.error(Ze)}}forEach(De,Ze){return new(Ze=fe(Ze))((gt,ge)=>{const Me=new d.Hp({next:Ne=>{try{De(Ne)}catch(Ue){ge(Ue),Me.unsubscribe()}},error:ge,complete:gt});this.subscribe(Me)})}_subscribe(De){var Ze;return null===(Ze=this.source)||void 0===Ze?void 0:Ze.subscribe(De)}[F.L](){return this}pipe(...De){return(0,ue.U)(De)(this)}toPromise(De){return new(De=fe(De))((Ze,gt)=>{let ge;this.subscribe(Me=>ge=Me,Me=>gt(Me),()=>Ze(ge))})}}return K.create=He=>new K(He),K})();function fe(K){var He;return null!==(He=K??se.v.Promise)&&void 0!==He?He:Promise}},7579:(Et,Te,L)=>{L.d(Te,{x:()=>ye});var d=L(9751),J=L(727);const ue=(0,L(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=L(8737),ae=L(2806);let ye=(()=>{class fe extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const K=new Ee(this,this);return K.operator=H,K}_throwIfClosed(){if(this.closed)throw new ue}next(H){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(H)}})}error(H){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:K}=this;for(;K.length;)K.shift().error(H)}})}complete(){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:K,isStopped:He,observers:De}=this;return K||He?J.Lc:(this.currentObservers=null,De.push(H),new J.w0(()=>{this.currentObservers=null,(0,se.P)(De,H)}))}_checkFinalizedStatuses(H){const{hasError:K,thrownError:He,isStopped:De}=this;K?H.error(He):De&&H.complete()}asObservable(){const H=new d.y;return H.source=this,H}}return fe.create=(G,H)=>new Ee(G,H),fe})();class Ee extends ye{constructor(G,H){super(),this.destination=G,this.source=H}next(G){var H,K;null===(K=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===K||K.call(H,G)}error(G){var H,K;null===(K=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===K||K.call(H,G)}complete(){var G,H;null===(H=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===H||H.call(G)}_subscribe(G){var H,K;return null!==(K=null===(H=this.source)||void 0===H?void 0:H.subscribe(G))&&void 0!==K?K:J.Lc}}},930:(Et,Te,L)=>{L.d(Te,{Hp:()=>gt,Lv:()=>K});var d=L(576),J=L(727),F=L(2416),ue=L(7849),se=L(5032);const ae=fe("C",void 0,void 0);function fe(Pe,Ie,Ce){return{kind:Pe,value:Ie,error:Ce}}var G=L(3410),H=L(2806);class K extends J.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,J.Nn)(Ie)&&Ie.add(this)):this.destination=Ue}static create(Ie,Ce,Ge){return new gt(Ie,Ce,Ge)}next(Ie){this.isStopped?Ne(function Ee(Pe){return fe("N",Pe,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?Ne(function ye(Pe){return fe("E",void 0,Pe)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?Ne(ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function De(Pe,Ie){return He.call(Pe,Ie)}class Ze{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(Ie)}catch(Ge){ge(Ge)}}error(Ie){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(Ie)}catch(Ge){ge(Ge)}else ge(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(Ce){ge(Ce)}}}class gt extends K{constructor(Ie,Ce,Ge){let ke;if(super(),(0,d.m)(Ie)||!Ie)ke={next:Ie??void 0,error:Ce??void 0,complete:Ge??void 0};else{let st;this&&F.v.useDeprecatedNextContext?(st=Object.create(Ie),st.unsubscribe=()=>this.unsubscribe(),ke={next:Ie.next&&De(Ie.next,st),error:Ie.error&&De(Ie.error,st),complete:Ie.complete&&De(Ie.complete,st)}):ke=Ie}this.destination=new Ze(ke)}}function ge(Pe){F.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Pe):(0,ue.h)(Pe)}function Ne(Pe,Ie){const{onStoppedNotification:Ce}=F.v;Ce&&G.z.setTimeout(()=>Ce(Pe,Ie))}const Ue={closed:!0,next:se.Z,error:function Me(Pe){throw Pe},complete:se.Z}},727:(Et,Te,L)=>{L.d(Te,{Lc:()=>ae,w0:()=>se,Nn:()=>ye});var d=L(576);const F=(0,L(3888).d)(fe=>function(H){fe(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((K,He)=>`${He+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ue=L(8737);class se{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const De of H)De.remove(this);else H.remove(this);const{initialTeardown:K}=this;if((0,d.m)(K))try{K()}catch(De){G=De instanceof F?De.errors:[De]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const De of He)try{Ee(De)}catch(Ze){G=G??[],Ze instanceof F?G=[...G,...Ze.errors]:G.push(Ze)}}if(G)throw new F(G)}}add(G){var H;if(G&&G!==this)if(this.closed)Ee(G);else{if(G instanceof se){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(G)}}_hasParent(G){const{_parentage:H}=this;return H===G||Array.isArray(H)&&H.includes(G)}_addParent(G){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(G),H):H?[H,G]:G}_removeParent(G){const{_parentage:H}=this;H===G?this._parentage=null:Array.isArray(H)&&(0,ue.P)(H,G)}remove(G){const{_finalizers:H}=this;H&&(0,ue.P)(H,G),G instanceof se&&G._removeParent(this)}}se.EMPTY=(()=>{const fe=new se;return fe.closed=!0,fe})();const ae=se.EMPTY;function ye(fe){return fe instanceof se||fe&&"closed"in fe&&(0,d.m)(fe.remove)&&(0,d.m)(fe.add)&&(0,d.m)(fe.unsubscribe)}function Ee(fe){(0,d.m)(fe)?fe():fe.unsubscribe()}},2416:(Et,Te,L)=>{L.d(Te,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Et,Te,L)=>{L.d(Te,{E:()=>J});const J=new(L(9751).y)(se=>se.complete())},8996:(Et,Te,L)=>{L.d(Te,{D:()=>Ie});var d=L(8421),J=L(5363),F=L(9468),ae=L(9751),Ee=L(2202),fe=L(576),G=L(9672);function K(Ce,Ge){if(!Ce)throw new Error("Iterable cannot be null");return new ae.y(ke=>{(0,G.f)(ke,Ge,()=>{const st=Ce[Symbol.asyncIterator]();(0,G.f)(ke,Ge,()=>{st.next().then(ie=>{ie.done?ke.complete():ke.next(ie.value)})},0,!0)})})}var He=L(3670),De=L(8239),Ze=L(1144),gt=L(6495),ge=L(2206),Me=L(4532),Ne=L(3260);function Ie(Ce,Ge){return Ge?function Pe(Ce,Ge){if(null!=Ce){if((0,He.c)(Ce))return function ue(Ce,Ge){return(0,d.Xf)(Ce).pipe((0,F.R)(Ge),(0,J.Q)(Ge))}(Ce,Ge);if((0,Ze.z)(Ce))return function ye(Ce,Ge){return new ae.y(ke=>{let st=0;return Ge.schedule(function(){st===Ce.length?ke.complete():(ke.next(Ce[st++]),ke.closed||this.schedule())})})}(Ce,Ge);if((0,De.t)(Ce))return function se(Ce,Ge){return(0,d.Xf)(Ce).pipe((0,F.R)(Ge),(0,J.Q)(Ge))}(Ce,Ge);if((0,ge.D)(Ce))return K(Ce,Ge);if((0,gt.T)(Ce))return function H(Ce,Ge){return new ae.y(ke=>{let st;return(0,G.f)(ke,Ge,()=>{st=Ce[Ee.h](),(0,G.f)(ke,Ge,()=>{let ie,xt;try{({value:ie,done:xt}=st.next())}catch(nt){return void ke.error(nt)}xt?ke.complete():ke.next(ie)},0,!0)}),()=>(0,fe.m)(st?.return)&&st.return()})}(Ce,Ge);if((0,Ne.L)(Ce))return function Ue(Ce,Ge){return K((0,Ne.Q)(Ce),Ge)}(Ce,Ge)}throw(0,Me.z)(Ce)}(Ce,Ge):(0,d.Xf)(Ce)}},8421:(Et,Te,L)=>{L.d(Te,{Xf:()=>He});var d=L(655),J=L(1144),F=L(8239),ue=L(9751),se=L(3670),ae=L(2206),ye=L(4532),Ee=L(6495),fe=L(3260),G=L(576),H=L(7849),K=L(8822);function He(Pe){if(Pe instanceof ue.y)return Pe;if(null!=Pe){if((0,se.c)(Pe))return function De(Pe){return new ue.y(Ie=>{const Ce=Pe[K.L]();if((0,G.m)(Ce.subscribe))return Ce.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,J.z)(Pe))return function Ze(Pe){return new ue.y(Ie=>{for(let Ce=0;Ce<Pe.length&&!Ie.closed;Ce++)Ie.next(Pe[Ce]);Ie.complete()})}(Pe);if((0,F.t)(Pe))return function gt(Pe){return new ue.y(Ie=>{Pe.then(Ce=>{Ie.closed||(Ie.next(Ce),Ie.complete())},Ce=>Ie.error(Ce)).then(null,H.h)})}(Pe);if((0,ae.D)(Pe))return Me(Pe);if((0,Ee.T)(Pe))return function ge(Pe){return new ue.y(Ie=>{for(const Ce of Pe)if(Ie.next(Ce),Ie.closed)return;Ie.complete()})}(Pe);if((0,fe.L)(Pe))return function Ne(Pe){return Me((0,fe.Q)(Pe))}(Pe)}throw(0,ye.z)(Pe)}function Me(Pe){return new ue.y(Ie=>{(function Ue(Pe,Ie){var Ce,Ge,ke,st;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,d.KL)(Pe);!(Ge=yield Ce.next()).done;)if(Ie.next(Ge.value),Ie.closed)return}catch(ie){ke={error:ie}}finally{try{Ge&&!Ge.done&&(st=Ce.return)&&(yield st.call(Ce))}finally{if(ke)throw ke.error}}Ie.complete()})})(Pe,Ie).catch(Ce=>Ie.error(Ce))})}},6451:(Et,Te,L)=>{L.d(Te,{T:()=>ae});var d=L(8189),J=L(8421),F=L(515),ue=L(7669),se=L(8996);function ae(...ye){const Ee=(0,ue.yG)(ye),fe=(0,ue._6)(ye,1/0),G=ye;return G.length?1===G.length?(0,J.Xf)(G[0]):(0,d.J)(fe)((0,se.D)(G,Ee)):F.E}},5403:(Et,Te,L)=>{L.d(Te,{x:()=>J});var d=L(930);function J(ue,se,ae,ye,Ee){return new F(ue,se,ae,ye,Ee)}class F extends d.Lv{constructor(se,ae,ye,Ee,fe,G){super(se),this.onFinalize=fe,this.shouldUnsubscribe=G,this._next=ae?function(H){try{ae(H)}catch(K){se.error(K)}}:super._next,this._error=Ee?function(H){try{Ee(H)}catch(K){se.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(H){se.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ae}=this;super.unsubscribe(),!ae&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(Et,Te,L)=>{L.d(Te,{U:()=>F});var d=L(4482),J=L(5403);function F(ue,se){return(0,d.e)((ae,ye)=>{let Ee=0;ae.subscribe((0,J.x)(ye,fe=>{ye.next(ue.call(se,fe,Ee++))}))})}},8189:(Et,Te,L)=>{L.d(Te,{J:()=>F});var d=L(5577),J=L(4671);function F(ue=1/0){return(0,d.z)(J.y,ue)}},5577:(Et,Te,L)=>{L.d(Te,{z:()=>Ee});var d=L(4004),J=L(8421),F=L(4482),ue=L(9672),se=L(5403),ye=L(576);function Ee(fe,G,H=1/0){return(0,ye.m)(G)?Ee((K,He)=>(0,d.U)((De,Ze)=>G(K,De,He,Ze))((0,J.Xf)(fe(K,He))),H):("number"==typeof G&&(H=G),(0,F.e)((K,He)=>function ae(fe,G,H,K,He,De,Ze,gt){const ge=[];let Me=0,Ne=0,Ue=!1;const Pe=()=>{Ue&&!ge.length&&!Me&&G.complete()},Ie=Ge=>Me<K?Ce(Ge):ge.push(Ge),Ce=Ge=>{De&&G.next(Ge),Me++;let ke=!1;(0,J.Xf)(H(Ge,Ne++)).subscribe((0,se.x)(G,st=>{He?.(st),De?Ie(st):G.next(st)},()=>{ke=!0},void 0,()=>{if(ke)try{for(Me--;ge.length&&Me<K;){const st=ge.shift();Ze?(0,ue.f)(G,Ze,()=>Ce(st)):Ce(st)}Pe()}catch(st){G.error(st)}}))};return fe.subscribe((0,se.x)(G,Ie,()=>{Ue=!0,Pe()})),()=>{gt?.()}}(K,He,fe,H)))}},5363:(Et,Te,L)=>{L.d(Te,{Q:()=>ue});var d=L(9672),J=L(4482),F=L(5403);function ue(se,ae=0){return(0,J.e)((ye,Ee)=>{ye.subscribe((0,F.x)(Ee,fe=>(0,d.f)(Ee,se,()=>Ee.next(fe),ae),()=>(0,d.f)(Ee,se,()=>Ee.complete(),ae),fe=>(0,d.f)(Ee,se,()=>Ee.error(fe),ae)))})}},3099:(Et,Te,L)=>{L.d(Te,{B:()=>se});var d=L(8421),J=L(7579),F=L(930),ue=L(4482);function se(ye={}){const{connector:Ee=(()=>new J.x),resetOnError:fe=!0,resetOnComplete:G=!0,resetOnRefCountZero:H=!0}=ye;return K=>{let He,De,Ze,gt=0,ge=!1,Me=!1;const Ne=()=>{De?.unsubscribe(),De=void 0},Ue=()=>{Ne(),He=Ze=void 0,ge=Me=!1},Pe=()=>{const Ie=He;Ue(),Ie?.unsubscribe()};return(0,ue.e)((Ie,Ce)=>{gt++,!Me&&!ge&&Ne();const Ge=Ze=Ze??Ee();Ce.add(()=>{gt--,0===gt&&!Me&&!ge&&(De=ae(Pe,H))}),Ge.subscribe(Ce),!He&&gt>0&&(He=new F.Hp({next:ke=>Ge.next(ke),error:ke=>{Me=!0,Ne(),De=ae(Ue,fe,ke),Ge.error(ke)},complete:()=>{ge=!0,Ne(),De=ae(Ue,G),Ge.complete()}}),(0,d.Xf)(Ie).subscribe(He))})(K)}}function ae(ye,Ee,...fe){if(!0===Ee)return void ye();if(!1===Ee)return;const G=new F.Hp({next:()=>{G.unsubscribe(),ye()}});return(0,d.Xf)(Ee(...fe)).subscribe(G)}},9468:(Et,Te,L)=>{L.d(Te,{R:()=>J});var d=L(4482);function J(F,ue=0){return(0,d.e)((se,ae)=>{ae.add(F.schedule(()=>se.subscribe(ae),ue))})}},8505:(Et,Te,L)=>{L.d(Te,{b:()=>se});var d=L(576),J=L(4482),F=L(5403),ue=L(4671);function se(ae,ye,Ee){const fe=(0,d.m)(ae)||ye||Ee?{next:ae,error:ye,complete:Ee}:ae;return fe?(0,J.e)((G,H)=>{var K;null===(K=fe.subscribe)||void 0===K||K.call(fe);let He=!0;G.subscribe((0,F.x)(H,De=>{var Ze;null===(Ze=fe.next)||void 0===Ze||Ze.call(fe,De),H.next(De)},()=>{var De;He=!1,null===(De=fe.complete)||void 0===De||De.call(fe),H.complete()},De=>{var Ze;He=!1,null===(Ze=fe.error)||void 0===Ze||Ze.call(fe,De),H.error(De)},()=>{var De,Ze;He&&(null===(De=fe.unsubscribe)||void 0===De||De.call(fe)),null===(Ze=fe.finalize)||void 0===Ze||Ze.call(fe)}))}):ue.y}},4408:(Et,Te,L)=>{L.d(Te,{o:()=>se});var d=L(727);class J extends d.w0{constructor(ye,Ee){super()}schedule(ye,Ee=0){return this}}const F={setInterval(ae,ye,...Ee){const{delegate:fe}=F;return fe?.setInterval?fe.setInterval(ae,ye,...Ee):setInterval(ae,ye,...Ee)},clearInterval(ae){const{delegate:ye}=F;return(ye?.clearInterval||clearInterval)(ae)},delegate:void 0};var ue=L(8737);class se extends J{constructor(ye,Ee){super(ye,Ee),this.scheduler=ye,this.work=Ee,this.pending=!1}schedule(ye,Ee=0){var fe;if(this.closed)return this;this.state=ye;const G=this.id,H=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(H,G,Ee)),this.pending=!0,this.delay=Ee,this.id=null!==(fe=this.id)&&void 0!==fe?fe:this.requestAsyncId(H,this.id,Ee),this}requestAsyncId(ye,Ee,fe=0){return F.setInterval(ye.flush.bind(ye,this),fe)}recycleAsyncId(ye,Ee,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return Ee;null!=Ee&&F.clearInterval(Ee)}execute(ye,Ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(ye,Ee);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ye,Ee){let G,fe=!1;try{this.work(ye)}catch(H){fe=!0,G=H||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:ye,scheduler:Ee}=this,{actions:fe}=Ee;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(fe,this),null!=ye&&(this.id=this.recycleAsyncId(Ee,ye,null)),this.delay=null,super.unsubscribe()}}}},7565:(Et,Te,L)=>{L.d(Te,{v:()=>F});var d=L(6063);class J{constructor(se,ae=J.now){this.schedulerActionCtor=se,this.now=ae}schedule(se,ae=0,ye){return new this.schedulerActionCtor(this,se).schedule(ye,ae)}}J.now=d.l.now;class F extends J{constructor(se,ae=J.now){super(se,ae),this.actions=[],this._active=!1}flush(se){const{actions:ae}=this;if(this._active)return void ae.push(se);let ye;this._active=!0;do{if(ye=se.execute(se.state,se.delay))break}while(se=ae.shift());if(this._active=!1,ye){for(;se=ae.shift();)se.unsubscribe();throw ye}}}},4986:(Et,Te,L)=>{L.d(Te,{z:()=>F});var d=L(4408);const F=new(L(7565).v)(d.o)},6063:(Et,Te,L)=>{L.d(Te,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(Et,Te,L)=>{L.d(Te,{z:()=>d});const d={setTimeout(J,F,...ue){const{delegate:se}=d;return se?.setTimeout?se.setTimeout(J,F,...ue):setTimeout(J,F,...ue)},clearTimeout(J){const{delegate:F}=d;return(F?.clearTimeout||clearTimeout)(J)},delegate:void 0}},2202:(Et,Te,L)=>{L.d(Te,{h:()=>J});const J=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Et,Te,L)=>{L.d(Te,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Et,Te,L)=>{L.d(Te,{_6:()=>ae,jO:()=>ue,yG:()=>se});var d=L(576);function F(ye){return ye[ye.length-1]}function ue(ye){return(0,d.m)(F(ye))?ye.pop():void 0}function se(ye){return function J(ye){return ye&&(0,d.m)(ye.schedule)}(F(ye))?ye.pop():void 0}function ae(ye,Ee){return"number"==typeof F(ye)?ye.pop():Ee}},8737:(Et,Te,L)=>{function d(J,F){if(J){const ue=J.indexOf(F);0<=ue&&J.splice(ue,1)}}L.d(Te,{P:()=>d})},3888:(Et,Te,L)=>{function d(J){const ue=J(se=>{Error.call(se),se.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}L.d(Te,{d:()=>d})},2806:(Et,Te,L)=>{L.d(Te,{O:()=>ue,x:()=>F});var d=L(2416);let J=null;function F(se){if(d.v.useDeprecatedSynchronousErrorHandling){const ae=!J;if(ae&&(J={errorThrown:!1,error:null}),se(),ae){const{errorThrown:ye,error:Ee}=J;if(J=null,ye)throw Ee}}else se()}function ue(se){d.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=se)}},9672:(Et,Te,L)=>{function d(J,F,ue,se=0,ae=!1){const ye=F.schedule(function(){ue(),ae?J.add(this.schedule(null,se)):this.unsubscribe()},se);if(J.add(ye),!ae)return ye}L.d(Te,{f:()=>d})},4671:(Et,Te,L)=>{function d(J){return J}L.d(Te,{y:()=>d})},1144:(Et,Te,L)=>{L.d(Te,{z:()=>d});const d=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(Et,Te,L)=>{L.d(Te,{D:()=>J});var d=L(576);function J(F){return Symbol.asyncIterator&&(0,d.m)(F?.[Symbol.asyncIterator])}},576:(Et,Te,L)=>{function d(J){return"function"==typeof J}L.d(Te,{m:()=>d})},3670:(Et,Te,L)=>{L.d(Te,{c:()=>F});var d=L(8822),J=L(576);function F(ue){return(0,J.m)(ue[d.L])}},6495:(Et,Te,L)=>{L.d(Te,{T:()=>F});var d=L(2202),J=L(576);function F(ue){return(0,J.m)(ue?.[d.h])}},8239:(Et,Te,L)=>{L.d(Te,{t:()=>J});var d=L(576);function J(F){return(0,d.m)(F?.then)}},3260:(Et,Te,L)=>{L.d(Te,{L:()=>ue,Q:()=>F});var d=L(655),J=L(576);function F(se){return(0,d.FC)(this,arguments,function*(){const ye=se.getReader();try{for(;;){const{value:Ee,done:fe}=yield(0,d.qq)(ye.read());if(fe)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(Ee)}}finally{ye.releaseLock()}})}function ue(se){return(0,J.m)(se?.getReader)}},4482:(Et,Te,L)=>{L.d(Te,{A:()=>J,e:()=>F});var d=L(576);function J(ue){return(0,d.m)(ue?.lift)}function F(ue){return se=>{if(J(se))return se.lift(function(ae){try{return ue(ae,this)}catch(ye){this.error(ye)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Et,Te,L)=>{function d(){}L.d(Te,{Z:()=>d})},9635:(Et,Te,L)=>{L.d(Te,{U:()=>F,z:()=>J});var d=L(4671);function J(...ue){return F(ue)}function F(ue){return 0===ue.length?d.y:1===ue.length?ue[0]:function(ae){return ue.reduce((ye,Ee)=>Ee(ye),ae)}}},7849:(Et,Te,L)=>{L.d(Te,{h:()=>F});var d=L(2416),J=L(3410);function F(ue){J.z.setTimeout(()=>{const{onUnhandledError:se}=d.v;if(!se)throw ue;se(ue)})}},4532:(Et,Te,L)=>{function d(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Te,{z:()=>d})},655:(Et,Te,L)=>{function ue(pe,_e){var be={};for(var Se in pe)Object.prototype.hasOwnProperty.call(pe,Se)&&_e.indexOf(Se)<0&&(be[Se]=pe[Se]);if(null!=pe&&"function"==typeof Object.getOwnPropertySymbols){var ze=0;for(Se=Object.getOwnPropertySymbols(pe);ze<Se.length;ze++)_e.indexOf(Se[ze])<0&&Object.prototype.propertyIsEnumerable.call(pe,Se[ze])&&(be[Se[ze]]=pe[Se[ze]])}return be}function K(pe,_e,be,Se){return new(be||(be=Promise))(function(Be,mt){function pt(qt){try{et(Se.next(qt))}catch(At){mt(At)}}function Ft(qt){try{et(Se.throw(qt))}catch(At){mt(At)}}function et(qt){qt.done?Be(qt.value):function ze(Be){return Be instanceof be?Be:new be(function(mt){mt(Be)})}(qt.value).then(pt,Ft)}et((Se=Se.apply(pe,_e||[])).next())})}function Pe(pe){return this instanceof Pe?(this.v=pe,this):new Pe(pe)}function Ie(pe,_e,be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ze,Se=be.apply(pe,_e||[]),Be=[];return ze={},mt("next"),mt("throw"),mt("return"),ze[Symbol.asyncIterator]=function(){return this},ze;function mt(an){Se[an]&&(ze[an]=function(En){return new Promise(function(Nn,jr){Be.push([an,En,Nn,jr])>1||pt(an,En)})})}function pt(an,En){try{!function Ft(an){an.value instanceof Pe?Promise.resolve(an.value.v).then(et,qt):At(Be[0][2],an)}(Se[an](En))}catch(Nn){At(Be[0][3],Nn)}}function et(an){pt("next",an)}function qt(an){pt("throw",an)}function At(an,En){an(En),Be.shift(),Be.length&&pt(Be[0][0],Be[0][1])}}function Ge(pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var be,_e=pe[Symbol.asyncIterator];return _e?_e.call(pe):(pe=function gt(pe){var _e="function"==typeof Symbol&&Symbol.iterator,be=_e&&pe[_e],Se=0;if(be)return be.call(pe);if(pe&&"number"==typeof pe.length)return{next:function(){return pe&&Se>=pe.length&&(pe=void 0),{value:pe&&pe[Se++],done:!pe}}};throw new TypeError(_e?"Object is not iterable.":"Symbol.iterator is not defined.")}(pe),be={},Se("next"),Se("throw"),Se("return"),be[Symbol.asyncIterator]=function(){return this},be);function Se(Be){be[Be]=pe[Be]&&function(mt){return new Promise(function(pt,Ft){!function ze(Be,mt,pt,Ft){Promise.resolve(Ft).then(function(et){Be({value:et,done:pt})},mt)}(pt,Ft,(mt=pe[Be](mt)).done,mt.value)})}}}L.d(Te,{FC:()=>Ie,KL:()=>Ge,_T:()=>ue,mG:()=>K,qq:()=>Pe})},4650:(Et,Te,L)=>{L.d(Te,{$8M:()=>Ra,$WT:()=>Dr,$Z:()=>UI,AFp:()=>H0,ALo:()=>gi,AaK:()=>Ee,CHM:()=>pu,CRH:()=>um,CZH:()=>Jd,CqO:()=>$w,D6c:()=>Qb,EJc:()=>Nb,EpF:()=>Ng,F4k:()=>jw,FYo:()=>Jv,FiY:()=>Ru,GfV:()=>vI,Gpc:()=>H,JOm:()=>bt,KtG:()=>gu,LFG:()=>hn,LSH:()=>Id,Lbi:()=>mm,Lck:()=>jn,MAs:()=>Vw,MGl:()=>Fg,MMx:()=>mc,NdJ:()=>j_,OlP:()=>Xt,Oqu:()=>r0,P3R:()=>tf,PXZ:()=>$b,Q6J:()=>V_,QGY:()=>Pg,Qsj:()=>$T,R0b:()=>ws,RDi:()=>o_,Rgc:()=>Zf,SBq:()=>lf,Sil:()=>wA,Suo:()=>yy,TTD:()=>Lc,TgZ:()=>Sf,VKq:()=>Gd,WLB:()=>ly,X6Q:()=>Im,XFs:()=>yt,Xpm:()=>Zi,Xts:()=>Hv,Y36:()=>gf,YKP:()=>b0,YNc:()=>Fw,Yjl:()=>zt,Yz7:()=>At,Z0I:()=>jr,ZZ4:()=>Cc,_Bn:()=>C0,_UZ:()=>xf,_Vd:()=>uf,_c5:()=>kA,_uU:()=>zg,aQg:()=>jy,c2e:()=>Sy,cJS:()=>En,cg1:()=>Yg,dDg:()=>Ub,dqk:()=>nn,eFA:()=>wm,eJc:()=>U0,ekj:()=>$g,eoX:()=>My,f3M:()=>$n,g9A:()=>by,h0i:()=>Ks,hGG:()=>$y,hij:()=>qg,iGM:()=>Wd,ifc:()=>ve,ip1:()=>Iy,jDz:()=>T0,kL8:()=>xC,lG2:()=>Tt,lcZ:()=>el,lqb:()=>Dd,lri:()=>Ry,n5z:()=>$l,oAB:()=>te,oJD:()=>cg,oxw:()=>hc,q4F:()=>wI,qLn:()=>pg,qOj:()=>O_,qZA:()=>Af,rWj:()=>Vb,s9C:()=>$_,sBO:()=>TA,s_b:()=>hy,soG:()=>_m,tb:()=>il,tp0:()=>ct,uIk:()=>Mw,vHH:()=>ge,vpe:()=>ss,wAp:()=>St,xp6:()=>MI,z2F:()=>Oy,zSh:()=>lc,zs3:()=>hf});var d=L(7579),J=L(727),F=L(9751),ue=L(6451),se=L(3099);function ae(s){for(let a in s)if(s[a]===ae)return a;throw Error("Could not find renamed property on target object.")}function ye(s,a){for(const u in a)a.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=a[u])}function Ee(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Ee).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function fe(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const G=ae({__forward_ref__:ae});function H(s){return s.__forward_ref__=H,s.toString=function(){return Ee(this())},s}function K(s){return He(s)?s():s}function He(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===H}function De(s){return s&&!!s.\u0275providers}const gt="https://g.co/ng/security#xss";class ge extends Error{constructor(a,u){super(Me(a,u)),this.code=a}}function Me(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}function Ne(s){return"string"==typeof s?s:null==s?"":String(s)}function Ge(s,a){throw new ge(-201,!1)}function mt(s,a){null==s&&function pt(s,a,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${a} <=Actual]`))}(a,s,null,"!=")}function At(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function En(s){return{providers:s.providers||[],imports:s.imports||[]}}function Nn(s){return Jr(s,Ti)||Jr(s,So)}function jr(s){return null!==Nn(s)}function Jr(s,a){return s.hasOwnProperty(a)?s[a]:null}function Ds(s){return s&&(s.hasOwnProperty(To)||s.hasOwnProperty(kr))?s[To]:null}const Ti=ae({\u0275prov:ae}),To=ae({\u0275inj:ae}),So=ae({ngInjectableDef:ae}),kr=ae({ngInjectorDef:ae});var yt=(()=>((yt=yt||{})[yt.Default=0]="Default",yt[yt.Host=1]="Host",yt[yt.Self=2]="Self",yt[yt.SkipSelf=4]="SkipSelf",yt[yt.Optional=8]="Optional",yt))();let _i;function Fr(s){const a=_i;return _i=s,a}function ei(s,a,u){const c=Nn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&yt.Optional?null:void 0!==a?a:void Ge(Ee(s))}const nn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Si={},yi="__NG_DI_FLAG__",pr="ngTempTokenPath",$r="ngTokenPath",Ln=/\n/gm,ti="\u0275",yn="__source";let Ts;function Qt(s){const a=Ts;return Ts=s,a}function cs(s,a=yt.Default){if(void 0===Ts)throw new ge(-203,!1);return null===Ts?ei(s,void 0,a):Ts.get(s,a&yt.Optional?null:void 0,a)}function hn(s,a=yt.Default){return(function Pc(){return _i}()||cs)(K(s),a)}function $n(s,a=yt.Default){return hn(s,sr(a))}function sr(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function qi(s){const a=[];for(let u=0;u<s.length;u++){const c=K(s[u]);if(Array.isArray(c)){if(0===c.length)throw new ge(900,!1);let h,m=yt.Default;for(let v=0;v<c.length;v++){const C=c[v],T=Wi(C);"number"==typeof T?-1===T?h=C.token:m|=T:h=C}a.push(hn(h,m))}else a.push(hn(c))}return a}function xn(s,a){return s[yi]=a,s.prototype[yi]=a,s}function Wi(s){return s[yi]}function B(s){return{toString:s}.toString()}var Z=(()=>((Z=Z||{})[Z.OnPush=0]="OnPush",Z[Z.Default=1]="Default",Z))(),ve=(()=>{return(s=ve||(ve={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ve;var s})();const ee={},Le=[],Rt=ae({\u0275cmp:ae}),en=ae({\u0275dir:ae}),Kn=ae({\u0275pipe:ae}),Pn=ae({\u0275mod:ae}),mn=ae({\u0275fac:ae}),Kt=ae({__NG_ELEMENT_ID__:ae});let Hr=0;function Zi(s){return B(()=>{const a=pl(s),u={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===Z.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||ve.Emulated,id:"c"+Hr++,styles:s.styles||Le,_:null,schemas:s.schemas||null,tView:null};Sp(u);const c=s.dependencies;return u.directiveDefs=ma(c,!1),u.pipeDefs=ma(c,!0),u})}function su(s){return vt(s)||un(s)}function ce(s){return null!==s}function te(s){return B(()=>({type:s.type,bootstrap:s.bootstrap||Le,declarations:s.declarations||Le,imports:s.imports||Le,exports:s.exports||Le,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function _t(s,a){if(null==s)return ee;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),u[h]=c,a&&(a[h]=m)}return u}function Tt(s){return B(()=>{const a=pl(s);return Sp(a),a})}function zt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function vt(s){return s[Rt]||null}function un(s){return s[en]||null}function tn(s){return s[Kn]||null}function Dr(s){const a=vt(s)||un(s)||tn(s);return null!==a&&a.standalone}function or(s,a){const u=s[Pn]||null;if(!u&&!0===a)throw new Error(`Type ${Ee(s)} does not have '\u0275mod' property.`);return u}function pl(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||Le,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:_t(s.inputs,a),outputs:_t(s.outputs)}}function Sp(s){s.features?.forEach(a=>a(s))}function ma(s,a){if(!s)return null;const u=a?tn:su;return()=>("function"==typeof s?s():s).map(c=>u(c)).filter(ce)}const xi=0,We=1,Lt=2,Rn=3,Ri=4,vn=5,ar=6,Ss=7,Hn=8,ou=9,hs=10,$t=11,au=12,Ao=13,As=14,xo=15,Yn=16,_a=17,xs=18,fs=19,ya=20,Lr=21,Tn=22,uu=1,Oc=2,va=7,no=8,Ro=9,Tr=10;function wi(s){return Array.isArray(s)&&"object"==typeof s[uu]}function Ei(s){return Array.isArray(s)&&!0===s[uu]}function lu(s){return 0!=(4&s.flags)}function wa(s){return s.componentOffset>-1}function kc(s){return 1==(1&s.flags)}function ri(s){return!!s.template}function ml(s){return 0!=(256&s[Lt])}function ps(s,a){return s.hasOwnProperty(mn)?s[mn]:null}class Mo{constructor(a,u,c){this.previousValue=a,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Lc(){return cu}function cu(s){return s.type.prototype.ngOnChanges&&(s.setInput=Vc),vh}function vh(){const s=Mp(this),a=s?.current;if(a){const u=s.previous;if(u===ee)s.previous=a;else for(let c in a)u[c]=a[c];s.current=null,this.ngOnChanges(a)}}function Vc(s,a,u,c){const h=this.declaredInputs[u],m=Mp(s)||function vl(s,a){return s[ro]=a}(s,{previous:ee,current:null}),v=m.current||(m.current={}),C=m.previous,T=C[h];v[h]=new Mo(T&&T.currentValue,a,C===ee),s[c]=a}Lc.ngInherit=!0;const ro="__ngSimpleChanges__";function Mp(s){return s[ro]||null}const ii=function(s,a,u){};function Sr(s){for(;Array.isArray(s);)s=s[xi];return s}function Ns(s,a){return Sr(a[s])}function Ar(s,a){return Sr(a[s.index])}function Eh(s,a){return s.data[a]}function zr(s,a){return s[a]}function gr(s,a){const u=a[s];return wi(u)?u:u[xi]}function Ps(s){return 64==(64&s[Lt])}function so(s,a){return null==a?null:s[a]}function Ca(s){s[xs]=0}function hu(s,a){s[vn]+=a;let u=s,c=s[Rn];for(;null!==c&&(1===a&&1===u[vn]||-1===a&&0===u[vn]);)c[vn]+=a,u=c,c=c[Rn]}const kt={lFrame:jc(null),bindingsEnabled:!0};function Cl(){return kt.bindingsEnabled}function de(){return kt.lFrame.lView}function Ut(){return kt.lFrame.tView}function pu(s){return kt.lFrame.contextLView=s,s[Hn]}function gu(s){return kt.lFrame.contextLView=null,s}function mr(){let s=No();for(;null!==s&&64===s.type;)s=s.parent;return s}function No(){return kt.lFrame.currentTNode}function si(s,a){const u=kt.lFrame;u.currentTNode=s,u.isParent=a}function Th(){return kt.lFrame.isParent}function ur(){const s=kt.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function Po(){return kt.lFrame.bindingIndex++}function Tl(s,a){const u=kt.lFrame;u.bindingIndex=u.bindingRootIndex=s,lr(a)}function lr(s){kt.lFrame.currentDirectiveIndex=s}function Bc(){return kt.lFrame.currentQueryIndex}function Sl(s){kt.lFrame.currentQueryIndex=s}function Ah(s){const a=s[We];return 2===a.type?a.declTNode:1===a.type?s[ar]:null}function Al(s,a,u){if(u&yt.SkipSelf){let h=a,m=s;for(;!(h=h.parent,null!==h||u&yt.Host||(h=Ah(m),null===h||(m=m[xo],10&h.type))););if(null===h)return!1;a=h,s=m}const c=kt.lFrame=yu();return c.currentTNode=a,c.lView=s,!0}function xl(s){const a=yu(),u=s[We];kt.lFrame=a,a.currentTNode=u.firstChild,a.lView=s,a.tView=u,a.contextLView=s,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function yu(){const s=kt.lFrame,a=null===s?null:s.child;return null===a?jc(s):a}function jc(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function vu(){const s=kt.lFrame;return kt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const xh=vu;function Rl(){const s=vu();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Vr(){return kt.lFrame.selectedIndex}function ks(s){kt.lFrame.selectedIndex=s}function On(){const s=kt.lFrame;return Eh(s.tView,s.selectedIndex)}function Pl(s,a){for(let u=a.directiveStart,c=a.directiveEnd;u<c;u++){const m=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:T,ngAfterViewChecked:R,ngOnDestroy:N}=m;v&&(s.contentHooks??(s.contentHooks=[])).push(-u,v),C&&((s.contentHooks??(s.contentHooks=[])).push(u,C),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(u,C)),T&&(s.viewHooks??(s.viewHooks=[])).push(-u,T),R&&((s.viewHooks??(s.viewHooks=[])).push(u,R),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(u,R)),null!=N&&(s.destroyHooks??(s.destroyHooks=[])).push(u,N)}}function $c(s,a,u){Gc(s,a,3,u)}function Hc(s,a,u,c){(3&s[Lt])===u&&Gc(s,a,u,c)}function Mh(s,a){let u=s[Lt];(3&u)===a&&(u&=2047,u+=1,s[Lt]=u)}function Gc(s,a,u,c){const m=c??-1,v=a.length-1;let C=0;for(let T=void 0!==c?65535&s[xs]:0;T<v;T++)if("number"==typeof a[T+1]){if(C=a[T],null!=c&&C>=c)break}else a[T]<0&&(s[xs]+=65536),(C<m||-1==m)&&(Da(s,u,a,T),s[xs]=(4294901760&s[xs])+T+2),T++}function Da(s,a,u,c){const h=u[c]<0,m=u[c+1],C=s[h?-u[c]:u[c]];if(h){if(s[Lt]>>11<s[xs]>>16&&(3&s[Lt])===a){s[Lt]+=2048,ii(4,C,m);try{m.call(C)}finally{ii(5,C,m)}}}else{ii(4,C,m);try{m.call(C)}finally{ii(5,C,m)}}}const Ta=-1;class Fs{constructor(a,u,c){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Sa(s,a,u){let c=0;for(;c<u.length;){const h=u[c];if("number"==typeof h){if(0!==h)break;c++;const m=u[c++],v=u[c++],C=u[c++];s.setAttribute(a,v,C,m)}else{const m=h,v=u[++c];Lo(m)?s.setProperty(a,m,v):s.setAttribute(a,m,v),c++}}return c}function zc(s){return 3===s||4===s||6===s}function Lo(s){return 64===s.charCodeAt(0)}function Vo(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let u=-1;for(let c=0;c<a.length;c++){const h=a[c];"number"==typeof h?u=h:0===u||Fl(s,u,h,null,-1===u||2===u?a[++c]:null)}}return s}function Fl(s,a,u,c,h){let m=0,v=s.length;if(-1===a)v=-1;else for(;m<s.length;){const C=s[m++];if("number"==typeof C){if(C===a){v=-1;break}if(C>a){v=m-1;break}}}for(;m<s.length;){const C=s[m];if("number"==typeof C)break;if(C===u){if(null===c)return void(null!==h&&(s[m+1]=h));if(c===s[m+1])return void(s[m+2]=h)}m++,null!==c&&m++,null!==h&&m++}-1!==v&&(s.splice(v,0,a),m=v+1),s.splice(m++,0,u),null!==c&&s.splice(m++,0,c),null!==h&&s.splice(m++,0,h)}function Uo(s){return s!==Ta}function oo(s){return 32767&s}function Bo(s,a){let u=function Nh(s){return s>>16}(s),c=a;for(;u>0;)c=c[xo],u--;return c}let Ll=!0;function Eu(s){const a=Ll;return Ll=s,a}const Vl=255,Ph=5;let jo=0;const Yi={};function qc(s,a){const u=xa(s,a);if(-1!==u)return u;const c=a[We];c.firstCreatePass&&(s.injectorIndex=a.length,Aa(c.data,s),Aa(a,null),Aa(c.blueprint,null));const h=Oh(s,a),m=s.injectorIndex;if(Uo(h)){const v=oo(h),C=Bo(h,a),T=C[We].data;for(let R=0;R<8;R++)a[m+R]=C[v+R]|T[v+R]}return a[m+8]=h,m}function Aa(s,a){s.push(0,0,0,0,0,0,0,0,a)}function xa(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function Oh(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=a;for(;null!==h;){if(c=bu(h),null===c)return Ta;if(u++,h=h[xo],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return Ta}function In(s,a,u){!function Ls(s,a,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Kt)&&(c=u[Kt]),null==c&&(c=u[Kt]=jo++);const h=c&Vl;a.data[s+(h>>Ph)]|=1<<h}(s,a,u)}function Ul(s,a,u){if(u&yt.Optional||void 0!==s)return s;Ge()}function Wc(s,a,u,c){if(u&yt.Optional&&void 0===c&&(c=null),!(u&(yt.Self|yt.Host))){const h=s[ou],m=Fr(void 0);try{return h?h.get(a,c,u&yt.Optional):ei(a,c,u&yt.Optional)}finally{Fr(m)}}return Ul(c,0,u)}function Bl(s,a,u,c=yt.Default,h){if(null!==s){if(1024&a[Lt]){const v=function Kc(s,a,u,c,h){let m=s,v=a;for(;null!==m&&null!==v&&1024&v[Lt]&&!(256&v[Lt]);){const C=jl(m,v,u,c|yt.Self,Yi);if(C!==Yi)return C;let T=m.parent;if(!T){const R=v[Lr];if(R){const N=R.get(u,Yi,c);if(N!==Yi)return N}T=bu(v),v=v[xo]}m=T}return h}(s,a,u,c,Yi);if(v!==Yi)return v}const m=jl(s,a,u,c,Yi);if(m!==Yi)return m}return Wc(a,u,c,h)}function jl(s,a,u,c,h){const m=function Zc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(Kt)?s[Kt]:void 0;return"number"==typeof a?a>=0?a&Vl:Lp:a}(u);if("function"==typeof m){if(!Al(a,s,c))return c&yt.Host?Ul(h,0,c):Wc(a,u,c,h);try{const v=m(c);if(null!=v||c&yt.Optional)return v;Ge()}finally{xh()}}else if("number"==typeof m){let v=null,C=xa(s,a),T=Ta,R=c&yt.Host?a[Yn][ar]:null;for((-1===C||c&yt.SkipSelf)&&(T=-1===C?Oh(s,a):a[C+8],T!==Ta&&Cu(c,!1)?(v=a[We],C=oo(T),a=Bo(T,a)):C=-1);-1!==C;){const N=a[We];if(Iu(m,C,N.data)){const V=_r(C,a,u,v,c,R);if(V!==Yi)return V}T=a[C+8],T!==Ta&&Cu(c,a[We].data[C+8]===R)&&Iu(m,C,a)?(v=N,C=oo(T),a=Bo(T,a)):C=-1}}return h}function _r(s,a,u,c,h,m){const v=a[We],C=v.data[s+8],N=$o(C,v,u,null==c?wa(C)&&Ll:c!=v&&0!=(3&C.type),h&yt.Host&&m===C);return null!==N?Qn(a,v,N,C):Yi}function $o(s,a,u,c,h){const m=s.providerIndexes,v=a.data,C=1048575&m,T=s.directiveStart,N=m>>20,W=h?C+N:s.directiveEnd;for(let X=c?C:C+N;X<W;X++){const we=v[X];if(X<T&&u===we||X>=T&&we.type===u)return X}if(h){const X=v[T];if(X&&ri(X)&&X.type===u)return T}return null}function Qn(s,a,u,c){let h=s[u];const m=a.data;if(function Jm(s){return s instanceof Fs}(h)){const v=h;v.resolving&&function Pe(s,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new ge(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Ue(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ne(s)}(m[u]));const C=Eu(v.canSeeViewProviders);v.resolving=!0;const T=v.injectImpl?Fr(v.injectImpl):null;Al(s,c,yt.Default);try{h=s[u]=v.factory(void 0,m,s,c),a.firstCreatePass&&u>=c.directiveStart&&function Xm(s,a,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:m}=a.type.prototype;if(c){const v=cu(a);(u.preOrderHooks??(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(s,v)}h&&(u.preOrderHooks??(u.preOrderHooks=[])).push(0-s,h),m&&((u.preOrderHooks??(u.preOrderHooks=[])).push(s,m),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(s,m))}(u,m[u],a)}finally{null!==T&&Fr(T),Eu(C),v.resolving=!1,xh()}}return h}function Iu(s,a,u){return!!(u[a+(s>>Ph)]&1<<s)}function Cu(s,a){return!(s&yt.Self||s&yt.Host&&a)}class Vs{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,c){return Bl(this._tNode,this._lView,a,sr(c),u)}}function Lp(){return new Vs(mr(),de())}function $l(s){return B(()=>{const a=s.prototype.constructor,u=a[mn]||Ho(a),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const m=h[mn]||Ho(h);if(m&&m!==u)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function Ho(s){return He(s)?()=>{const a=Ho(K(s));return a&&a()}:ps(s)}function bu(s){const a=s[We],u=a.type;return 2===u?a.declTNode:1===u?s[ar]:null}function Ra(s){return function kh(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const m=u[h];if(zc(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(m===a)return u[h+1];h+=2}}}return null}(mr(),s)}const Ma="__parameters__";function zo(s,a,u){return B(()=>{const c=function Go(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(a);function h(...m){if(this instanceof h)return c.apply(this,m),this;const v=new h(...m);return C.annotation=v,C;function C(T,R,N){const V=T.hasOwnProperty(Ma)?T[Ma]:Object.defineProperty(T,Ma,{value:[]})[Ma];for(;V.length<=N;)V.push(null);return(V[N]=V[N]||[]).push(v),T}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Xt{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=At({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ms(s,a){s.forEach(u=>Array.isArray(u)?ms(u,a):a(u))}function $p(s,a,u){a>=s.length?s.push(u):s.splice(a,0,u)}function Wo(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function oi(s,a,u){let c=ai(s,a);return c>=0?s[1|c]=u:(c=~c,function Jc(s,a,u,c){let h=s.length;if(h==a)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>a;)s[h]=s[h-2],h--;s[a]=u,s[a+1]=c}}(s,c,a,u)),c}function rn(s,a){const u=ai(s,a);if(u>=0)return s[1|u]}function ai(s,a){return function qr(s,a,u){let c=0,h=s.length>>u;for(;h!==c;){const m=c+(h-c>>1),v=s[m<<u];if(a===v)return m<<u;v>a?h=m:c=m+1}return~(h<<u)}(s,a,1)}const Ru=xn(zo("Optional"),8),ct=xn(zo("SkipSelf"),4);var bt=(()=>((bt=bt||{})[bt.Important=1]="Important",bt[bt.DashCase=2]="DashCase",bt))();const jh=new Map;let ts=0;const Y="__ngContext__";function re(s,a){wi(a)?(s[Y]=a[ya],function Hh(s){jh.set(s[ya],s)}(a)):s[Y]=a}let ns;function fo(s,a){return ns(s,a)}function ld(s){const a=s[Rn];return Ei(a)?a[Rn]:a}function cd(s){return Wp(s[Ao])}function ta(s){return Wp(s[Ri])}function Wp(s){for(;null!==s&&!Ei(s);)s=s[Ri];return s}function na(s,a,u,c,h){if(null!=c){let m,v=!1;Ei(c)?m=c:wi(c)&&(v=!0,c=c[xi]);const C=Sr(c);0===s&&null!==u?null==h?hd(a,u,C):Fa(a,u,C,h||null,!0):1===s&&null!==u?Fa(a,u,C,h||null,!0):2===s?function Qp(s,a,u){const c=ra(s,a);c&&function fd(s,a,u,c){s.removeChild(a,u,c)}(s,c,a,u)}(a,C,v):3===s&&a.destroyNode(C),null!=m&&function _d(s,a,u,c,h){const m=u[va];m!==Sr(u)&&na(a,s,c,m,h);for(let C=Tr;C<u.length;C++){const T=u[C];md(T[We],T,s,a,c,m)}}(a,s,m,u,h)}}function Kp(s,a,u){return s.createElement(a,u)}function r_(s,a){const u=s[Ro],c=u.indexOf(a),h=a[Rn];512&a[Lt]&&(a[Lt]&=-513,hu(h,-1)),u.splice(c,1)}function dd(s,a){if(s.length<=Tr)return;const u=Tr+a,c=s[u];if(c){const h=c[_a];null!==h&&h!==s&&r_(h,c),a>0&&(s[u-1][Ri]=c[Ri]);const m=Wo(s,Tr+a);!function Av(s,a){md(s,a,a[$t],2,null,null),a[xi]=null,a[ar]=null}(c[We],c);const v=m[fs];null!==v&&v.detachView(m[We]),c[Rn]=null,c[Ri]=null,c[Lt]&=-65}return c}function qh(s,a){if(!(128&a[Lt])){const u=a[$t];u.destroyNode&&md(s,a,u,3,null,null),function cI(s){let a=s[Ao];if(!a)return ka(s[We],s);for(;a;){let u=null;if(wi(a))u=a[Ao];else{const c=a[Tr];c&&(u=c)}if(!u){for(;a&&!a[Ri]&&a!==s;)wi(a)&&ka(a[We],a),a=a[Rn];null===a&&(a=s),wi(a)&&ka(a[We],a),u=a&&a[Ri]}a=u}}(a)}}function ka(s,a){if(!(128&a[Lt])){a[Lt]&=-65,a[Lt]|=128,function Fu(s,a){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=a[u[c]];if(!(h instanceof Fs)){const m=u[c+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const C=h[m[v]],T=m[v+1];ii(4,C,T);try{T.call(C)}finally{ii(5,C,T)}}else{ii(4,h,m);try{m.call(h)}finally{ii(5,h,m)}}}}}(s,a),function Rv(s,a){const u=s.cleanup,c=a[Ss];let h=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const v=u[m+3];v>=0?c[h=v]():c[h=-v].unsubscribe(),m+=2}else{const v=c[h=u[m+1]];u[m].call(v)}if(null!==c){for(let m=h+1;m<c.length;m++)(0,c[m])();a[Ss]=null}}(s,a),1===a[We].type&&a[$t].destroy();const u=a[_a];if(null!==u&&Ei(a[Rn])){u!==a[Rn]&&r_(u,a);const c=a[fs];null!==c&&c.detachView(s)}!function I(s){jh.delete(s[ya])}(a)}}function nc(s,a,u){return function Mv(s,a,u){let c=a;for(;null!==c&&40&c.type;)c=(a=c).parent;if(null===c)return u[xi];{const{componentOffset:h}=c;if(h>-1){const{encapsulation:m}=s.data[c.directiveStart+h];if(m===ve.None||m===ve.Emulated)return null}return Ar(c,u)}}(s,a.parent,u)}function Fa(s,a,u,c,h){s.insertBefore(a,u,c,h)}function hd(s,a,u){s.appendChild(a,u)}function i_(s,a,u,c,h){null!==c?Fa(s,a,u,c,h):hd(s,a,u)}function ra(s,a){return s.parentNode(a)}let Yp,La,wd,ic,Lu=function pd(s,a,u){return 40&s.type?Ar(s,u):null};function Vu(s,a,u,c){const h=nc(s,c,a),m=a[$t],C=function Zh(s,a,u){return Lu(s,a,u)}(c.parent||a[ar],c,a);if(null!=h)if(Array.isArray(u))for(let T=0;T<u.length;T++)i_(m,h,u[T],C,!1);else i_(m,h,u,C,!1);void 0!==Yp&&Yp(m,c,a,u,h)}function Yh(s,a){if(null!==a){const u=a.type;if(3&u)return Ar(a,s);if(4&u)return $s(-1,s[a.index]);if(8&u){const c=a.child;if(null!==c)return Yh(s,c);{const h=s[a.index];return Ei(h)?$s(-1,h):Sr(h)}}if(32&u)return fo(a,s)()||Sr(s[a.index]);{const c=Qh(s,a);return null!==c?Array.isArray(c)?c[0]:Yh(ld(s[Yn]),c):Yh(s,a.next)}}return null}function Qh(s,a){return null!==a?s[Yn][ar].projection[a.projection]:null}function $s(s,a){const u=Tr+s+1;if(u<a.length){const c=a[u],h=c[We].firstChild;if(null!==h)return Yh(c,h)}return a[va]}function gd(s,a,u,c,h,m,v){for(;null!=u;){const C=c[u.index],T=u.type;if(v&&0===a&&(C&&re(Sr(C),c),u.flags|=2),32!=(32&u.flags))if(8&T)gd(s,a,u.child,c,h,m,!1),na(a,s,h,C,m);else if(32&T){const R=fo(u,c);let N;for(;N=R();)na(a,s,h,N,m);na(a,s,h,C,m)}else 16&T?Jp(s,a,c,u,h,m):na(a,s,h,C,m);u=v?u.projectionNext:u.next}}function md(s,a,u,c,h,m){gd(u,c,s.firstChild,a,h,m,!1)}function Jp(s,a,u,c,h,m){const v=u[Yn],T=v[ar].projection[c.projection];if(Array.isArray(T))for(let R=0;R<T.length;R++)na(a,s,h,T[R],m);else gd(s,a,T,v[Rn],h,m,!0)}function _s(s,a,u){""===u?s.removeAttribute(a,"class"):s.setAttribute(a,"class",u)}function yd(s,a,u){const{mergedAttrs:c,classes:h,styles:m}=u;null!==c&&Sa(s,a,c),null!==h&&_s(s,a,h),null!==m&&function eg(s,a,u){s.setAttribute(a,"style",u)}(s,a,m)}function rc(s){return function vd(){if(void 0===La&&(La=null,nn.trustedTypes))try{La=nn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return La}()?.createHTML(s)||s}function o_(s){wd=s}function ng(){if(void 0===ic&&(ic=null,nn.trustedTypes))try{ic=nn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return ic}function Fi(s){return ng()?.createHTML(s)||s}function rg(s){return ng()?.createScriptURL(s)||s}class u_{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gt})`}}function Zr(s){return s instanceof u_?s.changingThisBreaksApplicationSecurity:s}function Li(s,a){const u=function sc(s){return s instanceof u_&&s.getTypeName()||null}(s);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see ${gt})`)}return u===a}class Jh{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(rc(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch{return null}}}class go{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const u=this.inertDocument.createElement("template");return u.innerHTML=rc(a),u}}const lg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function oc(s){return(s=String(s)).match(lg)?s:"unsafe:"+s}function Hs(s){const a={};for(const u of s.split(","))a[u]=!0;return a}function ju(...s){const a={};for(const u of s)for(const c in u)u.hasOwnProperty(c)&&(a[c]=!0);return a}const ac=Hs("area,br,col,hr,img,wbr"),l_=Hs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),c_=Hs("rp,rt"),g=ju(ac,ju(l_,Hs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ju(c_,Hs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ju(c_,l_)),E=Hs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),j=ju(E,Hs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Hs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Q=Hs("script,style,template");class xe{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let h=this.checkClobberedElement(u,u.nextSibling);if(h){u=h;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!g.hasOwnProperty(u))return this.sanitizedSomething=!0,!Q.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=a.attributes;for(let h=0;h<c.length;h++){const m=c.item(h),v=m.name,C=v.toLowerCase();if(!j.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let T=m.value;E[C]&&(T=oc(T)),this.buf.push(" ",v,'="',rt(T),'"')}return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();g.hasOwnProperty(u)&&!ac.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(rt(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const $e=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tt=/([^\#-~ |!])/g;function rt(s){return s.replace(/&/g,"&amp;").replace($e,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(tt,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let kn;function Ed(s){return"content"in s&&function Uv(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Bn=(()=>((Bn=Bn||{})[Bn.NONE=0]="NONE",Bn[Bn.HTML=1]="HTML",Bn[Bn.STYLE=2]="STYLE",Bn[Bn.SCRIPT=3]="SCRIPT",Bn[Bn.URL=4]="URL",Bn[Bn.RESOURCE_URL=5]="RESOURCE_URL",Bn))();function cg(s){const a=dg();return a?Fi(a.sanitize(Bn.HTML,s)||""):Li(s,"HTML")?Fi(Zr(s)):function mo(s,a){let u=null;try{kn=kn||function Xh(s){const a=new go(s);return function Bu(){try{return!!(new window.DOMParser).parseFromString(rc(""),"text/html")}catch{return!1}}()?new Jh(a):a}(s);let c=a?String(a):"";u=kn.getInertBodyElement(c);let h=5,m=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=m,m=u.innerHTML,u=kn.getInertBodyElement(c)}while(c!==m);return rc((new xe).sanitizeChildren(Ed(u)||u))}finally{if(u){const c=Ed(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}(function a_(){return void 0!==wd?wd:typeof document<"u"?document:void 0}(),Ne(s))}function Id(s){const a=dg();return a?a.sanitize(Bn.URL,s)||"":Li(s,"URL")?Zr(s):oc(Ne(s))}function Cd(s){const a=dg();if(a)return rg(a.sanitize(Bn.RESOURCE_URL,s)||"");if(Li(s,"ResourceURL"))return rg(Zr(s));throw new ge(904,!1)}function tf(s,a,u){return function Bv(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?Cd:Id}(a,u)(s)}function dg(){const s=de();return s&&s[au]}const Hv=new Xt("ENVIRONMENT_INITIALIZER"),bd=new Xt("INJECTOR",-1),nf=new Xt("INJECTOR_DEF_TYPES");class dI{get(a,u=Si){if(u===Si){const c=new Error(`NullInjectorError: No provider for ${Ee(a)}!`);throw c.name="NullInjectorError",c}return u}}function hg(...s){return{\u0275providers:rf(0,s),\u0275fromNgModule:!0}}function rf(s,...a){const u=[],c=new Set;let h;return ms(a,m=>{const v=m;Gv(v,u,[],c)&&(h||(h=[]),h.push(v))}),void 0!==h&&hI(h,u),u}function hI(s,a){for(let u=0;u<s.length;u++){const{providers:h}=s[u];zv(h,m=>{a.push(m)})}}function Gv(s,a,u,c){if(!(s=K(s)))return!1;let h=null,m=Ds(s);const v=!m&&vt(s);if(m||v){if(v&&!v.standalone)return!1;h=s}else{const T=s.ngModule;if(m=Ds(T),!m)return!1;h=T}const C=c.has(h);if(v){if(C)return!1;if(c.add(h),v.dependencies){const T="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const R of T)Gv(R,a,u,c)}}else{if(!m)return!1;{if(null!=m.imports&&!C){let R;c.add(h);try{ms(m.imports,N=>{Gv(N,a,u,c)&&(R||(R=[]),R.push(N))})}finally{}void 0!==R&&hI(R,a)}if(!C){const R=ps(h)||(()=>new h);a.push({provide:h,useFactory:R,deps:Le},{provide:nf,useValue:h,multi:!0},{provide:Hv,useValue:()=>hn(h),multi:!0})}const T=m.providers;null==T||C||zv(T,N=>{a.push(N)})}}return h!==s&&void 0!==s.providers}function zv(s,a){for(let u of s)De(u)&&(u=u.\u0275providers),Array.isArray(u)?zv(u,a):a(u)}const kT=ae({provide:String,useValue:ae});function qv(s){return null!==s&&"object"==typeof s&&kT in s}function $u(s){return"function"==typeof s}const lc=new Xt("Set Injector scope."),p_={},LT={};let Wv;function g_(){return void 0===Wv&&(Wv=new dI),Wv}class Dd{}class pI extends Dd{get destroyed(){return this._destroyed}constructor(a,u,c,h){super(),this.parent=u,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,af(a,v=>this.processProvider(v)),this.records.set(bd,sf(void 0,this)),h.has("environment")&&this.records.set(Dd,sf(void 0,this));const m=this.records.get(lc);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(nf.multi,Le,yt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=Qt(this),c=Fr(void 0);try{return a()}finally{Qt(u),Fr(c)}}get(a,u=Si,c=yt.Default){this.assertNotDestroyed(),c=sr(c);const h=Qt(this),m=Fr(void 0);try{if(!(c&yt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const T=function Qv(s){return"function"==typeof s||"object"==typeof s&&s instanceof Xt}(a)&&Nn(a);C=T&&this.injectableDefInScope(T)?sf(Zv(a),p_):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(c&yt.Self?g_():this.parent).get(a,u=c&yt.Optional&&u===Si?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[pr]=v[pr]||[]).unshift(Ee(a)),h)throw v;return function ni(s,a,u,c){const h=s[pr];throw a[yn]&&h.unshift(a[yn]),s.message=function $(s,a,u,c=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==ti?s.slice(2):s;let h=Ee(a);if(Array.isArray(a))h=a.map(Ee).join(" -> ");else if("object"==typeof a){let m=[];for(let v in a)if(a.hasOwnProperty(v)){let C=a[v];m.push(v+":"+("string"==typeof C?JSON.stringify(C):Ee(C)))}h=`{${m.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(Ln,"\n  ")}`}("\n"+s.message,h,u,c),s[$r]=h,s[pr]=null,s}(v,a,"R3InjectorError",this.source)}throw v}finally{Fr(m),Qt(h)}}resolveInjectorInitializers(){const a=Qt(this),u=Fr(void 0);try{const c=this.get(Hv.multi,Le,yt.Self);for(const h of c)h()}finally{Qt(a),Fr(u)}}toString(){const a=[],u=this.records;for(const c of u.keys())a.push(Ee(c));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(a){let u=$u(a=K(a))?a:K(a&&a.provide);const c=function UT(s){return qv(s)?sf(void 0,s.useValue):sf(Kv(s),p_)}(a);if($u(a)||!0!==a.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=sf(void 0,p_,!0),h.factory=()=>qi(h.multi),this.records.set(u,h)),u=a,h.multi.push(a)}this.records.set(u,c)}hydrate(a,u){return u.value===p_&&(u.value=LT,u.value=u.factory()),"object"==typeof u.value&&u.value&&function gI(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=K(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Zv(s){const a=Nn(s),u=null!==a?a.factory:ps(s);if(null!==u)return u;if(s instanceof Xt)throw new ge(204,!1);if(s instanceof Function)return function VT(s){const a=s.length;if(a>0)throw function Gl(s,a){const u=[];for(let c=0;c<s;c++)u.push(a);return u}(a,"?"),new ge(204,!1);const u=function Or(s){return s&&(s[Ti]||s[So])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new ge(204,!1)}function Kv(s,a,u){let c;if($u(s)){const h=K(s);return ps(h)||Zv(h)}if(qv(s))c=()=>K(s.useValue);else if(function fI(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...qi(s.deps||[]));else if(function FT(s){return!(!s||!s.useExisting)}(s))c=()=>hn(K(s.useExisting));else{const h=K(s&&(s.useClass||s.provide));if(!function Yv(s){return!!s.deps}(s))return ps(h)||Zv(h);c=()=>new h(...qi(s.deps))}return c}function sf(s,a,u=!1){return{factory:s,value:a,multi:u?[]:void 0}}function af(s,a){for(const u of s)Array.isArray(u)?af(u,a):u&&De(u)?af(u.\u0275providers,a):a(u)}class BT{}class mI{}class yI{resolveComponentFactory(a){throw function jT(s){const a=Error(`No component factory found for ${Ee(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let uf=(()=>{class s{}return s.NULL=new yI,s})();function m_(){return Hu(mr(),de())}function Hu(s,a){return new lf(Ar(s,a))}let lf=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=m_,s})();function fg(s){return s instanceof lf?s.nativeElement:s}class Jv{}let $T=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function HT(){const s=de(),u=gr(mr().index,s);return(wi(u)?u:s)[$t]}(),s})(),GT=(()=>{class s{}return s.\u0275prov=At({token:s,providedIn:"root",factory:()=>null}),s})();class vI{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const wI=new vI("15.2.8"),__={},ew="ngOriginalError";function tw(s){return s[ew]}class pg{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&tw(a);for(;u&&tw(u);)u=tw(u);return u||null}}function Va(s){return s instanceof Function?s():s}function TI(s,a,u){let c=s.length;for(;;){const h=s.indexOf(a,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=a.length;if(h+m===c||s.charCodeAt(h+m)<=32)return h}u=h+1}}const nw="ng-template";function rw(s,a,u){let c=0,h=!0;for(;c<s.length;){let m=s[c++];if("string"==typeof m&&h){const v=s[c++];if(u&&"class"===m&&-1!==TI(v.toLowerCase(),a,0))return!0}else{if(1===m){for(;c<s.length&&"string"==typeof(m=s[c++]);)if(m.toLowerCase()===a)return!0;return!1}"number"==typeof m&&(h=!1)}}return!1}function iw(s){return 4===s.type&&s.value!==nw}function cf(s,a,u){return a===(4!==s.type||u?s.value:nw)}function sw(s,a,u){let c=4;const h=s.attrs||[],m=function AI(s){for(let a=0;a<s.length;a++)if(zc(s[a]))return a;return s.length}(h);let v=!1;for(let C=0;C<a.length;C++){const T=a[C];if("number"!=typeof T){if(!v)if(4&c){if(c=2|1&c,""!==T&&!cf(s,T,u)||""===T&&1===a.length){if(ia(c))return!1;v=!0}}else{const R=8&c?T:a[++C];if(8&c&&null!==s.attrs){if(!rw(s.attrs,R,u)){if(ia(c))return!1;v=!0}continue}const V=SI(8&c?"class":T,h,iw(s),u);if(-1===V){if(ia(c))return!1;v=!0;continue}if(""!==R){let W;W=V>m?"":h[V+1].toLowerCase();const X=8&c?W:null;if(X&&-1!==TI(X,R,0)||2&c&&R!==W){if(ia(c))return!1;v=!0}}}}else{if(!v&&!ia(c)&&!ia(T))return!1;if(v&&ia(T))continue;v=!1,c=T|1&c}}return ia(c)||v}function ia(s){return 0==(1&s)}function SI(s,a,u,c){if(null===a)return-1;let h=0;if(c||!u){let m=!1;for(;h<a.length;){const v=a[h];if(v===s)return h;if(3===v||6===v)m=!0;else{if(1===v||2===v){let C=a[++h];for(;"string"==typeof C;)C=a[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=m?1:2}return-1}return function xI(s,a){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===a)return u;u++}return-1}(a,s)}function mg(s,a,u=!1){for(let c=0;c<a.length;c++)if(sw(s,a[c],u))return!0;return!1}function RI(s,a){return s?":not("+a.trim()+")":a}function XT(s){let a=s[0],u=1,c=2,h="",m=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const C=s[++u];h+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&c?h+="."+v:4&c&&(h+=" "+v);else""!==h&&!ia(v)&&(a+=RI(m,h),h=""),c=v,m=m||!ia(c);u++}return""!==h&&(a+=RI(m,h)),a}const Bt={};function MI(s){NI(Ut(),de(),Vr()+s,!1)}function NI(s,a,u,c){if(!c)if(3==(3&a[Lt])){const m=s.preOrderCheckHooks;null!==m&&$c(a,m,u)}else{const m=s.preOrderHooks;null!==m&&Hc(a,m,0,u)}ks(u)}function OI(s,a=null,u=null,c){const h=ow(s,a,u,c);return h.resolveInjectorInitializers(),h}function ow(s,a=null,u=null,c,h=new Set){const m=[u||Le,hg(s)];return c=c||("object"==typeof s?void 0:Ee(s)),new pI(m,a||g_(),c||null,h)}let hf=(()=>{class s{static create(u,c){if(Array.isArray(u))return OI({name:""},c,u,"");{const h=u.name??"";return OI({name:h},u.parent,u.providers,h)}}}return s.THROW_IF_NOT_FOUND=Si,s.NULL=new dI,s.\u0275prov=At({token:s,providedIn:"any",factory:()=>hn(bd)}),s.__NG_ELEMENT_ID__=-1,s})();function gf(s,a=yt.Default){const u=de();return null===u?hn(s,a):Bl(mr(),u,K(s),a)}function UI(){throw new Error("invalid")}function BI(s,a){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const m=u[c+1];if(-1!==m){const v=s.data[m];Sl(u[c]),v.contentQueries(2,a[m],m)}}}function E_(s,a,u,c,h,m,v,C,T,R,N){const V=a.blueprint.slice();return V[xi]=h,V[Lt]=76|c,(null!==N||s&&1024&s[Lt])&&(V[Lt]|=1024),Ca(V),V[Rn]=V[xo]=s,V[Hn]=u,V[hs]=v||s&&s[hs],V[$t]=C||s&&s[$t],V[au]=T||s&&s[au]||null,V[ou]=R||s&&s[ou]||null,V[ar]=m,V[ya]=function $h(){return ts++}(),V[Lr]=N,V[Yn]=2==a.type?s[Yn]:V,V}function wg(s,a,u,c,h){let m=s.data[a];if(null===m)m=function Sd(s,a,u,c,h){const m=No(),v=Th(),T=s.data[a]=function O(s,a,u,c,h,m){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,u,a,c,h);return null===s.firstChild&&(s.firstChild=T),null!==m&&(v?null==m.child&&null!==T.parent&&(m.child=T):null===m.next&&(m.next=T,T.prev=m)),T}(s,a,u,c,h),function Sh(){return kt.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=u,m.value=c,m.attrs=h;const v=function bl(){const s=kt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return si(m,!0),m}function Ad(s,a,u,c){if(0===u)return-1;const h=a.length;for(let m=0;m<u;m++)a.push(c),s.blueprint.push(c),s.data.push(null);return h}function pn(s,a,u){xl(a);try{const c=s.viewQuery;null!==c&&wf(1,c,u);const h=s.template;null!==h&&dw(s,a,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&BI(s,a),s.staticViewQueries&&wf(2,s.viewQuery,u);const m=s.components;null!==m&&function jI(s,a){for(let u=0;u<a.length;u++)yf(s,a[u])}(a,m)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{a[Lt]&=-5,Rl()}}function mf(s,a,u,c){const h=a[Lt];if(128!=(128&h)){xl(a);try{Ca(a),function gs(s){return kt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&dw(s,a,u,2,c);const v=3==(3&h);if(v){const R=s.preOrderCheckHooks;null!==R&&$c(a,R,null)}else{const R=s.preOrderHooks;null!==R&&Hc(a,R,0,null),Mh(a,0)}if(function _w(s){for(let a=cd(s);null!==a;a=ta(a)){if(!a[Oc])continue;const u=a[Ro];for(let c=0;c<u.length;c++){const h=u[c];512&h[Lt]||hu(h[Rn],1),h[Lt]|=512}}}(a),function ja(s){for(let a=cd(s);null!==a;a=ta(a))for(let u=Tr;u<a.length;u++){const c=a[u],h=c[We];Ps(c)&&mf(h,c,h.template,c[Hn])}}(a),null!==s.contentQueries&&BI(s,a),v){const R=s.contentCheckHooks;null!==R&&$c(a,R)}else{const R=s.contentHooks;null!==R&&Hc(a,R,1),Mh(a,1)}!function gS(s,a){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)ks(~h);else{const m=h,v=u[++c],C=u[++c];Tl(v,m),C(2,a[m])}}}finally{ks(-1)}}(s,a);const C=s.components;null!==C&&function mS(s,a){for(let u=0;u<a.length;u++)WI(s,a[u])}(a,C);const T=s.viewQuery;if(null!==T&&wf(2,T,c),v){const R=s.viewCheckHooks;null!==R&&$c(a,R)}else{const R=s.viewHooks;null!==R&&Hc(a,R,2),Mh(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[Lt]&=-41,512&a[Lt]&&(a[Lt]&=-513,hu(a[Rn],-1))}finally{Rl()}}}function dw(s,a,u,c,h){const m=Vr(),v=2&c;try{ks(-1),v&&a.length>Tn&&NI(s,a,Tn,!1),ii(v?2:0,h),u(c,h)}finally{ks(m),ii(v?3:1,h)}}function hw(s,a,u){if(lu(a)){const h=a.directiveEnd;for(let m=a.directiveStart;m<h;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,u[m],m)}}}function Mr(s,a,u){Cl()&&(function vS(s,a,u,c){const h=u.directiveStart,m=u.directiveEnd;wa(u)&&function Vi(s,a,u){const c=Ar(a,s),h=I_(u),m=s[hs],v=vf(s,E_(s,h,null,u.onPush?32:16,c,a,m,m.createRenderer(c,u),null,null,null));s[a.index]=v}(a,u,s.data[h+u.componentOffset]),s.firstCreatePass||qc(u,a),re(c,a);const v=u.initialInputs;for(let C=h;C<m;C++){const T=s.data[C],R=Qn(a,s,C,u);re(R,a),null!==v&&qI(0,C-h,R,T,0,v),ri(T)&&(gr(u.index,a)[Hn]=Qn(a,s,C,u))}}(s,a,u,Ar(u,a)),64==(64&u.flags)&&Ci(s,a,u))}function $I(s,a,u=Ar){const c=a.localNames;if(null!==c){let h=a.index+1;for(let m=0;m<c.length;m+=2){const v=c[m+1],C=-1===v?u(a,s):s[v];s[h++]=C}}}function I_(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=me(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function me(s,a,u,c,h,m,v,C,T,R){const N=Tn+c,V=N+h,W=function is(s,a){const u=[];for(let c=0;c<a;c++)u.push(c<s?null:Bt);return u}(N,V),X="function"==typeof R?R():R;return W[We]={type:s,blueprint:W,template:u,queries:null,viewQuery:C,declTNode:a,data:W.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:T,consts:X,incompleteFirstPass:!1}}function yo(s,a,u,c){const h=x_(a);null===u?h.push(c):(h.push(u),s.firstCreatePass&&R_(s).push(c,h.length-1))}function HI(s,a,u,c){for(let h in s)if(s.hasOwnProperty(h)){u=null===u?{}:u;const m=s[h];null===c?vo(u,a,h,m):c.hasOwnProperty(h)&&vo(u,a,c[h],m)}return u}function vo(s,a,u,c){s.hasOwnProperty(u)?s[u].push(a,c):s[u]=[a,c]}function Dt(s,a,u,c,h,m,v,C){const T=Ar(a,u);let N,R=a.inputs;!C&&null!=R&&(N=R[c])?(Cg(s,u,N,c,h),wa(a)&&function C_(s,a){const u=gr(a,s);16&u[Lt]||(u[Lt]|=32)}(u,a.index)):3&a.type&&(c=function fw(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=v?v(h,a.value||"",c):h,m.setProperty(T,c,h))}function pw(s,a,u,c){if(Cl()){const h=null===c?null:{"":-1},m=function li(s,a){const u=s.directiveRegistry;let c=null,h=null;if(u)for(let m=0;m<u.length;m++){const v=u[m];if(mg(a,v.selectors,!1))if(c||(c=[]),ri(v))if(null!==v.findHostDirectiveDefs){const C=[];h=h||new Map,v.findHostDirectiveDefs(v,C,h),c.unshift(...C,v),Ua(s,a,C.length)}else c.unshift(v),Ua(s,a,0);else h=h||new Map,v.findHostDirectiveDefs?.(v,c,h),c.push(v)}return null===c?null:[c,h]}(s,u);let v,C;null===m?v=C=null:[v,C]=m,null!==v&&T_(s,a,u,v,h,C),h&&function wS(s,a,u){if(a){const c=s.localNames=[];for(let h=0;h<a.length;h+=2){const m=u[a[h+1]];if(null==m)throw new ge(-301,!1);c.push(a[h],m)}}}(u,c,h)}u.mergedAttrs=Vo(u.mergedAttrs,u.attrs)}function T_(s,a,u,c,h,m){for(let R=0;R<c.length;R++)In(qc(u,a),s,c[R].type);!function gw(s,a,u){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+u,s.providerIndexes=a}(u,s.data.length,c.length);for(let R=0;R<c.length;R++){const N=c[R];N.providersResolver&&N.providersResolver(N)}let v=!1,C=!1,T=Ad(s,a,c.length,null);for(let R=0;R<c.length;R++){const N=c[R];u.mergedAttrs=Vo(u.mergedAttrs,N.hostAttrs),zI(s,u,a,T,N),GI(T,N,h),null!==N.contentQueries&&(u.flags|=4),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(u.flags|=64);const V=N.type.prototype;!v&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(u.index),v=!0),!C&&(V.ngOnChanges||V.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(u.index),C=!0),T++}!function it(s,a,u){const h=a.directiveEnd,m=s.data,v=a.attrs,C=[];let T=null,R=null;for(let N=a.directiveStart;N<h;N++){const V=m[N],W=u?u.get(V):null,we=W?W.outputs:null;T=HI(V.inputs,N,T,W?W.inputs:null),R=HI(V.outputs,N,R,we);const Ve=null===T||null===v||iw(a)?null:mw(T,N,v);C.push(Ve)}null!==T&&(T.hasOwnProperty("class")&&(a.flags|=8),T.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=C,a.inputs=T,a.outputs=R}(s,u,m)}function Ci(s,a,u){const c=u.directiveStart,h=u.directiveEnd,m=u.index,v=function Qm(){return kt.lFrame.currentDirectiveIndex}();try{ks(m);for(let C=c;C<h;C++){const T=s.data[C],R=a[C];lr(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&S_(T,R)}}finally{ks(-1),lr(v)}}function S_(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function Ua(s,a,u){a.componentOffset=u,(s.components??(s.components=[])).push(a.index)}function GI(s,a,u){if(u){if(a.exportAs)for(let c=0;c<a.exportAs.length;c++)u[a.exportAs[c]]=s;ri(a)&&(u[""]=s)}}function zI(s,a,u,c,h){s.data[c]=h;const m=h.factory||(h.factory=ps(h.type)),v=new Fs(m,ri(h),gf);s.blueprint[c]=v,u[c]=v,function _S(s,a,u,c,h){const m=h.hostBindings;if(m){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const C=~a.index;(function yS(s){let a=s.length;for(;a>0;){const u=s[--a];if("number"==typeof u&&u<0)return u}return 0})(v)!=C&&v.push(C),v.push(u,c,m)}}(s,a,c,Ad(s,u,h.hostVars,Bt),h)}function Ba(s,a,u,c,h,m){const v=Ar(s,a);!function _f(s,a,u,c,h,m,v){if(null==m)s.removeAttribute(a,h,u);else{const C=null==v?Ne(m):v(m,c||"",h);s.setAttribute(a,h,C,u)}}(a[$t],v,m,s.value,u,c,h)}function qI(s,a,u,c,h,m){const v=m[a];if(null!==v){const C=c.setInput;for(let T=0;T<v.length;){const R=v[T++],N=v[T++],V=v[T++];null!==C?c.setInput(u,V,R,N):u[N]=V}}}function mw(s,a,u){let c=null,h=0;for(;h<u.length;){const m=u[h];if(0!==m)if(5!==m){if("number"==typeof m)break;if(s.hasOwnProperty(m)){null===c&&(c=[]);const v=s[m];for(let C=0;C<v.length;C+=2)if(v[C]===a){c.push(m,v[C+1],u[h+1]);break}}h+=2}else h+=2;else h+=4}return c}function Eg(s,a,u,c){return[s,!0,!1,a,null,0,c,u,null,null]}function WI(s,a){const u=gr(a,s);if(Ps(u)){const c=u[We];48&u[Lt]?mf(c,u,c.template,u[Hn]):u[vn]>0&&yw(u)}}function yw(s){for(let c=cd(s);null!==c;c=ta(c))for(let h=Tr;h<c.length;h++){const m=c[h];if(Ps(m))if(512&m[Lt]){const v=m[We];mf(v,m,v.template,m[Hn])}else m[vn]>0&&yw(m)}const u=s[We].components;if(null!==u)for(let c=0;c<u.length;c++){const h=gr(u[c],s);Ps(h)&&h[vn]>0&&yw(h)}}function yf(s,a){const u=gr(a,s),c=u[We];(function ZI(s,a){for(let u=a.length;u<s.blueprint.length;u++)a.push(s.blueprint[u])})(c,u),pn(c,u,u[Hn])}function vf(s,a){return s[Ao]?s[As][Ri]=a:s[Ao]=a,s[As]=a,a}function Ig(s){for(;s;){s[Lt]|=32;const a=ld(s);if(ml(s)&&!a)return s;s=a}return null}function A_(s,a,u,c=!0){const h=a[hs];h.begin&&h.begin();try{mf(s,a,s.template,u)}catch(v){throw c&&QI(a,v),v}finally{h.end&&h.end()}}function wf(s,a,u){Sl(0),a(s,u)}function x_(s){return s[Ss]||(s[Ss]=[])}function R_(s){return s.cleanup||(s.cleanup=[])}function QI(s,a){const u=s[ou],c=u?u.get(pg,null):null;c&&c.handleError(a)}function Cg(s,a,u,c,h){for(let m=0;m<u.length;){const v=u[m++],C=u[m++],T=a[v],R=s.data[v];null!==R.setInput?R.setInput(T,h,c,C):T[C]=h}}function M_(s,a,u){let c=u?s.styles:null,h=u?s.classes:null,m=0;if(null!==a)for(let v=0;v<a.length;v++){const C=a[v];"number"==typeof C?m=C:1==m?h=fe(h,C):2==m&&(c=fe(c,C+": "+a[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}function cc(s,a,u,c,h=!1){for(;null!==u;){const m=a[u.index];if(null!==m&&c.push(Sr(m)),Ei(m))for(let C=Tr;C<m.length;C++){const T=m[C],R=T[We].firstChild;null!==R&&cc(T[We],T,R,c)}const v=u.type;if(8&v)cc(s,a,u.child,c);else if(32&v){const C=fo(u,a);let T;for(;T=C();)c.push(T)}else if(16&v){const C=Qh(a,u);if(Array.isArray(C))c.push(...C);else{const T=ld(a[Yn]);cc(T[We],T,C,c,!0)}}u=h?u.projectionNext:u.next}return c}class bg{get rootNodes(){const a=this._lView,u=a[We];return cc(u,a,u.firstChild,[])}constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Hn]}set context(a){this._lView[Hn]=a}get destroyed(){return 128==(128&this._lView[Lt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[Rn];if(Ei(a)){const u=a[no],c=u?u.indexOf(this):-1;c>-1&&(dd(a,c),Wo(u,c))}this._attachedToViewContainer=!1}qh(this._lView[We],this._lView)}onDestroy(a){yo(this._lView[We],this._lView,null,a)}markForCheck(){Ig(this._cdRefInjectingView||this._lView)}detach(){this._lView[Lt]&=-65}reattach(){this._lView[Lt]|=64}detectChanges(){A_(this._lView[We],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zh(s,a){md(s,a,a[$t],2,null,null)}(this._lView[We],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=a}}class Dg extends bg{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;A_(a[We],a,a[Hn],!1)}checkNoChanges(){}get context(){return null}}class XI extends uf{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=vt(a);return new Ef(u,this.ngModule)}}function JI(s){const a=[];for(let u in s)s.hasOwnProperty(u)&&a.push({propName:s[u],templateName:u});return a}class vw{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,c){c=sr(c);const h=this.injector.get(a,__,c);return h!==__||u===__?h:this.parentInjector.get(a,u,c)}}class Ef extends mI{get inputs(){return JI(this.componentDef.inputs)}get outputs(){return JI(this.componentDef.outputs)}constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function JT(s){return s.map(XT).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}create(a,u,c,h){let m=(h=h||this.ngModule)instanceof Dd?h:h?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new vw(a,m):a,C=v.get(Jv,null);if(null===C)throw new ge(407,!1);const T=v.get(GT,null),R=C.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",V=c?function sa(s,a,u){return s.selectRootElement(a,u===ve.ShadowDom)}(R,c,this.componentDef.encapsulation):Kp(R,N,function N_(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(N)),W=this.componentDef.onPush?288:272,X=me(0,null,null,1,0,null,null,null,null,null),we=E_(null,X,null,W,null,null,C,R,T,v,null);let Ve,Ke;xl(we);try{const ht=this.componentDef;let Mt,Re=null;ht.findHostDirectiveDefs?(Mt=[],Re=new Map,ht.findHostDirectiveDefs(ht,Mt,Re),Mt.push(ht)):Mt=[ht];const Ht=function P_(s,a){const u=s[We],c=Tn;return s[c]=a,wg(u,c,2,"#host",null)}(we,V),Wn=function ww(s,a,u,c,h,m,v,C){const T=h[We];!function Ew(s,a,u,c){for(const h of s)a.mergedAttrs=Vo(a.mergedAttrs,h.hostAttrs);null!==a.mergedAttrs&&(M_(a,a.mergedAttrs,!0),null!==u&&yd(c,u,a))}(c,s,a,v);const R=m.createRenderer(a,u),N=E_(h,I_(u),null,u.onPush?32:16,h[s.index],s,m,R,C||null,null,null);return T.firstCreatePass&&Ua(T,s,c.length-1),vf(h,N),h[s.index]=N}(Ht,V,ht,Mt,we,C,R);Ke=Eh(X,Tn),V&&function Cw(s,a,u,c){if(c)Sa(s,u,["ng-version",wI.full]);else{const{attrs:h,classes:m}=function eS(s){const a=[],u=[];let c=1,h=2;for(;c<s.length;){let m=s[c];if("string"==typeof m)2===h?""!==m&&a.push(m,s[++c]):8===h&&u.push(m);else{if(!ia(h))break;h=m}c++}return{attrs:a,classes:u}}(a.selectors[0]);h&&Sa(s,u,h),m&&m.length>0&&_s(s,u,m.join(" "))}}(R,ht,V,c),void 0!==u&&function tC(s,a,u){const c=s.projection=[];for(let h=0;h<a.length;h++){const m=u[h];c.push(null!=m?Array.from(m):null)}}(Ke,this.ngContentSelectors,u),Ve=function Iw(s,a,u,c,h,m){const v=mr(),C=h[We],T=Ar(v,h);T_(C,h,v,u,null,c);for(let N=0;N<u.length;N++)re(Qn(h,C,v.directiveStart+N,v),h);Ci(C,h,v),T&&re(T,h);const R=Qn(h,C,v.directiveStart+v.componentOffset,v);if(s[Hn]=h[Hn]=R,null!==m)for(const N of m)N(R,a);return hw(C,v,s),R}(Wn,ht,Mt,Re,we,[nC]),pn(X,we,null)}finally{Rl()}return new eC(this.componentType,Ve,Hu(Ke,we),we,Ke)}}class eC extends BT{constructor(a,u,c,h,m){super(),this.location=c,this._rootLView=h,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new Dg(h),this.componentType=a}setInput(a,u){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[a])){const m=this._rootLView;Cg(m[We],m,h,a,u),Ig(gr(this._tNode.index,m))}}get injector(){return new Vs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function nC(){const s=mr();Pl(de()[We],s)}function O_(s){let a=function rC(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;a;){let h;if(ri(s))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new ge(903,!1);h=a.\u0275dir}if(h){if(u){c.push(h);const v=s;v.inputs=Tg(s.inputs),v.declaredInputs=Tg(s.declaredInputs),v.outputs=Tg(s.outputs);const C=h.hostBindings;C&&bw(s,C);const T=h.viewQuery,R=h.contentQueries;if(T&&sC(s,T),R&&CS(s,R),ye(s.inputs,h.inputs),ye(s.declaredInputs,h.declaredInputs),ye(s.outputs,h.outputs),ri(h)&&h.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let v=0;v<m.length;v++){const C=m[v];C&&C.ngInherit&&C(s),C===O_&&(u=!1)}}a=Object.getPrototypeOf(a)}!function iC(s){let a=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=a+=h.hostVars,h.hostAttrs=Vo(h.hostAttrs,u=Vo(u,h.hostAttrs))}}(c)}function Tg(s){return s===ee?{}:s===Le?[]:s}function sC(s,a){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{a(c,h),u(c,h)}:a}function CS(s,a){const u=s.contentQueries;s.contentQueries=u?(c,h,m)=>{a(c,h,m),u(c,h,m)}:a}function bw(s,a){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{a(c,h),u(c,h)}:a}function F_(s){return!!xw(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function xw(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function oa(s,a,u){return s[a]=u}function Kr(s,a,u){return!Object.is(s[a],u)&&(s[a]=u,!0)}function Mw(s,a,u,c){const h=de();return Kr(h,Po(),a)&&(Ut(),Ba(On(),h,s,a,u,c)),Mw}function xd(s,a,u,c){return Kr(s,Po(),u)?a+Ne(u)+c:Bt}function Fw(s,a,u,c,h,m,v,C){const T=de(),R=Ut(),N=s+Tn,V=R.firstCreatePass?function L_(s,a,u,c,h,m,v,C,T){const R=a.consts,N=wg(a,s,4,v||null,so(R,C));pw(a,u,N,so(R,T)),Pl(a,N);const V=N.tView=me(2,N,c,h,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,R);return null!==a.queries&&(a.queries.template(a,N),V.queries=a.queries.embeddedTView(N)),N}(N,R,T,a,u,c,h,m,v):R.data[N];si(V,!1);const W=T[$t].createComment("");Vu(R,T,W,V),re(W,T),vf(T,T[N]=Eg(W,T,W,V)),kc(V)&&Mr(R,T,V),null!=v&&$I(T,V,C)}function Vw(s){return zr(function Ym(){return kt.lFrame.contextLView}(),Tn+s)}function V_(s,a,u){const c=de();return Kr(c,Po(),a)&&Dt(Ut(),On(),c,s,a,c[$t],u,!1),V_}function Nd(s,a,u,c,h){const v=h?"class":"style";Cg(s,u,a.inputs[v],v,c)}function Sf(s,a,u,c){const h=de(),m=Ut(),v=Tn+s,C=h[$t],T=m.firstCreatePass?function Uw(s,a,u,c,h,m){const v=a.consts,T=wg(a,s,2,c,so(v,h));return pw(a,u,T,so(v,m)),null!==T.attrs&&M_(T,T.attrs,!1),null!==T.mergedAttrs&&M_(T,T.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,T),T}(v,m,h,a,u,c):m.data[v],R=h[v]=Kp(C,a,function Rh(){return kt.lFrame.currentNamespace}()),N=kc(T);return si(T,!0),yd(C,R,T),32!=(32&T.flags)&&Vu(m,h,R,T),0===function Ch(){return kt.lFrame.elementDepthCount}()&&re(R,h),function Il(){kt.lFrame.elementDepthCount++}(),N&&(Mr(m,h,T),hw(m,T,h)),null!==c&&$I(h,T),Sf}function Af(){let s=mr();Th()?function Dl(){kt.lFrame.isParent=!1}():(s=s.parent,si(s,!1));const a=s;!function bh(){kt.lFrame.elementDepthCount--}();const u=Ut();return u.firstCreatePass&&(Pl(u,s),lu(s)&&u.queries.elementEnd(s)),null!=a.classesWithoutHost&&function wu(s){return 0!=(8&s.flags)}(a)&&Nd(u,a,de(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function ko(s){return 0!=(16&s.flags)}(a)&&Nd(u,a,de(),a.stylesWithoutHost,!1),Af}function xf(s,a,u,c){return Sf(s,a,u,c),Af(),xf}function Ng(){return de()}function Pg(s){return!!s&&"function"==typeof s.then}function jw(s){return!!s&&"function"==typeof s.subscribe}const $w=jw;function j_(s,a,u,c){const h=de(),m=Ut(),v=mr();return function Hw(s,a,u,c,h,m,v){const C=kc(c),R=s.firstCreatePass&&R_(s),N=a[Hn],V=x_(a);let W=!0;if(3&c.type||v){const Ve=Ar(c,a),Ke=v?v(Ve):Ve,ht=V.length,Mt=v?Ht=>v(Sr(Ht[c.index])):c.index;let Re=null;if(!v&&C&&(Re=function Og(s,a,u,c){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const v=h[m];if(v===u&&h[m+1]===c){const C=a[Ss],T=h[m+2];return C.length>T?C[T]:null}"string"==typeof v&&(m+=2)}return null}(s,a,h,c.index)),null!==Re)(Re.__ngLastListenerFn__||Re).__ngNextListenerFn__=m,Re.__ngLastListenerFn__=m,W=!1;else{m=Rf(c,a,N,m,!1);const Ht=u.listen(Ke,h,m);V.push(m,Ht),R&&R.push(h,Mt,ht,ht+1)}}else m=Rf(c,a,N,m,!1);const X=c.outputs;let we;if(W&&null!==X&&(we=X[h])){const Ve=we.length;if(Ve)for(let Ke=0;Ke<Ve;Ke+=2){const Wn=a[we[Ke]][we[Ke+1]].subscribe(m),Cr=V.length;V.push(m,Wn),R&&R.push(h,c.index,Cr,-(Cr+1))}}}(m,h,h[$t],v,s,a,c),j_}function kg(s,a,u,c){try{return ii(6,a,u),!1!==u(c)}catch(h){return QI(s,h),!1}finally{ii(7,a,u)}}function Rf(s,a,u,c,h){return function m(v){if(v===Function)return c;Ig(s.componentOffset>-1?gr(s.index,a):a);let T=kg(a,u,c,v),R=m.__ngNextListenerFn__;for(;R;)T=kg(a,u,R,v)&&T,R=R.__ngNextListenerFn__;return h&&!1===T&&(v.preventDefault(),v.returnValue=!1),T}}function hc(s=1){return function Np(s){return(kt.lFrame.contextLView=function Ml(s,a){for(;s>0;)a=a[xo],s--;return a}(s,kt.lFrame.contextLView))[Hn]}(s)}function $_(s,a,u){return Fg(s,"",a,"",u),$_}function Fg(s,a,u,c,h){const m=de(),v=xd(m,a,u,c);return v!==Bt&&Dt(Ut(),On(),m,s,v,m[$t],h,!1),Fg}function pc(s,a){return s<<17|a<<2}function wo(s){return s>>17&32767}function qw(s){return 2|s}function Pd(s){return(131068&s)>>2}function Ww(s,a){return-131069&s|a<<2}function Od(s){return 1|s}function Fd(s,a,u,c,h){const m=s[u+1],v=null===a;let C=c?wo(m):Pd(m),T=!1;for(;0!==C&&(!1===T||v);){const N=s[C+1];RS(s[C],a)&&(T=!0,s[C+1]=c?Od(N):qw(N)),C=c?wo(N):Pd(N)}T&&(s[u+1]=c?qw(m):Od(m))}function RS(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&ai(s,a)>=0}function $g(s,a){return function wn(s,a,u,c){const h=de(),m=Ut(),v=function Pi(s){const a=kt.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,u}(2);m.firstUpdatePass&&function mC(s,a,u,c){const h=s.data;if(null===h[u+1]){const m=h[Vr()],v=function gC(s,a){return a>=s.expandoStartIndex}(s,u);(function n0(s,a){return 0!=(s.flags&(a?8:16))})(m,c)&&null===a&&!v&&(a=!1),a=function OS(s,a,u,c){const h=function ba(s){const a=kt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let m=c?a.residualClasses:a.residualStyles;if(null===h)0===(c?a.classBindings:a.styleBindings)&&(u=Nf(u=Mf(null,s,a,u,c),a.attrs,c),m=null);else{const v=a.directiveStylingLast;if(-1===v||s[v]!==h)if(u=Mf(h,s,a,u,c),null===m){let T=function _C(s,a,u){const c=u?a.classBindings:a.styleBindings;if(0!==Pd(c))return s[wo(c)]}(s,a,c);void 0!==T&&Array.isArray(T)&&(T=Mf(null,s,a,T[1],c),T=Nf(T,a.attrs,c),function yC(s,a,u,c){s[wo(u?a.classBindings:a.styleBindings)]=c}(s,a,c,T))}else m=function vC(s,a,u){let c;const h=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<h;m++)c=Nf(c,s[m].hostAttrs,u);return Nf(c,a.attrs,u)}(s,a,c)}return void 0!==m&&(c?a.residualClasses=m:a.residualStyles=m),u}(h,m,a,c),function dC(s,a,u,c,h,m){let v=m?a.classBindings:a.styleBindings,C=wo(v),T=Pd(v);s[c]=u;let N,R=!1;if(Array.isArray(u)?(N=u[1],(null===N||ai(u,N)>0)&&(R=!0)):N=u,h)if(0!==T){const W=wo(s[C+1]);s[c+1]=pc(W,C),0!==W&&(s[W+1]=Ww(s[W+1],c)),s[C+1]=function cC(s,a){return 131071&s|a<<17}(s[C+1],c)}else s[c+1]=pc(C,0),0!==C&&(s[C+1]=Ww(s[C+1],c)),C=c;else s[c+1]=pc(T,0),0===C?C=c:s[T+1]=Ww(s[T+1],c),T=c;R&&(s[c+1]=qw(s[c+1])),Fd(s,N,c,!0),Fd(s,N,c,!1),function hC(s,a,u,c,h){const m=h?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof a&&ai(m,a)>=0&&(u[c+1]=Od(u[c+1]))}(a,N,s,c,m),v=pc(C,T),m?a.classBindings=v:a.styleBindings=v}(h,m,a,u,v,c)}}(m,s,v,c),a!==Bt&&Kr(h,v,a)&&function Pf(s,a,u,c,h,m,v,C){if(!(3&a.type))return;const T=s.data,R=T[C+1],N=function AS(s){return 1==(1&s)}(R)?t0(T,a,u,h,Pd(R),v):void 0;Of(N)||(Of(m)||function SS(s){return 2==(2&s)}(R)&&(m=t0(T,null,u,h,C,v)),function po(s,a,u,c,h){if(a)h?s.addClass(u,c):s.removeClass(u,c);else{let m=-1===c.indexOf("-")?void 0:bt.DashCase;null==h?s.removeStyle(u,c,m):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),m|=bt.Important),s.setStyle(u,c,h,m))}}(c,v,Ns(Vr(),u),h,m))}(m,m.data[Vr()],h,h[$t],s,h[v+1]=function z_(s,a){return null==s||""===s||("string"==typeof a?s+=a:"object"==typeof s&&(s=Ee(Zr(s)))),s}(a,u),c,v)}(s,a,null,!0),$g}function Mf(s,a,u,c,h){let m=null;const v=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<v&&(m=a[C],c=Nf(c,m.hostAttrs,h),m!==s);)C++;return null!==s&&(u.directiveStylingLast=C),c}function Nf(s,a,u){const c=u?1:2;let h=-1;if(null!==a)for(let m=0;m<a.length;m++){const v=a[m];"number"==typeof v?h=v:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),oi(s,v,!!u||a[++m]))}return void 0===s?null:s}function t0(s,a,u,c,h,m){const v=null===a;let C;for(;h>0;){const T=s[h],R=Array.isArray(T),N=R?T[1]:T,V=null===N;let W=u[h+1];W===Bt&&(W=V?Le:void 0);let X=V?rn(W,c):N===c?W:void 0;if(R&&!Of(X)&&(X=rn(T,c)),Of(X)&&(C=X,v))return C;const we=s[h+1];h=v?wo(we):Pd(we)}if(null!==a){let T=m?a.residualClasses:a.residualStyles;null!=T&&(C=rn(T,c))}return C}function Of(s){return void 0!==s}function zg(s,a=""){const u=de(),c=Ut(),h=s+Tn,m=c.firstCreatePass?wg(c,h,1,a,null):c.data[h],v=u[h]=function tc(s,a){return s.createText(a)}(u[$t],a);Vu(c,u,v,m),si(m,!1)}function r0(s){return qg("",s,""),r0}function qg(s,a,u){const c=de(),h=xd(c,s,a,u);return h!==Bt&&function $a(s,a,u){const c=Ns(a,s);!function Zp(s,a,u){s.setValue(a,u)}(s[$t],c,u)}(c,Vr(),h),qg}const Za=void 0;var Vf=["en",[["a","p"],["AM","PM"],Za],[["AM","PM"],Za,Za],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Za,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Za,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Za,"{1} 'at' {0}",Za],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function AC(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Uf={};function Yg(s){const a=function LS(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=f0(a);if(u)return u;const c=a.split("-")[0];if(u=f0(c),u)return u;if("en"===c)return Vf;throw new ge(701,!1)}function xC(s){return Yg(s)[St.PluralCase]}function f0(s){return s in Uf||(Uf[s]=nn.ng&&nn.ng.common&&nn.ng.common.locales&&nn.ng.common.locales[s]),Uf[s]}var St=(()=>((St=St||{})[St.LocaleId=0]="LocaleId",St[St.DayPeriodsFormat=1]="DayPeriodsFormat",St[St.DayPeriodsStandalone=2]="DayPeriodsStandalone",St[St.DaysFormat=3]="DaysFormat",St[St.DaysStandalone=4]="DaysStandalone",St[St.MonthsFormat=5]="MonthsFormat",St[St.MonthsStandalone=6]="MonthsStandalone",St[St.Eras=7]="Eras",St[St.FirstDayOfWeek=8]="FirstDayOfWeek",St[St.WeekendRange=9]="WeekendRange",St[St.DateFormat=10]="DateFormat",St[St.TimeFormat=11]="TimeFormat",St[St.DateTimeFormat=12]="DateTimeFormat",St[St.NumberSymbols=13]="NumberSymbols",St[St.NumberFormats=14]="NumberFormats",St[St.CurrencyCode=15]="CurrencyCode",St[St.CurrencySymbol=16]="CurrencySymbol",St[St.CurrencyName=17]="CurrencyName",St[St.Currencies=18]="Currencies",St[St.Directionality=19]="Directionality",St[St.PluralCase=20]="PluralCase",St[St.ExtraData=21]="ExtraData",St))();const Bd="en-US";let Fe=Bd;function I0(s,a,u,c,h){if(s=K(s),Array.isArray(s))for(let m=0;m<s.length;m++)I0(s[m],a,u,c,h);else{const m=Ut(),v=de();let C=$u(s)?s:K(s.provide),T=Kv(s);const R=mr(),N=1048575&R.providerIndexes,V=R.directiveStart,W=R.providerIndexes>>20;if($u(s)||!s.multi){const X=new Fs(T,h,gf),we=sy(C,a,h?N:N+W,V);-1===we?(In(qc(R,v),m,C),iy(m,s,a.length),a.push(C),R.directiveStart++,R.directiveEnd++,h&&(R.providerIndexes+=1048576),u.push(X),v.push(X)):(u[we]=X,v[we]=X)}else{const X=sy(C,a,N+W,V),we=sy(C,a,N,N+W),Ke=we>=0&&u[we];if(h&&!Ke||!h&&!(X>=0&&u[X])){In(qc(R,v),m,C);const ht=function fi(s,a,u,c,h){const m=new Fs(s,u,gf);return m.multi=[],m.index=a,m.componentProviders=0,zC(m,h,c&&!u),m}(h?iA:qC,u.length,h,c,T);!h&&Ke&&(u[we].providerFactory=ht),iy(m,s,a.length,0),a.push(C),R.directiveStart++,R.directiveEnd++,h&&(R.providerIndexes+=1048576),u.push(ht),v.push(ht)}else iy(m,s,X>-1?X:we,zC(u[h?we:X],T,!h&&c));!h&&c&&Ke&&u[we].componentProviders++}}}function iy(s,a,u,c){const h=$u(a),m=function f_(s){return!!s.useClass}(a);if(h||m){const T=(m?K(a.useClass):a).prototype.ngOnDestroy;if(T){const R=s.destroyHooks||(s.destroyHooks=[]);if(!h&&a.multi){const N=R.indexOf(u);-1===N?R.push(u,[c,T]):R[N+1].push(c,T)}else R.push(u,T)}}}function zC(s,a,u){return u&&s.componentProviders++,s.multi.push(a)-1}function sy(s,a,u,c){for(let h=u;h<c;h++)if(a[h]===s)return h;return-1}function qC(s,a,u,c){return nm(this.multi,[])}function iA(s,a,u,c){const h=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=Qn(u,u[We],this.providerFactory.index,c);m=C.slice(0,v),nm(h,m);for(let T=v;T<C.length;T++)m.push(C[T])}else m=[],nm(h,m);return m}function nm(s,a){for(let u=0;u<s.length;u++)a.push((0,s[u])());return a}function C0(s,a=[]){return u=>{u.providersResolver=(c,h)=>function rA(s,a,u){const c=Ut();if(c.firstCreatePass){const h=ri(s);I0(u,c.data,c.blueprint,h,!0),I0(a,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,a)}}class Ks{}class b0{}function jn(s,a){return new pi(s,a??null)}class pi extends Ks{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new XI(this);const c=or(a);this._bootstrapComponents=Va(c.bootstrap),this._r3Injector=ow(a,u,[{provide:Ks,useValue:this},{provide:uf,useValue:this.componentFactoryResolver}],Ee(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Fn extends b0{constructor(a){super(),this.moduleType=a}create(a){return new pi(this.moduleType,a)}}class WC extends Ks{constructor(a,u,c){super(),this.componentFactoryResolver=new XI(this),this.instance=null;const h=new pI([...a,{provide:Ks,useValue:this},{provide:uf,useValue:this.componentFactoryResolver}],u||g_(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function mc(s,a,u=null){return new WC(s,a,u).injector}let vs=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=rf(0,u.type),h=c.length>0?mc([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,h)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=At({token:s,providedIn:"environment",factory:()=>new s(hn(Dd))}),s})();function T0(s){s.getStandaloneInjector=a=>a.get(vs).getOrCreateStandaloneInjector(s)}function Gd(s,a,u,c){return x0(de(),ur(),s,a,u,c)}function ly(s,a,u,c,h){return function JC(s,a,u,c,h,m,v){const C=a+u;return function Gu(s,a,u,c){const h=Kr(s,a,u);return Kr(s,a+1,c)||h}(s,C,h,m)?oa(s,C+2,v?c.call(v,h,m):c(h,m)):Ju(s,C+2)}(de(),ur(),s,a,u,c,h)}function Ju(s,a){const u=s[a];return u===Bt?void 0:u}function x0(s,a,u,c,h,m){const v=a+u;return Kr(s,v,h)?oa(s,v+1,m?c.call(m,h):c(h)):Ju(s,v+1)}function gi(s,a){const u=Ut();let c;const h=s+Tn;u.firstCreatePass?(c=function tb(s,a){if(a)for(let u=a.length-1;u>=0;u--){const c=a[u];if(s===c.name)return c}}(a,u.pipeRegistry),u.data[h]=c,c.onDestroy&&(u.destroyHooks??(u.destroyHooks=[])).push(h,c.onDestroy)):c=u.data[h];const m=c.factory||(c.factory=ps(c.type)),v=Fr(gf);try{const C=Eu(!1),T=m();return Eu(C),function Lw(s,a,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),a[u]=c}(u,de(),h,T),T}finally{Fr(v)}}function el(s,a,u){const c=s+Tn,h=de(),m=zr(h,c);return function Wf(s,a){return s[We].data[a].pure}(h,c)?x0(h,ur(),a,m.transform,u,m):m.transform(u)}function bn(s){return a=>{setTimeout(s,void 0,a)}}const ss=class ln extends d.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,c){let h=a,m=u||(()=>null),v=c;if(a&&"object"==typeof a){const T=a;h=T.next?.bind(T),m=T.error?.bind(T),v=T.complete?.bind(T)}this.__isAsync&&(m=bn(m),h&&(h=bn(h)),v&&(v=bn(v)));const C=super.subscribe({next:h,error:m,complete:v});return a instanceof J.w0&&a.add(C),C}};function N0(){return this._results[Symbol.iterator]()}class om{get changes(){return this._changes||(this._changes=new ss)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=om.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=N0)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const c=this;c.dirty=!1;const h=function Qi(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function Xc(s,a,u){if(s.length!==a.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],m=a[c];if(u&&(h=u(h),m=u(m)),m!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Zf=(()=>{class s{}return s.__NG_ELEMENT_ID__=sb,s})();const P0=Zf,ib=class extends P0{constructor(a,u,c){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(a,u){const c=this._declarationTContainer.tView,h=E_(this._declarationLView,c,a,16,null,c.declTNode,null,null,null,null,u||null);h[_a]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[fs];return null!==v&&(h[fs]=v.createEmbeddedView(c)),pn(c,h,a),new bg(h)}};function sb(){return am(mr(),de())}function am(s,a){return 4&s.type?new ib(a,s,Hu(s,a)):null}let hy=(()=>{class s{}return s.__NG_ELEMENT_ID__=oA,s})();function oA(){return ab(mr(),de())}const aA=hy,O0=class extends aA{constructor(a,u,c){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=c}get element(){return Hu(this._hostTNode,this._hostLView)}get injector(){return new Vs(this._hostTNode,this._hostLView)}get parentInjector(){const a=Oh(this._hostTNode,this._hostLView);if(Uo(a)){const u=Bo(a,this._hostLView),c=oo(a);return new Vs(u[We].data[c+8],u)}return new Vs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=ob(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-Tr}createEmbeddedView(a,u,c){let h,m;"number"==typeof c?h=c:null!=c&&(h=c.index,m=c.injector);const v=a.createEmbeddedView(u||{},m);return this.insert(v,h),v}createComponent(a,u,c,h,m){const v=a&&!function Hl(s){return"function"==typeof s}(a);let C;if(v)C=u;else{const V=u||{};C=V.index,c=V.injector,h=V.projectableNodes,m=V.environmentInjector||V.ngModuleRef}const T=v?a:new Ef(vt(a)),R=c||this.parentInjector;if(!m&&null==T.ngModule){const W=(v?R:this.parentInjector).get(Dd,null);W&&(m=W)}const N=T.create(R,h,void 0,m);return this.insert(N.hostView,C),N}insert(a,u){const c=a._lView,h=c[We];if(function Uc(s){return Ei(s[Rn])}(c)){const N=this.indexOf(a);if(-1!==N)this.detach(N);else{const V=c[Rn],W=new O0(V,V[ar],V[Rn]);W.detach(W.indexOf(a))}}const m=this._adjustIndex(u),v=this._lContainer;!function ku(s,a,u,c){const h=Tr+c,m=u.length;c>0&&(u[h-1][Ri]=a),c<m-Tr?(a[Ri]=u[h],$p(u,Tr+c,a)):(u.push(a),a[Ri]=null),a[Rn]=u;const v=a[_a];null!==v&&u!==v&&function xv(s,a){const u=s[Ro];a[Yn]!==a[Rn][Rn][Yn]&&(s[Oc]=!0),null===u?s[Ro]=[a]:u.push(a)}(v,a);const C=a[fs];null!==C&&C.insertView(s),a[Lt]|=64}(h,c,v,m);const C=$s(m,v),T=c[$t],R=ra(T,v[va]);return null!==R&&function n_(s,a,u,c,h,m){c[xi]=h,c[ar]=a,md(s,c,u,1,h,m)}(h,v[ar],T,c,R,C),a.attachToViewContainerRef(),$p(fy(v),m,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=ob(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),c=dd(this._lContainer,u);c&&(Wo(fy(this._lContainer),u),qh(c[We],c))}detach(a){const u=this._adjustIndex(a,-1),c=dd(this._lContainer,u);return c&&null!=Wo(fy(this._lContainer),u)?new bg(c):null}_adjustIndex(a,u=0){return a??this.length+u}};function ob(s){return s[no]}function fy(s){return s[no]||(s[no]=[])}function ab(s,a){let u;const c=a[s.index];if(Ei(c))u=c;else{let h;if(8&s.type)h=Sr(c);else{const m=a[$t];h=m.createComment("");const v=Ar(s,a);Fa(m,ra(m,v),h,function s_(s,a){return s.nextSibling(a)}(m,v),!1)}a[s.index]=u=Eg(c,a,h,s),vf(a,u)}return new O0(u,s,a)}class k0{constructor(a){this.queryList=a,this.matches=null}clone(){return new k0(this.queryList)}setDirty(){this.queryList.setDirty()}}class F0{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const c=null!==a.contentQueries?a.contentQueries[0]:u.length,h=[];for(let m=0;m<c;m++){const v=u.getByIndex(m);h.push(this.queries[v.indexInDeclarationView].clone())}return new F0(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==lm(a,u).matches&&this.queries[u].setDirty()}}class py{constructor(a,u,c=null){this.predicate=a,this.flags=u,this.read=c}}class tl{constructor(a=[]){this.queries=a}elementStart(a,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,m=this.getByIndex(c).embeddedTView(a,h);m&&(m.indexInDeclarationView=c,null!==u?u.push(m):u=[m])}return null!==u?new tl(u):null}template(a,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class qd{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new qd(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=a.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const m=c[h];this.matchTNodeWithReadOption(a,u,gy(u,m)),this.matchTNodeWithReadOption(a,u,$o(u,a,m,!1,!1))}else c===Zf?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,$o(u,a,c,!1,!1))}matchTNodeWithReadOption(a,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===lf||h===hy||h===Zf&&4&u.type)this.addMatch(u.index,-2);else{const m=$o(u,a,h,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,c)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function gy(s,a){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===a)return u[c+1];return null}function ub(s,a,u,c){return-1===u?function my(s,a){return 11&s.type?Hu(s,a):4&s.type?am(s,a):null}(a,s):-2===u?function lb(s,a,u){return u===lf?Hu(a,s):u===Zf?am(a,s):u===hy?ab(a,s):void 0}(s,a,c):Qn(s,s[We],u,a)}function Ya(s,a,u,c){const h=a[fs].queries[c];if(null===h.matches){const m=s.data,v=u.matches,C=[];for(let T=0;T<v.length;T+=2){const R=v[T];C.push(R<0?null:ub(a,m[R],v[T+1],u.metadata.read))}h.matches=C}return h.matches}function _y(s,a,u,c){const h=s.queries.getByIndex(u),m=h.matches;if(null!==m){const v=Ya(s,a,h,u);for(let C=0;C<m.length;C+=2){const T=m[C];if(T>0)c.push(v[C/2]);else{const R=m[C+1],N=a[-T];for(let V=Tr;V<N.length;V++){const W=N[V];W[_a]===W[Rn]&&_y(W[We],W,R,c)}if(null!==N[Ro]){const V=N[Ro];for(let W=0;W<V.length;W++){const X=V[W];_y(X[We],X,R,c)}}}}}return c}function Wd(s){const a=de(),u=Ut(),c=Bc();Sl(c+1);const h=lm(u,c);if(s.dirty&&function El(s){return 4==(4&s[Lt])}(a)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?_y(u,a,c,[]):Ya(u,a,h,c);s.reset(m,fg),s.notifyOnChanges()}return!0}return!1}function yy(s,a,u,c){const h=Ut();if(h.firstCreatePass){const m=mr();(function ji(s,a,u){null===s.queries&&(s.queries=new tl),s.queries.track(new qd(a,u))})(h,new py(a,u,c),m.index),function V0(s,a){const u=s.contentQueries||(s.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,a)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function vc(s,a,u){const c=new om(4==(4&u));yo(s,a,c,c.destroy),null===a[fs]&&(a[fs]=new F0),a[fs].queries.push(new k0(c))}(h,de(),u)}function um(){return function L0(s,a){return s[fs].queries[a].queryList}(de(),Bc())}function lm(s,a){return s.queries.getByIndex(a)}function U0(s){return!!or(s)}function gm(...s){}const Iy=new Xt("Application Initializer");let Jd=(()=>{class s{constructor(u){this.appInits=u,this.resolve=gm,this.reject=gm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(Pg(m))u.push(m);else if($w(m)){const v=new Promise((C,T)=>{m.subscribe({complete:C,error:T})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(hn(Iy,8))},s.\u0275prov=At({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const H0=new Xt("AppId",{providedIn:"root",factory:function Rb(){return`${Cy()}${Cy()}${Cy()}`}});function Cy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const by=new Xt("Platform Initializer"),mm=new Xt("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let Sy=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=At({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const _m=new Xt("LocaleId",{providedIn:"root",factory:()=>$n(_m,yt.Optional|yt.SkipSelf)||function Mb(){return typeof $localize<"u"&&$localize.locale||Bd}()}),Nb=new Xt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class vA{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let wA=(()=>{class s{compileModuleSync(u){return new Fn(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),m=Va(or(u).declarations).reduce((v,C)=>{const T=vt(C);return T&&v.push(new Ef(T)),v},[]);return new vA(c,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=At({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const q0=(()=>Promise.resolve(0))();function Ay(s){typeof Zone>"u"?q0.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ws{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ss(!1),this.onMicrotaskEmpty=new ss(!1),this.onStable=new ss(!1),this.onError=new ss(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function ym(){let s=nn.requestAnimationFrame,a=nn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function kb(s){const a=()=>{!function Ob(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(nn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,xy(s),s.isCheckStableRunning=!0,th(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),xy(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,m,v,C)=>{try{return Fb(s),u.invokeTask(h,m,v,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&a(),Lb(s)}},onInvoke:(u,c,h,m,v,C,T)=>{try{return Fb(s),u.invoke(h,m,v,C,T)}finally{s.shouldCoalesceRunChangeDetection&&a(),Lb(s)}},onHasTask:(u,c,h,m)=>{u.hasTask(h,m),c===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,xy(s),th(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,c,h,m)=>(u.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ws.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if(ws.isInAngularZone())throw new ge(909,!1)}run(a,u,c){return this._inner.run(a,u,c)}runTask(a,u,c,h){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+h,a,Pb,gm,gm);try{return m.runTask(v,u,c)}finally{m.cancelTask(v)}}runGuarded(a,u,c){return this._inner.runGuarded(a,u,c)}runOutsideAngular(a){return this._outer.run(a)}}const Pb={};function th(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function xy(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Fb(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Lb(s){s._nesting--,th(s)}class vm{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ss,this.onMicrotaskEmpty=new ss,this.onStable=new ss,this.onError=new ss}run(a,u,c){return a.apply(u,c)}runGuarded(a,u,c){return a.apply(u,c)}runOutsideAngular(a){return a()}runTask(a,u,c,h){return a.apply(u,c)}}const Ry=new Xt(""),Vb=new Xt("");let W0,Ub=(()=>{class s{constructor(u,c,h){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,W0||(function Bb(s){W0=s}(h),h.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ws.assertNotInAngularZone(),Ay(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ay(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let m=-1;c&&c>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(hn(ws),hn(My),hn(Vb))},s.\u0275prov=At({token:s,factory:s.\u0275fac}),s})(),My=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return W0?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=At({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Ja=!1;let Ec=null;const jb=new Xt("AllowMultipleToken"),Z0=new Xt("PlatformDestroyListeners"),il=new Xt("appBootstrapListener");class $b{constructor(a,u){this.name=a,this.token=u}}function wm(s,a,u=[]){const c=`Platform: ${a}`,h=new Xt(c);return(m=[])=>{let v=rh();if(!v||v.injector.get(jb,!1)){const C=[...u,...m,{provide:h,useValue:!0}];s?s(C):function sl(s){if(Ec&&!Ec.get(jb,!1))throw new ge(400,!1);Ec=s;const a=s.get(K0);(function Gb(s){const a=s.get(by,null);a&&a.forEach(u=>u())})(s)}(function Ic(s=[],a){return hf.create({name:a,providers:[{provide:lc,useValue:"platform"},{provide:Z0,useValue:new Set([()=>Ec=null])},...s]})}(C,c))}return function nh(s){const a=rh();if(!a)throw new ge(401,!1);return a}()}}function rh(){return Ec?.get(K0)??null}let K0=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const h=function Py(s,a){let u;return u="noop"===s?new vm:("zone.js"===s?void 0:s)||new ws(a),u}(c?.ngZone,function Ny(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),m=[{provide:ws,useValue:h}];return h.run(()=>{const v=hf.create({providers:m,parent:this.injector,name:u.moduleType.name}),C=u.create(v),T=C.injector.get(pg,null);if(!T)throw new ge(402,!1);return h.runOutsideAngular(()=>{const R=h.onError.subscribe({next:N=>{T.handleError(N)}});C.onDestroy(()=>{Em(this._modules,C),R.unsubscribe()})}),function Y0(s,a,u){try{const c=u();return Pg(c)?c.catch(h=>{throw a.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw a.runOutsideAngular(()=>s.handleError(c)),c}}(T,h,()=>{const R=C.injector.get(Jd);return R.runInitializers(),R.donePromise.then(()=>(function Er(s){mt(s,"Expected localeId to be defined"),"string"==typeof s&&(Fe=s.toLowerCase().replace(/_/g,"-"))}(C.injector.get(_m,Bd)||Bd),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,c=[]){const h=Q0({},c);return function Jf(s,a,u){const c=new Fn(u);return Promise.resolve(c)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(u){const c=u.injector.get(Oy);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new ge(-403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ge(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(Z0,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(hn(hf))},s.\u0275prov=At({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Q0(s,a){return Array.isArray(a)?a.reduce(Q0,s):{...s,...a}}let Oy=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,c,h){this._zone=u,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new F.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),v=new F.y(C=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{ws.assertNotInAngularZone(),Ay(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{ws.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{T.unsubscribe(),R.unsubscribe()}});this.isStable=(0,ue.T)(m,v.pipe((0,se.B)()))}bootstrap(u,c){const h=u instanceof mI;if(!this._injector.get(Jd).done){!h&&Dr(u);throw new ge(405,Ja)}let v;v=h?u:this._injector.get(uf).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const C=function CA(s){return s.isBoundToModule}(v)?void 0:this._injector.get(Ks),R=v.create(hf.NULL,[],c||v.selector,C),N=R.location.nativeElement,V=R.injector.get(Ry,null);return V?.registerApplication(N),R.onDestroy(()=>{this.detachView(R.hostView),Em(this.components,R),V?.unregisterApplication(N)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new ge(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Em(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const c=this._injector.get(il,[]);c.push(...this._bootstrapListeners),c.forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Em(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new ge(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(hn(ws),hn(Dd),hn(pg))},s.\u0275prov=At({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Em(s,a){const u=s.indexOf(a);u>-1&&s.splice(u,1)}function Im(){return!1}let TA=(()=>{class s{}return s.__NG_ELEMENT_ID__=SA,s})();function SA(s){return function Cm(s,a,u){if(wa(s)&&!u){const c=gr(s.index,a);return new bg(c,c)}return 47&s.type?new bg(a[Yn],a):null}(mr(),de(),16==(16&s))}class sE{constructor(){}supports(a){return F_(a)}create(a){return new Wb(a)}}const Hi=(s,a)=>a;class Wb{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Hi}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,c=this._removalsHead,h=0,m=null;for(;u||c;){const v=!c||u&&u.currentIndex<al(c,h,m)?u:c,C=al(v,h,m),T=v.currentIndex;if(v===c)h--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)h++;else{m||(m=[]);const R=C-h,N=T-h;if(R!=N){for(let W=0;W<R;W++){const X=W<m.length?m[W]:m[W]=0,we=X+W;N<=we&&we<R&&(m[W]=X+1)}m[v.previousIndex]=N-R}}C!==T&&a(v,C,T)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!F_(a))throw new ge(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,m,v,u=this._itHead,c=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)m=a[C],v=this._trackByFn(C,m),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,m,v,C)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,v,C),c=!0),u=u._next}else h=0,function Aw(s,a){if(Array.isArray(s))for(let u=0;u<s.length;u++)a(s[u]);else{const u=s[Symbol.iterator]();let c;for(;!(c=u.next()).done;)a(c.value)}}(a,C=>{v=this._trackByFn(h,C),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,C,v,h)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,v,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,c,h){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,m,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,m,h)):a=this._addAfter(new Uy(u,c),m,h),a}_verifyReinsertion(a,u,c,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==m?a=this._reinsertAfter(m,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,m=a._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(a,u,c),this._addToMoves(a,c),a}_moveAfter(a,u,c){return this._unlink(a),this._insertAfter(a,u,c),this._addToMoves(a,c),a}_addAfter(a,u,c){return this._insertAfter(a,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,c){const h=null===u?this._itHead:u._next;return a._next=h,a._prev=u,null===h?this._itTail=a:h._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new oE),this._linkedRecords.put(a),a.currentIndex=c,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,c=a._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new oE),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Uy{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class By{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,a))return c;return null}remove(a){const u=a._prevDup,c=a._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class oE{constructor(){this.map=new Map}put(a){const u=a.trackById;let c=this.map.get(u);c||(c=new By,this.map.set(u,c)),c.add(a)}get(a,u){const h=this.map.get(a);return h?h.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function al(s,a,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+a+h}class sh{constructor(){}supports(a){return a instanceof Map||xw(a)}create(){return new Zb}}class Zb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||xw(a)))throw new ge(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const c=a._prev;return u._next=a,u._prev=c,a._prev=u,c&&(c._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,u);const m=h._prev,v=h._next;return m&&(m._next=v),v&&(v._prev=m),h._next=null,h._prev=null,h}const c=new oh(a);return this._records.set(a,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(c=>u(a[c],c))}}class oh{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Kb(){return new Cc([new sE])}let Cc=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Kb()),deps:[[s,new ct,new Ru]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new ge(901,!1)}}return s.\u0275prov=At({token:s,providedIn:"root",factory:Kb}),s})();function ul(){return new jy([new sh])}let jy=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||ul()),deps:[[s,new ct,new Ru]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new ge(901,!1)}}return s.\u0275prov=At({token:s,providedIn:"root",factory:ul}),s})();const kA=wm(null,"core",[]);let $y=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(hn(Oy))},s.\u0275mod=te({type:s}),s.\u0275inj=En({}),s})();function Qb(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(Et,Te,L)=>{L.d(Te,{Z:()=>Ze});var d=L(2090),J=L(4859),F=L(6881),ue=L(1877);class se{constructor(ge,Me){this._delegate=ge,this.firebase=Me,(0,F._addComponent)(ge,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(ge,Me=F._DEFAULT_ENTRY_NAME){var Ne;this._delegate.checkDestroyed();const Ue=this._delegate.container.getProvider(ge);return!Ue.isInitialized()&&"EXPLICIT"===(null===(Ne=Ue.getComponent())||void 0===Ne?void 0:Ne.instantiationMode)&&Ue.initialize(),Ue.getImmediate({identifier:Me})}_removeServiceInstance(ge,Me=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(Me)}_addComponent(ge){(0,F._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,F._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ye=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function fe(){const gt=function Ee(gt){const ge={},Me={__esModule:!0,initializeApp:function Pe(ke,st={}){const ie=F.initializeApp(ke,st);if((0,d.r3)(ge,ie.name))return ge[ie.name];const xt=new gt(ie,Me);return ge[ie.name]=xt,xt},app:Ue,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Ce(ke){const st=ke.name,ie=st.replace("-compat","");if(F._registerComponent(ke)&&"PUBLIC"===ke.type){const xt=(nt=Ue())=>{if("function"!=typeof nt[ie])throw ye.create("invalid-app-argument",{appName:st});return nt[ie]()};void 0!==ke.serviceProps&&(0,d.ZB)(xt,ke.serviceProps),Me[ie]=xt,gt.prototype[ie]=function(...nt){return this._getService.bind(this,st).apply(this,ke.multipleInstances?nt:[])}}return"PUBLIC"===ke.type?Me[ie]:null},removeApp:function Ne(ke){delete ge[ke]},useAsService:function Ge(ke,st){return"serverAuth"===st?null:st},modularAPIs:F}};function Ue(ke){if(!(0,d.r3)(ge,ke=ke||F._DEFAULT_ENTRY_NAME))throw ye.create("no-app",{appName:ke});return ge[ke]}return Me.default=Me,Object.defineProperty(Me,"apps",{get:function Ie(){return Object.keys(ge).map(ke=>ge[ke])}}),Ue.App=gt,Me}(se);return gt.INTERNAL=Object.assign(Object.assign({},gt.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function ge(Me){(0,d.ZB)(gt,Me)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),gt}(),H=new ue.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const gt=self.firebase.SDK_VERSION;gt&&gt.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ze=G;!function De(gt){(0,F.registerVersion)("@firebase/app-compat","0.2.9",gt)}()},6881:(Et,Te,L)=>{L.r(Te),L.d(Te,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Ts,_DEFAULT_ENTRY_NAME:()=>ei,_addComponent:()=>ot,_addOrOverwriteComponent:()=>Ot,_apps:()=>nn,_clearComponents:()=>$r,_components:()=>dn,_getProvider:()=>yi,_registerComponent:()=>Si,_removeServiceInstance:()=>pr,deleteApp:()=>Ai,getApp:()=>cs,getApps:()=>hn,initializeApp:()=>Qt,onLog:()=>qi,registerVersion:()=>sr,setLogLevel:()=>xn});var d=L(5861),J=L(4859),F=L(1877),ue=L(2090);const se=(ce,te)=>te.some(Oe=>ce instanceof Oe);let ae,ye;const G=new WeakMap,H=new WeakMap,K=new WeakMap,He=new WeakMap,De=new WeakMap;let ge={get(ce,te,Oe){if(ce instanceof IDBTransaction){if("done"===te)return H.get(ce);if("objectStoreNames"===te)return ce.objectStoreNames||K.get(ce);if("store"===te)return Oe.objectStoreNames[1]?void 0:Oe.objectStore(Oe.objectStoreNames[0])}return Pe(ce[te])},set:(ce,te,Oe)=>(ce[te]=Oe,!0),has:(ce,te)=>ce instanceof IDBTransaction&&("done"===te||"store"===te)||te in ce};function Ue(ce){return"function"==typeof ce?function Ne(ce){return ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ce)?function(...te){return ce.apply(Ie(this),te),Pe(G.get(this))}:function(...te){return Pe(ce.apply(Ie(this),te))}:function(te,...Oe){const _t=ce.call(Ie(this),te,...Oe);return K.set(_t,te.sort?te.sort():[te]),Pe(_t)}}(ce):(ce instanceof IDBTransaction&&function gt(ce){if(H.has(ce))return;const te=new Promise((Oe,_t)=>{const Tt=()=>{ce.removeEventListener("complete",zt),ce.removeEventListener("error",vt),ce.removeEventListener("abort",vt)},zt=()=>{Oe(),Tt()},vt=()=>{_t(ce.error||new DOMException("AbortError","AbortError")),Tt()};ce.addEventListener("complete",zt),ce.addEventListener("error",vt),ce.addEventListener("abort",vt)});H.set(ce,te)}(ce),se(ce,function Ee(){return ae||(ae=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ce,ge):ce)}function Pe(ce){if(ce instanceof IDBRequest)return function Ze(ce){const te=new Promise((Oe,_t)=>{const Tt=()=>{ce.removeEventListener("success",zt),ce.removeEventListener("error",vt)},zt=()=>{Oe(Pe(ce.result)),Tt()},vt=()=>{_t(ce.error),Tt()};ce.addEventListener("success",zt),ce.addEventListener("error",vt)});return te.then(Oe=>{Oe instanceof IDBCursor&&G.set(Oe,ce)}).catch(()=>{}),De.set(te,ce),te}(ce);if(He.has(ce))return He.get(ce);const te=Ue(ce);return te!==ce&&(He.set(ce,te),De.set(te,ce)),te}const Ie=ce=>De.get(ce),ke=["get","getKey","getAll","getAllKeys","count"],st=["put","add","delete","clear"],ie=new Map;function xt(ce,te){if(!(ce instanceof IDBDatabase)||te in ce||"string"!=typeof te)return;if(ie.get(te))return ie.get(te);const Oe=te.replace(/FromIndex$/,""),_t=te!==Oe,Tt=st.includes(Oe);if(!(Oe in(_t?IDBIndex:IDBObjectStore).prototype)||!Tt&&!ke.includes(Oe))return;const zt=function(){var vt=(0,d.Z)(function*(un,...tn){const Dr=this.transaction(un,Tt?"readwrite":"readonly");let or=Dr.store;return _t&&(or=or.index(tn.shift())),(yield Promise.all([or[Oe](...tn),Tt&&Dr.done]))[0]});return function(tn){return vt.apply(this,arguments)}}();return ie.set(te,zt),zt}!function Me(ce){ge=ce(ge)}(ce=>({...ce,get:(te,Oe,_t)=>xt(te,Oe)||ce.get(te,Oe,_t),has:(te,Oe)=>!!xt(te,Oe)||ce.has(te,Oe)}));class nt{constructor(te){this.container=te}getPlatformInfoString(){return this.container.getProviders().map(Oe=>{if(function Zt(ce){return"VERSION"===ce.getComponent()?.type}(Oe)){const _t=Oe.getImmediate();return`${_t.library}/${_t.version}`}return null}).filter(Oe=>Oe).join(" ")}}const ft="@firebase/app",_e=new F.Yd("@firebase/app"),ei="[DEFAULT]",ls={[ft]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},nn=new Map,dn=new Map;function ot(ce,te){try{ce.container.addComponent(te)}catch(Oe){_e.debug(`Component ${te.name} failed to register with FirebaseApp ${ce.name}`,Oe)}}function Ot(ce,te){ce.container.addOrOverwriteComponent(te)}function Si(ce){const te=ce.name;if(dn.has(te))return _e.debug(`There were multiple attempts to register component ${te}.`),!1;dn.set(te,ce);for(const Oe of nn.values())ot(Oe,ce);return!0}function yi(ce,te){const Oe=ce.container.getProvider("heartbeat").getImmediate({optional:!0});return Oe&&Oe.triggerHeartbeat(),ce.container.getProvider(te)}function pr(ce,te,Oe=ei){yi(ce,te).clearInstance(Oe)}function $r(){dn.clear()}const ti=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class yn{constructor(te,Oe,_t){this._isDeleted=!1,this._options=Object.assign({},te),this._config=Object.assign({},Oe),this._name=Oe.name,this._automaticDataCollectionEnabled=Oe.automaticDataCollectionEnabled,this._container=_t,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this.checkDestroyed(),this._automaticDataCollectionEnabled=te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(te){this._isDeleted=te}checkDestroyed(){if(this.isDeleted)throw ti.create("app-deleted",{appName:this._name})}}const Ts="9.21.0";function Qt(ce,te={}){let Oe=ce;"object"!=typeof te&&(te={name:te});const _t=Object.assign({name:ei,automaticDataCollectionEnabled:!1},te),Tt=_t.name;if("string"!=typeof Tt||!Tt)throw ti.create("bad-app-name",{appName:String(Tt)});if(Oe||(Oe=(0,ue.aH)()),!Oe)throw ti.create("no-options");const zt=nn.get(Tt);if(zt){if((0,ue.vZ)(Oe,zt.options)&&(0,ue.vZ)(_t,zt.config))return zt;throw ti.create("duplicate-app",{appName:Tt})}const vt=new J.H0(Tt);for(const tn of dn.values())vt.addComponent(tn);const un=new yn(Oe,_t,vt);return nn.set(Tt,un),un}function cs(ce=ei){const te=nn.get(ce);if(!te&&ce===ei)return Qt();if(!te)throw ti.create("no-app",{appName:ce});return te}function hn(){return Array.from(nn.values())}function Ai(ce){return $n.apply(this,arguments)}function $n(){return($n=(0,d.Z)(function*(ce){const te=ce.name;nn.has(te)&&(nn.delete(te),yield Promise.all(ce.container.getProviders().map(Oe=>Oe.delete())),ce.isDeleted=!0)})).apply(this,arguments)}function sr(ce,te,Oe){var _t;let Tt=null!==(_t=ls[ce])&&void 0!==_t?_t:ce;Oe&&(Tt+=`-${Oe}`);const zt=Tt.match(/\s|\//),vt=te.match(/\s|\//);if(zt||vt){const un=[`Unable to register library "${Tt}" with version "${te}":`];return zt&&un.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),zt&&vt&&un.push("and"),vt&&un.push(`version name "${te}" contains illegal characters (whitespace or "/")`),void _e.warn(un.join(" "))}Si(new J.wA(`${Tt}-version`,()=>({library:Tt,version:te}),"VERSION"))}function qi(ce,te){if(null!==ce&&"function"!=typeof ce)throw ti.create("invalid-log-argument");(0,F.Am)(ce,te)}function xn(ce){(0,F.Ub)(ce)}const Wi="firebase-heartbeat-database",ni=1,$="firebase-heartbeat-store";let B=null;function Z(){return B||(B=function Ce(ce,te,{blocked:Oe,upgrade:_t,blocking:Tt,terminated:zt}={}){const vt=indexedDB.open(ce,te),un=Pe(vt);return _t&&vt.addEventListener("upgradeneeded",tn=>{_t(Pe(vt.result),tn.oldVersion,tn.newVersion,Pe(vt.transaction),tn)}),Oe&&vt.addEventListener("blocked",tn=>Oe(tn.oldVersion,tn.newVersion,tn)),un.then(tn=>{zt&&tn.addEventListener("close",()=>zt()),Tt&&tn.addEventListener("versionchange",Dr=>Tt(Dr.oldVersion,Dr.newVersion,Dr))}).catch(()=>{}),un}(Wi,ni,{upgrade:(ce,te)=>{0===te&&ce.createObjectStore($)}}).catch(ce=>{throw ti.create("idb-open",{originalErrorMessage:ce.message})})),B}function ee(){return(ee=(0,d.Z)(function*(ce){try{return(yield Z()).transaction($).objectStore($).get(en(ce))}catch(te){if(te instanceof ue.ZR)_e.warn(te.message);else{const Oe=ti.create("idb-get",{originalErrorMessage:te?.message});_e.warn(Oe.message)}}})).apply(this,arguments)}function Le(ce,te){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,d.Z)(function*(ce,te){try{const _t=(yield Z()).transaction($,"readwrite");return yield _t.objectStore($).put(te,en(ce)),_t.done}catch(Oe){if(Oe instanceof ue.ZR)_e.warn(Oe.message);else{const _t=ti.create("idb-set",{originalErrorMessage:Oe?.message});_e.warn(_t.message)}}})).apply(this,arguments)}function en(ce){return`${ce.name}!${ce.options.appId}`}class mn{constructor(te){this.container=te,this._heartbeatsCache=null;const Oe=this.container.getProvider("app").getImmediate();this._storage=new Zi(Oe),this._heartbeatsCachePromise=this._storage.read().then(_t=>(this._heartbeatsCache=_t,_t))}triggerHeartbeat(){var te=this;return(0,d.Z)(function*(){const _t=te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=Kt();if(null===te._heartbeatsCache&&(te._heartbeatsCache=yield te._heartbeatsCachePromise),te._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!te._heartbeatsCache.heartbeats.some(zt=>zt.date===Tt))return te._heartbeatsCache.heartbeats.push({date:Tt,agent:_t}),te._heartbeatsCache.heartbeats=te._heartbeatsCache.heartbeats.filter(zt=>{const vt=new Date(zt.date).valueOf();return Date.now()-vt<=2592e6}),te._storage.overwrite(te._heartbeatsCache)})()}getHeartbeatsHeader(){var te=this;return(0,d.Z)(function*(){if(null===te._heartbeatsCache&&(yield te._heartbeatsCachePromise),null===te._heartbeatsCache||0===te._heartbeatsCache.heartbeats.length)return"";const Oe=Kt(),{heartbeatsToSend:_t,unsentEntries:Tt}=function Hr(ce,te=1024){const Oe=[];let _t=ce.slice();for(const Tt of ce){const zt=Oe.find(vt=>vt.agent===Tt.agent);if(zt){if(zt.dates.push(Tt.date),ds(Oe)>te){zt.dates.pop();break}}else if(Oe.push({agent:Tt.agent,dates:[Tt.date]}),ds(Oe)>te){Oe.pop();break}_t=_t.slice(1)}return{heartbeatsToSend:Oe,unsentEntries:_t}}(te._heartbeatsCache.heartbeats),zt=(0,ue.L)(JSON.stringify({version:2,heartbeats:_t}));return te._heartbeatsCache.lastSentHeartbeatDate=Oe,Tt.length>0?(te._heartbeatsCache.heartbeats=Tt,yield te._storage.overwrite(te._heartbeatsCache)):(te._heartbeatsCache.heartbeats=[],te._storage.overwrite(te._heartbeatsCache)),zt})()}}function Kt(){return(new Date).toISOString().substring(0,10)}class Zi{constructor(te){this.app=te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var te=this;return(0,d.Z)(function*(){return(yield te._canUseIndexedDBPromise)&&(yield function ve(ce){return ee.apply(this,arguments)}(te.app))||{heartbeats:[]}})()}overwrite(te){var Oe=this;return(0,d.Z)(function*(){var _t;if(yield Oe._canUseIndexedDBPromise){const zt=yield Oe.read();return Le(Oe.app,{lastSentHeartbeatDate:null!==(_t=te.lastSentHeartbeatDate)&&void 0!==_t?_t:zt.lastSentHeartbeatDate,heartbeats:te.heartbeats})}})()}add(te){var Oe=this;return(0,d.Z)(function*(){var _t;if(yield Oe._canUseIndexedDBPromise){const zt=yield Oe.read();return Le(Oe.app,{lastSentHeartbeatDate:null!==(_t=te.lastSentHeartbeatDate)&&void 0!==_t?_t:zt.lastSentHeartbeatDate,heartbeats:[...zt.heartbeats,...te.heartbeats]})}})()}}function ds(ce){return(0,ue.L)(JSON.stringify({version:2,heartbeats:ce})).length}!function su(ce){Si(new J.wA("platform-logger",te=>new nt(te),"PRIVATE")),Si(new J.wA("heartbeat",te=>new mn(te),"PRIVATE")),sr(ft,"0.9.9",ce),sr(ft,"0.9.9","esm2017"),sr("fire-js","")}("")},4859:(Et,Te,L)=>{L.d(Te,{H0:()=>Ee,wA:()=>F,zt:()=>se});var d=L(5861),J=L(2090);class F{constructor(G,H,K){this.name=G,this.instanceFactory=H,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ue="[DEFAULT]";class se{constructor(G,H){this.name=G,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const H=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(H)){const K=new J.BH;if(this.instancesDeferred.set(H,K),this.isInitialized(H)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:H});He&&K.resolve(He)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(G){var H;const K=this.normalizeInstanceIdentifier(G?.identifier),He=null!==(H=G?.optional)&&void 0!==H&&H;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(De){if(He)return null;throw De}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function ye(fe){return"EAGER"===fe.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ue})}catch{}for(const[H,K]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(H);try{const De=this.getOrInitializeService({instanceIdentifier:He});K.resolve(De)}catch{}}}}clearInstance(G=ue){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,d.Z)(function*(){const H=Array.from(G.instances.values());yield Promise.all([...H.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...H.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ue){return this.instances.has(G)}getOptions(G=ue){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:H={}}=G,K=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:K,options:H});for(const[De,Ze]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(De)&&Ze.resolve(He);return He}onInit(G,H){var K;const He=this.normalizeInstanceIdentifier(H),De=null!==(K=this.onInitCallbacks.get(He))&&void 0!==K?K:new Set;De.add(G),this.onInitCallbacks.set(He,De);const Ze=this.instances.get(He);return Ze&&G(Ze,He),()=>{De.delete(G)}}invokeOnInitCallbacks(G,H){const K=this.onInitCallbacks.get(H);if(K)for(const He of K)try{He(G,H)}catch{}}getOrInitializeService({instanceIdentifier:G,options:H={}}){let K=this.instances.get(G);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=G,fe===ue?void 0:fe),options:H}),this.instances.set(G,K),this.instancesOptions.set(G,H),this.invokeOnInitCallbacks(K,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,K)}catch{}var fe;return K||null}normalizeInstanceIdentifier(G=ue){return this.component?this.component.multipleInstances?G:ue:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ee{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const H=this.getProvider(G.name);if(H.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);H.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const H=new se(G,this);return this.providers.set(G,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(Et,Te,L)=>{L.d(Te,{Am:()=>fe,Ub:()=>Ee,Yd:()=>ye,in:()=>J});const d=[];var J=(()=>{return(G=J||(J={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",J;var G})();const F={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ue=J.INFO,se={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},ae=(G,H,...K)=>{if(H<G.logLevel)return;const He=(new Date).toISOString(),De=se[H];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[De](`[${He}]  ${G.name}:`,...K)};class ye{constructor(H){this.name=H,this._logLevel=ue,this._logHandler=ae,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in J))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?F[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...H),this._logHandler(this,J.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...H),this._logHandler(this,J.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,J.INFO,...H),this._logHandler(this,J.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,J.WARN,...H),this._logHandler(this,J.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...H),this._logHandler(this,J.ERROR,...H)}}function Ee(G){d.forEach(H=>{H.setLogLevel(G)})}function fe(G,H){for(const K of d){let He=null;H&&H.level&&(He=F[H.level]),K.userLogHandler=null===G?null:(De,Ze,...gt)=>{const ge=gt.map(Me=>{if(null==Me)return null;if("string"==typeof Me)return Me;if("number"==typeof Me||"boolean"==typeof Me)return Me.toString();if(Me instanceof Error)return Me.message;try{return JSON.stringify(Me)}catch{return null}}).filter(Me=>Me).join(" ");Ze>=(He??De.logLevel)&&G({level:J[Ze].toLowerCase(),message:ge,args:gt,type:De.name})}}}},259:(Et,Te,L)=>{L.d(Te,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=L(6881);(0,d.registerVersion)("firebase","9.21.0","app")},9260:(Et,Te,L)=>{L.d(Te,{Z:()=>d.Z});var d=L(3942);d.Z.registerVersion("firebase","9.21.0","app-compat")},3042:(Et,Te,L)=>{L.r(Te);var d=L(5861),J=L(3942),F=L(2090),ue=L(6881),se=L(655),ae=L(1877),ye=L(4859);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},K_EMAIL_SIGNIN="EMAIL_SIGNIN",K_PASSWORD_RESET="PASSWORD_RESET",K_RECOVER_EMAIL="RECOVER_EMAIL",K_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",K_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",K_VERIFY_EMAIL="VERIFY_EMAIL";const Ze=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},gt=function De(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ne=new ae.Yd("@firebase/auth");function Pe(y,...p){Ne.logLevel<=ae.in.ERROR&&Ne.error(`Auth (${ue.SDK_VERSION}): ${y}`,...p)}function Ie(y,...p){throw st(y,...p)}function Ce(y,...p){return st(y,...p)}function Ge(y,p,g){const E=Object.assign(Object.assign({},gt()),{[p]:g});return new F.LL("auth","Firebase",E).create(p,{appName:y.name})}function ke(y,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&Ie(y,"argument-error"),Ge(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function st(y,...p){if("string"!=typeof y){const g=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(g,...E)}return ge.create(y,...p)}function ie(y,p,...g){if(!y)throw st(p,...g)}function xt(y){const p="INTERNAL ASSERTION FAILED: "+y;throw Pe(p),new Error(p)}function nt(y,p){y||xt(p)}function Zt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ft(){return"http:"===pe()||"https:"===pe()}function pe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Se{constructor(p,g){this.shortDelay=p,this.longDelay=g,nt(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function _e(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ft()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ze(y,p){nt(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class Be{static initialize(p,g,E){this.fetchImpl=p,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void xt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void xt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void xt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const mt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},pt=new Se(3e4,6e4);function Ft(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function et(y,p,g,E){return qt.apply(this,arguments)}function qt(){return(qt=(0,d.Z)(function*(y,p,g,E,S={}){return At(y,S,(0,d.Z)(function*(){let M={},j={};E&&("GET"===p?j=E:M={body:JSON.stringify(E)});const Q=(0,F.xO)(Object.assign({key:y.config.apiKey},j)).slice(1),xe=yield y._getAdditionalHeaders();return xe["Content-Type"]="application/json",y.languageCode&&(xe["X-Firebase-Locale"]=y.languageCode),Be.fetch()(jr(y,y.config.apiHost,g,Q),Object.assign({method:p,headers:xe,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function At(y,p,g){return an.apply(this,arguments)}function an(){return(an=(0,d.Z)(function*(y,p,g){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},mt),p);try{const S=new Jr(y),M=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const j=yield M.json();if("needConfirmation"in j)throw Or(y,"account-exists-with-different-credential",j);if(M.ok&&!("errorMessage"in j))return j;{const Q=M.ok?j.errorMessage:j.error.message,[xe,$e]=Q.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xe)throw Or(y,"credential-already-in-use",j);if("EMAIL_EXISTS"===xe)throw Or(y,"email-already-in-use",j);if("USER_DISABLED"===xe)throw Or(y,"user-disabled",j);const tt=E[xe]||xe.toLowerCase().replace(/[_\s]+/g,"-");if($e)throw Ge(y,tt,$e);Ie(y,tt)}}catch(S){if(S instanceof F.ZR)throw S;Ie(y,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function En(y,p,g,E){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,d.Z)(function*(y,p,g,E,S={}){const M=yield et(y,p,g,E,S);return"mfaPendingCredential"in M&&Ie(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function jr(y,p,g,E){const S=`${p}${g}?${E}`;return y.config.emulator?ze(y.config,S):`${y.config.apiScheme}://${S}`}class Jr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(Ce(this.auth,"network-request-failed")),pt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Or(y,p,g){const E={appName:y.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const S=Ce(y,p,E);return S.customData._tokenResponse=g,S}function Ti(){return(Ti=(0,d.Z)(function*(y,p){return et(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function So(){return(So=(0,d.Z)(function*(y,p){return et(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function yt(){return(yt=(0,d.Z)(function*(y,p){return et(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function _i(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function ei(){return(ei=(0,d.Z)(function*(y,p=!1){const g=(0,F.m9)(y),E=yield g.getIdToken(p),S=nn(E);ie(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const M="object"==typeof S.firebase?S.firebase:void 0,j=M?.sign_in_provider;return{claims:S,token:E,authTime:_i(ls(S.auth_time)),issuedAtTime:_i(ls(S.iat)),expirationTime:_i(ls(S.exp)),signInProvider:j||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function ls(y){return 1e3*Number(y)}function nn(y){const[p,g,E]=y.split(".");if(void 0===p||void 0===g||void 0===E)return Pe("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,F.tV)(g);return S?JSON.parse(S):(Pe("Failed to decode base64 JWT payload"),null)}catch(S){return Pe("Caught error parsing JWT payload as JSON",S?.toString()),null}}function ot(y,p){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,d.Z)(function*(y,p,g=!1){if(g)return p;try{return yield p}catch(E){throw E instanceof F.ZR&&function Si({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}class yi{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield g.iteration()}),E)}iteration(){var p=this;return(0,d.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&p.schedule(!0))}p.schedule()})()}}class pr{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=_i(this.lastLoginAt),this.creationTime=_i(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function $r(y){return Ln.apply(this,arguments)}function Ln(){return Ln=(0,d.Z)(function*(y){var p;const g=y.auth,E=yield y.getIdToken(),S=yield ot(y,function kr(y,p){return yt.apply(this,arguments)}(g,{idToken:E}));ie(S?.users.length,g,"internal-error");const M=S.users[0];y._notifyReloadListener(M);const j=null!==(p=M.providerUserInfo)&&void 0!==p&&p.length?function Qt(y){return y.map(p=>{var{providerId:g}=p,E=(0,se._T)(p,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(M.providerUserInfo):[],Q=function Ts(y,p){return[...y.filter(E=>!p.some(S=>S.providerId===E.providerId)),...p]}(y.providerData,j),tt=!!y.isAnonymous&&!(y.email&&M.passwordHash||Q?.length),rt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:Q,metadata:new pr(M.createdAt,M.lastLoginAt),isAnonymous:tt};Object.assign(y,rt)}),Ln.apply(this,arguments)}function yn(){return(yn=(0,d.Z)(function*(y){const p=(0,F.m9)(y);yield $r(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function hn(){return(hn=(0,d.Z)(function*(y,p){const g=yield At(y,{},(0,d.Z)(function*(){const E=(0,F.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:S,apiKey:M}=y.config,j=jr(y,S,"/v1/token",`key=${M}`),Q=yield y._getAdditionalHeaders();return Q["Content-Type"]="application/x-www-form-urlencoded",Be.fetch()(j,{method:"POST",headers:Q,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ai{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ie(p.idToken,"internal-error"),ie(typeof p.idToken<"u","internal-error"),ie(typeof p.refreshToken<"u","internal-error");const g="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function dn(y){const p=nn(y);return ie(p,"internal-error"),ie(typeof p.exp<"u","internal-error"),ie(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var E=this;return(0,d.Z)(function*(){return ie(!E.accessToken||E.refreshToken,p,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var E=this;return(0,d.Z)(function*(){const{accessToken:S,refreshToken:M,expiresIn:j}=yield function cs(y,p){return hn.apply(this,arguments)}(p,g);E.updateTokensAndExpiration(S,M,Number(j))})()}updateTokensAndExpiration(p,g,E){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,g){const{refreshToken:E,accessToken:S,expirationTime:M}=g,j=new Ai;return E&&(ie("string"==typeof E,"internal-error",{appName:p}),j.refreshToken=E),S&&(ie("string"==typeof S,"internal-error",{appName:p}),j.accessToken=S),M&&(ie("number"==typeof M,"internal-error",{appName:p}),j.expirationTime=M),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Ai,this.toJSON())}_performRefresh(){return xt("not implemented")}}function $n(y,p){ie("string"==typeof y||typeof y>"u","internal-error",{appName:p})}class sr{constructor(p){var{uid:g,auth:E,stsTokenManager:S}=p,M=(0,se._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new pr(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,d.Z)(function*(){const E=yield ot(g,g.stsTokenManager.getToken(g.auth,p));return ie(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(p){return function Fr(y){return ei.apply(this,arguments)}(this,p)}reload(){return function ti(y){return yn.apply(this,arguments)}(this)}_assign(p){this!==p&&(ie(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const g=new sr(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(p){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var E=this;return(0,d.Z)(function*(){let S=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),S=!0),g&&(yield $r(E)),yield E.auth._persistUserIfCurrent(E),S&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,d.Z)(function*(){const g=yield p.getIdToken();return yield ot(p,function Ds(y,p){return Ti.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var E,S,M,j,Q,xe,$e,tt;const rt=null!==(E=g.displayName)&&void 0!==E?E:void 0,kn=null!==(S=g.email)&&void 0!==S?S:void 0,mo=null!==(M=g.phoneNumber)&&void 0!==M?M:void 0,Ed=null!==(j=g.photoURL)&&void 0!==j?j:void 0,Uv=null!==(Q=g.tenantId)&&void 0!==Q?Q:void 0,Bn=null!==(xe=g._redirectEventId)&&void 0!==xe?xe:void 0,cg=null!==($e=g.createdAt)&&void 0!==$e?$e:void 0,h_=null!==(tt=g.lastLoginAt)&&void 0!==tt?tt:void 0,{uid:Id,emailVerified:Cd,isAnonymous:rs,providerData:ef,stsTokenManager:uc}=g;ie(Id&&uc,p,"internal-error");const Bv=Ai.fromJSON(this.name,uc);ie("string"==typeof Id,p,"internal-error"),$n(rt,p.name),$n(kn,p.name),ie("boolean"==typeof Cd,p,"internal-error"),ie("boolean"==typeof rs,p,"internal-error"),$n(mo,p.name),$n(Ed,p.name),$n(Uv,p.name),$n(Bn,p.name),$n(cg,p.name),$n(h_,p.name);const tf=new sr({uid:Id,auth:p,email:kn,emailVerified:Cd,displayName:rt,isAnonymous:rs,photoURL:Ed,phoneNumber:mo,tenantId:Uv,stsTokenManager:Bv,createdAt:cg,lastLoginAt:h_});return ef&&Array.isArray(ef)&&(tf.providerData=ef.map(jv=>Object.assign({},jv))),Bn&&(tf._redirectEventId=Bn),tf}static _fromIdTokenResponse(p,g,E=!1){return(0,d.Z)(function*(){const S=new Ai;S.updateFromServerResponse(g);const M=new sr({uid:g.localId,auth:p,stsTokenManager:S,isAnonymous:E});return yield $r(M),M})()}}const qi=new Map;function xn(y){nt(y instanceof Function,"Expected a class definition");let p=qi.get(y);return p?(nt(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,qi.set(y,p),p)}const ni=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(g,E){var S=this;return(0,d.Z)(function*(){S.storage[g]=E})()}_get(g){var E=this;return(0,d.Z)(function*(){const S=E.storage[g];return void 0===S?null:S})()}_remove(g){var E=this;return(0,d.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return y.type="NONE",y})();function $(y,p,g){return`firebase:${y}:${p}:${g}`}class B{constructor(p,g,E){this.persistence=p,this.auth=g,this.userKey=E;const{config:S,name:M}=this.auth;this.fullUserKey=$(this.userKey,S.apiKey,M),this.fullPersistenceKey=$("persistence",S.apiKey,M),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?sr._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,d.Z)(function*(){if(g.persistence===p)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,E="authUser"){return(0,d.Z)(function*(){if(!g.length)return new B(xn(ni),p,E);const S=(yield Promise.all(g.map(function(){var $e=(0,d.Z)(function*(tt){if(yield tt._isAvailable())return tt});return function(tt){return $e.apply(this,arguments)}}()))).filter($e=>$e);let M=S[0]||xn(ni);const j=$(E,p.config.apiKey,p.name);let Q=null;for(const $e of g)try{const tt=yield $e._get(j);if(tt){const rt=sr._fromJSON(p,tt);$e!==M&&(Q=rt),M=$e;break}}catch{}const xe=S.filter($e=>$e._shouldAllowMigration);return M._shouldAllowMigration&&xe.length?(M=xe[0],Q&&(yield M._set(j,Q.toJSON())),yield Promise.all(g.map(function(){var $e=(0,d.Z)(function*(tt){if(tt!==M)try{yield tt._remove(j)}catch{}});return function(tt){return $e.apply(this,arguments)}}())),new B(M,p,E)):new B(M,p,E)})()}}function Z(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Rt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(ve(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Kn(p))return"Blackberry";if(Pn(p))return"Webos";if(ee(p))return"Safari";if((p.includes("chrome/")||Le(p))&&!p.includes("edge/"))return"Chrome";if(en(p))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function ve(y=(0,F.z$)()){return/firefox\//i.test(y)}function ee(y=(0,F.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Le(y=(0,F.z$)()){return/crios\//i.test(y)}function Rt(y=(0,F.z$)()){return/iemobile/i.test(y)}function en(y=(0,F.z$)()){return/android/i.test(y)}function Kn(y=(0,F.z$)()){return/blackberry/i.test(y)}function Pn(y=(0,F.z$)()){return/webos/i.test(y)}function mn(y=(0,F.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function ds(y=(0,F.z$)()){return mn(y)||en(y)||Pn(y)||Kn(y)||/windows phone/i.test(y)||Rt(y)}function ce(y,p=[]){let g;switch(y){case"Browser":g=Z((0,F.z$)());break;case"Worker":g=`${Z((0,F.z$)())}-${y}`;break;default:g=y}const E=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${ue.SDK_VERSION}/${E}`}function Oe(){return(Oe=(0,d.Z)(function*(y){return(yield et(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function _t(y,p){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,d.Z)(function*(y,p){return et(y,"GET","/v2/recaptchaConfig",Ft(y,p))})).apply(this,arguments)}function zt(y){return void 0!==y&&void 0!==y.getResponse}function vt(y){return void 0!==y&&void 0!==y.enterprise}class un{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function Dr(y){return new Promise((p,g)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=p,E.onerror=S=>{const M=Ce("internal-error");M.customData=S,g(M)},E.type="text/javascript",E.charset="UTF-8",function tn(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(E)})}function or(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ma="NO_RECAPTCHA";class xi{constructor(p){this.type="recaptcha-enterprise",this.auth=vn(p)}verify(p="verify",g=!1){var E=this;return(0,d.Z)(function*(){function M(){return M=(0,d.Z)(function*(Q){if(!g){if(null==Q.tenantId&&null!=Q._agentRecaptchaConfig)return Q._agentRecaptchaConfig.siteKey;if(null!=Q.tenantId&&void 0!==Q._tenantRecaptchaConfigs[Q.tenantId])return Q._tenantRecaptchaConfigs[Q.tenantId].siteKey}return new Promise(function(){var xe=(0,d.Z)(function*($e,tt){_t(Q,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(rt=>{if(void 0!==rt.recaptchaKey){const kn=new un(rt);return null==Q.tenantId?Q._agentRecaptchaConfig=kn:Q._tenantRecaptchaConfigs[Q.tenantId]=kn,$e(kn.siteKey)}tt(new Error("recaptcha Enterprise site key undefined"))}).catch(rt=>{tt(rt)})});return function($e,tt){return xe.apply(this,arguments)}}())}),M.apply(this,arguments)}function j(Q,xe,$e){const tt=window.grecaptcha;vt(tt)?tt.enterprise.ready(()=>{tt.enterprise.execute(Q,{action:p}).then(rt=>{xe(rt)}).catch(()=>{xe(ma)})}):$e(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Q,xe)=>{(function S(Q){return M.apply(this,arguments)})(E.auth).then($e=>{if(!g&&vt(window.grecaptcha))j($e,Q,xe);else{if(typeof window>"u")return void xe(new Error("RecaptchaVerifier is only supported in browser"));Dr("https://www.google.com/recaptcha/enterprise.js?render="+$e).then(()=>{j($e,Q,xe)}).catch(tt=>{xe(tt)})}}).catch($e=>{xe($e)})})})()}}function We(y,p,g){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,d.Z)(function*(y,p,g,E=!1){const S=new xi(y);let M;try{M=yield S.verify(g)}catch{M=yield S.verify(g,!0)}const j=Object.assign({},p);return Object.assign(j,E?{captchaResp:M}:{captchaResponse:M}),Object.assign(j,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(j,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),j})).apply(this,arguments)}class Rn{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,g){const E=M=>new Promise((j,Q)=>{try{j(p(M))}catch(xe){Q(xe)}});E.onAbort=g,this.queue.push(E);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(p){var g=this;return(0,d.Z)(function*(){if(g.auth.currentUser===p)return;const E=[];try{for(const S of g.queue)yield S(p),S.onAbort&&E.push(S.onAbort)}catch(S){E.reverse();for(const M of E)try{M()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class Ri{constructor(p,g,E,S){this.app=p,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=E,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ar(this),this.idTokenSubscription=new ar(this),this.beforeStateQueue=new Rn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(p,g){var E=this;return g&&(this._popupRedirectResolver=xn(g)),this._initializationPromise=this.queue((0,d.Z)(function*(){var S,M;if(!E._deleted&&(E.persistenceManager=yield B.create(E,p),!E._deleted)){if(null!==(S=E._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(M=E.currentUser)||void 0===M?void 0:M.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g,!0)}})()}initializeCurrentUser(p){var g=this;return(0,d.Z)(function*(){var E;const S=yield g.assertedPersistence.getCurrentUser();let M=S,j=!1;if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Q=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,xe=M?._redirectEventId,$e=yield g.tryRedirectSignIn(p);(!Q||Q===xe)&&$e?.user&&(M=$e.user,j=!0)}if(!M)return g.directlySetCurrentUser(null);if(!M._redirectEventId){if(j)try{yield g.beforeStateQueue.runMiddleware(M)}catch(Q){M=S,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(Q))}return M?g.reloadAndSetCurrentUserOrClear(M):g.directlySetCurrentUser(null)}return ie(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===M._redirectEventId?g.directlySetCurrentUser(M):g.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(p){var g=this;return(0,d.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch{yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,d.Z)(function*(){try{yield $r(p)}catch(E){if("auth/network-request-failed"!==E?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function be(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,d.Z)(function*(){const E=p?(0,F.m9)(p):null;return E&&ie(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(p,g=!1){var E=this;return(0,d.Z)(function*(){if(!E._deleted)return p&&ie(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,d.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var g=this;return this.queue((0,d.Z)(function*(){yield g.assertedPersistence.setPersistence(xn(p))}))}initializeRecaptchaConfig(){var p=this;return(0,d.Z)(function*(){const g=yield _t(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new un(g);null==p.tenantId?p._agentRecaptchaConfig=E:p._tenantRecaptchaConfigs[p.tenantId]=E,E.emailPasswordEnabled&&new xi(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new F.LL("auth","Firebase",p())}onAuthStateChanged(p,g,E){return this.registerStateListener(this.authStateSubscription,p,g,E)}beforeAuthStateChanged(p,g){return this.beforeStateQueue.pushCallback(p,g)}onIdTokenChanged(p,g,E){return this.registerStateListener(this.idTokenSubscription,p,g,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var E=this;return(0,d.Z)(function*(){const S=yield E.getOrInitRedirectPersistenceManager(g);return null===p?S.removeCurrentUser():S.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,d.Z)(function*(){if(!g.redirectPersistenceManager){const E=p&&xn(p)||g._popupRedirectResolver;ie(E,g,"argument-error"),g.redirectPersistenceManager=yield B.create(g,[xn(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,d.Z)(function*(){var E,S;return g._isInitialized&&(yield g.queue((0,d.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===p?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,d.Z)(function*(){if(p===g.currentUser)return g.queue((0,d.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,E,S){if(this._deleted)return()=>{};const M="function"==typeof g?g:g.next.bind(g),j=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(j,this,"internal-error"),j.then(()=>M(this.currentUser)),"function"==typeof g?p.addObserver(g,E,S):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,d.Z)(function*(){g.currentUser&&g.currentUser!==p&&g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh(),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=ce(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,d.Z)(function*(){var g;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const S=yield null===(g=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();S&&(E["X-Firebase-Client"]=S);const M=yield p._getAppCheckToken();return M&&(E["X-Firebase-AppCheck"]=M),E})()}_getAppCheckToken(){var p=this;return(0,d.Z)(function*(){var g;const E=yield null===(g=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return E?.error&&function Ue(y,...p){Ne.logLevel<=ae.in.WARN&&Ne.warn(`Auth (${ue.SDK_VERSION}): ${y}`,...p)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function vn(y){return(0,F.m9)(y)}class ar{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function hs(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function au(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class As{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return xt("not implemented")}_getIdTokenResponse(p){return xt("not implemented")}_linkToIdToken(p,g){return xt("not implemented")}_getReauthenticationResolver(p){return xt("not implemented")}}function xo(y,p){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,d.Z)(function*(y,p){return et(y,"POST","/v1/accounts:resetPassword",Ft(y,p))})).apply(this,arguments)}function _a(y,p){return xs.apply(this,arguments)}function xs(){return(xs=(0,d.Z)(function*(y,p){return et(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ya(){return(ya=(0,d.Z)(function*(y,p){return et(y,"POST","/v1/accounts:update",Ft(y,p))})).apply(this,arguments)}function Lr(y,p){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,d.Z)(function*(y,p){return En(y,"POST","/v1/accounts:signInWithPassword",Ft(y,p))})).apply(this,arguments)}function vi(y,p){return uu.apply(this,arguments)}function uu(){return(uu=(0,d.Z)(function*(y,p){return et(y,"POST","/v1/accounts:sendOobCode",Ft(y,p))})).apply(this,arguments)}function va(){return(va=(0,d.Z)(function*(y,p){return vi(y,p)})).apply(this,arguments)}function no(y,p){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,d.Z)(function*(y,p){return vi(y,p)})).apply(this,arguments)}function Tr(y,p){return gl.apply(this,arguments)}function gl(){return(gl=(0,d.Z)(function*(y,p){return vi(y,p)})).apply(this,arguments)}function Ei(){return(Ei=(0,d.Z)(function*(y,p){return vi(y,p)})).apply(this,arguments)}function wa(){return(wa=(0,d.Z)(function*(y,p){return En(y,"POST","/v1/accounts:signInWithEmailLink",Ft(y,p))})).apply(this,arguments)}function ri(){return(ri=(0,d.Z)(function*(y,p){return En(y,"POST","/v1/accounts:signInWithEmailLink",Ft(y,p))})).apply(this,arguments)}class ml extends As{constructor(p,g,E,S=null){super("password",E),this._email=p,this._password=g,this._tenantId=S}static _fromEmailAndPassword(p,g){return new ml(p,g,"password")}static _fromEmailAndCode(p,g,E=null){return new ml(p,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,d.Z)(function*(){var E;switch(g.signInMethod){case"password":const S={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=p._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const M=yield We(p,S,"signInWithPassword");return Lr(p,M)}return Lr(p,S).catch(function(){var M=(0,d.Z)(function*(j){if("auth/missing-recaptcha-token"===j.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Q=yield We(p,S,"signInWithPassword");return Lr(p,Q)}return Promise.reject(j)});return function(j){return M.apply(this,arguments)}}());case"emailLink":return function lu(y,p){return wa.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:Ie(p,"internal-error")}})()}_linkToIdToken(p,g){var E=this;return(0,d.Z)(function*(){switch(E.signInMethod){case"password":return _a(p,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function kc(y,p){return ri.apply(this,arguments)}(p,{idToken:g,email:E._email,oobCode:E._password});default:Ie(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Ki(y,p){return gh.apply(this,arguments)}function gh(){return(gh=(0,d.Z)(function*(y,p){return En(y,"POST","/v1/accounts:signInWithIdp",Ft(y,p))})).apply(this,arguments)}class Rs extends As{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new Rs(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):Ie("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:S}=g,M=(0,se._T)(g,["providerId","signInMethod"]);if(!E||!S)return null;const j=new Rs(E,S);return j.idToken=M.idToken||void 0,j.accessToken=M.accessToken||void 0,j.secret=M.secret,j.nonce=M.nonce,j.pendingToken=M.pendingToken||null,j}_getIdTokenResponse(p){return Ki(p,this.buildRequest())}_linkToIdToken(p,g){const E=this.buildRequest();return E.idToken=g,Ki(p,E)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Ki(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,F.xO)(g)}return p}}function Fc(){return(Fc=(0,d.Z)(function*(y,p){return et(y,"POST","/v1/accounts:sendVerificationCode",Ft(y,p))})).apply(this,arguments)}function mh(){return(mh=(0,d.Z)(function*(y,p){return En(y,"POST","/v1/accounts:signInWithPhoneNumber",Ft(y,p))})).apply(this,arguments)}function _l(){return(_l=(0,d.Z)(function*(y,p){const g=yield En(y,"POST","/v1/accounts:signInWithPhoneNumber",Ft(y,p));if(g.temporaryProof)throw Or(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const _h={USER_NOT_FOUND:"user-not-found"};function yl(){return(yl=(0,d.Z)(function*(y,p){return En(y,"POST","/v1/accounts:signInWithPhoneNumber",Ft(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),_h)})).apply(this,arguments)}class Mi extends As{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new Mi({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new Mi({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function Wm(y,p){return mh.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function Zm(y,p){return _l.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Iv(y,p){return yl.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:E,verificationCode:S}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:E,code:S}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:E,phoneNumber:S,temporaryProof:M}=p;return E||g||S||M?new Mi({verificationId:g,verificationCode:E,phoneNumber:S,temporaryProof:M}):null}}class Ea{constructor(p){var g,E,S,M,j,Q;const xe=(0,F.zd)((0,F.pd)(p)),$e=null!==(g=xe.apiKey)&&void 0!==g?g:null,tt=null!==(E=xe.oobCode)&&void 0!==E?E:null,rt=function xp(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=xe.mode)&&void 0!==S?S:null);ie($e&&tt&&rt,"argument-error"),this.apiKey=$e,this.operation=rt,this.code=tt,this.continueUrl=null!==(M=xe.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(j=xe.languageCode)&&void 0!==j?j:null,this.tenantId=null!==(Q=xe.tenantId)&&void 0!==Q?Q:null}static parseLink(p){const g=function yh(y){const p=(0,F.zd)((0,F.pd)(y)).link,g=p?(0,F.zd)((0,F.pd)(p)).deep_link_id:null,E=(0,F.zd)((0,F.pd)(y)).deep_link_id;return(E?(0,F.zd)((0,F.pd)(E)).link:null)||E||g||p||y}(p);try{return new Ea(g)}catch{return null}}}let Rp=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,E){return ml._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const S=Ea.parseLink(E);return ie(S,"argument-error"),ml._fromEmailAndCode(g,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ms{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class ps extends Ms{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Mo extends ps{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return ie("providerId"in g&&"signInMethod"in g,"argument-error"),Rs._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ie(p.idToken||p.accessToken,"argument-error"),Rs._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Mo.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Mo.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:S,pendingToken:M,nonce:j,providerId:Q}=p;if(!E&&!S&&!g&&!M||!Q)return null;try{return new Mo(Q)._credential({idToken:g,accessToken:E,nonce:j,pendingToken:M})}catch{return null}}}let Lc=(()=>{class y extends ps{constructor(){super("facebook.com")}static credential(g){return Rs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),cu=(()=>{class y extends ps{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return Rs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:S}=g;if(!E&&!S)return null;try{return y.credential(E,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),vh=(()=>{class y extends ps{constructor(){super("github.com")}static credential(g){return Rs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ro extends As{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return Ki(p,this.buildRequest())}_linkToIdToken(p,g){const E=this.buildRequest();return E.idToken=g,Ki(p,E)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Ki(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:S,pendingToken:M}=g;return E&&S&&M&&E===S?new ro(E,M):null}static _create(p,g){return new ro(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class vl extends Ms{constructor(p){ie(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return vl.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return vl.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=ro.fromJSON(p);return ie(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:E}=p;if(!g||!E)return null;try{return ro._create(E,g)}catch{return null}}}let wl=(()=>{class y extends ps{constructor(){super("twitter.com")}static credential(g,E){return Rs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:S}=g;if(!E||!S)return null;try{return y.credential(E,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function io(y,p){return ii.apply(this,arguments)}function ii(){return(ii=(0,d.Z)(function*(y,p){return En(y,"POST","/v1/accounts:signUp",Ft(y,p))})).apply(this,arguments)}class Gr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,E,S=!1){return(0,d.Z)(function*(){const M=yield sr._fromIdTokenResponse(p,E,S),j=du(E);return new Gr({user:M,providerId:j,_tokenResponse:E,operationType:g})})()}static _forOperation(p,g,E){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const S=du(E);return new Gr({user:p,providerId:S,_tokenResponse:E,operationType:g})})()}}function du(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Ia(){return(Ia=(0,d.Z)(function*(y){var p;const g=vn(y);if(yield g._initializationPromise,null!==(p=g.currentUser)&&void 0!==p&&p.isAnonymous)return new Gr({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield io(g,{returnSecureToken:!0}),S=yield Gr._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ns extends F.ZR{constructor(p,g,E,S){var M;super(g.code,g.message),this.operationType=E,this.user=S,Object.setPrototypeOf(this,Ns.prototype),this.customData={appName:p.name,tenantId:null!==(M=p.tenantId)&&void 0!==M?M:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,g,E,S){return new Ns(p,g,E,S)}}function Ar(y,p,g,E){return("reauthenticate"===p?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?Ns._fromErrorAndOperation(y,M,p,E):M})}function wh(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function zr(){return zr=(0,d.Z)(function*(y,p){const g=(0,F.m9)(y);yield Ps(!0,g,p);const{providerUserInfo:E}=yield function To(y,p){return So.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),S=wh(E||[]);return g.providerData=g.providerData.filter(M=>S.has(M.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),zr.apply(this,arguments)}function gr(y,p){return El.apply(this,arguments)}function El(){return(El=(0,d.Z)(function*(y,p,g=!1){const E=yield ot(y,p._linkToIdToken(y.auth,yield y.getIdToken()),g);return Gr._forOperation(y,"link",E)})).apply(this,arguments)}function Ps(y,p,g){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,d.Z)(function*(y,p,g){yield $r(p);const S=!1===y?"provider-already-linked":"no-such-provider";ie(wh(p.providerData).has(g)===y,p.auth,S)})).apply(this,arguments)}function so(y,p){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,d.Z)(function*(y,p,g=!1){const{auth:E}=y,S="reauthenticate";try{const M=yield ot(y,Ar(E,S,p,y),g);ie(M.idToken,E,"internal-error");const j=nn(M.idToken);ie(j,E,"internal-error");const{sub:Q}=j;return ie(y.uid===Q,E,"user-mismatch"),Gr._forOperation(y,S,M)}catch(M){throw"auth/user-not-found"===M?.code&&Ie(E,"user-mismatch"),M}})).apply(this,arguments)}function hu(y,p){return kt.apply(this,arguments)}function kt(){return(kt=(0,d.Z)(function*(y,p,g=!1){const E="signIn",S=yield Ar(y,E,p),M=yield Gr._fromIdTokenResponse(y,E,S);return g||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function fu(y,p){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,d.Z)(function*(y,p){return hu(vn(y),p)})).apply(this,arguments)}function Ch(y,p){return Il.apply(this,arguments)}function Il(){return(Il=(0,d.Z)(function*(y,p){const g=(0,F.m9)(y);return yield Ps(!1,g,p.providerId),gr(g,p)})).apply(this,arguments)}function bh(y,p){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,d.Z)(function*(y,p){return so((0,F.m9)(y),p)})).apply(this,arguments)}function Dh(){return(Dh=(0,d.Z)(function*(y,p){return En(y,"POST","/v1/accounts:signInWithCustomToken",Ft(y,p))})).apply(this,arguments)}function Ut(){return Ut=(0,d.Z)(function*(y,p){const g=vn(y),E=yield function Km(y,p){return Dh.apply(this,arguments)}(g,{token:p,returnSecureToken:!0}),S=yield Gr._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(S.user),S}),Ut.apply(this,arguments)}class pu{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?gu._fromServerResponse(p,g):"totpInfo"in g?mr._fromServerResponse(p,g):Ie(p,"internal-error")}}class gu extends pu{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new gu(g)}}class mr extends pu{constructor(p){super("totp",p)}static _fromServerResponse(p,g){return new mr(g)}}function No(y,p,g){var E;ie((null===(E=g.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),ie(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(ie(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(ie(g.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function si(){return si=(0,d.Z)(function*(y,p,g){var E;const S=vn(y),M={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=S._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const j=yield We(S,M,"getOobCode",!0);g&&No(S,j,g),yield no(S,j)}else g&&No(S,M,g),yield no(S,M).catch(function(){var j=(0,d.Z)(function*(Q){if("auth/missing-recaptcha-token"!==Q.code)return Promise.reject(Q);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const xe=yield We(S,M,"getOobCode",!0);g&&No(S,xe,g),yield no(S,xe)}});return function(Q){return j.apply(this,arguments)}}())}),si.apply(this,arguments)}function Dl(){return(Dl=(0,d.Z)(function*(y,p,g){yield xo((0,F.m9)(y),{oobCode:p,newPassword:g})})).apply(this,arguments)}function Os(){return Os=(0,d.Z)(function*(y,p){yield function fs(y,p){return ya.apply(this,arguments)}((0,F.m9)(y),{oobCode:p})}),Os.apply(this,arguments)}function mu(y,p){return ur.apply(this,arguments)}function ur(){return(ur=(0,d.Z)(function*(y,p){const g=(0,F.m9)(y),E=yield xo(g,{oobCode:p}),S=E.requestType;switch(ie(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(E.mfaInfo,g,"internal-error");default:ie(E.email,g,"internal-error")}let M=null;return E.mfaInfo&&(M=pu._fromServerResponse(vn(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:M},operation:S}})).apply(this,arguments)}function gs(){return(gs=(0,d.Z)(function*(y,p){const{data:g}=yield mu((0,F.m9)(y),p);return g.email})).apply(this,arguments)}function Pi(){return Pi=(0,d.Z)(function*(y,p,g){var E;const S=vn(y),M={returnSecureToken:!0,email:p,password:g,clientType:"CLIENT_TYPE_WEB"};let j;if(null!==(E=S._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const $e=yield We(S,M,"signUpPassword");j=io(S,$e)}else j=io(S,M).catch(function(){var $e=(0,d.Z)(function*(tt){if("auth/missing-recaptcha-token"===tt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const rt=yield We(S,M,"signUpPassword");return io(S,rt)}return Promise.reject(tt)});return function(tt){return $e.apply(this,arguments)}}());const Q=yield j.catch($e=>Promise.reject($e)),xe=yield Gr._fromIdTokenResponse(S,"signIn",Q);return yield S._updateCurrentUser(xe.user),xe}),Pi.apply(this,arguments)}function Tl(){return Tl=(0,d.Z)(function*(y,p,g){var E;const S=vn(y),M={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function j(Q,xe){ie(xe.handleCodeInApp,S,"argument-error"),xe&&No(S,Q,xe)}if(null!==(E=S._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Q=yield We(S,M,"getOobCode",!0);j(Q,g),yield Tr(S,Q)}else j(M,g),yield Tr(S,M).catch(function(){var Q=(0,d.Z)(function*(xe){if("auth/missing-recaptcha-token"!==xe.code)return Promise.reject(xe);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const $e=yield We(S,M,"getOobCode",!0);j($e,g),yield Tr(S,$e)}});return function(xe){return Q.apply(this,arguments)}}())}),Tl.apply(this,arguments)}function ba(){return(ba=(0,d.Z)(function*(y,p,g){const E=(0,F.m9)(y),S=Rp.credentialWithLink(p,g||Zt());return ie(S._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),fu(E,S)})).apply(this,arguments)}function Sl(){return(Sl=(0,d.Z)(function*(y,p){return et(y,"POST","/v1/accounts:createAuthUri",Ft(y,p))})).apply(this,arguments)}function Al(){return Al=(0,d.Z)(function*(y,p){const E={identifier:p,continueUri:ft()?Zt():"http://localhost"},{signinMethods:S}=yield function Bc(y,p){return Sl.apply(this,arguments)}((0,F.m9)(y),E);return S||[]}),Al.apply(this,arguments)}function yu(){return yu=(0,d.Z)(function*(y,p){const g=(0,F.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&No(g.auth,S,p);const{email:M}=yield function Oc(y,p){return va.apply(this,arguments)}(g.auth,S);M!==y.email&&(yield y.reload())}),yu.apply(this,arguments)}function vu(){return vu=(0,d.Z)(function*(y,p,g){const E=(0,F.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};g&&No(E.auth,M,g);const{email:j}=yield function wi(y,p){return Ei.apply(this,arguments)}(E.auth,M);j!==y.email&&(yield y.reload())}),vu.apply(this,arguments)}function Rl(){return(Rl=(0,d.Z)(function*(y,p){return et(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ml(){return Ml=(0,d.Z)(function*(y,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const E=(0,F.m9)(y),M={idToken:yield E.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},j=yield ot(E,function xh(y,p){return Rl.apply(this,arguments)}(E.auth,M));E.displayName=j.displayName||null,E.photoURL=j.photoUrl||null;const Q=E.providerData.find(({providerId:xe})=>"password"===xe);Q&&(Q.displayName=E.displayName,Q.photoURL=E.photoURL),yield E._updateTokensIfNecessary(j)}),Ml.apply(this,arguments)}function On(y,p,g){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,d.Z)(function*(y,p,g){const{auth:E}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(M.email=p),g&&(M.password=g);const j=yield ot(y,_a(E,M));yield y._updateTokensIfNecessary(j,!0)})).apply(this,arguments)}class Oo{constructor(p,g,E={}){this.isNewUser=p,this.providerId=g,this.profile=E}}class Op extends Oo{constructor(p,g,E,S){super(p,g,E),this.username=S}}class Rh extends Oo{constructor(p,g){super(p,"facebook.com",g)}}class Xm extends Op{constructor(p,g){super(p,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Pl extends Oo{constructor(p,g){super(p,"google.com",g)}}class $c extends Op{constructor(p,g,E){super(p,"twitter.com",g,E)}}function Hc(y){const{user:p,_tokenResponse:g}=y;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Pp(y){var p,g;if(!y)return null;const{providerId:E}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&y?.idToken){const j=null===(g=null===(p=nn(y.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(j)return new Oo(M,"anonymous"!==j&&"custom"!==j?j:null)}if(!E)return null;switch(E){case"facebook.com":return new Rh(M,S);case"github.com":return new Xm(M,S);case"google.com":return new Pl(M,S);case"twitter.com":return new $c(M,S,y.screenName||null);case"custom":case"anonymous":return new Oo(M,null);default:return new Oo(M,E,S)}}(g)}class ko{constructor(p,g,E){this.type=p,this.credential=g,this.auth=E}static _fromIdtoken(p,g){return new ko("enroll",p,g)}static _fromMfaPendingCredential(p){return new ko("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,E;if(p?.multiFactorSession){if(null!==(g=p.multiFactorSession)&&void 0!==g&&g.pendingCredential)return ko._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return ko._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Fo{constructor(p,g,E){this.session=p,this.hints=g,this.signInResolver=E}static _fromError(p,g){const E=vn(p),S=g.customData._serverResponse,M=(S.mfaInfo||[]).map(Q=>pu._fromServerResponse(E,Q));ie(S.mfaPendingCredential,E,"internal-error");const j=ko._fromMfaPendingCredential(S.mfaPendingCredential);return new Fo(j,M,function(){var Q=(0,d.Z)(function*(xe){const $e=yield xe._process(E,j);delete S.mfaInfo,delete S.mfaPendingCredential;const tt=Object.assign(Object.assign({},S),{idToken:$e.idToken,refreshToken:$e.refreshToken});switch(g.operationType){case"signIn":const rt=yield Gr._fromIdTokenResponse(E,g.operationType,tt);return yield E._updateCurrentUser(rt.user),rt;case"reauthenticate":return ie(g.user,E,"internal-error"),Gr._forOperation(g.user,g.operationType,tt);default:Ie(E,"internal-error")}});return function(xe){return Q.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,d.Z)(function*(){return g.signInResolver(p)})()}}class Uo{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>pu._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Uo(p)}getSession(){var p=this;return(0,d.Z)(function*(){return ko._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,g){var E=this;return(0,d.Z)(function*(){const S=p,M=yield E.getSession(),j=yield ot(E.user,S._process(E.user.auth,M,g));return yield E.user._updateTokensIfNecessary(j),E.user.reload()})()}unenroll(p){var g=this;return(0,d.Z)(function*(){const E="string"==typeof p?p:p.uid,S=yield g.user.getIdToken();try{const M=yield ot(g.user,function Fl(y,p){return et(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ft(y,p))}(g.user.auth,{idToken:S,mfaEnrollmentId:E}));g.enrolledFactors=g.enrolledFactors.filter(({uid:j})=>j!==E),yield g.user._updateTokensIfNecessary(M),yield g.user.reload()}catch(M){throw M}})()}}const oo=new WeakMap,Bo="__sak";class Ll{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Bo,"1"),this.storage.removeItem(Bo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const jo=(()=>{class y extends Ll{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Eu(){const y=(0,F.z$)();return ee(y)||mn(y)}()&&function su(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ds(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const S=this.storage.getItem(E),M=this.localCache[E];S!==M&&g(E,M,S)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((Q,xe,$e)=>{this.notifyListeners(Q,$e)});const S=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Q=this.storage.getItem(S);if(g.newValue!==Q)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!E)return}const M=()=>{const Q=this.storage.getItem(S);!E&&this.localCache[S]===Q||this.notifyListeners(S,Q)},j=this.storage.getItem(S);!function Zi(){return(0,F.w1)()&&10===document.documentMode}()||j===g.newValue||g.newValue===g.oldValue?M():setTimeout(M,10)}notifyListeners(g,E){this.localCache[g]=E;const S=this.listeners[g];if(S)for(const M of Array.from(S))M(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var S=()=>super._set,M=this;return(0,d.Z)(function*(){yield S().call(M,g,E),M.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,S=this;return(0,d.Z)(function*(){const M=yield E().call(S,g);return S.localCache[g]=JSON.stringify(M),M})()}_remove(g){var E=()=>super._remove,S=this;return(0,d.Z)(function*(){yield E().call(S,g),delete S.localCache[g]})()}}return y.type="LOCAL",y})(),Ls=(()=>{class y extends Ll{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return y.type="SESSION",y})();let Aa=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(M=>M.isListeningto(g));if(E)return E;const S=new y(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,d.Z)(function*(){const S=g,{eventId:M,eventType:j,data:Q}=S.data,xe=E.handlersMap[j];if(!xe?.size)return;S.ports[0].postMessage({status:"ack",eventId:M,eventType:j});const $e=Array.from(xe).map(function(){var rt=(0,d.Z)(function*(kn){return kn(S.origin,Q)});return function(kn){return rt.apply(this,arguments)}}()),tt=yield function qc(y){return Promise.all(y.map(function(){var p=(0,d.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return p.apply(this,arguments)}}()))}($e);S.ports[0].postMessage({status:"done",eventId:M,eventType:j,response:tt})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function xa(y="",p=10){let g="";for(let E=0;E<p;E++)g+=Math.floor(10*Math.random());return y+g}class Oh{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,E=50){var S=this;return(0,d.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let j,Q;return new Promise((xe,$e)=>{const tt=xa("",20);M.port1.start();const rt=setTimeout(()=>{$e(new Error("unsupported_event"))},E);Q={messageChannel:M,onMessage(kn){const mo=kn;if(mo.data.eventId===tt)switch(mo.data.status){case"ack":clearTimeout(rt),j=setTimeout(()=>{$e(new Error("timeout"))},3e3);break;case"done":clearTimeout(j),xe(mo.data.response);break;default:clearTimeout(rt),clearTimeout(j),$e(new Error("invalid_response"))}}},S.handlers.add(Q),M.port1.addEventListener("message",Q.onMessage),S.target.postMessage({eventType:p,eventId:tt,data:g},[M.port2])}).finally(()=>{Q&&S.removeMessageHandler(Q)})})()}}function In(){return window}function Ul(){return typeof In().WorkerGlobalScope<"u"&&"function"==typeof In().importScripts}function Bl(){return(Bl=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const $o="firebaseLocalStorageDb",Qn=1,Zc="firebaseLocalStorage",Iu="fbase_key";class Cu{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Vs(y,p){return y.transaction([Zc],p?"readwrite":"readonly").objectStore(Zc)}function $l(){const y=indexedDB.open($o,Qn);return new Promise((p,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(Zc,{keyPath:Iu})}catch(S){g(S)}}),y.addEventListener("success",(0,d.Z)(function*(){const E=y.result;E.objectStoreNames.contains(Zc)?p(E):(E.close(),yield function Lp(){const y=indexedDB.deleteDatabase($o);return new Cu(y).toPromise()}(),p(yield $l()))}))})}function Ho(y,p,g){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,d.Z)(function*(y,p,g){const E=Vs(y,!0).put({[Iu]:p,value:g});return new Cu(E).toPromise()})).apply(this,arguments)}function Ra(){return(Ra=(0,d.Z)(function*(y,p){const g=Vs(y,!1).get(p),E=yield new Cu(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function ao(y,p){const g=Vs(y,!0).delete(p);return new Cu(g).toPromise()}const Go=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,d.Z)(function*(){return g.db||(g.db=yield $l()),g.db})()}_withRetries(g){var E=this;return(0,d.Z)(function*(){let S=0;for(;;)try{const M=yield E._openDb();return yield g(M)}catch(M){if(S++>3)throw M;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,d.Z)(function*(){return Ul()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,d.Z)(function*(){g.receiver=Aa._getInstance(function _r(){return Ul()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,d.Z)(function*(S,M){return{keyProcessed:(yield g._poll()).includes(M.key)}});return function(S,M){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,d.Z)(function*(S,M){return["keyChanged"]});return function(S,M){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,d.Z)(function*(){var E,S;if(g.activeServiceWorker=yield function Wc(){return Bl.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Oh(g.activeServiceWorker);const M=yield g.sender._send("ping",{},800);M&&null!==(E=M[0])&&void 0!==E&&E.fulfilled&&null!==(S=M[0])&&void 0!==S&&S.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,d.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function jl(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const g=yield $l();return yield Ho(g,Bo,"1"),yield ao(g,Bo),!0}catch{}return!1})()}_withPendingWrite(g){var E=this;return(0,d.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var S=this;return(0,d.Z)(function*(){return S._withPendingWrite((0,d.Z)(function*(){return yield S._withRetries(M=>Ho(M,g,E)),S.localCache[g]=E,S.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,d.Z)(function*(){const S=yield E._withRetries(M=>function bu(y,p){return Ra.apply(this,arguments)}(M,g));return E.localCache[g]=S,S})()}_remove(g){var E=this;return(0,d.Z)(function*(){return E._withPendingWrite((0,d.Z)(function*(){return yield E._withRetries(S=>ao(S,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,d.Z)(function*(){const E=yield g._withRetries(j=>{const Q=Vs(j,!1).getAll();return new Cu(Q).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const S=[],M=new Set;for(const{fbase_key:j,value:Q}of E)M.add(j),JSON.stringify(g.localCache[j])!==JSON.stringify(Q)&&(g.notifyListeners(j,Q),S.push(j));for(const j of Object.keys(g.localCache))g.localCache[j]&&!M.has(j)&&(g.notifyListeners(j,null),S.push(j));return S})()}notifyListeners(g,E){this.localCache[g]=E;const S=this.listeners[g];if(S)for(const M of Array.from(S))M(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})(),Tu=1e12;class Yc{constructor(p){this.auth=p,this.counter=Tu,this._widgets=new Map}render(p,g){const E=this.counter;return this._widgets.set(E,new Qc(p,this.auth.name,g||{})),this.counter++,E}reset(p){var g;const E=p||Tu;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(p){var g;return(null===(g=this._widgets.get(p||Tu))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,d.Z)(function*(){var E;return null===(E=g._widgets.get(p||Tu))||void 0===E||E.execute(),""})()}}class Qc{constructor(p,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof p?document.getElementById(p):p;ie(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Dv(y){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)p.push(g.charAt(Math.floor(Math.random()*g.length)));return p.join("")}(50);const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Bp=or("rcb"),Tv=new Se(3e4,6e4);class Sv{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=In().grecaptcha)||void 0===p||!p.render)}load(p,g=""){return ie(function jp(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),p,"argument-error"),this.shouldResolveImmediately(g)&&zt(In().grecaptcha)?Promise.resolve(In().grecaptcha):new Promise((E,S)=>{const M=In().setTimeout(()=>{S(Ce(p,"network-request-failed"))},Tv.get());In()[Bp]=()=>{In().clearTimeout(M),delete In()[Bp];const Q=In().grecaptcha;if(!Q||!zt(Q))return void S(Ce(p,"internal-error"));const xe=Q.render;Q.render=($e,tt)=>{const rt=xe($e,tt);return this.counter++,rt},this.hostLanguage=g,E(Q)},Dr(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Bp,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(M),S(Ce(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var g;return!(null===(g=In().grecaptcha)||void 0===g||!g.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class yr{load(p){return(0,d.Z)(function*(){return new Yc(p)})()}clearedOneInstance(){}}const Su="recaptcha",Hl={theme:"light",type:"image"};class Xc{constructor(p,g=Object.assign({},Hl),E){this.parameters=g,this.type=Su,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vn(E),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof p?document.getElementById(p):p;ie(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new yr:new Sv,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(g)||new Promise(M=>{const j=Q=>{Q&&(p.tokenChangeListeners.delete(j),M(Q))};p.tokenChangeListeners.add(j),p.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof p)p(g);else if("string"==typeof p){const E=In()[p];"function"==typeof E&&E(g)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){ie(ft()&&!Ul(),p.auth,"internal-error"),yield function Qi(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function te(y){return Oe.apply(this,arguments)}(p.auth);ie(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ms{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=Mi._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function Wo(){return(Wo=(0,d.Z)(function*(y,p,g){const E=vn(y),S=yield ql(E,p,(0,F.m9)(g));return new ms(S,M=>fu(E,M))})).apply(this,arguments)}function zl(){return(zl=(0,d.Z)(function*(y,p,g){const E=(0,F.m9)(y);yield Ps(!1,E,"phone");const S=yield ql(E.auth,p,(0,F.m9)(g));return new ms(S,M=>Ch(E,M))})).apply(this,arguments)}function Jc(){return(Jc=(0,d.Z)(function*(y,p,g){const E=(0,F.m9)(y),S=yield ql(E.auth,p,(0,F.m9)(g));return new ms(S,M=>bh(E,M))})).apply(this,arguments)}function ql(y,p,g){return oi.apply(this,arguments)}function oi(){return oi=(0,d.Z)(function*(y,p,g){var E;const S=yield g.verify();try{let M;if(ie("string"==typeof S,y,"argument-error"),ie(g.type===Su,y,"argument-error"),M="string"==typeof p?{phoneNumber:p}:p,"session"in M){const j=M.session;if("phoneNumber"in M)return ie("enroll"===j.type,y,"internal-error"),(yield function Sa(y,p){return et(y,"POST","/v2/accounts/mfaEnrollment:start",Ft(y,p))}(y,{idToken:j.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{ie("signin"===j.type,y,"internal-error");const Q=(null===(E=M.multiFactorHint)||void 0===E?void 0:E.uid)||M.multiFactorUid;return ie(Q,y,"missing-multi-factor-info"),(yield function zo(y,p){return et(y,"POST","/v2/accounts/mfaSignIn:start",Ft(y,p))}(y,{mfaPendingCredential:j.credential,mfaEnrollmentId:Q,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:j}=yield function qm(y,p){return Fc.apply(this,arguments)}(y,{phoneNumber:M.phoneNumber,recaptchaToken:S});return j}}finally{g._reset()}}),oi.apply(this,arguments)}function ai(){return(ai=(0,d.Z)(function*(y,p){yield gr((0,F.m9)(y),p)})).apply(this,arguments)}let ut=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=vn(g)}verifyPhoneNumber(g,E){return ql(this.auth,g,(0,F.m9)(E))}static credential(g,E){return Mi._fromVerification(g,E)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:S}=g;return E&&S?Mi._fromTokenResponse(E,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function qr(y,p){return p?xn(p):(ie(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Vn extends As{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Ki(p,this._buildIdpRequest())}_linkToIdToken(p,g){return Ki(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return Ki(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function Lh(y){return hu(y.auth,new Vn(y),y.bypassAuthState)}function Au(y){const{auth:p,user:g}=y;return ie(g,p,"internal-error"),so(g,new Vn(y),y.bypassAuthState)}function ui(y){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,d.Z)(function*(y){const{auth:p,user:g}=y;return ie(g,p,"internal-error"),gr(g,new Vn(y),y.bypassAuthState)})).apply(this,arguments)}class ed{constructor(p,g,E,S,M=!1){this.auth=p,this.resolver=E,this.user=S,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,d.Z)(function*(E,S){p.pendingPromise={resolve:E,reject:S};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(M){p.reject(M)}});return function(E,S){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,d.Z)(function*(){const{urlResponse:E,sessionId:S,postBody:M,tenantId:j,error:Q,type:xe}=p;if(Q)return void g.reject(Q);const $e={auth:g.auth,requestUri:E,sessionId:S,tenantId:j||void 0,postBody:M||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(xe)($e))}catch(tt){g.reject(tt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Lh;case"linkViaPopup":case"linkViaRedirect":return ui;case"reauthViaPopup":case"reauthViaRedirect":return Au;default:Ie(this.auth,"internal-error")}}resolve(p){nt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){nt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Oi=new Se(2e3,1e4);function xu(){return(xu=(0,d.Z)(function*(y,p,g){const E=vn(y);ke(y,p,Ms);const S=qr(E,g);return new Zl(E,"signInViaPopup",p,S).executeNotNull()})).apply(this,arguments)}function Us(){return(Us=(0,d.Z)(function*(y,p,g){const E=(0,F.m9)(y);ke(E.auth,p,Ms);const S=qr(E.auth,g);return new Zl(E.auth,"reauthViaPopup",p,S,E).executeNotNull()})).apply(this,arguments)}function td(){return(td=(0,d.Z)(function*(y,p,g){const E=(0,F.m9)(y);ke(E.auth,p,Ms);const S=qr(E.auth,g);return new Zl(E.auth,"linkViaPopup",p,S,E).executeNotNull()})).apply(this,arguments)}let Zl=(()=>{class y extends ed{constructor(g,E,S,M,j){super(g,E,M,j),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,d.Z)(function*(){const E=yield g.execute();return ie(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,d.Z)(function*(){nt(1===g.filter.length,"Popup operations only handle one event");const E=xa();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(Ce(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,S;this.pollId=null!==(S=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,Oi.get())};g()}}return y.currentPopupAction=null,y})();const uo="pendingRedirect",lo=new Map;class Xn extends ed{constructor(p,g,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,d.Z)(function*(){let E=lo.get(g.auth._key());if(!E){try{const M=(yield function nd(y,p){return rd.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;E=()=>Promise.resolve(M)}catch(S){E=()=>Promise.reject(S)}lo.set(g.auth._key(),E)}return g.bypassAuthState||lo.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,E=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(E,p);if("unknown"!==p.type){if(p.eventId){const S=yield E.auth._redirectUserForId(p.eventId);if(S)return E.user=S,g().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function rd(){return(rd=(0,d.Z)(function*(y,p){const g=Yo(p),E=Yl(y);if(!(yield E._isAvailable()))return!1;const S="true"===(yield E._get(g));return yield E._remove(g),S})).apply(this,arguments)}function Zo(y,p){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,d.Z)(function*(y,p){return Yl(y)._set(Yo(p),"true")})).apply(this,arguments)}function Vh(y,p){lo.set(y._key(),p)}function Yl(y){return xn(y._redirectPersistence)}function Yo(y){return $(uo,y.config.apiKey,y.name)}function Uh(y,p,g){return function Gp(y,p,g){return Mu.apply(this,arguments)}(y,p,g)}function Mu(){return(Mu=(0,d.Z)(function*(y,p,g){const E=vn(y);ke(y,p,Ms),yield E._initializationPromise;const S=qr(E,g);return yield Zo(S,E),S._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function Nu(y,p,g){return function Xi(y,p,g){return Pu.apply(this,arguments)}(y,p,g)}function Pu(){return(Pu=(0,d.Z)(function*(y,p,g){const E=(0,F.m9)(y);ke(E.auth,p,Ms),yield E.auth._initializationPromise;const S=qr(E.auth,g);yield Zo(S,E.auth);const M=yield Jn(E);return S._openRedirect(E.auth,p,"reauthViaRedirect",M)})).apply(this,arguments)}function vr(y,p,g){return function id(y,p,g){return sd.apply(this,arguments)}(y,p,g)}function sd(){return(sd=(0,d.Z)(function*(y,p,g){const E=(0,F.m9)(y);ke(E.auth,p,Ms),yield E.auth._initializationPromise;const S=qr(E.auth,g);yield Ps(!1,E,p.providerId),yield Zo(S,E.auth);const M=yield Jn(E);return S._openRedirect(E.auth,p,"linkViaRedirect",M)})).apply(this,arguments)}function co(){return(co=(0,d.Z)(function*(y,p){return yield vn(y)._initializationPromise,Qo(y,p,!1)})).apply(this,arguments)}function Qo(y,p){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,d.Z)(function*(y,p,g=!1){const E=vn(y),S=qr(E,p),j=yield new Xn(E,S,g).execute();return j&&!g&&(delete j.user._redirectEventId,yield E._persistUserIfCurrent(j.user),yield E._setRedirectUser(null,p)),j})).apply(this,arguments)}function Jn(y){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,d.Z)(function*(y){const p=xa(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class Pa{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(g=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function xr(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bs(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var E;if(p.error&&!Bs(p)){const S=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(Ce(this.auth,S))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const E=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ji(p))}saveEventToCache(p){this.cachedEventUids.add(Ji(p)),this.lastProcessedEventTime=Date.now()}}function Ji(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function Bs({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===p?.code}function Jo(y){return zp.apply(this,arguments)}function zp(){return(zp=(0,d.Z)(function*(y,p={}){return et(y,"GET","/v1/projects",p)})).apply(this,arguments)}const Oa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ql=/^https?/;function js(){return(js=(0,d.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield Jo(y);for(const g of p)try{if(ad(g))return}catch{}Ie(y,"unauthorized-domain")})).apply(this,arguments)}function ad(y){const p=Zt(),{protocol:g,hostname:E}=new URL(p);if(y.startsWith("chrome-extension://")){const j=new URL(y);return""===j.hostname&&""===E?"chrome-extension:"===g&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&j.hostname===E}if(!Ql.test(g))return!1;if(Oa.test(y))return E===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(E)}const Jl=new Se(3e4,6e4);function bt(){const y=In().___jsl;if(y?.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let ec=null;const Bh=new Se(5e3,15e3),jh="__/auth/iframe",ts="emulator/auth/iframe",$h={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gh(y){const p=y.config;ie(p.authDomain,y,"auth-domain-config-required");const g=p.emulator?ze(p,ts):`https://${y.config.authDomain}/${jh}`,E={apiKey:p.apiKey,appName:y.name,v:ue.SDK_VERSION},S=Hh.get(y.config.apiHost);S&&(E.eid=S);const M=y._getFrameworks();return M.length&&(E.fw=M.join(",")),`${g}?${(0,F.xO)(E).slice(1)}`}function D(){return D=(0,d.Z)(function*(y){const p=yield function ki(y){return ec=ec||function es(y){return new Promise((p,g)=>{var E,S,M;function j(){bt(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{bt(),g(Ce(y,"network-request-failed"))},timeout:Jl.get()})}if(null!==(S=null===(E=In().gapi)||void 0===E?void 0:E.iframes)&&void 0!==S&&S.Iframe)p(gapi.iframes.getContext());else{if(null===(M=In().gapi)||void 0===M||!M.load){const Q=or("iframefcb");return In()[Q]=()=>{gapi.load?j():g(Ce(y,"network-request-failed"))},Dr(`https://apis.google.com/js/api.js?onload=${Q}`).catch(xe=>g(xe))}j()}}).catch(p=>{throw ec=null,p})}(y),ec}(y),g=In().gapi;return ie(g,y,"internal-error"),p.open({where:document.body,url:Gh(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$h,dontclear:!0},E=>new Promise(function(){var S=(0,d.Z)(function*(M,j){yield E.restyle({setHideOnLeave:!1});const Q=Ce(y,"network-request-failed"),xe=In().setTimeout(()=>{j(Q)},Bh.get());function $e(){In().clearTimeout(xe),M(E)}E.ping($e).then($e,()=>{j(Q)})});return function(M,j){return S.apply(this,arguments)}}()))}),D.apply(this,arguments)}const x={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},k=500,z=600,Y="_blank",re="http://localhost";class qe{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Nt="__/auth/handler",Pt="emulator/auth/handler",Wr=encodeURIComponent("fac");function Cn(y,p,g,E,S,M){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,d.Z)(function*(y,p,g,E,S,M){ie(y.config.authDomain,y,"auth-domain-config-required"),ie(y.config.apiKey,y,"invalid-api-key");const j={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:E,v:ue.SDK_VERSION,eventId:S};if(p instanceof Ms){p.setDefaultLanguage(y.languageCode),j.providerId=p.providerId||"",(0,F.xb)(p.getCustomParameters())||(j.customParameters=JSON.stringify(p.getCustomParameters()));for(const[tt,rt]of Object.entries(M||{}))j[tt]=rt}if(p instanceof ps){const tt=p.getScopes().filter(rt=>""!==rt);tt.length>0&&(j.scopes=tt.join(","))}y.tenantId&&(j.tid=y.tenantId);const Q=j;for(const tt of Object.keys(Q))void 0===Q[tt]&&delete Q[tt];const xe=yield y._getAppCheckToken(),$e=xe?`#${Wr}=${encodeURIComponent(xe)}`:"";return`${function ho({config:y}){return y.emulator?ze(y,Pt):`https://${y.authDomain}/${Nt}`}(y)}?${(0,F.xO)(Q).slice(1)}${$e}`})).apply(this,arguments)}const ea="webStorageSupport",ns=class Rr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ls,this._completeRedirectFn=Qo,this._overrideRedirectResult=Vh}_openPopup(p,g,E,S){var M=this;return(0,d.Z)(function*(){var j;nt(null===(j=M.eventManagers[p._key()])||void 0===j?void 0:j.manager,"_initialize() not called before _openPopup()");const Q=yield Cn(p,g,E,Zt(),S);return function je(y,p,g,E=k,S=z){const M=Math.max((window.screen.availHeight-S)/2,0).toString(),j=Math.max((window.screen.availWidth-E)/2,0).toString();let Q="";const xe=Object.assign(Object.assign({},x),{width:E.toString(),height:S.toString(),top:M,left:j}),$e=(0,F.z$)().toLowerCase();g&&(Q=Le($e)?Y:g),ve($e)&&(p=p||re,xe.scrollbars="yes");const tt=Object.entries(xe).reduce((kn,[mo,Ed])=>`${kn}${mo}=${Ed},`,"");if(function Hr(y=(0,F.z$)()){var p;return mn(y)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}($e)&&"_self"!==Q)return function dt(y,p){const g=document.createElement("a");g.href=y,g.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(p||"",Q),new qe(null);const rt=window.open(p||"",Q,tt);ie(rt,y,"popup-blocked");try{rt.focus()}catch{}return new qe(rt)}(p,Q,xa())})()}_openRedirect(p,g,E,S){var M=this;return(0,d.Z)(function*(){return yield M._originValidation(p),function kh(y){In().location.href=y}(yield Cn(p,g,E,Zt(),S)),new Promise(()=>{})})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:S,promise:M}=this.eventManagers[g];return S?Promise.resolve(S):(nt(M,"If manager is not set, promise should be"),M)}const E=this.initAndGetManager(p);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(p){var g=this;return(0,d.Z)(function*(){const E=yield function I(y){return D.apply(this,arguments)}(p),S=new Pa(p);return E.register("authEvent",M=>(ie(M?.authEvent,p,"invalid-auth-event"),{status:S.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:S},g.iframes[p._key()]=E,S})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(ea,{type:ea},S=>{var M;const j=null===(M=S?.[0])||void 0===M?void 0:M[ea];void 0!==j&&g(!!j),Ie(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Xl(y){return js.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return ds()||ee()||mn()}};class fo{constructor(p){this.factorId=p}_process(p,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,E);case"signin":return this._finalizeSignIn(p,g.credential);default:return xt("unexpected MultiFactorSessionType")}}}class ud extends fo{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new ud(p)}_finalizeEnroll(p,g,E){return function zc(y,p){return et(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ft(y,p))}(p,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function Up(y,p){return et(y,"POST","/v2/accounts/mfaSignIn:finalize",Ft(y,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ld=(()=>{class y{constructor(){}static assertion(g){return ud._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Wp="@firebase/auth";class tc{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,d.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);g&&(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ku(){return window}(0,F.Pz)("authIdTokenMaxAge"),function t_(y){(0,ue._registerComponent)(new ye.wA("auth",(p,{options:g})=>{const E=p.getProvider("app").getImmediate(),S=p.getProvider("heartbeat"),M=p.getProvider("app-check-internal"),{apiKey:j,authDomain:Q}=E.options;ie(j&&!j.includes(":"),"invalid-api-key",{appName:E.name}),ie(!Q?.includes(":"),"argument-error",{appName:E.name});const xe={apiKey:j,authDomain:Q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ce(y)},$e=new Ri(E,S,M,xe);return function Hn(y,p){const g=p?.persistence||[],E=(Array.isArray(g)?g:[g]).map(xn);p?.errorMap&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(E,p?.popupRedirectResolver)}($e,g),$e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,E)=>{p.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new ye.wA("auth-internal",p=>{const g=vn(p.getProvider("auth").getImmediate());return new tc(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(Wp,"0.23.1",function Zp(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ue.registerVersion)(Wp,"0.23.1","esm2017")}("Browser");const xv=2e3;function dd(){return dd=(0,d.Z)(function*(y,p,g){var E;const{BuildInfo:S}=ku();nt(p.sessionId,"AuthEvent did not contain a session ID");const M=yield function Fa(y){return hd.apply(this,arguments)}(p.sessionId),j={};return mn()?j.ibi=S.packageName:en()?j.apn=S.packageName:Ie(y,"operation-not-supported-in-this-environment"),S.displayName&&(j.appDisplayName=S.displayName),j.sessionId=M,Cn(y,g,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,j)}),dd.apply(this,arguments)}function ka(){return(ka=(0,d.Z)(function*(y){const{BuildInfo:p}=ku(),g={};mn()?g.iosBundleId=p.packageName:en()?g.androidPackageName=p.packageName:Ie(y,"operation-not-supported-in-this-environment"),yield Jo(y,g)})).apply(this,arguments)}function nc(){return(nc=(0,d.Z)(function*(y,p,g){const{cordova:E}=ku();let S=()=>{};try{yield new Promise((M,j)=>{let Q=null;function xe(){var rt;M();const kn=null===(rt=E.plugins.browsertab)||void 0===rt?void 0:rt.close;"function"==typeof kn&&kn(),"function"==typeof g?.close&&g.close()}function $e(){Q||(Q=window.setTimeout(()=>{j(Ce(y,"redirect-cancelled-by-user"))},xv))}function tt(){"visible"===document?.visibilityState&&$e()}p.addPassiveListener(xe),document.addEventListener("resume",$e,!1),en()&&document.addEventListener("visibilitychange",tt,!1),S=()=>{p.removePassiveListener(xe),document.removeEventListener("resume",$e,!1),document.removeEventListener("visibilitychange",tt,!1),Q&&window.clearTimeout(Q)}})}finally{S()}})).apply(this,arguments)}function hd(){return(hd=(0,d.Z)(function*(y){const p=function i_(y){if(nt(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),g=new Uint8Array(p);for(let E=0;E<y.length;E++)g[E]=y.charCodeAt(E);return g}(y),g=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const fd=20;class Wh extends Pa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(p)),super.onEvent(p)}initialized(){var p=this;return(0,d.Z)(function*(){yield p.initPromise})()}}function Zh(y){return pd.apply(this,arguments)}function pd(){return(pd=(0,d.Z)(function*(y){const p=yield Kh()._get(Vu(y));return p&&(yield Kh()._remove(Vu(y))),p})).apply(this,arguments)}function Yp(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<fd;g++){const E=Math.floor(Math.random()*p.length);y.push(p.charAt(E))}return y.join("")}function Kh(){return xn(jo)}function Vu(y){return $("authEvent",y.config.apiKey,y.name)}function $s(y){if(!y?.includes("?"))return{};const[p,...g]=y.split("?");return(0,F.zd)(g.join("?"))}const md=class gd{constructor(){this._redirectPersistence=Ls,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Qo,this._overrideRedirectResult=Vh}_initialize(p){var g=this;return(0,d.Z)(function*(){const E=p._key();let S=g.eventManagers.get(E);return S||(S=new Wh(p),g.eventManagers.set(E,S),g.attachCallbackListeners(p,S)),S})()}_openPopup(p){Ie(p,"operation-not-supported-in-this-environment")}_openRedirect(p,g,E,S){var M=this;return(0,d.Z)(function*(){!function Mv(y){var p,g,E,S,M,j,Q,xe,$e,tt;const rt=ku();ie("function"==typeof(null===(p=rt?.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ie(typeof(null===(g=rt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ie("function"==typeof(null===(M=null===(S=null===(E=rt?.cordova)||void 0===E?void 0:E.plugins)||void 0===S?void 0:S.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ie("function"==typeof(null===(xe=null===(Q=null===(j=rt?.cordova)||void 0===j?void 0:j.plugins)||void 0===Q?void 0:Q.browsertab)||void 0===xe?void 0:xe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ie("function"==typeof(null===(tt=null===($e=rt?.cordova)||void 0===$e?void 0:$e.InAppBrowser)||void 0===tt?void 0:tt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const j=yield M._initialize(p);yield j.initialized(),j.resetRedirect(),function Kl(){lo.clear()}(),yield M._originValidation(p);const Q=function ra(y,p,g=null){return{type:p,eventId:g,urlResponse:null,sessionId:Yp(),postBody:null,tenantId:y.tenantId,error:Ce(y,"no-auth-event")}}(p,E,S);yield function s_(y,p){return Kh()._set(Vu(y),p)}(p,Q);const xe=yield function r_(y,p,g){return dd.apply(this,arguments)}(p,Q,g),$e=yield function Rv(y){const{cordova:p}=ku();return new Promise(g=>{p.plugins.browsertab.isAvailable(E=>{let S=null;E?p.plugins.browsertab.openUrl(y):S=p.InAppBrowser.open(y,function Kt(y=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(S)})})}(xe);return function Fu(y,p,g){return nc.apply(this,arguments)}(p,j,$e)})()}_isIframeWebStorageSupported(p,g){throw new Error("Method not implemented.")}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function qh(y){return ka.apply(this,arguments)}(p)),this.originValidationPromises[g]}attachCallbackListeners(p,g){const{universalLinks:E,handleOpenURL:S,BuildInfo:M}=ku(),j=setTimeout((0,d.Z)(function*(){yield Zh(p),g.onEvent(Xp())}),500),Q=function(){var tt=(0,d.Z)(function*(rt){clearTimeout(j);const kn=yield Zh(p);let mo=null;kn&&rt?.url&&(mo=function Lu(y,p){var g,E;const S=function Qh(y){const p=$s(y),g=p.link?decodeURIComponent(p.link):void 0,E=$s(g).link,S=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return $s(S).link||S||E||g||y}(p);if(S.includes("/__/auth/callback")){const M=$s(S),j=M.firebaseError?function Yh(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,Q=null===(E=null===(g=j?.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],xe=Q?Ce(Q):null;return xe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:xe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(kn,rt.url)),g.onEvent(mo||Xp())});return function(kn){return tt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,Q);const xe=S,$e=`${M.packageName.toLowerCase()}://`;ku().handleOpenURL=function(){var tt=(0,d.Z)(function*(rt){if(rt.toLowerCase().startsWith($e)&&Q({url:rt}),"function"==typeof xe)try{xe(rt)}catch(kn){console.error(kn)}});return function(rt){return tt.apply(this,arguments)}}()}};function Xp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ce("no-auth-event")}}const eg=1e3;function _s(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function La(y=(0,F.z$)()){return!("file:"!==_s()&&"ionic:"!==_s()&&"capacitor:"!==_s()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ov(){try{const y=self.localStorage,p=xa();if(y)return y.setItem(p,"1"),y.removeItem(p),!function Pv(y=(0,F.z$)()){return function rc(){return(0,F.w1)()&&11===document?.documentMode}()||function Nv(y=(0,F.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,F.hl)()}catch{return tg()&&(0,F.hl)()}return!1}function tg(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function wd(){return(function yd(){return"http:"===_s()||"https:"===_s()}()||(0,F.ru)()||La())&&!function vd(){return(0,F.b$)()||(0,F.UG)()}()&&Ov()&&!tg()}function o_(){return La()&&typeof document<"u"}function ic(){return(ic=(0,d.Z)(function*(){return!!o_()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},eg);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})})).apply(this,arguments)}const Fi={LOCAL:"local",NONE:"none",SESSION:"session"},Uu=ie,rg="persistence";function ig(y){return sg.apply(this,arguments)}function sg(){return(sg=(0,d.Z)(function*(y){yield y._initializationPromise;const p=og(),g=$(rg,y.config.apiKey,y.name);p&&p.setItem(g,y._getPersistence())})).apply(this,arguments)}function og(){var y;try{return(null===(y=function ng(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const ag=ie;class Zr{constructor(){this.browserResolver=xn(ns),this.cordovaResolver=xn(md),this.underlyingResolver=null,this._redirectPersistence=Ls,this._completeRedirectFn=Qo,this._overrideRedirectResult=Vh}_initialize(p){var g=this;return(0,d.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,g,E,S){var M=this;return(0,d.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(p,g,E,S)})()}_openRedirect(p,g,E,S){var M=this;return(0,d.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(p,g,E,S)})()}_isIframeWebStorageSupported(p,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,g)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return o_()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ag(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,d.Z)(function*(){if(p.underlyingResolver)return;const g=yield function a_(){return ic.apply(this,arguments)}();p.underlyingResolver=g?p.cordovaResolver:p.browserResolver})()}}function Li(y){return y.unwrap()}function Fv(y){return Vv(y)}function Vv(y){const{_tokenResponse:p}=y instanceof F.ZR?y.customData:y;if(!p)return null;if(!(y instanceof F.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return ut.credentialFromResult(y);const g=p.providerId;if(!g||g===fe.PASSWORD)return null;let E;switch(g){case fe.GOOGLE:E=cu;break;case fe.FACEBOOK:E=Lc;break;case fe.GITHUB:E=vh;break;case fe.TWITTER:E=wl;break;default:const{oauthIdToken:S,oauthAccessToken:M,oauthTokenSecret:j,pendingToken:Q,nonce:xe}=p;return M||j||S||Q?Q?g.startsWith("saml.")?ro._create(g,Q):Rs._fromParams({providerId:g,signInMethod:g,pendingToken:Q,idToken:S,accessToken:M}):new Mo(g).credential({idToken:S,accessToken:M,rawNonce:xe}):null}return y instanceof F.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function wr(y,p){return p.catch(g=>{throw g instanceof F.ZR&&function Lv(y,p){var g;const E=null===(g=p.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new Jh(y,function kl(y,p){var g;const E=(0,F.m9)(y),S=p;return ie(p.customData.operationType,E,"argument-error"),ie(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),Fo._fromError(E,S)}(y,p));else if(E){const S=Vv(p),M=p;S&&(M.credential=S,M.tenantId=E.tenantId||void 0,M.email=E.email||void 0,M.phoneNumber=E.phoneNumber||void 0)}}(y,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:Fv(g),additionalUserInfo:Hc(g),user:go.getOrCreate(S)}})}function ug(y,p){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,d.Z)(function*(y,p){const g=yield p;return{verificationId:g.verificationId,confirm:E=>wr(y,g.confirm(E))}})).apply(this,arguments)}class Jh{constructor(p,g){this.resolver=g,this.auth=function sc(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return wr(Li(this.auth),this.resolver.resolveSignIn(p))}}class go{constructor(p){this._delegate=p,this.multiFactor=function Nh(y){const p=(0,F.m9)(y);return oo.has(p)||oo.set(p,Uo._fromUser(p)),oo.get(p)}(p)}static getOrCreate(p){return go.USER_MAP.has(p)||go.USER_MAP.set(p,new go(p)),go.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var g=this;return(0,d.Z)(function*(){return wr(g.auth,Ch(g._delegate,p))})()}linkWithPhoneNumber(p,g){var E=this;return(0,d.Z)(function*(){return ug(E.auth,function Gl(y,p,g){return zl.apply(this,arguments)}(E._delegate,p,g))})()}linkWithPopup(p){var g=this;return(0,d.Z)(function*(){return wr(g.auth,function ct(y,p,g){return td.apply(this,arguments)}(g._delegate,p,Zr))})()}linkWithRedirect(p){var g=this;return(0,d.Z)(function*(){return yield ig(vn(g.auth)),vr(g._delegate,p,Zr)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var g=this;return(0,d.Z)(function*(){return wr(g.auth,bh(g._delegate,p))})()}reauthenticateWithPhoneNumber(p,g){return ug(this.auth,function Hp(y,p,g){return Jc.apply(this,arguments)}(this._delegate,p,g))}reauthenticateWithPopup(p){return wr(this.auth,function Ru(y,p,g){return Us.apply(this,arguments)}(this._delegate,p,Zr))}reauthenticateWithRedirect(p){var g=this;return(0,d.Z)(function*(){return yield ig(vn(g.auth)),Nu(g._delegate,p,Zr)})()}sendEmailVerification(p){return function xl(y,p){return yu.apply(this,arguments)}(this._delegate,p)}unlink(p){var g=this;return(0,d.Z)(function*(){return yield function Eh(y,p){return zr.apply(this,arguments)}(g._delegate,p),g})()}updateEmail(p){return function Vr(y,p){return On((0,F.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function ks(y,p){return On((0,F.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function rn(y,p){return ai.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Np(y,p){return Ml.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,g){return function jc(y,p,g){return vu.apply(this,arguments)}(this._delegate,p,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}go.USER_MAP=new WeakMap;const Bu=ie;let lg=(()=>{class y{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;Bu(S,"invalid-api-key",{appName:g.name}),Bu(S,"invalid-api-key",{appName:g.name});const M=typeof window<"u"?Zr:void 0;this._delegate=E.initialize({options:{persistence:Hs(S,g.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(Ze),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?go.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function ou(y,p,g){const E=vn(y);ie(E._canInitEmulator,E,"emulator-config-failed"),ie(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const S=!!g?.disableWarnings,M=hs(p),{host:j,port:Q}=function $t(y){const p=hs(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(E);if(S){const M=S[1];return{host:M,port:au(E.substr(M.length+1))}}{const[M,j]=E.split(":");return{host:M,port:au(j)}}}(p);E.config.emulator={url:`${M}//${j}${null===Q?"":`:${Q}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:j,port:Q,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Ao(){function y(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,E)}applyActionCode(g){return function Ym(y,p){return Os.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return mu(this._delegate,g)}confirmPasswordReset(g,E){return function Th(y,p,g){return Dl.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var S=this;return(0,d.Z)(function*(){return wr(S._delegate,function Po(y,p,g){return Pi.apply(this,arguments)}(S._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Ah(y,p){return Al.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Qm(y,p){return"EMAIL_SIGNIN"===Ea.parseLink(p)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,d.Z)(function*(){Bu(wd(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function Un(y,p){return co.apply(this,arguments)}(g._delegate,Zr);return E?wr(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Jp(y,p){vn(y)._logFramework(p)}(this._delegate,g)}onAuthStateChanged(g,E,S){const{next:M,error:j,complete:Q}=oc(g,E,S);return this._delegate.onAuthStateChanged(M,j,Q)}onIdTokenChanged(g,E,S){const{next:M,error:j,complete:Q}=oc(g,E,S);return this._delegate.onIdTokenChanged(M,j,Q)}sendSignInLinkToEmail(g,E){return function _u(y,p,g){return Tl.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function bl(y,p,g){return si.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,d.Z)(function*(){let S;switch(function u_(y,p){Uu(Object.values(Fi).includes(p),y,"invalid-persistence-type"),(0,F.b$)()?Uu(p!==Fi.SESSION,y,"unsupported-persistence-type"):(0,F.UG)()?Uu(p===Fi.NONE,y,"unsupported-persistence-type"):tg()?Uu(p===Fi.NONE||p===Fi.LOCAL&&(0,F.hl)(),y,"unsupported-persistence-type"):Uu(p===Fi.NONE||Ov(),y,"unsupported-persistence-type")}(E._delegate,g),g){case Fi.SESSION:S=Ls;break;case Fi.LOCAL:S=(yield xn(Go)._isAvailable())?Go:jo;break;case Fi.NONE:S=ni;break;default:return Ie("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return wr(this._delegate,function Sr(y){return Ia.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return wr(this._delegate,fu(this._delegate,g))}signInWithCustomToken(g){return wr(this._delegate,function de(y,p){return Ut.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return wr(this._delegate,function Sh(y,p,g){return fu((0,F.m9)(y),Rp.credential(p,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return wr(this._delegate,function lr(y,p,g){return ba.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return ug(this._delegate,function $p(y,p,g){return Wo.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,d.Z)(function*(){return Bu(wd(),E._delegate,"operation-not-supported-in-this-environment"),wr(E._delegate,function Na(y,p,g){return xu.apply(this,arguments)}(E._delegate,g,Zr))})()}signInWithRedirect(g){var E=this;return(0,d.Z)(function*(){return Bu(wd(),E._delegate,"operation-not-supported-in-this-environment"),yield ig(E._delegate),Uh(E._delegate,g,Zr)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Ni(y,p){return gs.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Fi,y})();function oc(y,p,g){let E=y;"function"!=typeof y&&({next:E,error:p,complete:g}=y);const S=E;return{next:j=>S(j&&go.getOrCreate(j)),error:p,complete:g}}function Hs(y,p){const g=function kv(y,p){const g=og();if(!g)return[];const E=$(rg,y,p);switch(g.getItem(E)){case Fi.NONE:return[ni];case Fi.LOCAL:return[Go,Ls];case Fi.SESSION:return[Ls];default:return[]}}(y,p);if(typeof self<"u"&&!g.includes(Go)&&g.push(Go),typeof window<"u")for(const E of[jo,Ls])g.includes(E)||g.push(E);return g.includes(ni)||g.push(ni),g}class ju{constructor(){this.providerId="phone",this._delegate=new ut(Li(J.Z.auth()))}static credential(p,g){return ut.credential(p,g)}verifyPhoneNumber(p,g){return this._delegate.verifyPhoneNumber(p,g)}unwrap(){return this._delegate}}ju.PHONE_SIGN_IN_METHOD=ut.PHONE_SIGN_IN_METHOD,ju.PROVIDER_ID=ut.PROVIDER_ID;const ac=ie;class l_{constructor(p,g,E=J.Z.app()){var S;ac(null===(S=E.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Xc(p,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function d_(y){y.INTERNAL.registerComponent(new ye.wA("auth-compat",p=>{const g=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new lg(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:K_EMAIL_SIGNIN,PASSWORD_RESET:K_PASSWORD_RESET,RECOVER_EMAIL:K_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:K_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:K_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:K_VERIFY_EMAIL}},EmailAuthProvider:Rp,FacebookAuthProvider:Lc,GithubAuthProvider:vh,GoogleAuthProvider:cu,OAuthProvider:Mo,SAMLAuthProvider:vl,PhoneAuthProvider:ju,PhoneMultiFactorGenerator:ld,RecaptchaVerifier:l_,TwitterAuthProvider:wl,Auth:lg,AuthCredential:As,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.1")}(J.Z)},5861:(Et,Te,L)=>{function d(F,ue,se,ae,ye,Ee,fe){try{var G=F[Ee](fe),H=G.value}catch(K){return void se(K)}G.done?ue(H):Promise.resolve(H).then(ae,ye)}function J(F){return function(){var ue=this,se=arguments;return new Promise(function(ae,ye){var Ee=F.apply(ue,se);function fe(H){d(Ee,ae,ye,fe,G,"next",H)}function G(H){d(Ee,ae,ye,fe,G,"throw",H)}fe(void 0)})}}L.d(Te,{Z:()=>J})}},Et=>{Et(Et.s=3912)}]);